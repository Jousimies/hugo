<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Jousimies's Personal Emacs Configuration | 探索世界，践行人生</title><meta name=keywords content><meta name=description content="Interface Show   Introduction  The Borg assimilate Emacs packages as Git submodules.
 我使用 borg 进行 Emacs 包的管理，详细的使用见 borg 官方手册。
使用 borg 管理有个好处是， borg-assimilate 后的包和 Emacs 的内置包一样，不需要使用 use-package 或 leaf 此类包对配置文件进行包裹。不会增超 Emacs 的启动时间，我目前有一百多个包，启动时间在 1.6s 左右（ Arch Emacs 27.2 ）。
使用 org-mode 对 Emacs 的配置文件进行管理（见文学编程）， org-auto-tangle 自动将配置文件 tangle 到 init.el 文件中。默认会解析到 init.el 文件中，如果有不想解析或解析到其他文件的，在 src block 中加上 :tangle no 或 :tangle other.el 。
一个 init.el 文件，不需要分离配置，管理起来，没什么 STRESS.
Why Emacs 对于一个非专业的程序员，使用此文本编辑器对自己的生活进行方方面面的管理，简直是 AWESOME 。"><meta name=author content="jousimies"><link rel=canonical href=https://jousimies.github.io/posts/readme/><link crossorigin=anonymous href=/assets/css/stylesheet.min.ed52a04cba0843fef8297e018b15e8a32a989ea4415133cb8bf77414d3815f7b.css integrity="sha256-7VKgTLoIQ/74KX4BixXooyqYnqRBUTPLi/d0FNOBX3s=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://jousimies.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jousimies.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jousimies.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://jousimies.github.io/apple-touch-icon.png><link rel=mask-icon href=https://jousimies.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Jousimies's Personal Emacs Configuration"><meta property="og:description" content="Interface Show   Introduction  The Borg assimilate Emacs packages as Git submodules.
 我使用 borg 进行 Emacs 包的管理，详细的使用见 borg 官方手册。
使用 borg 管理有个好处是， borg-assimilate 后的包和 Emacs 的内置包一样，不需要使用 use-package 或 leaf 此类包对配置文件进行包裹。不会增超 Emacs 的启动时间，我目前有一百多个包，启动时间在 1.6s 左右（ Arch Emacs 27.2 ）。
使用 org-mode 对 Emacs 的配置文件进行管理（见文学编程）， org-auto-tangle 自动将配置文件 tangle 到 init.el 文件中。默认会解析到 init.el 文件中，如果有不想解析或解析到其他文件的，在 src block 中加上 :tangle no 或 :tangle other.el 。
一个 init.el 文件，不需要分离配置，管理起来，没什么 STRESS.
Why Emacs 对于一个非专业的程序员，使用此文本编辑器对自己的生活进行方方面面的管理，简直是 AWESOME 。"><meta property="og:type" content="article"><meta property="og:url" content="https://jousimies.github.io/posts/readme/"><meta property="article:section" content="posts"><meta name=twitter:card content="summary"><meta name=twitter:title content="Jousimies's Personal Emacs Configuration"><meta name=twitter:description content="Interface Show   Introduction  The Borg assimilate Emacs packages as Git submodules.
 我使用 borg 进行 Emacs 包的管理，详细的使用见 borg 官方手册。
使用 borg 管理有个好处是， borg-assimilate 后的包和 Emacs 的内置包一样，不需要使用 use-package 或 leaf 此类包对配置文件进行包裹。不会增超 Emacs 的启动时间，我目前有一百多个包，启动时间在 1.6s 左右（ Arch Emacs 27.2 ）。
使用 org-mode 对 Emacs 的配置文件进行管理（见文学编程）， org-auto-tangle 自动将配置文件 tangle 到 init.el 文件中。默认会解析到 init.el 文件中，如果有不想解析或解析到其他文件的，在 src block 中加上 :tangle no 或 :tangle other.el 。
一个 init.el 文件，不需要分离配置，管理起来，没什么 STRESS.
Why Emacs 对于一个非专业的程序员，使用此文本编辑器对自己的生活进行方方面面的管理，简直是 AWESOME 。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://jousimies.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Jousimies's Personal Emacs Configuration","item":"https://jousimies.github.io/posts/readme/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Jousimies's Personal Emacs Configuration","name":"Jousimies\u0027s Personal Emacs Configuration","description":"Interface Show   Introduction  The Borg assimilate Emacs packages as Git submodules.\n 我使用 borg 进行 Emacs 包的管理，详细的使用见 borg 官方手册。\n使用 borg 管理有个好处是， borg-assimilate 后的包和 Emacs 的内置包一样，不需要使用 use-package 或 leaf 此类包对配置文件进行包裹。不会增超 Emacs 的启动时间，我目前有一百多个包，启动时间在 1.6s 左右（ Arch Emacs 27.2 ）。\n使用 org-mode 对 Emacs 的配置文件进行管理（见文学编程）， org-auto-tangle 自动将配置文件 tangle 到 init.el 文件中。默认会解析到 init.el 文件中，如果有不想解析或解析到其他文件的，在 src block 中加上 :tangle no 或 :tangle other.el 。\n一个 init.el 文件，不需要分离配置，管理起来，没什么 STRESS.\nWhy Emacs 对于一个非专业的程序员，使用此文本编辑器对自己的生活进行方方面面的管理，简直是 AWESOME 。","keywords":[],"articleBody":"Interface Show   Introduction  The Borg assimilate Emacs packages as Git submodules.\n 我使用 borg 进行 Emacs 包的管理，详细的使用见 borg 官方手册。\n使用 borg 管理有个好处是， borg-assimilate 后的包和 Emacs 的内置包一样，不需要使用 use-package 或 leaf 此类包对配置文件进行包裹。不会增超 Emacs 的启动时间，我目前有一百多个包，启动时间在 1.6s 左右（ Arch Emacs 27.2 ）。\n使用 org-mode 对 Emacs 的配置文件进行管理（见文学编程）， org-auto-tangle 自动将配置文件 tangle 到 init.el 文件中。默认会解析到 init.el 文件中，如果有不想解析或解析到其他文件的，在 src block 中加上 :tangle no 或 :tangle other.el 。\n一个 init.el 文件，不需要分离配置，管理起来，没什么 STRESS.\nWhy Emacs 对于一个非专业的程序员，使用此文本编辑器对自己的生活进行方方面面的管理，简直是 AWESOME 。\nEmacs 具有强大的生态，可以进行文件管理，财务管理，事务管理，邮件管理，还可以用来听音乐，看视频。\nAbout other note taking software 我使用过的笔记软件有很多，在遇到 Emacs 前，尝试过的有 PKM 软件， Mediawiki ， Tiddly wiki ， Onenote ，印象笔记，蚂蚁笔记， Simplenote ， Joplin 等等。当然也尝试过 markdown 。\n我为什么不使用类似 onenote ，印象笔记等软件？\nOnenote 是私有格式，意味着当我需要夸平台时，其专有格式会给我带来麻烦。印象笔记也是如此，而且印象笔记的付费一言难尽。以上尝试的软件都没能长久使用，或多或少的存在痛点。\n更重要的是不符合我关于笔记是 ​本地可控，纯文本​ 的需求。\nAcknowledgements  If I have seen further, it is by standing on the shoulders of giants. —- Sir Isaac Newton\n 谢谢以下配置的作者，从他们那学到了很多关于 Emacs 的知识。排名不分先后。\n https://github.com/bbatsov/prelude https://github.com/syl20bnr/spacemacs https://github.com/seagle0128/.emacs.d https://github.com/hlissner/doom-emacs https://github.com/remacs/remacs https://github.com/redguardtoo/emacs.d https://github.com/manateelazycat/lazycat-emacs https://github.com/purcell/emacs.d https://github.com/MatthewZMD/.emacs.d https://sachachua.com/dotemacs/ https://github.com/raxod502/radian https://tecosaur.github.io/emacs-config/config.html  Rudimentary configuration Make this file run (slightly) faster with lexical binding (see Blog).\n;; init.el --- My personal emacs configuration -*- lexical-binding: t; -*- Early Init ;;; early-init.el --- Early Init File -*- lexical-binding: t; no-byte-compile: t -*- ;; NOTE: early-init.el is now generated from readme.org. Please edit that file instead  ;; Defer garbage collection further back in the startup process (setq gc-cons-threshold most-positive-fixnum  gc-cons-percentage 0.6)  ;; In Emacs 27+, package initialization occurs before `user-init-file' is ;; loaded, but after `early-init-file'. Doom handles package initialization, so ;; we must prevent Emacs from doing it early! (setq package-enable-at-startup nil) ;; Do not allow loading from the package cache (same reason). (setq package-quickstart nil)  ;; Prevent the glimpse of un-styled Emacs by disabling these UI elements early. (setq inhibit-startup-message t) (setq inhibit-splash-screen t)  (push '(menu-bar-lines . 0) default-frame-alist) (push '(tool-bar-lines . 0) default-frame-alist) (push '(vertical-scroll-bars) default-frame-alist)  ;; Resizing the Emacs frame can be a terribly expensive part of changing the ;; font. By inhibiting this, we easily halve startup times with fonts that are ;; larger than the system default. (setq frame-inhibit-implied-resize t) (setq inhibit-compacting-font-caches t)  (setq use-file-dialog nil)  ;; Make the initial buffer load faster by setting its mode to fundamental-mode ;; (setq initial-major-mode 'fundamental-mode)  ;; Prevent unwanted runtime builds in gccemacs (native-comp); packages are ;; compiled ahead-of-time when they are installed and site files are compiled ;; when gccemacs is installed. (setq comp-deferred-compilation nil)  ;; Disable mode-line, It's uglily after theme changed ;; (setq-default mode-line-format nil)  ;;; early-init.el ends here Borg - Package manage Update:2022-03-06. 目前我使用 borg 和 leaf 管现我的 Emacs 配置文件， borg 很好的替代了 git submodule ，不用终端直接进行 Emacs 包的管理。 leaf 目前是作为 use-package 的替代品使用，其他的还有 setup.el ，但是目前没有深入的去探索。\nUpdate:2022-03-07 能否剥离 leaf ？目前己全删除 leaf 相关包.\n(add-to-list 'load-path (expand-file-name \"packages/borg\" user-emacs-directory)) (eval-and-compile  (require 'borg)  (borg-initialize)) Start and close emacs Speedup 该配置来自 Centaur Emacs ，可以有效减少 Emacs 的启动时间，约 0.5s 。\n(setq auto-mode-case-fold nil)  (unless (or (daemonp) noninteractive)  (let ((old-file-name-handler-alist file-name-handler-alist))  ;; If `file-name-handler-alist' is nil, no 256 colors in TUI  ;; @see https://emacs-china.org/t/spacemacs-centaur-emacs/3802/839  (setq file-name-handler-alist \t(unless (display-graphic-p) \t'((\"\\\\(?:\\\\.tzst\\\\|\\\\.zst\\\\|\\\\.dz\\\\|\\\\.txz\\\\|\\\\.xz\\\\|\\\\.lzma\\\\|\\\\.lz\\\\|\\\\.g?z\\\\|\\\\.\\\\(?:tgz\\\\|svgz\\\\|sifz\\\\)\\\\|\\\\.tbz2?\\\\|\\\\.bz2\\\\|\\\\.Z\\\\)\\\\(?:~\\\\|\\\\.~[-[:alnum:]:#@^._]+\\\\(?:~[[:digit:]]+\\\\)?~\\\\)?\\\\'\" . jka-compr-handler))))  (add-hook 'emacs-startup-hook \t(lambda () \t\"Recover file name handlers.\" \t(setq file-name-handler-alist \t(delete-dups (append file-name-handler-alist \told-file-name-handler-alist)))))))  (setq gc-cons-threshold most-positive-fixnum  gc-cons-percentage 0.5)  (add-hook 'emacs-startup-hook \t(lambda () \t\"Recover GC values after startup.\" \t(setq gc-cons-threshold 800000 \tgc-cons-percentage 0.1))) gcmh (gcmh-mode) restart-emacs Never exit Emacs ！！！\n防止自己误按 C-x C-c 导致 Emacs 退出， So stupid behavior 。 如果想要退出，使用 M-x save-buffers-kill-emacs 。\n(global-set-key (kbd \"C-x C-c\") 'restart-emacs) Personal information (setq user-full-name \"DN\"  user-mail-address \"duan_n@outlook.com\") (setq auth-sources '(\"~/.authinfo\")) ;; auth-source-cache-expiry nil) ;; (setq auth-sources '(macos-keychain-generic)) ;; (setq auth-sources (quote (macos-keychain-internet macos-keychain-generic))) (setq epa-pinentry-mode 'loopback)  (pinentry-start) Variables 自定义一些变量，方便配置文件位置或争对特定系统进行相关设定。\nfolder (defvar dn-cloud \"~/Nextcloud\"  \"This folder is My cloud.\")  (defvar dn-galaxy (expand-file-name \"L.Personal.Galaxy\" dn-cloud)  \"This folder stores all the plain text files of my life.\")  (defvar dn-roam (expand-file-name \"roam\" dn-galaxy)  \"This is the org-roam folder.\")  (defvar dn-finance (expand-file-name \"finance\" dn-galaxy)  \"This folder stores all my finance files.\")  (defvar dn-finance-year (expand-file-name (format-time-string \"%Y\") dn-finance)  \"This folder stores all my finance files of current year.\")  (defvar dn-pdf-storage (expand-file-name \"storage/pdf\" dn-galaxy)  \"This folder stores all the pdf files.\")  (defvar dn-cache-directory \"~/.cache/emacs\"  \"This folder stores all EMACS cache file.\")  (defvar dn-template-directory (expand-file-name \"template\" (file-truename user-emacs-directory)))  (defvar default-search-engine-url '(\"Google\" \"www.google.com\")) system type (defvar sys-linux  (and (eq system-type 'gnu/linux) (null (getenv \"ANDROID_ROOT\")))  \"GNU Emacs is running on Linux, not termux.\")  (defvar sys-winp  (eq system-type 'windows-nt)  \"Are we running on a WinTel system?\")  (defvar sys-macp  (eq system-type 'darwin)  \"Are we running on a mac system\")  (defvar sys-wslp  (and (eq system-type 'gnu/linux)  (string-match \"-[Mm]icrosoft\" operating-system-release))  \"Are we running on a GNU/Linux system?\")  (defvar sys-termuxp  (and (eq system-type 'gnu/linux) (not (null (getenv \"ANDROID_ROOT\"))))  \"GNU Emacs is running on Termux, not Linux system.\") Better defaults (if (boundp 'use-short-answers)  (setq use-short-answers t)  (advice-add 'yes-or-no-p :override #'y-or-n-p))  (setq help-window-select t)  (setq ring-bell-function 'ignore)  ;; Do not saves duplicates in kill-ring (customize-set-variable 'kill-do-not-save-duplicates t) system code type (prefer-coding-system 'utf-8) (set-default-coding-systems 'utf-8) (set-terminal-coding-system 'utf-8) (set-keyboard-coding-system 'utf-8) dialog box Never popup dialog box.\n(setq use-dialog-box nil) define-fringe-bitmap Word wrap at window edge, hide the right and left curly arrow. So ugly.\n(define-fringe-bitmap 'right-curly-arrow []) (define-fringe-bitmap 'left-curly-arrow []) hide mouse Builtin function. Hide mouse when type.\n(mouse-avoidance-mode 'banish) builtin modes Emacs 有很多的内置 mode ，这些 mode 实现简单，功能很强大。这部份的详细介绍，可以参见 Emacs builtin modes 功能介绍。\n  paren\n(setq show-paren-style 'mixed  show-paren-when-point-inside-paren t  show-paren-when-point-in-periphery t)  (show-paren-mode)     elec-pair\n(electric-pair-mode)     linum\n(setq display-line-numbers t)  (add-hook 'prog-mode-hook 'display-line-numbers-mode)     simple\n;; (eval-expression-print-length) ;; (eval-expression-print-level) (add-hook 'after-init-hook (lambda () \t(line-number-mode) \t(column-number-mode) \t(size-indication-mode)))     bookmark\n(setq bookmark-default-file (expand-file-name \"storage/bookmarks\" dn-galaxy))     autorevert\n(global-auto-revert-mode)     subword\n(global-subword-mode)     winner\n(setq winner-dont-bind-my-keys nil)  (winner-mode)     server\nAccording to this blog, use server-process instead of server-ruanning-p 。\n(unless (bound-and-true-p server-process)  (server-start))     prettify-symbols-mode\n(setq prettify-symbols-alist '((\"lambda\" . ?λ) \t(\"function\" . ?𝑓)))  (add-hook 'prog-mode-hook 'prettify-symbols-mode)     so-long\n(global-so-long-mode)     delsel\n(delete-selection-mode)     webjump\n基本用不上，我使用 google-this 这个包。\n(setq webjump-sites '((\"Emacs China\" . \"https://emacs-china.org\")  \t(\"DuckDuckGo\" . [simple-query \"duckduckgo.com\" \t\"duckduckgo.com/?q=\" \"\"])  \t(\"Douban read\" . [simple-query \"https://search.douban.com\" \t\"https://search.douban.com/book/subject_search?search_text=\" \"\"])  \t(\"Google\" . [simple-query \"https://www.google.com\" \t\"https://www.google.com/search?q=\" \"\"])  \t(\"Baidu\" . [simple-query \"https://www.baidu.com\" \t\"https://www.baidu.com/s?ie=utf-8\u0026wd=\" \"\"])  \t(\"Wikipedia\" . [simple-query \"https://wikipedia.org\" \t\"https://wikipedia.org/wiki/\" \"\"])))  (global-set-key (kbd \"s-/\") 'webjump)   large file (setq large-file-warning-threshold nil) Custom file Emacs 有时会将一些配置自动导入到此文件中。如果不配置，它会自动将配置附加到 init.el 文件中。我不喜欢这个文件，当其出现的时候，我会手动删除。也许可以写个 function 自动执行。\n(setq custom-file (expand-file-name \"custom.el\" user-emacs-directory))  ;; (load custom-file t) Private file 私有配置不进行同步。\n(setq private-file \"~/.emacs.d/private.el\")  (load private-file t) User interface 2022-03-07 目前我喜欢极简的界面。\nFonts Update:2022-03-07 很想把 sarasa 这个字体去掉，但是目前还不知道怎么配置，主要是在 org-table 中要能实现中英文的等宽。另处我不想使用 cnfonts 或 valign 此类包。\nUpdate:2022-03-08 仅在 org-table 中使用 sarasa 字根。目前没什么好的能够替代 sarasa 的字体。\n(set-face-attribute 'default nil :family \"Sarasa Mono SC\" :weight 'regular :height 160)  (set-fontset-font t 'han (font-spec :name \"Source Han Serif SC\" :size 16)) Icon all-the-icons 可以使 Emacs 显示 icon ，看上去更像是一个现代的编辑器。\n(require 'all-the-icons) all-the-icons-completion (all-the-icons-completion-mode) kind-icon (require 'kind-icon)  (setq kind-icon-default-face 'corfu-default)  (with-eval-after-load 'corfu  (add-to-list 'corfu-margin-formatters #'kind-icon-margin-formatter)) Cursor (blink-cursor-mode -1)  (setq-default cursor-in-non-selected-windows nil) 我 Fork 了 im-cursor-chg 这个包，对其做了一些修改，以实现主题切换时能自动切换光标颜色。\ncursor color (setq im-cursor-color \"Red\") (cursor-chg-mode) Themes 我的默认主题是 modus-themes ，这个包的自定义性特别高，有黑白配色两套。\n搭配 circadian 使用，可实现自动切换主题。\n目前切换到了 Macos 上使用 Emacs ，Emacs-plus 可根据系统主题自动切换 Emacs 主题。\n(setq modus-themes-italic-constructs t  modus-themes-bold-constructs nil  modus-themes-region '(bg-only no-extend)  modus-themes-lang-checkers '(background text-also straight-underline)  modus-themes-links '(italic background faint neutral-underline)  modus-themes-hl-line '(accented intense)  modus-themes-paren-match '(intense)  modus-themes-org-blocks 'tinted-background  modus-themes-org-agenda '((header-block . (variable-pitch 1.2)) \t(habit . traffic-light))  modus-themes-headings '((t . (rainbow)))) Override color for distraction free 搭配 centaur-tabs 使用，默认的 tab bar 主题是灰度的，我不喜欢，我把它修改成了与主题色相配的黑白色。 bg-main bg-dim 控制背景色。 magenta-nuanced-bg 控制 org-src block 的背景色。\n(setq modus-themes-operandi-color-overrides '((bg-main . \"#F2F0EF\") \t(bg-dim . \"#F2F0EF\") \t;; (bg-hl-line . \"#F2F0EF\") \t;; (bg-active . \"#F2F0EF\") \t;; (bg-inactive . \"#ffffff\") \t;; (bg-tab-bar . \"#F2F0EF\") \t;; (bg-tab-active . \"#F2F0EF\") \t;; (bg-tab-inactive . \"#F2F0EF\") \t;; (blue . \"#252321\") \t(magenta-nuanced-bg . \"#FFFFFF\") \t))  (setq modus-themes-vivendi-color-overrides '((bg-main . \"#252321\") \t(bg-dim . \"#252321\") \t;; (bg-hl-line . \"#252321\") \t;; (bg-active . \"#252321\") \t;; (bg-inactive . \"#615F5D\") \t;; (bg-tab-bar . \"#252321\") \t;; (bg-tab-active . \"#252321\") \t;; (bg-tab-inactive . \"#252321\") \t;; (blue . \"#F2F0EF\") \t(magenta-nuanced-bg . \"#615F5D\") \t)) Theme auto change   Theme change\n(defun my/apply-theme (appearance)  \"Load theme, taking current system APPEARANCE into consideration.\"  (mapc #'disable-theme custom-enabled-themes)  (pcase appearance  ('light (load-theme 'modus-operandi t))  ('dark (load-theme 'modus-vivendi t))))  (add-hook 'ns-system-appearance-change-functions #'my/apply-theme)   Dashboard (setq dashboard-startup-banner \"~/.emacs.d/banner.txt\"  dashboard-center-content t  dashboard-set-init-info t  dashboard-set-file-icons t  dashboard-modify-heading-icons '((recents . \"file-text\") \t(bookmarks . \"book\"))  dashboard-items '((recents . 5) \t(bookmarks . 5) \t(agenda . 5) \t(registers . 5)))  (setq dashboard-set-navigator t)  (set-fontset-font t '(#xe03d . #xe03d) (font-spec :family \"Material Icons\")) (set-fontset-font t '(#xe051 . #xe051) (font-spec :family \"Material Icons\"))  (setq dashboard-navigator-buttons  `( \t((,(all-the-icons-octicon \"mark-github\" :height 1 :v-adjust 0.0) \t\"Homepage\" \t\"Browse homepage\" \t(lambda (\u0026rest _) (browse-url \"https://github.com/Jousimies/.emacs.d\"))) \t(,(all-the-icons-octicon \"tools\" :height 1 :v-adjust 0.0) \t\"Settings\" \"Open README file\" \t(lambda (\u0026rest _) (find-file \"~/.emacs.d/README.org\"))) \t(,(all-the-icons-faicon \"sitemap\" :height 1 :v-adjust 0.0) \t\"Blog\" \"Browse Blog\" \t(lambda (\u0026rest _) (browse-url \"https://jousimies.github.io\"))) \t(,(all-the-icons-material \"queue_music\" :height 1 :v-adjust -0.2) \t\"Music\" \"Netease cloud music\" \t(lambda (\u0026rest _) (netease-cloud-music))))))  (setq dashboard-footer-icon (all-the-icons-octicon \"dashboard\" \t:height 1.1 \t:v-adjust -0.05 \t:face 'font-lock-keyword-face))  (setq dashboard-footer-messages `(,(concat \"Happy hacking, jousimies - Emacs \" \t(all-the-icons-octicon \"heart\" \t:height 1.1 \t:v-adjust -0.05) \t\" you!\")))  (dashboard-setup-startup-hook)  (global-set-key (kbd \"\") 'dashboard-refresh-buffer) rainbow-mode (add-hook 'prog-mode-hook 'rainbow-mode) helpful (global-set-key [remap describe-function] 'helpful-callable) (global-set-key [remap describe-variable] 'helpful-variable) (global-set-key [remap describe-key] 'helpful-key) (global-set-key (kbd \"C-h F\") 'helpful-function) (global-set-key (kbd \"C-h C\") 'helpful-command) info-colors (add-hook 'Info-selection-hook 'info-colors-fontify-node) goggles  Goggles highlights the modified region using pulse. Currently the commands undo, yank, kill and delete are supported.\n (setq-default goggles-pulse t)  (add-hook 'prog-mode-hook 'goggles-mode) (add-hook 'text-mode-hook 'goggles-mode) emojify (add-hook 'after-init-hook #'global-emojify-mode) svg 将文字显示为图形，有很强的视觉效果，但是同时很容易使人分心，所以应该有所克制的使用此功能。 DISTRACT FREE ！！\nsvg-lib (setq svg-lib-icons-dir (expand-file-name \"svg-lib\" dn-cache-directory)) Define gtd keywords faces (defface gtd-next  '((((background light))  :foreground \"#1d9537\")  (t  :foreground \"#007d65\"))  \"GTD face.\"  :group 'gtd-faces)  (defface gtd-wait  '((((background light))  :foreground \"#dea32c\")  (t  :foreground \"#fcaf17\"))  \"GTD face.\"  :group 'gtd-faces)  (defface gtd-someday  '((((background light))  :foreground \"#7d5886\")  (t  :foreground \"#c77eb5\"))  \"GTD face.\"  :group 'gtd-faces)  (defface gtd-cncl  '((((background light))  :foreground \"#999d9c\")  (t  :foreground \"#4f5555\"))  \"GTD face.\"  :group 'gtd-faces)  (defface gtd-a  '((((background light))  :foreground \"#f05b72\")  (t  :foreground \"#f58f98\"))  \"GTD face.\"  :group 'gtd-faces)  (defface gtd-b  '((((background light))  :foreground \"#1d9537\")  (t  :foreground \"#007d65\"))  \"GTD face.\"  :group 'gtd-faces)  (defface gtd-c  '((((background light))  :foreground \"#999d9c\")  (t  :foreground \"#4f5555\"))  \"GTD face.\"  :group 'gtd-faces) svg-tag-mode svg-tag-mode 没有 autoload ，所以需要显式的 require 此包。不能使用 global-svg-tag-mode~，目前己知的问题是会导致 ~netease-cloud-musci 报 numperp 的错误。 mu4e 中的图标显示成灰度图像。\n(require 'svg-tag-mode)  (defconst date-re \"[0-9]\\\\{4\\\\}-[0-9]\\\\{2\\\\}-[0-9]\\\\{2\\\\}\") (defconst time-re \"[0-9]\\\\{2\\\\}:[0-9]\\\\{2\\\\}\") (defconst day-re \"[A-Za-z]\\\\{3\\\\}\")  (defun svg-progress-count (value)  (let* ((seq (mapcar #'string-to-number (split-string value \"/\"))) \t(count (float (car seq))) \t(total (float (cadr seq))))  (svg-image (svg-lib-concat \t(svg-lib-progress-bar (/ count total) nil \t:margin 0 :stroke 2 :radius 3 :padding 2 :width 11) \t(svg-lib-tag value nil \t:stroke 2 :padding 2 :margin 1)) :ascent 'center)))  (setq svg-tag-tags  `((\"TODO\" . ((lambda (tag) (svg-tag-make \"TODO\" :face 'org-todo :inverse t :margin 0)))) \t(\"NEXT\" . ((lambda (tag) (svg-tag-make \"NEXT\" :face 'gtd-next :inverse t :margin 0)))) \t(\"WAIT\" . ((lambda (tag) (svg-tag-make \"WAIT\" :face 'gtd-wait :inverse t :margin 0)))) \t(\"SOMEDAY\" . ((lambda (tag) (svg-tag-make \"SOMEDAY\" :face 'gtd-someday :inverse t :margin 0)))) \t(\"CNCL\" . ((lambda (tag) (svg-tag-make \"CNCL\" :face 'gtd-cncl :inverse t :margin 0)))) \t(\"DONE\" . ((lambda (tag) (svg-tag-make \"DONE\" :face 'org-done :margin 0))))  \t(\"\\\\[#[A]\\\\]\" . ( (lambda (tag) \t(svg-tag-make tag :face 'gtd-a \t:inverse t \t:beg 2 :end -1 :margin 0))))  \t(\"\\\\[#[B]\\\\]\" . ( (lambda (tag) \t(svg-tag-make tag :face 'gtd-b \t:inverse t \t:beg 2 :end -1 :margin 0))))  \t(\"\\\\[#[C]\\\\]\" . ( (lambda (tag) \t(svg-tag-make tag :face 'gtd-c \t:inverse t \t:beg 2 :end -1 :margin 0))))  \t(\"\\\\(\\\\[[0-9]+/[0-9]+\\\\]\\\\)\" . ((lambda (tag) \t(svg-progress-count (substring tag 1 -1))))) \t))  (add-hook 'org-mode-hook 'svg-tag-mode) ;; (global-svg-tag-mode) Auto update svg-tag (advice-add 'modus-themes-toggle :after 'svg-tag-mode-on) (advice-add 'circadian-activate-latest-theme :after 'svg-tag-mode-on) lin (setq lin-face 'lin-blue)  (setq lin-mode-hooks '(bongo-mode-hook \tdired-mode-hook \telfeed-search-mode-hook \telfeed-summary-mode-hook \telfeed-show-mode-hook \tgit-rebase-mode-hook \tgrep-mode-hook \tibuffer-mode-hook \tilist-mode-hook \tpdf-outline-minor-mode-hook \tledger-report-mode-hook \tlog-view-mode-hook \tmagit-log-mode-hook \tmu4e-headers-mode \tnotmuch-search-mode-hook \tnotmuch-tree-mode-hook \toccur-mode-hook \telfeed-show-mode-hook \torg-agenda-mode-hook \tproced-mode-hook \tebib-entry-mode-hook \tebib-index-mode-hook \tnetease-cloud-music-mode-hook \ttabulated-list-mode-hook))  (lin-global-mode 1) Frame management Fullscreen 我总是全屏使用 Emacs。\n(toggle-frame-fullscreen) Quit and delete window 删除窗口，而不是只是隐藏它，见 Reddit 。\n这个对于一些临时 buffer 很有用，使用 ESC 进行最近 buffer 切换时，就不会出现不想要的 buffer ，如 \\*fanyi\\*, \\*G0-Translator\\* \\*help\\* 等。\n(defun quit-window-delete (\u0026optional kill window)  \"Quit WINDOW, deleting it, and bury its buffer. WINDOW must be a live window and defaults to the selected one. With prefix argument KILL non-nil, kill the buffer instead of burying it. This is similar to the version of `quit-window'that Emacs had before the introduction of `quit-restore-window'. It ignores the information stored in WINDOW's `quit-restore'window parameter. It deletes the WINDOW more often, rather than switching to another buffer in it. If WINDOW is alone in its frame then the frame is deleted or iconified, according to option `frame-auto-hide-function'.\"  (interactive \"P\")  (set-window-parameter window 'quit-restore `(frame frame nil ,(current-buffer)))  (quit-restore-window window (if kill 'kill 'bury)))  (global-set-key [remap quit-window] 'quit-window-delete) (global-set-key [remap meow-quit] 'quit-window-delete) Scroll other window 这个在并排使用两个 buffer 的时候很好用。\n(defun dn/scroll-other-windown-down ()  \"Scroll other window down.\"  (interactive)  (scroll-other-window-down 2))  (defun dn/scroll-other-windown ()  \"Scroll other window up.\"  (interactive)  (scroll-other-window 2))  (global-set-key (kbd \"M-n\") 'dn/scroll-other-windown)  (global-set-key (kbd \"M-p\") 'dn/scroll-other-windown-down) Org-src 默认是在右侧打开编辑 buffer ，我的屏幕小，所以我选择当前窗口打开编辑 buffer 。\n(with-eval-after-load 'org  (setq org-src-window-setup 'current-window)) display-buffer-alist 我选择使用 display-buffer-alist 进行窗口的管理，有一些包如 popup ， shackle 等也可以使用。\n  one-key buffer\n(setq display-buffer-alist  '((\"*One-Key*\" \t(display-buffer-reuse-window \tdisplay-buffer-in-side-window) \t(side . bottom) \t(reusable-frames . visible) \t(window-parameters \t(select . t) \t(quit . t) \t(popup . t) \t(mode-line-format . none) \t(tab-line-format . none)))))     eshell buffer\n(add-to-list 'display-buffer-alist \t'(\"*eshell*\" \t(display-buffer-reuse-window \tdisplay-buffer-in-side-window) \t(side . bottom) \t(window-height . 0.8) \t(slot . 1) \t(window-parameters \t(mode-line-format . none) \t(tab-line-format . none))))     help buffer\n(add-to-list 'display-buffer-alist \t'(\"*Help*\" \t(display-buffer-in-side-window) \t(side . right) \t(window-width . 0.5) \t(slot . 1) \t(window-parameters \t(mode-line-format . none) \t(tab-line-format . none))))     org-roam buffer\n(add-to-list 'display-buffer-alist \t'(\"\\\\*org-roam\\\\*\" \t(display-buffer-in-direction) \t(direction . right) \t(window-width . 0.25) \t(window-height . fit-window-to-buffer) \t(window-parameters \t(mode-line-format . none) \t(tab-line-format . none))))     Ilist buffer\n(add-to-list 'display-buffer-alist \t'(\"*Ilist*\" \t(display-buffer-in-side-window) \t(side . right) \t(window-width . 0.3) \t(slot . 1) \t(window-parameters \t(mode-line-format . none) \t(tab-line-format . none))))   Awesome Tray (setq awesome-tray-active-modules '(\"buffer-name\" \"input-method\" \"date\"))  (awesome-tray-mode 1) awesome try \u0026\u0026 meow state Copy from https://emacs-china.org/t/awesome-tray-emacs-mode-line/7250/148\n(defun awesome-tray-module-meow-info ()  (string-trim (meow-indicator)))  (add-to-list 'awesome-tray-module-alist \t'(\"meow\" . (awesome-tray-module-meow-info awesome-tray-module-evil-face)))  (add-to-list 'awesome-tray-active-modules \"meow\") awesome tray \u0026\u0026 mu4e unread (with-eval-after-load 'mu4e-alert  ;; Copied from mu4e-alert  (defun mu4e-alert-enable-tray-display ()  \"Enable display of unread emails in mode-line.\"  (interactive)  (add-hook 'mu4e-index-updated-hook #'mu4e-alert-update-mail-count-modeline)  (add-hook 'mu4e-message-changed-hook #'mu4e-alert-update-mail-count-modeline)  (advice-add #'mu4e-context-switch :around #'mu4e-alert--context-switch)  (mu4e-alert-update-mail-count-modeline))   (mu4e-alert-enable-tray-display)   (defun awesome-tray-module-mail-info ()  (concat \"EMAIL:\" (substring mu4e-alert-mode-line 7 9)))   (add-to-list 'awesome-tray-module-alist \t'(\"mail\" . (awesome-tray-module-mail-info awesome-tray-module-belong-face)))   (add-to-list 'awesome-tray-active-modules \"mail\")) Update awesome tray status Enable awesome tray when theme changed。\n(defvar after-load-theme-hook nil  \"Hook run after a color theme is loaded using `load-theme'.\")  (defadvice load-theme (after run-after-load-theme-hook activate)  \"Run `after-load-theme-hook'.\"  (run-hooks 'after-load-theme-hook))  (add-hook 'after-load-theme-hook 'awesome-tray-enable t) Editor Enhancement – C.R.U.D 编辑器的功能是为了更好的增删改查。\nrime (setq rime-librime-root \"~/.emacs.d/librime/dist\"  rime-emacs-module-header-root \"/opt/homebrew/opt/emacs-plus@28/include\"  rime-user-data-dir \"~/Library/Rime/\"  default-input-method \"rime\"  rime-show-candidate nil)  (setq rime-disable-predicates '(meow-normal-mode-p \tmeow-motion-mode-p \tmeow-keypad-mode-p \trime-predicate-prog-in-code-p \trime-predicate-org-in-src-block-p \trime-predicate-current-uppercase-letter-p))  (setq rime-inline-predicates '(rime-predicate-space-after-cc-p \trime-predicate-after-alphabet-char-p))  (add-hook 'org-mode-hook (lambda () (set-input-method \"rime\"))) rime-regexp 使用拼音进行中文的检索。\n(rime-regexp-mode) autoinsert (define-auto-insert  (cons \"init-.*\\\\.el\" \"Emacs Lisp Skeleton\")  '(\"Emacs Configuration Description: \"  \";;;; \" (file-name-nondirectory (buffer-file-name)) \" --- \" str  (make-string (max 2 (- 80 (current-column) 27)) ?\\s)  \"-*- lexical-binding: t; -*-\" '(setq lexical-binding t)  \" ;; Copyright (C) \" (format-time-string \"%Y\") \" ;;; Commentary: ;; \" _ \" ;;; Code: (provide '\"  (file-name-base (buffer-file-name))  \") ;;; \" (file-name-nondirectory (buffer-file-name)) \" ends here\\n\"))  (auto-insert-mode) embrace 这个包很方便的对文本进行括号的增删改。\n(require 'embrace)  (set-face-attribute 'embrace-help-pair-face nil :inherit font-lock-function-name-face :inverse-video nil)  (global-set-key (kbd \"C-,\") 'embrace-commander)  (defun embrace-org-mode-hook ()  (dolist (lst '((?= \" =\" . \"= \") \t(?~ \" ~\" . \"~ \") \t(?/ \" /\" . \"/ \") \t(?* \" *\" . \"* \") \t(?_ \" _\" . \"_ \") \t(?+ \" +\" . \"+ \") \t(?k \"@@html:@@\" . \"@@html:@@\")))  (embrace-add-pair (car lst) (cadr lst) (cddr lst))))  (add-hook 'org-mode-hook 'embrace-org-mode-hook) recent file (add-hook 'after-init-hook #'recentf-mode) (add-hook 'kill-emacs-hook #'recentf-cleanup)  (setq recentf-save-file \"/Users/duanning/.cache/emacs/recentf\"  recentf-max-saved-items 1000  recentf-exclude '(\"[0-9]*-.*.org\" \"slipbox\" \"todos\" \"recentf\" \"M.Calibre\" \".elfeed\"))  (setq recentf-auto-cleanup (if (daemonp) \t300)) dired-mode files (make-directory (expand-file-name \"backups/\" dn-cache-directory) t)  (setq confirm-kill-processes nil)  (setq backup-directory-alist `((\".\" . ,(expand-file-name \"backups/\" dn-cache-directory)))) dired (setq dired-recursive-deletes 'always  dired-recursive-copies 'always  global-auto-revert-non-file-buffers t  auto-revert-verbose nil  dired-dwim-target t  delete-by-moving-to-trash t  load-prefer-newer t  auto-revert-use-notify nil  auto-revert-interval 3  insert-directory-program \"gls\" dired-use-ls-dired t  dired-listing-switches \"-al --group-directories-first\")  (put 'dired-find-alternate-file 'disabled nil)  (with-eval-after-load 'dired  (define-key dired-mode-map (kbd \"P\") 'peep-dired)) dired-x (global-set-key (kbd \"C-x C-j\") 'dired-jump) diredfl (diredfl-global-mode) peep-dired (setq peep-dired-ignored-extensions '(\"mkv\" \"iso\" \"mp4\" \"pdf\")) dired-hide-dotfiles (defun my-dired-mode-hook ()  \"My `dired'mode hook.\"  ;; To hide dot-files by default  (dired-hide-dotfiles-mode))  (define-key dired-mode-map \".\" #'dired-hide-dotfiles-mode) (add-hook 'dired-mode-hook #'my-dired-mode-hook) dired-git-info (setq dgi-auto-hide-details-p nil)  (with-eval-after-load 'dired  (define-key dired-mode-map \")\" 'dired-git-info-mode))  (add-hook 'dired-after-readin-hook 'dired-git-info-auto-enable) hungry delete (require 'hungry-delete)  (setq hungry-delete-chars-to-skip \" \\f\u000b\")  (add-hook 'after-init-hook 'global-hungry-delete-mode) auto save (require 'auto-save)  (add-hook 'after-init-hook 'auto-save-enable)  (setq auto-save-silent t  auto-save-delete-trailing-whitespace t  auto-save-list-file-prefix (expand-file-name \"auto-save-list/.saves-\" dn-cache-directory))  (add-hook 'org-capture-mode-hook #'(lambda nil (setq auto-save-delete-trailing-whitespace nil))) save place (setq save-place-file (expand-file-name \"saveplace\" dn-cache-directory))  (save-place-mode) save hist (setq savehist-file (expand-file-name \"savehist\" dn-cache-directory)  history-length 1000  savehist-save-minibuffer-history 1  savehist-additional-variables '(kill-ring \tsearch-ring \tregexp-search-ring)  history-delete-duplicates t)  (savehist-mode) Undo (global-undo-fu-session-mode)  (setq undo-fu-session-directory (expand-file-name \"undo-fu-session\" dn-cache-directory)) Vundo (require 'vundo) (setq vundo-glyph-alist vundo-unicode-symbols) ctrlf ;; (require 'ctrlf)  (ctrlf-mode) google-this (google-this-mode) vertico (customize-set-variable 'vertico-cycle t)  (with-eval-after-load 'vertico  (define-key vertico-map (kbd \"C-j\") 'vertico-directory-up))  (vertico-mode) marginalia (customize-set-variable 'marginalia-annotators '(marginalia-annotators-heavy marginalia-annotators-light nil))  (marginalia-mode) consult (add-hook 'completion-list-mode-hook 'consult-preview-at-point-mode)  (global-set-key (kbd \"C-x C-b\") 'consult-buffer) (global-set-key (kbd \"M-y\") 'consult-yank-pop) consult-dir (require 'consult-dir)  (global-set-key (kbd \"C-x C-d\") 'consult-dir)  (with-eval-after-load 'vertico  (define-key vertico-map (kbd \"C-x C-d\") 'consult-dir)  (define-key vertico-map (kbd \"C-x C-j\") 'consult-dir-jump-file)) orderless (require 'orderless)  (setq completion-styles '(orderless partial-completion)  completion-category-defaults nil  completion-category-overrides '((file (styles . (partial-completion))))) corfu (setq corfu-auto t  corfu-cycle t  corfu-quit-at-boundary t  corfu-auto-prefix 2  corfu-preselect-first t  corfu-quit-no-match t)  (with-eval-after-load 'corfu  (define-key corfu-map (kbd \"C-n\") 'corfu-next)  (define-key corfu-map (kbd \"C-p\") 'corfu-previous)  (define-key corfu-map (kbd \"\") 'corfu-quit))  (corfu-global-mode) corfu-doc (require 'corfu-doc)  (add-hook 'corfu-mode-hook 'corfu-doc-mode)  (setq corfu-doc-delay 0.5  corfu-doc-max-width 70  corfu-doc-max-height 20)  (define-key corfu-map (kbd \"M-p\") 'corfu-doc-scroll-down) (define-key corfu-map (kbd \"M-n\") 'corfu-doc-scroll-up) embark (global-set-key [remap describe-bindings] #'embark-bindings)  (global-set-key (kbd \"C-.\") 'embark-act) (global-set-key (kbd \"M-.\") 'embark-dwim)  ;; Use Embark to show bindings in a key prefix with `C-h` (setq prefix-help-command #'embark-prefix-help-command) prescient (require 'prescient) dabbrev (global-set-key (kbd \"M-/\") 'dabbrev-completion) (global-set-key (kbd \"C-M-/\") 'dabbrev-expand) cape (require 'cape)  (global-set-key (kbd \"C-c p p\") 'completion-at-point) (global-set-key (kbd \"C-c p t\") 'complete-tag) (global-set-key (kbd \"C-c p d\") 'cape-dabbrev) (global-set-key (kbd \"C-c p f\") 'cape-file) (global-set-key (kbd \"C-c p k\") 'cape-keyword) (global-set-key (kbd \"C-c p s\") 'cape-symbol) (global-set-key (kbd \"C-c p a\") 'cape-abbrev) (global-set-key (kbd \"C-c p i\") 'cape-ispell) (global-set-key (kbd \"C-c p l\") 'cape-line) (global-set-key (kbd \"C-c p w\") 'cape-dict) (global-set-key (kbd \"C-c p \\\\\") 'cape-tex) (global-set-key (kbd \"C-c p \u0026\") 'cape-sgml) (global-set-key (kbd \"C-c p r\") 'cape-rfc1345)  (add-to-list 'completion-at-point-functions #'cape-file) (add-to-list 'completion-at-point-functions #'cape-tex) (add-to-list 'completion-at-point-functions #'cape-dabbrev) (add-to-list 'completion-at-point-functions #'cape-keyword) ;;(add-to-list 'completion-at-point-functions #'cape-sgml) ;;(add-to-list 'completion-at-point-functions #'cape-rfc1345) ;;(add-to-list 'completion-at-point-functions #'cape-abbrev) (add-to-list 'completion-at-point-functions #'cape-ispell) ;; (add-to-list 'completion-at-point-functions #'cape-dict) ;;(add-to-list 'completion-at-point-functions #'cape-symbol) ;;(add-to-list 'completion-at-point-functions #'cape-line) tempel (require 'tempel)  (setq tempel-path \"~/.emacs.d/template/tempel\")  (defun tempel-setup-capf ()  ;; Add the Tempel Capf to `completion-at-point-functions'. `tempel-expand'  ;; only triggers on exact matches. Alternatively use `tempel-complete' if  ;; you want to see all matches, but then Tempel will probably trigger too  ;; often when you don't expect it.  ;; NOTE: We add `tempel-expand' *before* the main programming mode Capf,  ;; such that it will be tried first.  (setq-local completion-at-point-functions \t(cons #'tempel-expand \tcompletion-at-point-functions)))  (add-hook 'text-mode-hook 'tempel-setup-capf)  (global-set-key (kbd \"M-+\") 'tempel-complete) (global-set-key (kbd \"M-*\") 'tempel-insert) Open in external apps 有些时候需要使用外部应用打开相应的文件，比如打印文件的时候。目前还没有发现直接使用 Emacs 打印文件的方法。\n这里只使用 safari 打开相应的文件，如需要使用其他的应用，可以参照博客。\n(defun xah-html-open-in-safari ()  \"Open the current file or `dired'marked files in Mac's Safari browser. If the file is not saved, save it first. URL `http://xahlee.info/emacs/emacs/emacs_dired_open_file_in_ext_apps.html'Version 2018-02-26\"  (interactive)  (let* ( \t($file-list \t(if (string-equal major-mode \"dired-mode\") \t(dired-get-marked-files) \t(list (buffer-file-name)))) \t($do-it-p (if ( (length $file-list) 5) \tt \t(y-or-n-p \"Open more than 5 files? \"))))  (when $do-it-p  (cond  ((string-equal system-type \"darwin\") \t(mapc \t(lambda ($fpath) \t(when (buffer-modified-p ) \t(save-buffer)) \t(shell-command \t(format \"open -a Safari.app \\\"%s\\\"\" $fpath))) $file-list)))))) Language configuration LSP: Language service protocol eldoc (eldoc-mode) eglot (add-hook 'python-mode-hook 'eglot-ensure) Language spell check and translate ispell (setq ispell-program-name \"aspell\"  ispell-extra-args '(\"--sug-mode=ultra\" \"--lang=en_US\" \"--run-together\")) flyspell  (add-hook 'text-mode-hook 'flyspell-mode)  (with-eval-after-load 'flyspell  (define-key flyspell-mode-map (kbd \"C-;\") nil)  (define-key flyspell-mode-map (kbd \"C-,\") nil)  (define-key flyspell-mode-map (kbd \"C-.\") nil))  (setq flyspell-duplicate-distance 0  flyspell-mark-duplications-flag nil) flyspell-correct  (global-set-key (kbd \"C-;\") ' flyspell-correct-wrapper)  (setq flyspell-correct-interface #'flyspell-correct-popup) fanyi 此包对单词进行查询。2022-04-14 目前使用有些 fanyi provider 有点慢，不知道是为什么。\n(require 'fanyi)  (custom-set-variables '(fanyi-providers '( \t;; fanyi-haici-provider \tfanyi-youdao-thesaurus-provider \t;; fanyi-etymon-provider \t;; fanyi-longman-provider \t;; fanyi-libre-provider \t))) Powerthesaurus (require 'powerthesaurus) Smog https://github.com/zzkt/smog/tree/28b053198ff9c1b142789614d85d7d762d9b0fa3\nhttps://wiki.christophchamp.com/index.php?title=Style_and_Diction\n(require 'smog)  (setq smog-command \"style -L en\") osx-dictionary (require 'osx-dictionary)  (setq osx-dictionary-use-chinese-text-segmentation t) go-translate 此包可对整句进行翻译。\n(require 'go-translate)  (setq gts-translate-list '((\"en\" \"zh\")))  (setq gts-default-translator (gts-translator \t:picker (gts-noprompt-picker) \t:engines (list \t(gts-bing-engine) \t(gts-google-engine :parser (gts-google-summary-parser)) \t;; (gts-google-rpc-engine :parser (gts-google-rpc-parser) :url \"https://translate.google.com\") \t) \t:render (gts-buffer-render))) Program language Markdown (add-to-list 'auto-mode-alist \t'(\"README\\\\.md\\\\'\" . gfm-mode)) Beancount (setq beancount-electric-currency t)  (add-to-list 'auto-mode-alist \t'(\"\\\\.bean\\\\'\" . beancount-mode))  (add-hook 'beancount-mode-hook #'outline-minor-mode) (add-hook 'beancount-mode-hook #'(lambda nil \t(setq-local electric-indent-chars nil)))  (with-eval-after-load 'beancount  (define-key beancount-mode-map (kbd \"C-c C-n\") 'outline-next-visible-heading)  (define-key beancount-mode-map (kbd \"C-c C-p\") 'outline-previous-visible-heading))  (add-to-list 'all-the-icons-icon-alist \t'(\"\\\\.bean\\\\'\" all-the-icons-material \"attach_money\" :face all-the-icons-lblue)) (add-to-list 'all-the-icons-mode-icon-alist \t'(beancount-mode all-the-icons-material \"attach_money\" :face all-the-icons-lblue)) CSV (add-to-list 'auto-mode-alist \t'(\"\\\\.csv\\\\'\" . csv-mode)) Yaml (add-to-list 'auto-mode-alist \t'(\"\\\\.yaml\\\\'\" . yaml-mode)) Python (setq python-shell-interpreter \"python3\"  python-indent-guess-indent-offset nil) Organize life with org-mode 使用纯文本组织生活，是一种哲学，是一种生活方式。此 Blog 是践行此哲学的开端。\nBetter Default (setq org-modules '()  org-deadline-warning-days 7  org-return-follows-link t  org-agenda-dim-blocked-tasks t  org-image-actual-width nil  org-display-remote-inline-images 'download  org-log-into-drawer t  org-fast-tag-selection-single-key 'expert  org-adapt-indentation nil  org-fontify-quote-and-verse-blocks t  org-support-shift-select t  ;; org--leading-stars t  org-treat-S-cursor-todo-selection-as-state-change nil)   Word wrap\n我喜欢文本在窗口的边缘进行折行。不喜欢使用 visual-line-mode 式的折行，此方式当中英文夹杂时，在行尾参差不齐，实在是用不来。\n(add-hook 'org-mode-hook 'menu-bar--wrap-long-lines-window-edge) ;; (global-visual-line-mode 1)  ;; (setq word-wrap-by-category t)     todo keywords and faces\nIf you do not provide the separator bar, the last state is used as the DONE state.\n(setq org-todo-keywords  '((sequence \"TODO(t)\" \"NEXT(n)\" \"STARTED\" \"|\" \"WAIT(w@)\" \"SOMEDAY(s@)\" \"CNCL(c@/!)\" \"DONE(d)\")))  (setq org-todo-keyword-faces  '((\"TODO\" :foreground \"Red\" :weight bold) \t(\"NEXT\" :foreground \"Forest green\" :weight bold) \t(\"SOMEDAY\" :foreground \"blue\" :weight bold) \t(\"DONE\" :foreground \"#705628\" :weight bold) \t(\"WAIT\" :foreground \"Orange\" :weight bold) \t(\"CNCL\" :foreground \"#b4534b\" :weight bold)))     todo state triggers\n(setq org-todo-state-tags-triggers  (quote ((\"CNCL\" (\"CNCL\" . t)) \t(\"WAIT\" (\"WAIT\" . t)) \t(\"SOMEDAY\" (\"WAIT\") (\"SOMEDAY\" . t)) \t(done (\"WAIT\") (\"SOMEDAY\")) \t(\"TODO\" (\"WAIT\") (\"CNCL\") (\"SOMEDAY\")) \t(\"NEXT\" (\"WAIT\") (\"CNCL\") (\"SOMEDAY\")) \t(\"DONE\" (\"WAIT\") (\"CNCL\") (\"SOMEDAY\")))))     org priority\n(setq org-priority-faces '((?A . '(bold org-priority)) \t(?B . org-priority) \t(?C . '(shadow org-priority))))     org emphasis color\n(defface my-org-emphasis-bold  '((default :inherit bold)  (((class color) (min-colors 88) (background light))  :foreground \"#a60000\")  (((class color) (min-colors 88) (background dark))  :foreground \"#ff8059\"))  \"My bold emphasis for Org.\"  :group 'org-faces)  (defface my-org-emphasis-italic  '((default :inherit italic)  (((class color) (min-colors 88) (background light))  :foreground \"#005e00\")  (((class color) (min-colors 88) (background dark))  :foreground \"#44bc44\"))  \"My italic emphasis for Org.\"  :group 'org-faces)  (defface my-org-emphasis-underline  '((default :inherit underline)  (((class color) (min-colors 88) (background light))  :foreground \"#813e00\")  (((class color) (min-colors 88) (background dark))  :foreground \"#d0bc00\"))  \"My underline emphasis for Org.\"  :group 'org-faces)  (defface my-org-emphasis-strike-through  '((((class color) (min-colors 88) (background light))  :strike-through \"#972500\" :foreground \"#505050\")  (((class color) (min-colors 88) (background dark))  :strike-through \"#ef8b50\" :foreground \"#a8a8a8\"))  \"My strike-through emphasis for Org.\"  :group 'org-faces)  (defface my-org-emphasis-verbatim  '((((class color) (min-colors 88) (background light))  :background \"#F7B80A\")  (((class color) (min-colors 88) (background dark))  :background \"#6DA906\"))  \"My strike-through emphasis for Org.\"  :group 'org-faces)  (setq org-emphasis-alist  '((\"*\" my-org-emphasis-bold) \t(\"/\" my-org-emphasis-italic) \t(\"_\" my-org-emphasis-underline) \t(\"~\" org-code verbatim) \t(\"+\" my-org-emphasis-strike-through) \t(\"=\" my-org-emphasis-verbatim)))     org-babel-load-languages\n根据需要加载 org-babel-load-languages, 加快 Emacs 的启动速度，相关讨论见 Emacs-china 论坛。\n(org-babel-do-load-languages  'org-babel-load-languages  '((emacs-lisp . t)))  (defun my/org-babel-execute-src-block (\u0026optional _arg info _params)  \"Load language if needed\"  (let* ((lang (nth 0 info)) \t(sym (if (member (downcase lang) '(\"c\" \"cpp\" \"c++\")) 'C (intern lang))) \t(backup-languages org-babel-load-languages))  ;; - (LANG . nil) 明确禁止的语言，不加载。  ;; - (LANG . t) 已加载过的语言，不重复载。  (unless (assoc sym backup-languages)  (condition-case err \t(progn \t(org-babel-do-load-languages 'org-babel-load-languages (list (cons sym t))) \t(setq-default org-babel-load-languages (append (list (cons sym t)) backup-languages))) \t(file-missing \t(setq-default org-babel-load-languages backup-languages) \terr)))))  (advice-add 'org-babel-execute-src-block :before 'my/org-babel-execute-src-block)     org-capture\n(setq org-capture-templates  '((\"i\" \"Inbox - todo item\" entry (file (lambda () (expand-file-name \"todos/inbox.org\" dn-galaxy)))  \"* TODO %?\\n%U\\n\\n\")))  (defun my/org-capture-inbox ()  (interactive)  (org-capture nil \"i\"))     org-attach\n(setq org-attach-id-to-path-function-list  '(org-attach-id-ts-folder-format \torg-attach-id-uuid-folder-format)) (setq org-attach-dir-relative t)     org-refile\n(setq org-refile-targets '((nil :maxlevel . 9) \t(org-agenda-files :maxlevel . 9))) (setq org-refile-use-outline-path t) (setq org-outline-path-complete-in-steps nil) (setq org-refile-allow-creating-parent-nodes 'confirm) (setq org-refile-use-outline-path 'file) (setq org-refile-active-region-within-subtree t)     org-archive\n(customize-set-variable 'org-archive-location \"~/Nextcloud/L.Personal.Galaxy/todos/gtd.org_archive::datetree/* From %s\")     org-habit\n(add-to-list 'org-modules 'org-habit t)     org-id\n(setq org-id-method 'ts) (setq org-id-link-to-org-use-id 'create-if-interactive) (setq org-id-locations-file (expand-file-name \".org-id-locations\" dn-cache-directory))   Copy id to clipboard\n(defun dn/copy-idlink-to-clipboard ()  \"Copy idlink to clipboard.\"  (interactive)  (when (eq major-mode 'org-agenda-mode) ;switch to orgmode  (org-agenda-show)  (org-agenda-goto))  (when (eq major-mode 'org-mode) ; do this only in org-mode buffers  (let* ((mytmphead (nth 4 (org-heading-components))) \t(mytmpid (funcall 'org-id-get-create)) \t(mytmplink (format \"[[id:%s][%s]]\" mytmpid mytmphead)))  (kill-new mytmplink)  (message \"Copied %s to killring (clipboard)\" mytmplink)))  (switch-to-buffer (concat (format-time-string \"%Y-%m-%d\") \".org\")))  (global-set-key (kbd \"\") 'dn/copy-idlink-to-clipboard)       org-clock\n(org-clock-persistence-insinuate)   (setq org-clock-into-drawer \"LOGCLOCK\") (setq org-clock-out-remove-zero-time-clocks t) (setq org-clock-out-when-done t) (setq org-clock-persist t) (setq org-clock-report-include-clocking-task t) (setq org-clock-persist-file (expand-file-name \"org-clock-save.el\" dn-cache-directory))   switch task from TODO to STARTED\n(defun bh/is-task-p ()  \"Any task with a todo keyword and no subtask\"  (save-restriction  (widen)  (let ((has-subtask) \t(subtree-end (save-excursion (org-end-of-subtree t))) \t(is-a-task (member (nth 2 (org-heading-components)) org-todo-keywords-1)))  (save-excursion \t(forward-line 1) \t(while (and (not has-subtask) \t( (point) subtree-end) \t(re-search-forward \"^\\*+ \" subtree-end t)) \t(when (member (org-get-todo-state) org-todo-keywords-1) \t(setq has-subtask t))))  (and is-a-task (not has-subtask)))))  (defun bh/clock-in-to-next (kw)  \"Switch a task from TODO to NEXT when clocking in. Skips capture tasks, projects, and subprojects. Switch projects and subprojects from NEXT back to TODO\"  (when (not (and (boundp 'org-capture-mode) org-capture-mode))  (cond  ((and (member (org-get-todo-state) (list \"TODO\")) \t(bh/is-task-p))  \"NEXT\")  ((and (member (org-get-todo-state) (list \"NEXT\")) \t(bh/is-project-p))  \"TODO\"))))       org-num\n(add-hook 'org-mode-hook 'org-num-mode)   Packages enhance org   auto-tangle\n(unless  (fboundp 'org-auto-tangle-mode)  (autoload #'org-auto-tangle-mode \"org-auto-tangle\" nil t))  (add-hook 'org-mode-hook 'org-auto-tangle-mode)   toc-org\n(add-hook 'org-mode-hook 'toc-org-mode)       org-superstar\n(add-hook 'org-mode-hook 'org-superstar-mode)     org-download\n(customize-set-variable 'org-download-image-dir \"~/Nextcloud/L.Personal.Galaxy/roam/pic\") (customize-set-variable 'org-download-screenshot-method 'screencapture) (customize-set-variable 'org-download-abbreviate-filename-function 'expand-file-name) (customize-set-variable 'org-download-timestamp \"%Y%m%d%H%M%S\") (customize-set-variable 'org-download-display-inline-images nil) (customize-set-variable 'org-download-heading-lvl nil) (customize-set-variable 'org-download-annotate-function (lambda (_link) \"\")) (customize-set-variable 'org-download-image-attr-list '(\"#+NAME: \" \"#+CAPTION: \" \"#+ATTR_LATEX: :width 10cm :placement [!htpb]\"))  (add-hook 'org-mode-hook 'org-download-enable)  (advice-add 'org-download-clipboard :after 'org-download-rename-last-file) (defun my/replace-org-download-file-path ()  (interactive)  (previous-line)  (replace-string \"/Users/duanning\" \"~\"))  (advice-add 'org-download-clipboard :after 'my/replace-org-download-file-path)     org-auto-tangle\n(add-hook 'org-mode-hook 'org-auto-tangle-mode)     olivetti\n设置 olivetti 的主体宽度，黄金分割率，此分割具有美感。\n(setq olivetti-body-width 0.618)  (add-hook 'org-mode-hook 'olivetti-mode) (add-hook 'mu4e-main-mode-hook 'olivetti-mode) 感谢 patrolli . 一个更强大的是 writeroom 这个包，但是其中有些功能我用不到，有些我自己己配置。\n此代码实现的功能是当窗口只有一个 buffer ，或者窗口布局是上下形式的时候，开启该模式，如果存在左右布局，就关闭该模式。有个问题是自己不能手动关闭 Olivetti 模式，暂时就不起用这个了。\n(defun my/olivetti-mode ()  (if (and (eq (buffer-local-value 'major-mode (current-buffer)) 'org-mode) \t( (window-width) (/ (frame-width) 2)))  (olivetti-mode 1)  (olivetti-mode 0)))  (add-hook 'find-file-hook 'my/olivetti-mode) (add-hook 'window-configuration-change-hook 'my/olivetti-mode)     org-appear\n(require 'org-appear)  (setq org-appear-trigger 'manual  org-appear-autolinks t)  (add-hook 'org-mode-hook 'org-appear-mode)  (add-hook 'org-mode-hook (lambda () \t(add-hook 'meow-insert-enter-hook #'org-appear-manual-start nil t) \t(add-hook 'meow-insert-exit-hook #'org-appear-manual-stop nil t)))     org-cliplink\n(require 'org-cliplink)   Note taking   org-roam\n(unless  (fboundp 'org-roam-db-autosync-enable)  (autoload #'org-roam-db-autosync-enable \"org-roam\" nil t))  (if sys-termuxp  (setq org-roam-database-connector 'sqlite3))  (add-hook 'after-init-hook 'org-roam-db-autosync-enable) ;; (add-hook 'org-roam-mode-hook 'turn-on-visual-line-mode) (add-hook 'org-mode-hook (lambda () \t(setq-local time-stamp-active t \ttime-stamp-start \"#\\\\+MODIFIED:[ \\t]*\" \ttime-stamp-end \"$\" \ttime-stamp-format \"\\[%Y-%m-%d %3a %H:%M\\]\") \t(add-hook 'before-save-hook 'time-stamp nil 'local)))  (with-eval-after-load 'org-roam ;; https://jethrokuan.github.io/org-roam-guide/ (cl-defmethod org-roam-node-type ((node org-roam-node))  \"Return the TYPE of NODE.\"  (condition-case nil  (file-name-nondirectory  (directory-file-name \t(file-name-directory \t(file-relative-name (org-roam-node-file node) org-roam-directory))))  (error \"\")))  ;; Codes blow are used to general a hierachy for title nodes that under a file ;; https://github.com/nowislewis/nowisemacs/blob/master/init.org (cl-defmethod org-roam-node-doom-filetitle ((node org-roam-node))  \"Return the value of \\\"#+title:\\\" (if any) from file that NODE resides in. If there's no file-level title in the file, return empty string.\"  (or (if (= (org-roam-node-level node) 0) \t(org-roam-node-title node) \t(org-roam-get-keyword \"TITLE\" (org-roam-node-file node)))  \"\"))  (cl-defmethod org-roam-node-doom-hierarchy ((node org-roam-node))  \"Return hierarchy for NODE, constructed of its file title, OLP and direct title. If some elements are missing, they will be stripped out.\"  (let ((title (org-roam-node-title node)) \t(olp (org-roam-node-olp node)) \t(level (org-roam-node-level node)) \t(filetitle (org-roam-node-doom-filetitle node)) \t(separator (propertize \"  \" 'face 'shadow)))  (cl-case level  ;; node is a top-level file  (0 filetitle)  ;; node is a level 1 heading  (1 (concat (propertize filetitle 'face '(shadow italic)) \tseparator title))  ;; node is a heading with an arbitrary outline path  (t (concat (propertize filetitle 'face '(shadow italic)) \tseparator (propertize (string-join olp \"  \") 'face '(shadow italic)) \tseparator title))))) )  (setq org-roam-db-gc-threshold most-positive-fixnum  org-roam-completion-everywhere t  org-roam-directory (file-truename dn-roam)  org-roam-db-location (expand-file-name \"org-roam.db\" dn-cache-directory)  org-roam-node-display-template (concat \"${type:15} ${doom-hierarchy:*} \" (propertize \"${tags:20}\" 'face 'org-tag)))  (setq org-roam-capture-templates '((\"a\" \"articles\" plain \"%?\" \t:target (file+head \"articles/${slug}.org\" \t\"#+TITLE: ${title}\\n#+CREATED: %U\\n#+MODIFIED: \\n\") \t:unnarrowed t) \t(\"b\" \"Books\" plain (file \"~/.emacs.d/template/readinglog\") \t:target (file+head \"books/${slug}.org\" \t\"#+TITLE: ${title}\\n#+CREATED: %U\\n#+MODIFIED: \\n\") \t:unnarrowed t) \t(\"d\" \"default\" plain \"%?\" \t:target (file+head \"main/${slug}.org\" \t\"#+TITLE: ${title}\\n#+CREATED: %U\\n#+MODIFIED: \\n\") \t:unnarrowed t) \t(\"p\" \"people\" plain (file \"~/.emacs.d/template/crm\") \t:target (file+head \"crm/${slug}.org\" \t\"#+TITLE: ${title}\\n#+CREATED: %U\\n#+MODIFIED: \\n\") \t:unnarrowed t) \t(\"r\" \"reference\" plain (file \"~/.emacs.d/template/reference\") \t:target (file+head \"ref/${citekey}.org\" \t\"#+TITLE: ${title}\\n#+CREATED: %U\\n#+MODIFIED: \\n\") \t:unnarrowed t) \t(\"w\" \"work\" plain \"%?\" \t:target (file+head \"work/${slug}.org\" \t\"#+TITLE: ${title}\\n#+CREATED: %U\\n#+MODIFIED: \\n\") \t:unnarrowed t)))     diary\n此处的实现来自晨间日记的奇迹的这本书。在当前的日期中显示过去的日记，这样就可以看到过去的今天自己干了什么，这个信息还是挺有用的。\n(defun my/history-morning-diary-body ()  (insert (format \"** %s-%s\\n\" (+ i init-year) cur-date))  (insert (concat \"#+transclude: [[file:\" (format \"%s-%s.org\" (+ i init-year) cur-date) \"::Morning Diary]] :only-contents\\n\")))  (defun my/insert-history-morning-diary ()  \"Insert my history diary to today diary, for convenient reflection my past time.\"  (let* ((init-year 2022) \t(cur-year (format-time-string \"%Y\")) \t(year-span (- (string-to-number (format-time-string \"%Y\")) init-year)) \t(cur-date (format-time-string \"%m-%d\")))  (cond  ((and (org-roam-dailies--daily-note-p) (= 0 year-span))  (progn \t(goto-char (org-find-exact-headline-in-buffer \"History Diary\")) \t(forward-line) \t(insert \"First Year Of Your Diary! KEEP NOTING EVERYTHING! Best Wishes!\\n\")))  ((and (org-roam-dailies--daily-note-p) ( 0 year-span))  (progn \t(goto-char (org-find-exact-headline-in-buffer \"History Diary\")) \t(forward-line) \t(if ( year-span 4) \t(dotimes (i year-span) \t(my/history-morning-diary-body)) \t(dotimes (i 4) \t(my/history-morning-diary-body))))))))  (defun my/org-roam-dailies-exclude ()  (goto-char (point-min))  (org-set-property \"ROAM_EXCLUDE\" \"t\")  (goto-char (point-max)))  (defun my/org-roam-morning-diary-body (tpl)  \"Insert diary content to org-roam-dailies-today according TPL\"  (org-roam-dailies-goto-today)  (my/org-roam-dailies-exclude)  (insert \"\\n* Random Notes\\n\\n* GTD [/]\\n\\n* History Diary\\n\\n* Morning Diary\\n\\n* Clock Report\\n\\n\")  (my/insert-history-morning-diary)  (org-transclusion-add-all)  (goto-char (org-find-exact-headline-in-buffer \"Clock Report\"))  (forward-line)  (tempel-insert tpl)  (org-clock-report)  (goto-char (org-find-exact-headline-in-buffer \"Morning Diary\"))  (forward-line)  (tempel-insert 'diary))  (defun my/omd-clock-report ()  \"Update omd(org morning diary) clock report\"  (goto-char (org-find-exact-headline-in-buffer \"Clock Report\"))  (forward-line)  (org-ctrl-c-ctrl-c))  (defun my/org-roam-morning-diary ()  \"If org roam dailies today exist, then go to the file , update clock report and jump to Events If org roam dailies today do not exist, the create it. Weekend and daytime use different templeate to create org-clock-report\"  (interactive)  (let* ((date (format-time-string \"%Y-%m-%d\")) \t(org-roam-dailies-today (concat dn-roam \"/daily/\" date \".org\")) \t(weeknum (format-time-string \"%u\")))  (org-roam-dailies-goto-today)  (if (file-exists-p org-roam-dailies-today) \t(progn \t(my/omd-clock-report) \t(goto-char (org-find-exact-headline-in-buffer \"Random Notes\")))  (cond ((equal weeknum 7) \t(my/org-roam-morning-diary-body 'weekend)) \t((not (equal weeknum 7)) \t(my/org-roam-morning-diary-body 'clockday))))))  (global-set-key (kbd \"\") 'my/org-roam-morning-diary)     org-roam-ui\n(setq org-roam-ui-sync-theme t) (setq org-roam-ui-follow t) (setq org-roam-ui-update-on-save t) (setq org-roam-ui-open-on-start t)  (with-eval-after-load 'org-roam-ui  (require 'websocket))     org-roam buffer\n当当前打开的文件是 org-roam 文件时，自动打开 org-roam-buffer 。总是打开 org-roam-buffer 不太实用，并不是总是需要看这个 buffer 。得思考何时才需要使用，或者手动切换更合适。 https://github.com/org-roam/org-roam/issues/507\n(defun tim/org-roam-buffer-show (_)  (if (and  ;; don't do anything if we're in the minibuffer  (not (minibufferp))  ;; show org-roam buffer if the current buffer has a org-roam file  (xor (org-roam-file-p) (eq 'visible (org-roam-buffer--visibility))))  (org-roam-buffer-toggle)))  (add-hook 'window-buffer-change-functions 'tim/org-roam-buffer-show)     search org-roam-node with rg\n(defun bms/org-roam-rg-search ()  \"Search org-roam directory using consult-ripgrep. With live-preview.\"  (interactive)  (let ((consult-ripgrep-command \t\"rg --null --ignore-case --type org --line-buffered --color=always --max-columns=500 --no-heading --line-number . -e ARG OPTS\"))  (consult-ripgrep org-roam-directory)))   Bibtex manage   bibtex\n(setq bibtex-autokey-year-length 4) (setq bibtex-autokey-name-year-separator \"-\") (setq bibtex-autokey-year-title-separator \"-\") (setq bibtex-autokey-titleword-separator \"-\") (setq bibtex-autokey-titlewords 2) (setq bibtex-autokey-titlewords-stretch 1) (setq bibtex-autokey-titleword-length 5)     bibtex-completion\n(setq bibtex-completion-library-path \"~/Nextcloud/L.Personal.Galaxy/storage/pdf\"  bibtex-completion-bibliography '(\"~/Nextcloud/L.Personal.Galaxy/roam/References.bib\" \t\"~/Nextcloud/L.Personal.Galaxy/roam/Book.bib\")  bibtex-completion-notes-path \"~/Nextcloud/L.Personal.Galaxy/roam/ref\"  bibtex-completion-additional-search-fields '(keywords journal booktitle)  bibtex-completion-pdf-symbol \"P\"  ;; bibtex-completion-pdf-symbol (all-the-icons-octicon \"file-pdf\"  ;; :height 1  ;; :v-adjust -0.05  ;; :face 'font-lock-doc-face)  bibtex-completion-notes-symbol \"N\"  ;; bibtex-completion-notes-symbol (all-the-icons-octicon \"file-text\"  ;; :height 1  ;; :v-adjust -0.05  ;; :face 'font-lock-doc-face)  bibtex-completion-display-formats '((article . \"${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} ${journal:40}\") \t(inbook . \"${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} Chapter ${chapter:32}\") \t(incollection . \"${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} ${booktitle:40}\") \t(inproceedings . \"${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} ${booktitle:40}\") \t(t . \"${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*}\"))) ;; (setq bibtex-completion-pdf-symbol (all-the-icons-octicon \"file-pdf\"))     ebib\n(unless  (fboundp 'ebib)  (autoload #'ebib \"ebib\" nil t))  (setq ebib-preload-bib-files '(\"~/Nextcloud/L.Personal.Galaxy/roam/References.bib\" \t\"~/Nextcloud/L.Personal.Galaxy/roam/Book.bib\")) (setq ebib-file-search-dirs '(\"~/Nextcloud/L.Personal.Galaxy/storage/pdf\")) (setq ebib-keywords (expand-file-name \"ref/keywords.txt\" dn-roam)) (setq ebib-notes-directory (expand-file-name \"ref\" dn-roam)) (setq ebib-filters-default-file (expand-file-name \"ref/ebib-filters\" dn-roam)) (setq ebib-reading-list-file (expand-file-name \"ref/reading_list.org\" dn-roam)) (setq ebib-keywords-field-keep-sorted t) (setq ebib-keywords-file-save-on-exit 'always) ;; (setq ebib-index-columns '((\"Entry Key\" 30 t) (\"Note\" 1 nil) (\"Year\" 6 t) (\"Author/Editor\" 30 nil) (\"Title\" 50 t))) (setq ebib-index-columns '((\"Entry Key\" 30 t) (\"Note\" 1 nil) (\"Title\" 50 t))) (setq ebib-file-associations '((\"ps\" . \"gv\")))  (global-set-key (kbd \"\") 'ebib)     import bib to ebib from zotero\n(defun my/ebib-import-from-zotero ()  \"Import entry from zotero to ebib.\"  (interactive)  (ebib)  (find-file \"~/Documents/zotero.bib\")  (ebib-import-entries)  (quit-window-delete)  (ebib-quit-entry-buffer))     oc-csl\n(if (version\"9.5\" org-version)  (progn  (require 'oc-csl)  (setq org-cite-global-bibliography '(\"/Users/duanning/Nextcloud/L.Personal.Galaxy/roam/References.bib\" \t\"/Users/duanning/Nextcloud/L.Personal.Galaxy/roam/Book.bib\"))  (setq org-cite-insert-processor 'citar \torg-cite-follow-processor 'citar \torg-cite-activate-processor 'citar)))     citar\n(setq citar-bibliography \"~/Nextcloud/L.Personal.Galaxy/roam/References.bib\"  citar-templates '((main . \"${author editor:30} ${date year issued:4} ${title:48}\") \t(suffix . \"${=key= id:15} ${=type=:12} ${tags keywords:*}\") \t(preview . \"${author editor} (${year issued date}) ${title}, ${journal journaltitle publisher container-title collection-title}.\\n\") \t(note . \"#+title: Notes on ${author editor}, ${title}\"))  citar-at-point-function 'embark-act  citar-open-note-function 'orb-citar-edit-note  citar-notes-paths '(\"~/Nextcloud/L.Personal.Galaxy/roam/ref\")  citar-library-paths '(\"~/Nextcloud/L.Personal.Galaxy/storage/pdf\"))  (setq citar-symbols  `((file ,(all-the-icons-faicon \"file-o\" :face 'all-the-icons-green :v-adjust -0.1) . \" \") \t(note ,(all-the-icons-material \"speaker_notes\" :face 'all-the-icons-blue :v-adjust -0.3) . \" \") \t(link ,(all-the-icons-octicon \"link\" :face 'all-the-icons-orange :v-adjust 0.01) . \" \"))) (setq citar-symbol-separator \" \")     consult-bibtex\n(require 'consult-bibtex)     org-roam-bibtex\n(setq orb-note-actions-interface 'default  orb-roam-ref-format 'org-cite)  (org-roam-bibtex-mode)   Tasks manage   Enhance function\n    org-gtd\n(unless  (fboundp 'org-edna-mode)  (autoload #'org-edna-mode \"org-gtd\" nil t))  (require 'org-gtd)  (setq org-edna-use-inheritance t  org-gtd-directory (expand-file-name \"todos\" dn-galaxy))  (add-hook 'org-mode-hook #'org-edna-mode)  (with-eval-after-load 'org-gtd  (define-key org-gtd-process-map (kbd \"C-c C-c\") 'org-gtd-choose))     org-agenda\n(add-hook 'org-agenda-finalize-hook #'org-agenda-find-same-or-today-or-agenda 90)  (setq org-agenda-hide-tags-regexp (regexp-opt '(\"project\"))) ;; hide project tag (setq org-agenda-files `(,org-gtd-directory)) (setq org-agenda-prefix-format '((agenda . \" %i %?-12t% s\") \t(todo . \" %i\") \t(tags . \" %i %-12:c\") \t(search . \" %i %-12:c\")))  (setq org-agenda-tags-todo-honor-ignore-options t  org-agenda-start-on-weekday nil  org-agenda-dim-blocked-tasks nil  org-agenda-compact-blocks t  org-agenda-to-appt t)  (defun my/org-agenda ()  (interactive)  (org-agenda nil \" \"))  (with-eval-after-load 'org  (define-key org-mode-map (kbd \"C-,\") nil)  (define-key org-mode-map (kbd \"C-'\") nil))     Dynamic agenda\n;; https://magnus.therning.org/2021-07-23-keeping-todo-items-in-org-roam-v2.html (defun vulpea-project-p ()  \"Return non-nil if current buffer has any todo entry. TODO entries marked as done are ignored, meaning the this function returns nil if current buffer contains only completed tasks.\"  (seq-find ; (3)  (lambda (type)  (or (eq type 'todo) \t(eq type 'done)))  (org-element-map ; (2)  (org-element-parse-buffer 'headline) ; (1)  'headline  (lambda (h)  (org-element-property :todo-type h)))))  (defun vulpea-project-update-tag ()  \"Update PROJECT tag in the current buffer.\"  (when (and (not (active-minibuffer-window)) \t(vulpea-buffer-p))  (save-excursion  (goto-char (point-min))  (let* ((tags (vulpea-buffer-tags-get)) \t(original-tags tags)) \t(if (vulpea-project-p) \t(setq tags (cons \"project\" tags)) \t(setq tags (remove \"project\" tags)))  \t;; cleanup duplicates \t(setq tags (seq-uniq tags))  \t;; update tags if changed \t(when (or (seq-difference tags original-tags) \t(seq-difference original-tags tags)) \t(apply #'vulpea-buffer-tags-set tags))))))  (defun vulpea-buffer-p ()  \"Return non-nil if the currently visited buffer is a note.\"  (and buffer-file-name  (string-prefix-p \t(expand-file-name (file-name-as-directory org-roam-directory)) \t(file-name-directory buffer-file-name))))  ;; (defun vulpea-project-files () ;; \"Return a list of note files containing 'project' tag.\" ; ;; (seq-uniq ;; (seq-map ;; #'car ;; (org-roam-db-query ;; [:select [nodes:file] ;; :from tags ;; :left-join nodes ;; :on (= tags:node-id nodes:id) ;; :where (like tag (quote \"%\\\"project\\\"%\"))]))))  ;; (defun vulpea-agenda-files-update (\u0026rest _) ;; \"Update the value of `org-agenda-files'.\" ;; (setq org-agenda-files (vulpea-project-files)))   ;; functions borrowed from `vulpea' library ;; https://github.com/d12frosted/vulpea/blob/6a735c34f1f64e1f70da77989e9ce8da7864e5ff/vulpea-buffer.el  (defun vulpea-buffer-tags-get ()  \"Return filetags value in current buffer.\"  (vulpea-buffer-prop-get-list \"filetags\" \"[ :]\"))  (defun vulpea-buffer-tags-set (\u0026rest tags)  \"Set TAGS in current buffer. If filetags value is already set, replace it.\"  (if tags  (vulpea-buffer-prop-set  \"filetags\" (concat \":\" (string-join tags \":\") \":\"))  (vulpea-buffer-prop-remove \"filetags\")))  (defun vulpea-buffer-tags-add (tag)  \"Add a TAG to filetags in current buffer.\"  (let* ((tags (vulpea-buffer-tags-get)) \t(tags (append tags (list tag))))  (apply #'vulpea-buffer-tags-set tags)))  (defun vulpea-buffer-tags-remove (tag)  \"Remove a TAG from filetags in current buffer.\"  (let* ((tags (vulpea-buffer-tags-get)) \t(tags (delete tag tags)))  (apply #'vulpea-buffer-tags-set tags)))  (defun vulpea-buffer-prop-set (name value)  \"Set a file property called NAME to VALUE in buffer file. If the property is already set, replace its value.\"  (setq name (downcase name))  (org-with-point-at 1  (let ((case-fold-search t))  (if (re-search-forward (concat \"^#\\\\+\" name \":\\\\(.*\\\\)\") \t(point-max) t) \t(replace-match (concat \"#+\" name \": \" value) 'fixedcase) \t(while (and (not (eobp)) \t(looking-at \"^[#:]\")) \t(if (save-excursion (end-of-line) (eobp)) \t(progn \t(end-of-line) \t(insert \"\\n\")) \t(forward-line) \t(beginning-of-line))) \t(insert \"#+\" name \": \" value \"\\n\")))))  (defun vulpea-buffer-prop-set-list (name values \u0026optional separators)  \"Set a file property called NAME to VALUES in current buffer. VALUES are quoted and combined into single string using `combine-and-quote-strings'. If SEPARATORS is non-nil, it should be a regular expression matching text that separates, but is not part of, the substrings. If nil it defaults to `split-string-default-separators', normally \\\"[ \\f\\t\\n\\r\\v]+\\\", and OMIT-NULLS is forced to t. If the property is already set, replace its value.\"  (vulpea-buffer-prop-set  name (combine-and-quote-strings values separators)))  (defun vulpea-buffer-prop-get (name)  \"Get a buffer property called NAME as a string.\"  (org-with-point-at 1  (when (re-search-forward (concat \"^#\\\\+\" name \": \\\\(.*\\\\)\") \t(point-max) t)  (buffer-substring-no-properties  (match-beginning 1)  (match-end 1)))))  (defun vulpea-buffer-prop-get-list (name \u0026optional separators)  \"Get a buffer property NAME as a list using SEPARATORS. If SEPARATORS is non-nil, it should be a regular expression matching text that separates, but is not part of, the substrings. If nil it defaults to `split-string-default-separators', normally \\\"[ \\f\\t\\n\\r\\v]+\\\", and OMIT-NULLS is forced to t.\"  (let ((value (vulpea-buffer-prop-get name)))  (when (and value (not (string-empty-p value)))  (split-string-and-unquote value separators))))  (defun vulpea-buffer-prop-remove (name)  \"Remove a buffer property called NAME.\"  (org-with-point-at 1  (when (re-search-forward (concat \"\\\\(^#\\\\+\" name \":.*\\n?\\\\)\") \t(point-max) t)  (replace-match \"\"))))  ;; https://systemcrafters.net/build-a-second-brain-in-emacs/5-org-roam-hacks/ (defun my/org-roam-filter-by-tag (tag-name)  (lambda (node)  (member tag-name (org-roam-node-tags node))))  (defun my/org-roam-list-notes-by-tag (tag-name)  (mapcar #'org-roam-node-file \t(seq-filter \t(my/org-roam-filter-by-tag tag-name) \t(org-roam-node-list))))  (defun my/org-roam-refresh-agenda-list ()  (interactive)  (dolist (project-file (my/org-roam-list-notes-by-tag \"project\"))  (add-to-list 'org-agenda-files project-file)))  (add-hook 'find-file-hook #'vulpea-project-update-tag) (add-hook 'before-save-hook #'vulpea-project-update-tag) ;; (add-hook 'org-agenda-mode-hook #'my/org-roam-refresh-agenda-list) (add-hook 'after-init-hook #'my/org-roam-refresh-agenda-list)     Org agenda view\n(setq org-agenda-custom-commands  '((\" \" \"Agendas\" \t((agenda \"\" ((org-agenda-span 'day) \t(org-super-agenda-groups \t'((:name \"Today with specific time\" \t:time-grid t \t:order 1) \t(:name \"Habit and Daily Review: DO IT EVERYDAY\" \t:and (:scheduled t :tag (\"Habit\" \"Review\") :todo \"NEXT\") \t:order 2) \t(:name \"Life and Family: WITH SCHEDULED TODAY\" \t:and (:tag (\"Family\" \"Son\" \"Daughter\" \"Wife\" \"Parents\" \"Life\" \"Memorial\" \"Insurance\") :scheduled today) \t:order 2) \t(:name \"Finance\" \t:and (:tag (\"Finance\") :scheduled today)) \t(:name \"Due Today\" \t:deadline today \t:face (:foreground \"Red\" :underline t) \t:order 0) \t(:name \"Due Soon\" \t:deadline future \t:order 3) \t(:name \"Overdue\" \t:deadline past \t:order 4) \t(:discard (:tag (\"Review\"))))))) \t(todo \"\" ((org-agenda-overriding-header \"\") \t(org-super-agenda-groups \t'((:name \"Projects lists\" \t:children t \t:order 0) \t(:name \"Next List: DO IT ASAP.\" \t:and (:todo \"NEXT\" :scheduled nil :deadline nil :not (:tag (\"Review\" \"FunTime\" \"Reading\")))) \t(:name \"Life and Family: WITHOUT SCHEDULED\" \t:and (:tag (\"Family\" \"Son\" \"Daughter\" \"Wife\" \"Parents\" \"Life\" \"Memorial\") :scheduled nil) \t:order 2) \t(:name \"Work\" \t:and (:tag (\"Work\") :scheduled nil) \t:order 2) \t(:name \"Reading lists\" \t:tag \"Reading\") \t(:name \"Fun time\" \t:and (:tag (\"FunTime\") :scheduled nil)) ;; 此为 funtime ，无 scheduled ，因为有 scheduled ，当时间到的时该应该显示在 schedule 中。 \t(:name \"COMPUTER SCIENCE\" \t:and (:tag (\"Emacs\" \"Arch\" \"Linux\" \"Ubuntu\" \"Windows\" \"Computer\")) \t:order 80) \t(:discard (:scheduled t :deadline t)))))) \t(todo \"SOMEDAY\" ((org-agenda-overriding-header \"==============MAYBE FUTURE==============\"))) \t(todo \"WAIT\" ((org-agenda-overriding-header \"\"))) \t(todo \"CNCL\" ((org-agenda-overriding-header \"\")))))))  (add-hook 'after-init-hook 'org-super-agenda-mode) ;; (org-super-agenda-mode) (setq org-agenda-custom-commands  '((\" \" \"Agendas\" \t((agenda \"\" ((org-agenda-span 'day) \t(org-super-agenda-groups \t'((:name \"Scheduled earlier\" \t:scheduled past) \t(:name \"Today\" \t:and (:scheduled today :not (:tag (\"Family\" \"Reading\")))) \t(:name \"Due Today\" \t:deadline today \t:face (:foreground \"Red\" :underline t) \t:order 0) \t(:name \"Due Soon\" \t:deadline future \t:order 3) \t(:name \"Overdue\" \t:deadline past \t:order 4) \t(:discard (:anything t)))))) \t(todo \"\" ((org-agenda-overriding-header \"\") \t(org-super-agenda-groups \t'((:name \"Next List: DO IT ASAP.\" \t:and (:todo \"NEXT\" :scheduled nil :deadline nil :not (:tag (\"Review\" \"FunTime\" \"Reading\")))) \t(:name \"Family\" \t:and (:tag (\"Family\" \"Life\" \"Memorial\" \"Insurance\") :scheduled today)) \t(:name \"Projects lists\" \t:children t \t:order 0) \t(:habit t) \t(:name \"Work\" \t:and (:tag (\"Work\") :scheduled nil) \t:order 2) \t(:name \"Reading lists\" \t:tag \"Reading\") \t(:name \"Fun time\" \t:and (:tag (\"FunTime\") :scheduled nil)) \t(:name \"COMPUTER SCIENCE\" \t:and (:tag (\"Emacs\" \"Arch\" \"Linux\" \"Ubuntu\" \"Windows\" \"Computer\")) \t:order 80) \t(:discard (:scheduled t :deadline t)))))) \t(todo \"SOMEDAY\" ((org-agenda-overriding-header \"==============MAYBE FUTURE==============\"))) \t(todo \"WAIT\" ((org-agenda-overriding-header \"\"))) \t(todo \"CNCL\" ((org-agenda-overriding-header \"\")))))))  (add-hook 'after-init-hook 'org-super-agenda-mode) (with-eval-after-load 'org-super-agenda  (define-key org-super-agenda-header-map (kbd \"j\") nil)  (define-key org-super-agenda-header-map (kbd \"k\") nil))     org-caldav\n(require 'org-caldav)  (setq org-caldav-calendar-id \"gtd\")  (setq org-caldav-inbox \"~/Nextcloud/L.Personal.Galaxy/todos/inbox.org\"  org-caldav-files '(\"~/Nextcloud/L.Personal.Galaxy/todos/org-gtd-tasks.org\"))   (setq org-caldav-select-tags '(\"gtd\")) (setq org-caldav-exclude-tags '(\"nogtd\")) (setq org-icalendar-timezone \"Asia/Shanghai\")  (setq org-icalendar-include-todo 'all) (setq org-caldav-todo-percent-states '((0 \"SOMEDAY\") \t(1 \"TODO\") \t(2 \"NEXT\") \t(10 \"WAIT\") \t(100 \"DONE\"))) (setq org-caldav-sync-todo t) 动态的更新 org-caldav-files ，和 org-agenda-files 一样。\n(defun my/org-caldav-refresh-list ()  (interactive)  (dolist (project-file (my/org-roam-list-notes-by-tag \"project\"))  (add-to-list 'org-caldav-files project-file)))  (add-hook 'after-init-hook #'my/org-caldav-refresh-list) 只当8点到23点之间，自动与服务器同步。当 Emacs 闲置 5 分钟时进行同步，以免卡 Emacs 。\n(defun my/org-caldav-sync ()  (interactive)  (org-caldav-sync)  (quit-window-delete))  ;; (defun my/org-caldav-sync-start () ;; (interactive) ;; (let* ((current-time (string-to-number (format-time-string \"%H\"))) ;; (morning-time 8) ;; (evening-time 23)) ;; (if (and (;; (;; (run-with-idle-timer 10 t #'my/org-caldav-sync) ;; (my/org-caldav-sync))))  (let* ((current-time (string-to-number (format-time-string \"%H\")))  (morning-time 8)  (evening-time 23))  (if (and ( morning-time current-time) \t( current-time evening-time))  (run-with-idle-timer 60 t #'my/org-caldav-sync)))   Org Export   ox-hugo\n(with-eval-after-load 'ox  (require 'ox-hugo))     export org to docx with pandoc\n(defun org-export-docx ()  \"Convert org to docx.\"  (interactive)  (let ((docx-file (concat (file-name-sans-extension (buffer-file-name)) \".docx\")) \t(template-file (expand-file-name \"template.docx\" dn-template-directory)))  (shell-command (format \"pandoc %s -o %s --reference-doc=%s\" (buffer-file-name) docx-file template-file))  (message \"Convert finish: %s\" docx-file)))   Latex Defaults (setq org-highlight-latex-and-related '(latex script)) ox-latex (setq org-highlight-latex-and-related '(latex script))  (with-eval-after-load 'ox-latex  (add-to-list 'org-latex-classes \t'(\"dissertation\" \t\"\\\\documentclass[UTF8,twoside,a4paper,12pt,openright]{ctexrep} [NO-DEFAULT-PACKAGES] [NO-PACKAGES] [EXTRA]\" \t(\"\\\\chapter{%s}\" . \"\\\\chapter*{%s}\") \t(\"\\\\section{%s}\" . \"\\\\section*{%s}\") \t(\"\\\\subsection{%s}\" . \"\\\\subsection*{%s}\") \t(\"\\\\subsubsection{%s}\" . \"\\\\subsubsection*{%s}\") \t(\"\\\\paragraph{%s}\" . \"\\\\paragraph*{%s}\") \t(\"\\\\subparagraph{%s}\" . \"\\\\subparagraph*{%s}\"))))  (setq org-latex-compiler \"xelatex\"  org-latex-pdf-process '(\"xelatex -interaction nonstopmode %f\" \t\"bibtex %b\" \t\"xelatex -interaction nonstopmode %f\" \t\"xelatex -interaction nonstopmode %f\" \t\"rm -fr %b.out %b.log %b.tex %b.brf %b.bbl\")  org-latex-logfiles-extensions '(\"lof\" \"lot\" \"tex~\" \"aux\" \"idx\" \"log\" \"out\" \"toc\" \"nav\" \"snm\" \"vrb\" \"dvi\" \"fdb_latexmk\" \"blg\" \"brf\" \"fls\" \"entoc\" \"ps\" \"spl\" \"bbl\")  org-latex-prefer-user-labels t) org-latex-impatient 可以实时的预览公式。我原来使用的时 popweb 这个包，但是在 Macos 上目前有依赖无法解决。\n(require 'org-latex-impatient)  (add-hook 'org-mode-hook 'org-latex-impatient-mode)  (setq org-latex-impatient-tex2svg-bin \"~/node_modules/mathjax-node-cli/bin/tex2svg\")  (setq org-latex-impatient-scale 3.0) Application Calendar (require 'cal-china-x)  (setq calendar-mode-line-format nil)  (setq calendar-mark-holidays-flag t  cal-china-x-important-holidays cal-china-x-chinese-holidays  cal-china-x-general-holidays '((holiday-lunar 1 15 \"元宵节\") \t(holiday-lunar 7 7 \"七夕节\") \t(holiday-fixed 3 8 \"妇女节\") \t(holiday-fixed 3 12 \"植树节\") \t(holiday-fixed 5 4 \"青年节\") \t(holiday-fixed 6 1 \"儿童节\") \t(holiday-fixed 9 10 \"教师节\"))  holiday-other-holidays '((holiday-fixed 2 14 \"情人节\") \t(holiday-fixed 4 1 \"愚人节\") \t(holiday-fixed 12 25 \"圣诞节\") \t(holiday-float 5 0 2 \"母亲节\") \t(holiday-float 6 0 3 \"父亲节\") \t(holiday-float 11 4 4 \"感恩节\"))  calendar-holidays (append cal-china-x-important-holidays \tcal-china-x-general-holidays \tholiday-other-holidays)) PDF Reader pdf tools 如果不想高亮文件后打开标注，可以将 pdf-annot-activate-created-annotations 设置为 nil 。\n(pdf-tools-install t nil t nil)  (setq pdf-view-use-scaling t  pdf-view-use-imagemagick nil  pdf-annot-activate-created-annotations t  pdf-misc-print-program-executable \"/usr/bin/lp\")  (add-to-list 'revert-without-query \".+\\\\.pdf\")  (add-hook 'pdf-tools-enabled-hook 'pdf-view-themed-minor-mode)  (with-eval-after-load 'pdf-outline  (define-key pdf-outline-buffer-mode-map (kbd \"\") 'pdf-outline-follow-link-and-quit)) pdf print 可以通过命令行使用打印机，不再需要用外部软件打开再去打印文件，而且可以选择打印的页数。来自 Marcel van der Boom 的配置文件。\n(defun mrb/pdf-misc-print-pages(filename pages \u0026optional interactive-p)  \"Wrapper for `pdf-misc-print-document` to add page selection support\"  (interactive (list (pdf-view-buffer-file-name) \t(read-string \"Page range (empty for all pages): \" \t(number-to-string (pdf-view-current-page))) \tt) pdf-view-mode)  (let ((pdf-misc-print-program-args \t(if (not (string-blank-p pages)) \t(cons (concat \"-P \" pages) pdf-misc-print-program-args) \tpdf-misc-print-program-args)))  (pdf-misc-print-document filename))) pdf key settings 绑定 w ，获得文件名，我不需要那一大串路径。\n(defun my/get-file-name ()  (interactive)  (kill-new (file-name-base (buffer-file-name)))  (message \"Copied %s\" (file-name-base (buffer-file-name))))  (define-key pdf-view-mode-map (kbd \"w\") 'my/get-file-name) 重新定义按键，相比原来的 C-x C-a h 等按键设定要方便的多。\n(define-key pdf-view-mode-map (kbd \"h\") 'pdf-annot-add-highlight-markup-annotation) (define-key pdf-view-mode-map (kbd \"t\") 'pdf-annot-add-text-annotation) (define-key pdf-view-mode-map (kbd \"d\") 'pdf-annot-delete) (define-key pdf-view-mode-map (kbd \"q\") 'kill-this-buffer)  (define-key pdf-view-mode-map [remap pdf-misc-print-document] 'mrb/pdf-misc-print-pages)  (with-eval-after-load 'pdf-annot  (define-key pdf-annot-edit-contents-minor-mode-map (kbd \"\") 'pdf-annot-edit-contents-commit)  (define-key pdf-annot-edit-contents-minor-mode-map (kbd \"\") 'newline)) save place saveplace-pdf-view 可以保存 pdf 视图的位置。\n(save-place-mode 1)  (with-eval-after-load 'save-place  (advice-add 'save-place-find-file-hook :around #'saveplace-pdf-view-find-file-advice)  (advice-add 'save-place-to-alist :around #'saveplace-pdf-view-to-alist-advice)) pdf annotations Create pdf annotations file.\n(defun my/edit-notes ()  \"Edit reference note base pdf name.\"  (interactive)  (if (equal (file-name-extension (buffer-name)) \"pdf\")  (consult-bibtex-edit-notes (file-name-sans-extension (buffer-name)))  (consult-bibtex-edit-notes (consult-bibtex--read-entry)))) Extract pdf annotations with pdfannots.\n(defun my/org-delete-heading-content (heading)  \"Delete content of specific HEADING\"  (org-map-entries  (lambda ()  (let ((name (nth 4 (org-heading-components))))  (if (string= name heading) \t(save-restriction \t(org-mark-subtree) \t(forward-line) \t(delete-region (region-beginning) (region-end))))))))  (defun my/extract-pdf-annots-to-ref-note ()  (interactive)  (let (annots)  (setf annots (shell-command-to-string (format \"pdfannots.py %s\" (find-file (buffer-name)))))  (consult-bibtex-edit-notes (file-name-sans-extension (buffer-name)))  (my/org-delete-heading-content \"Research Contribution\")  (goto-char (org-find-exact-headline-in-buffer \"Research Contribution\"))  (forward-line)  (dolist (item (split-string annots \"\\n\"))  (if (string-prefix-p \" \" item) \t(princ (concat (replace-regexp-in-string \" \" \"+\" item) \"\\n\") \t(current-buffer)))))) GIT Magit Magit related configuration\n(setq transient-history-file (expand-file-name \"transient/history.el\" dn-cache-directory))  (with-eval-after-load 'magit  (setq magit-display-buffer-function 'magit-display-buffer-fullframe-status-topleft-v1)  (magit-add-section-hook 'magit-status-sections-hook \t'magit-insert-modules \t'magit-insert-stashes \t'append)) git-timemachine (unless  (fboundp 'git-timemachine)  (autoload #'git-timemachine \"git-timemachine\" nil t)) Browse at remote (require 'browse-at-remote) Terminal eshell (global-set-key (kbd \"C-`\") 'eshell)  (setq eshell-directory-name (expand-file-name \"eshell\" dn-cache-directory)) eshell-info-banner (add-hook 'eshell-banner-load-hook 'eshell-info-banner-update-banner) shell path (exec-path-from-shell-initialize) Rss management elfeed (setq elfeed-db-directory (expand-file-name \"elfeed\" dn-cache-directory))  (setq elfeed-show-entry-switch #'elfeed-display-buffer) elfeed buffer display. 代码借鉴自 karthink 的配置。这样可以去掉 elfeed-goodies 这个包了。\n(defun elfeed-display-buffer (buf \u0026optional act)  (pop-to-buffer buf '((display-buffer-reuse-window display-buffer-in-side-window) \t(side . bottom) \t(window-height . 0.8) \t(reusable-frames . visible) \t(window-parameters \t(select . t) \t(quit . t) \t(popup . t))))) elfeed-org (with-eval-after-load 'elfeed  (setq rmh-elfeed-org-files (list \"~/Nextcloud/L.Personal.Galaxy/roam/main/elfeed.org\"))  (elfeed-org)) elfeed-score (with-eval-after-load 'elfeed  (setq elfeed-score-rule-stats-file (expand-file-name \"elfeed.stats\" dn-cache-directory))  (elfeed-score-enable)  (define-key elfeed-search-mode-map \"=\" elfeed-score-map)) elfeed-summary (require 'elfeed-summary)  (setq elfeed-summary-other-window t)  (advice-add 'elfeed-summary :after 'elfeed-update) Email 我使用 Mu4e 和 mbsync 管理邮件。Mu4e 的安装见官方手册（Installation）。 Macos 上安装的可见，Blog，目前最详细的。\nmu4e (unless  (fboundp 'mu4e)  (autoload #'mu4e \"mu4e\" nil t))  (setq mu4e-mu-binary (executable-find \"mu\")  mu4e-get-mail-command (concat (executable-find \"mbsync\") \" -a\"))  (setq mu4e-maildir \"~/.maildir\"  mu4e-attachment-dir \"~/Downloads/\")  (setq mu4e-use-fancy-chars t) (setq mu4e-headers-precise-alignment t)  ;; https://github.com/emacsmirror/mu4e-marker-icons/blob/main/mu4e-marker-icons.el (set-fontset-font t '(#xe0e1 . #xe0e1) (font-spec :family \"Material Icons\")) (set-fontset-font t '(#xe159 . #xe159) (font-spec :family \"Material Icons\")) (set-fontset-font t '(#xe7f5 . #xe7f5) (font-spec :family \"Material Icons\")) (set-fontset-font t '(#xe5ca . #xe5ca) (font-spec :family \"Material Icons\")) (set-fontset-font t '(#xe63f . #xe63f) (font-spec :family \"Material Icons\")) (set-fontset-font t '(#xe0e1 . #xe0e1) (font-spec :family \"Material Icons\")) (set-fontset-font t '(#xe151 . #xe151) (font-spec :family \"Material Icons\")) (set-fontset-font t '(#xe2bc . #xe2bc) (font-spec :family \"Material Icons\")) (set-fontset-font t '(#xe3b5 . #xe3b5) (font-spec :family \"Material Icons\")) (set-fontset-font t '(#xe153 . #xe153) (font-spec :family \"Material Icons\")) (set-fontset-font t '(#xe15f . #xe15f) (font-spec :family \"Material Icons\")) (set-fontset-font t '(#xe92b . #xe92b) (font-spec :family \"Material Icons\"))  (setq mu4e-headers-seen-mark `(\"S\" . ,(propertize \t(all-the-icons-material \"mail_outline\") \t'face `(:family ,(all-the-icons-material-family) \t:foreground ,(face-background 'default))))  mu4e-headers-new-mark `(\"N\" . ,(propertize \t(all-the-icons-material \"markunread\") \t'face `(:family ,(all-the-icons-material-family) \t:foreground ,(face-background 'default))))  mu4e-headers-unread-mark `(\"u\" . ,(propertize \t(all-the-icons-material \"notifications_none\") \t'face 'mu4e-unread-face))  mu4e-headers-signed-mark `(\"s\" . ,(propertize \t(all-the-icons-material \"check\") \t'face `(:family ,(all-the-icons-material-family) \t:foreground \"DarkCyan\")))  mu4e-headers-encrypted-mark `(\"x\" . ,(propertize \t(all-the-icons-material \"enhanced_encryption\") \t'face `(:family ,(all-the-icons-material-family) \t:foreground \"CornflowerBlue\")))  mu4e-headers-draft-mark `(\"D\" . ,(propertize \t(all-the-icons-material \"drafts\") \t'face 'mu4e-draft-face))  mu4e-headers-attach-mark `(\"a\" . ,(propertize \t(all-the-icons-material \"attachment\") \t'face 'mu4e-attach-number-face))  mu4e-headers-passed-mark `(\"P\" . ,(propertize ; ❯ (I'm participated in thread) \t(all-the-icons-material \"center_focus_weak\") \t'face `(:family ,(all-the-icons-material-family) \t:foreground \"yellow\")))  mu4e-headers-flagged-mark `(\"F\" . ,(propertize \t(all-the-icons-material \"flag\") \t'face 'mu4e-flagged-face))  mu4e-headers-replied-mark `(\"R\" . ,(propertize \t(all-the-icons-material \"reply_all\") \t'face 'mu4e-replied-face))  mu4e-headers-trashed-mark `(\"T\" . ,(propertize \t(all-the-icons-material \"delete_forever\") \t'face 'mu4e-trashed-face)))  (setq mail-user-agent 'mu4e-user-agent  mu4e-update-interval 600  mu4e-index-update-in-background t  mu4e-index-update-error-warning t  mu4e-view-show-images t  mu4e-view-image-max-width 800  mu4e-confirm-quit nil  mu4e-view-show-addresses t  mu4e-headers-include-related t  mu4e-headers-auto-update t  mu4e-index-update-error-warning nil  mu4e-index-cleanup t  mu4e-context-policy 'pick-first  mu4e-headers-date-format \"%d/%m/%y\"  mu4e-headers-time-format \"%H:%M\"  mu4e-headers-fields '((:flags . 6) \t(:human-date . 9) \t(:subject . 90) \t(:from-or-to . 40) \t(:tags . 20))  mu4e-compose-reply-ignore-address '(\"no-?reply\" \"duan_n@outlook.com\")  mu4e-bookmarks '((\"flag:unread AND NOT flag:trashed\" \"Unread messages\" ?u) \t(\"date:today..now\" \"Today's messages\" ?t) \t(\"date:7d..now\" \"Last 7 days\" ?w) \t(\"date:1d..now AND NOT list:emacs-orgmode.gnu.org\" \"Last 1 days\" ?o) \t(\"date:1d..now AND list:emacs-orgmode.gnu.org\" \"Last 1 days (org mode)\" ?m) \t(\"maildir:/drafts\" \"drafts\" ?d) \t(\"flag:flagged AND NOT flag:trashed\" \"flagged\" ?f) \t(\"mime:image/*\" \"Messages with images\" ?p)))  (with-eval-after-load 'mu4e  (setq mu4e-sent-folder \"/outlook/Sent\" \tmu4e-drafts-folder \"/outlook/Drafts\" \tmu4e-trash-folder \"/outlook/Deleted\" \tmu4e-refile-folder \"/outlook/Archive\"))  ;; (add-hook 'after-init-hook 'mu4e) (mu4e 'background) mu4e-alert (with-eval-after-load 'mu4e  (mu4e-alert-set-default-style 'notifier)  (add-hook 'after-init-hook #'mu4e-alert-enable-notifications)  (with-eval-after-load 'doom-modeline  (mu4e-alert-enable-mode-line-display))) sent mail (setq message-send-mail-function 'smtpmail-send-it) mu4e-column-faces (with-eval-after-load 'mu4e  (mu4e-column-faces-mode)) Org-msg (setq org-msg-options \"html-postamble:nil H:5 num:nil ^:{} toc:nil author:nil email:nil \\\\n:t\"  org-msg-startup \"hidestars indent inlineimages\"  org-msg-greeting-fmt \"\\nHi%s,\\n\\n\"  org-msg-recipient-names '((\"jeremy.compostella@gmail.com\" . \"Jérémy\"))  org-msg-greeting-name-limit 3  org-msg-default-alternatives '((new\t. (text html)) \t(reply-to-html\t. (text html)) \t(reply-to-text\t. (text)))  org-msg-convert-citation t  org-msg-signature \" Regards, #+begin_signature -- *Duan Ning* /One Emacs to rule them all/ #+end_signature\")  (org-msg-mode) Telegaram 非官方的 telegram 客户端。\n(setq telega-server-libs-prefix \"~/td/tdlib\") (setq telega-proxies (list \t'(:server \"127.0.0.1\" :port 7891 :enable t \t:type (:@type \"proxyTypeSocks5\")))) Calibre https://calibredb.hkvim.com\n(setq calibredb-root-dir \"~/Calibre Library\"  calibredb-db-dir (expand-file-name \"metadata.db\" calibredb-root-dir)) (setq calibredb-format-all-the-icons t  calibredb-title-width 80  calibredb-size-show t) (setq calibredb-fetch-metadata-source-list '(\"Google\" \"Amazon.com\")) Music 2022-04-14 目前使用不己， API NULL。需要包作者进行更新。\n(global-set-key (kbd \"\") 'netease-cloud-music)  (setq request-storage-directory (expand-file-name \"request\" dn-cache-directory))  (setq netease-cloud-music-cache-directory (expand-file-name \"netease-cloud-music\" dn-cache-directory)) Keybindings Keyfreq (keyfreq-mode 1)  (keyfreq-autosave-mode 1)  (setq keyfreq-file (expand-file-name \".emacs.keyfreq\" dn-cache-directory))  (setq keyfreq-excluded-commands '(self-insert-command \tforward-char \tbackward-char \tprevious-line \tnext-line)) Meow  Meow is yet another modal editing mode for Emacs.\n (defun meow-setup ()  (meow-motion-overwrite-define-key  '(\"j\" . meow-next)  '(\"k\" . meow-prev))  (meow-leader-define-key  ;; SPC j/k will run the original command in MOTION state.  '(\"j\" . \"H-j\")  '(\"k\" . \"H-k\")  ;; Use SPC (0-9) for digit arguments.  '(\"1\" . meow-digit-argument)  '(\"2\" . meow-digit-argument)  '(\"3\" . meow-digit-argument)  '(\"4\" . meow-digit-argument)  '(\"5\" . meow-digit-argument)  '(\"6\" . meow-digit-argument)  '(\"7\" . meow-digit-argument)  '(\"8\" . meow-digit-argument)  '(\"9\" . meow-digit-argument)  '(\"0\" . meow-digit-argument)  '(\"/\" . meow-keypad-describe-key)  '(\"?\" . meow-cheatsheet))  (meow-normal-define-key  '(\"0\" . meow-expand-0)  '(\"9\" . meow-expand-9)  '(\"8\" . meow-expand-8)  '(\"7\" . meow-expand-7)  '(\"6\" . meow-expand-6)  '(\"5\" . meow-expand-5)  '(\"4\" . meow-expand-4)  '(\"3\" . meow-expand-3)  '(\"2\" . meow-expand-2)  '(\"1\" . meow-expand-1)  '(\"-\" . negative-argument)  '(\";\" . meow-reverse)  '(\",\" . meow-inner-of-thing)  '(\".\" . meow-bounds-of-thing)  '(\"[\" . meow-beginning-of-thing)  '(\"]\" . meow-end-of-thing)  '(\"a\" . meow-append)  '(\"A\" . meow-open-below)  '(\"b\" . meow-back-word)  '(\"B\" . meow-back-symbol)  '(\"c\" . meow-change)  '(\"d\" . meow-delete)  '(\"D\" . meow-backward-delete)  '(\"e\" . meow-next-word)  '(\"E\" . meow-next-symbol)  '(\"f\" . meow-find)  '(\"g\" . meow-cancel-selection)  '(\"G\" . meow-grab)  '(\"h\" . meow-left)  '(\"H\" . meow-left-expand)  '(\"i\" . meow-insert)  '(\"I\" . meow-open-above)  '(\"j\" . meow-next)  '(\"J\" . meow-next-expand)  '(\"k\" . meow-prev)  '(\"K\" . meow-prev-expand)  '(\"l\" . meow-right)  '(\"L\" . meow-right-expand)  '(\"m\" . meow-join)  '(\"n\" . meow-search)  '(\"o\" . meow-block)  '(\"O\" . meow-to-block)  '(\"p\" . meow-yank)  '(\"q\" . meow-quit)  '(\"Q\" . meow-goto-line)  '(\"r\" . meow-replace)  '(\"R\" . meow-swap-grab)  '(\"s\" . meow-kill)  '(\"t\" . meow-till)  '(\"u\" . undo)  '(\"U\" . undo-redo)  ;; '(\"u\" . meow-undo)  ;; '(\"U\" . meow-undo-in-selection)  '(\"v\" . meow-visit)  '(\"w\" . meow-mark-word)  '(\"W\" . meow-mark-symbol)  '(\"x\" . meow-line)  '(\"X\" . meow-goto-line)  '(\"y\" . meow-save)  '(\"Y\" . meow-sync-grab)  '(\"z\" . meow-pop-selection)  '(\"'\" . repeat)  '(\"\" . mode-line-other-buffer)))  (add-hook 'after-init-hook 'meow-setup)  (meow-global-mode)  (setq meow-use-clipboard t)  (add-to-list 'meow-mode-state-list '(netease-cloud-music-mode . motion)) (add-to-list 'meow-mode-state-list '(osx-dictionary-mode . motion)) (add-to-list 'meow-mode-state-list '(stock-tracker-mode . motion)) One Key (require 'one-key)  (setq one-key-popup-window nil) one key for bibtex (one-key-create-menu  \"BIBTEX\"  '(((\"a\" . \"Actions\") . orb-note-actions)  ((\"o\" . \"open\") . consult-bibtex-open-any)  ((\"e\" . \"entry\") . consult-bibtex-show-entry)  ((\"n\" . \"note\") . my/edit-notes)  ((\"x\" . \"extract annots\") . my/extract-pdf-annots-to-ref-note))  t) one key for org download (one-key-create-menu  \"DOWNLOAD\"  '(((\"c\" . \"clipboard\") . org-download-clipboard)  ((\"i\" . \"image\") . org-download-image)  ((\"s\" . \"screenshot\") . org-download-screenshot))  t) one key for language (one-key-create-menu  \"LANGUAGE\"  '(((\"t\" . \"Translate\") . gts-do-translate)  ((\"f\" . \"Fanyi Point\") . fanyi-dwim2)  ((\"F\" . \"Fanyi Input\") . fanyi-dwim)  ((\"d\" . \"Dictionary Point\") . osx-dictionary-search-pointer)  ((\"D\" . \"Dictionary Input\") . osx-dictionary-search-input)  ((\"p\" . \"Powerthesaurus\") . powerthesaurus-lookup-dwim)  ((\"s\" . \"Style region\") . smog-check)  ((\"S\" . \"Style buffer\") . smog-check-buffer))  t) one key for file (one-key-create-menu  \"FILE\"  '(((\"f\" . \"FINANCE\") . one-key-menu-beancount)  ((\"r\" . \"recent\") . consult-recent-file)  ((\"o\" . \"open\") . one-key-menu-specific-file)  ((\"e\" . \"External\") . xah-html-open-in-safari))  t) one key for directory (one-key-create-menu  \"DIRECTORY\"  '(((\"c\" . \"Cloud\") . (lambda () (interactive) (dired \"~/Nextcloud/\")))  ((\"d\" . \"Downloads\") . (lambda () (interactive) (dired \"~/Downloads/\")))  ((\"p\" . \"Pictures\") . (lambda () (interactive) (dired \"~/Pictures/\"))))  t) one key for open specific file (one-key-create-menu  \"SPECIFIC-FILE\"  '(((\"b\" . \"Blog file\") . (lambda () (interactive) (find-file \"~/hugo-source/content-org/all-posts.org\")))  ((\"I\" . \"README.org\") . (lambda () (interactive) (find-file (expand-file-name \"README.org\" user-emacs-directory))))  ((\"i\" . \"Inbox\") . (lambda () (interactive) (find-file (expand-file-name \"daily/inbox.org\" dn-galaxy))))  ((\"r\" . \"rss\") . (lambda () (interactive) (find-file (expand-file-name \"main/elfeed.org\" dn-roam))))  ((\"g\" . \"gtd\") . (lambda () (interactive) (find-file (expand-file-name \"todos/org-gtd-tasks.org\" dn-galaxy))))  ((\"a\" . \"alipay\") . (lambda () (interactive) (find-file (expand-file-name \"alipay.bean\" dn-finance-year))))  ((\"m\" . \"Beancount main\") . (lambda () (interactive) (find-file (expand-file-name \"main.bean\" dn-finance)))))  t) one key for org (one-key-create-menu  \"ORG\"  '(((\"c\" . \"Clock\") . one-key-menu-org-clock)  ((\"d\" . \"Download\") . one-key-menu-download)  ((\"p\" . \"Process\") . org-gtd-process-inbox)  ((\"l\" . \"cliplink\") . org-cliplink)  ((\"i\" . \"ID\") . org-id-get-create))  t)   org-clock\n(one-key-create-menu  \"ORG-CLOCK\"  '(((\"i\" . \"In\") . org-clock-in)  ((\"o\" . \"Out\") . org-clock-out)  ((\"g\" . \"goto\") . org-clock-goto)  ((\"l\" . \"last\") . org-clock-in-last))  t)   one key for org transclusion (one-key-create-menu  \"TRANSCLUSION\"  '(((\"a\" . \"Add\") . org-transclusion-add)  ((\"A\" . \"Add all\") . org-transclusion-add-all)  ((\"r\" . \"Remove\") . org-transclusion-remove)  ((\"R\" . \"Remove all\") . org-transclusion-remove-all)  ((\"g\" . \"Refresh\") . org-transclusion-refresh)  ((\"m\" . \"make\") . org-transclusion-make-from-link)  ((\"o\" . \"Open\") . org-transclusion-open-source)  ((\"e\" . \"Edit\") . org-transclusion-live-sync-start))  t) one key for org roam (one-key-create-menu  \"ROAM\"  '(((\"a\" . \"Alias\") . one-key-menu-roam-alias)  ((\"b\" . \"Roam Buffer\") . org-roam-buffer-toggle)  ((\"c\" . \"Roam capture\") . org-roam-capture)  ((\"d\" . \"Dailies\") . one-key-menu-roam-dailies)  ((\"f\" . \"Node find\") . org-roam-node-find)  ((\"i\" . \"Node insert\") . org-roam-node-insert)  ((\"s\" . \"Search content\") . bms/org-roam-rg-search)  ((\"t\" . \"Tags\") . one-key-menu-roam-tags)  ((\"r\" . \"Ref\") . one-key-menu-roam-ref))  t)  (one-key-create-menu  \"ROAM-ALIAS\"  '(((\"a\" . \"Add\") . org-roam-alias-add)  ((\"r\" . \"Remove\") . org-roam-alias-remove))  t)  (one-key-create-menu  \"ROAM-DAILIES\"  '(((\"t\" . \"Today\") . org-roam-dailies-find-today)  ((\"y\" . \"Yesterday\") . org-roam-dailies-find-yesterday)  ((\"d\" . \"Directory\") . org-roam-dailies-find-directory)  ((\"a\" . \"Date\") . org-roam-dailies-find-date)  ((\"p\" . \"Past Diary\") . my/history-morning-diary))  t)  (one-key-create-menu  \"ROAM-REF\"  '(((\"a\" . \"Add\") . org-roam-ref-add)  ((\"f\" . \"Find\") . org-roam-ref-find)  ((\"r\" . \"Remove\") . org-roam-ref-remove))  t)  (one-key-create-menu  \"ROAM-TAGS\"  '(((\"a\" . \"Add\") . org-roam-tag-add)  ((\"c\" . \"Completion\") . org-roam-tag-completions)  ((\"r\" . \"Remove\") . org-roam-tag-remove))  t) one key for window frame (one-key-create-menu  \"WINDOWS\"  '(((\"c\" . \"Tabs:common\") . (lambda () (interactive) (centaur-tabs-switch-group \"Common\")))  ((\"d\" . \"Destroy\") . kill-this-buffer)  ((\"g\" . \"Tabs:Groups\") . awesome-tab-switch-group)  ((\"o\" . \"Tabs:org\") . (lambda () (interactive) (centaur-tabs-switch-group \"OrgMode\")))  ((\"h\" . \"Left\") . windmove-left)  ((\"j\" . \"Down\") . windmove-down)  ((\"k\" . \"Up\") . windmove-up)  ((\"l\" . \"Right\") . windmove-right)  ((\"e\" . \"Email\") . mu4e)  ((\"r\" . \"rss\") . elfeed-summary)  ((\"t\" . \"Telega\") . telega)  ((\"m\" . \"Message\") . (lambda () (interactive) (switch-to-buffer \"*Messages*\")))  ((\"s\" . \"scratch\") . (lambda () (interactive) (switch-to-buffer \"*scratch*\")))  ((\"u\" . \"Winner Undo\") . winner-undo)  ((\"v\" . \"vundo\") . vundo))  t) Bind meow leader with one-key-menu 不要绑定在 c m g 上，这几个键在 Meow 中被使用。\n(meow-leader-define-key  '(\"a\" . my/org-agenda)  '(\"SPC\" . meow-M-x)  '(\"b\" . one-key-menu-bibtex)  '(\"d\" . one-key-menu-directory)  '(\"f\" . one-key-menu-file)  '(\"i\" . my/org-capture-inbox)  '(\"l\" . one-key-menu-language)  '(\"r\" . one-key-menu-roam)  '(\"o\" . one-key-menu-org)  '(\"s\" . eshell)  '(\"t\" . one-key-menu-transclusion)  '(\"w\" . one-key-menu-windows)) ","wordCount":"8412","inLanguage":"en","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":[{"@type":"Person","name":"jousimies"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://jousimies.github.io/posts/readme/"},"publisher":{"@type":"Organization","name":"探索世界，践行人生","logo":{"@type":"ImageObject","url":"https://jousimies.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://jousimies.github.io accesskey=h title="探索世界，践行人生 (Alt + H)">探索世界，践行人生</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://jousimies.github.io/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://jousimies.github.io/posts title=Posts><span>Posts</span></a></li><li><a href=https://jousimies.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://jousimies.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://jousimies.github.io/archives title=Archives><span>Archives</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://jousimies.github.io>Home</a>&nbsp;»&nbsp;<a href=https://jousimies.github.io/posts/>Posts</a></div><h1 class=post-title>Jousimies's Personal Emacs Configuration</h1><div class=post-meta>40 min&nbsp;·&nbsp;jousimies</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#interface-show aria-label="Interface Show">Interface Show</a></li><li><a href=#introduction aria-label=Introduction>Introduction</a><ul><li><a href=#why-emacs aria-label="Why Emacs">Why Emacs</a></li><li><a href=#about-other-note-taking-software aria-label="About other note taking software">About other note taking software</a></li><li><a href=#acknowledgements aria-label=Acknowledgements>Acknowledgements</a></li></ul></li><li><a href=#rudimentary-configuration aria-label="Rudimentary configuration">Rudimentary configuration</a><ul><li><a href=#early-init aria-label="Early Init">Early Init</a></li><li><a href=#borg-package-manage aria-label="Borg - Package manage">Borg - Package manage</a></li><li><a href=#start-and-close-emacs aria-label="Start and close emacs">Start and close emacs</a><ul><li><a href=#speedup aria-label=Speedup>Speedup</a></li><li><a href=#gcmh aria-label=gcmh>gcmh</a></li><li><a href=#restart-emacs aria-label=restart-emacs>restart-emacs</a></li></ul></li><li><a href=#personal-information aria-label="Personal information">Personal information</a></li><li><a href=#variables aria-label=Variables>Variables</a><ul><li><a href=#folder aria-label=folder>folder</a></li><li><a href=#system-type aria-label="system type">system type</a></li></ul></li><li><a href=#better-defaults aria-label="Better defaults">Better defaults</a><ul><li><a href=#system-code-type aria-label="system code type">system code type</a></li><li><a href=#dialog-box aria-label="dialog box">dialog box</a></li><li><a href=#define-fringe-bitmap aria-label=define-fringe-bitmap>define-fringe-bitmap</a></li><li><a href=#hide-mouse aria-label="hide mouse">hide mouse</a></li><li><a href=#builtin-modes aria-label="builtin modes">builtin modes</a></li><li><a href=#large-file aria-label="large file">large file</a></li><li><a href=#custom-file aria-label="Custom file">Custom file</a></li><li><a href=#private-file aria-label="Private file">Private file</a></li></ul></li></ul></li><li><a href=#user-interface aria-label="User interface">User interface</a><ul><li><a href=#fonts aria-label=Fonts>Fonts</a></li><li><a href=#icon aria-label=Icon>Icon</a><ul><li><a href=#all-the-icons aria-label=all-the-icons>all-the-icons</a></li><li><a href=#all-the-icons-completion aria-label=all-the-icons-completion>all-the-icons-completion</a></li><li><a href=#kind-icon aria-label=kind-icon>kind-icon</a></li></ul></li><li><a href=#cursor aria-label=Cursor>Cursor</a><ul><li><a href=#cursor-color aria-label="cursor color">cursor color</a></li></ul></li><li><a href=#themes aria-label=Themes>Themes</a><ul><li><a href=#override-color-for-distraction-free aria-label="Override color for distraction free">Override color for distraction free</a></li><li><a href=#theme-auto-change aria-label="Theme auto change">Theme auto change</a></li></ul></li><li><a href=#dashboard aria-label=Dashboard>Dashboard</a></li><li><a href=#rainbow-mode aria-label=rainbow-mode>rainbow-mode</a></li><li><a href=#helpful aria-label=helpful>helpful</a></li><li><a href=#info-colors aria-label=info-colors>info-colors</a></li><li><a href=#goggles aria-label=goggles>goggles</a></li><li><a href=#emojify aria-label=emojify>emojify</a></li><li><a href=#svg aria-label=svg>svg</a><ul><li><a href=#svg-lib aria-label=svg-lib>svg-lib</a></li><li><a href=#define-gtd-keywords-faces aria-label="Define gtd keywords faces">Define gtd keywords faces</a></li><li><a href=#svg-tag-mode aria-label=svg-tag-mode>svg-tag-mode</a></li><li><a href=#auto-update-svg-tag aria-label="Auto update svg-tag">Auto update svg-tag</a></li></ul></li><li><a href=#lin aria-label=lin>lin</a></li><li><a href=#frame-management aria-label="Frame management">Frame management</a><ul><li><a href=#fullscreen aria-label=Fullscreen>Fullscreen</a></li><li><a href=#quit-and-delete-window aria-label="Quit and delete window">Quit and delete window</a></li><li><a href=#scroll-other-window aria-label="Scroll other window">Scroll other window</a></li><li><a href=#org-src aria-label=Org-src>Org-src</a></li><li><a href=#display-buffer-alist aria-label=display-buffer-alist>display-buffer-alist</a></li></ul></li><li><a href=#awesome-tray aria-label="Awesome Tray">Awesome Tray</a><ul><li><a href=#awesome-try-and-and-meow-state aria-label="awesome try &amp;amp;&amp;amp; meow state">awesome try && meow state</a></li><li><a href=#awesome-tray-and-and-mu4e-unread aria-label="awesome tray &amp;amp;&amp;amp; mu4e unread">awesome tray && mu4e unread</a></li><li><a href=#update-awesome-tray-status aria-label="Update awesome tray status">Update awesome tray status</a></li></ul></li></ul></li><li><a href=#editor-enhancement-c-dot-r-dot-u-dot-d aria-label="Editor Enhancement &amp;ndash; C.R.U.D">Editor Enhancement &ndash; C.R.U.D</a><ul><li><a href=#rime aria-label=rime>rime</a></li><li><a href=#rime-regexp aria-label=rime-regexp>rime-regexp</a></li><li><a href=#autoinsert aria-label=autoinsert>autoinsert</a></li><li><a href=#embrace aria-label=embrace>embrace</a></li><li><a href=#recent-file aria-label="recent file">recent file</a></li><li><a href=#dired-mode aria-label=dired-mode>dired-mode</a><ul><li><a href=#files aria-label=files>files</a></li><li><a href=#dired aria-label=dired>dired</a></li><li><a href=#dired-x aria-label=dired-x>dired-x</a></li><li><a href=#diredfl aria-label=diredfl>diredfl</a></li><li><a href=#peep-dired aria-label=peep-dired>peep-dired</a></li><li><a href=#dired-hide-dotfiles aria-label=dired-hide-dotfiles>dired-hide-dotfiles</a></li><li><a href=#dired-git-info aria-label=dired-git-info>dired-git-info</a></li></ul></li><li><a href=#hungry-delete aria-label="hungry delete">hungry delete</a></li><li><a href=#auto-save aria-label="auto save">auto save</a></li><li><a href=#save-place aria-label="save place">save place</a></li><li><a href=#save-hist aria-label="save hist">save hist</a></li><li><a href=#undo aria-label=Undo>Undo</a></li><li><a href=#vundo aria-label=Vundo>Vundo</a></li><li><a href=#ctrlf aria-label=ctrlf>ctrlf</a></li><li><a href=#google-this aria-label=google-this>google-this</a></li><li><a href=#vertico aria-label=vertico>vertico</a></li><li><a href=#marginalia aria-label=marginalia>marginalia</a></li><li><a href=#consult aria-label=consult>consult</a></li><li><a href=#consult-dir aria-label=consult-dir>consult-dir</a></li><li><a href=#orderless aria-label=orderless>orderless</a></li><li><a href=#corfu aria-label=corfu>corfu</a></li><li><a href=#corfu-doc aria-label=corfu-doc>corfu-doc</a></li><li><a href=#embark aria-label=embark>embark</a></li><li><a href=#prescient aria-label=prescient>prescient</a></li><li><a href=#dabbrev aria-label=dabbrev>dabbrev</a></li><li><a href=#cape aria-label=cape>cape</a></li><li><a href=#tempel aria-label=tempel>tempel</a></li><li><a href=#open-in-external-apps aria-label="Open in external apps">Open in external apps</a></li></ul></li><li><a href=#language-configuration aria-label="Language configuration">Language configuration</a><ul><li><a href=#lsp-language-service-protocol aria-label="LSP: Language service protocol">LSP: Language service protocol</a><ul><li><a href=#eldoc aria-label=eldoc>eldoc</a></li><li><a href=#eglot aria-label=eglot>eglot</a></li></ul></li><li><a href=#language-spell-check-and-translate aria-label="Language spell check and translate">Language spell check and translate</a><ul><li><a href=#ispell aria-label=ispell>ispell</a></li><li><a href=#flyspell aria-label=flyspell>flyspell</a></li><li><a href=#flyspell-correct aria-label=flyspell-correct>flyspell-correct</a></li><li><a href=#fanyi aria-label=fanyi>fanyi</a></li><li><a href=#powerthesaurus aria-label=Powerthesaurus>Powerthesaurus</a></li><li><a href=#smog aria-label=Smog>Smog</a></li><li><a href=#osx-dictionary aria-label=osx-dictionary>osx-dictionary</a></li><li><a href=#go-translate aria-label=go-translate>go-translate</a></li></ul></li><li><a href=#program-language aria-label="Program language">Program language</a><ul><li><a href=#markdown aria-label=Markdown>Markdown</a></li><li><a href=#beancount aria-label=Beancount>Beancount</a></li><li><a href=#csv aria-label=CSV>CSV</a></li><li><a href=#yaml aria-label=Yaml>Yaml</a></li><li><a href=#python aria-label=Python>Python</a></li></ul></li><li><a href=#organize-life-with-org-mode aria-label="Organize life with org-mode">Organize life with org-mode</a><ul><li><a href=#better-default aria-label="Better Default">Better Default</a></li><li><a href=#packages-enhance-org aria-label="Packages enhance org">Packages enhance org</a></li><li><a href=#note-taking aria-label="Note taking">Note taking</a></li><li><a href=#bibtex-manage aria-label="Bibtex manage">Bibtex manage</a></li><li><a href=#tasks-manage aria-label="Tasks manage">Tasks manage</a></li><li><a href=#org-export aria-label="Org Export">Org Export</a></li></ul></li><li><a href=#latex aria-label=Latex>Latex</a><ul><li><a href=#defaults aria-label=Defaults>Defaults</a></li><li><a href=#ox-latex aria-label=ox-latex>ox-latex</a></li><li><a href=#org-latex-impatient aria-label=org-latex-impatient>org-latex-impatient</a></li></ul></li></ul></li><li><a href=#application aria-label=Application>Application</a><ul><li><a href=#calendar aria-label=Calendar>Calendar</a></li><li><a href=#pdf-reader aria-label="PDF Reader">PDF Reader</a><ul><li><a href=#pdf-tools aria-label="pdf tools">pdf tools</a></li><li><a href=#pdf-print aria-label="pdf print">pdf print</a></li><li><a href=#pdf-key-settings aria-label="pdf key settings">pdf key settings</a></li><li><a href=#save-place aria-label="save place">save place</a></li><li><a href=#pdf-annotations aria-label="pdf annotations">pdf annotations</a></li></ul></li><li><a href=#git aria-label=GIT>GIT</a><ul><li><a href=#magit aria-label=Magit>Magit</a></li><li><a href=#git-timemachine aria-label=git-timemachine>git-timemachine</a></li><li><a href=#browse-at-remote aria-label="Browse at remote">Browse at remote</a></li></ul></li><li><a href=#terminal aria-label=Terminal>Terminal</a><ul><li><a href=#eshell aria-label=eshell>eshell</a></li><li><a href=#eshell-info-banner aria-label=eshell-info-banner>eshell-info-banner</a></li><li><a href=#shell-path aria-label="shell path">shell path</a></li></ul></li><li><a href=#rss-management aria-label="Rss management">Rss management</a><ul><li><a href=#elfeed aria-label=elfeed>elfeed</a></li><li><a href=#elfeed-org aria-label=elfeed-org>elfeed-org</a></li><li><a href=#elfeed-score aria-label=elfeed-score>elfeed-score</a></li><li><a href=#elfeed-summary aria-label=elfeed-summary>elfeed-summary</a></li></ul></li><li><a href=#email aria-label=Email>Email</a><ul><li><a href=#mu4e aria-label=mu4e>mu4e</a></li><li><a href=#mu4e-alert aria-label=mu4e-alert>mu4e-alert</a></li><li><a href=#sent-mail aria-label="sent mail">sent mail</a></li><li><a href=#mu4e-column-faces aria-label=mu4e-column-faces>mu4e-column-faces</a></li><li><a href=#org-msg aria-label=Org-msg>Org-msg</a></li></ul></li><li><a href=#telegaram aria-label=Telegaram>Telegaram</a></li><li><a href=#calibre aria-label=Calibre>Calibre</a></li><li><a href=#music aria-label=Music>Music</a></li></ul></li><li><a href=#keybindings aria-label=Keybindings>Keybindings</a><ul><li><a href=#keyfreq aria-label=Keyfreq>Keyfreq</a></li><li><a href=#meow aria-label=Meow>Meow</a></li><li><a href=#one-key aria-label="One Key">One Key</a><ul><li><a href=#one-key-for-bibtex aria-label="one key for bibtex">one key for bibtex</a></li><li><a href=#one-key-for-org-download aria-label="one key for org download">one key for org download</a></li><li><a href=#one-key-for-language aria-label="one key for language">one key for language</a></li><li><a href=#one-key-for-file aria-label="one key for file">one key for file</a></li><li><a href=#one-key-for-directory aria-label="one key for directory">one key for directory</a></li><li><a href=#one-key-for-open-specific-file aria-label="one key for open specific file">one key for open specific file</a></li><li><a href=#one-key-for-org aria-label="one key for org">one key for org</a></li><li><a href=#one-key-for-org-transclusion aria-label="one key for org transclusion">one key for org transclusion</a></li><li><a href=#one-key-for-org-roam aria-label="one key for org roam">one key for org roam</a></li><li><a href=#one-key-for-window-frame aria-label="one key for window frame">one key for window frame</a></li></ul></li><li><a href=#bind-meow-leader-with-one-key-menu aria-label="Bind meow leader with one-key-menu">Bind meow leader with one-key-menu</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=interface-show>Interface Show<a hidden class=anchor aria-hidden=true href=#interface-show>#</a></h2><figure><img loading=lazy src=/ox-hugo/interface.png width=1000px></figure><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><blockquote><p>The Borg assimilate Emacs packages as Git submodules.</p></blockquote><p>我使用 <a href=https://github.com/emacscollective/borg>borg</a> 进行 Emacs 包的管理，详细的使用见 borg <a href=https://emacsmirror.net/manual/borg/>官方手册</a>。</p><p>使用 borg 管理有个好处是， borg-assimilate 后的包和 Emacs 的内置包一样，不需要使用 use-package 或 leaf 此类包对配置文件进行包裹。不会增超 Emacs 的启动时间，我目前有一百多个包，启动时间在 1.6s 左右（ Arch Emacs 27.2 ）。</p><p>使用 org-mode 对 Emacs 的配置文件进行管理（见<a href=https://en.wikipedia.org/wiki/Literate_programming>文学编程</a>）， org-auto-tangle 自动将配置文件 tangle 到 init.el 文件中。默认会解析到 init.el 文件中，如果有不想解析或解析到其他文件的，在 src block 中加上 :tangle no 或 :tangle other.el 。</p><p>一个 init.el 文件，不需要分离配置，管理起来，没什么 STRESS.</p><h3 id=why-emacs>Why Emacs<a hidden class=anchor aria-hidden=true href=#why-emacs>#</a></h3><p>对于一个非专业的程序员，使用此文本编辑器对自己的生活进行方方面面的管理，简直是 AWESOME 。</p><p>Emacs 具有强大的生态，可以进行文件管理，财务管理，事务管理，邮件管理，还可以用来听音乐，看视频。</p><h3 id=about-other-note-taking-software>About other note taking software<a hidden class=anchor aria-hidden=true href=#about-other-note-taking-software>#</a></h3><p>我使用过的笔记软件有很多，在遇到 Emacs 前，尝试过的有 PKM 软件， Mediawiki ， Tiddly wiki ， Onenote ，印象笔记，蚂蚁笔记， Simplenote ， Joplin 等等。当然也尝试过 markdown 。</p><p>我为什么不使用类似 onenote ，印象笔记等软件？</p><p>Onenote 是私有格式，意味着当我需要夸平台时，其专有格式会给我带来麻烦。印象笔记也是如此，而且印象笔记的付费一言难尽。以上尝试的软件都没能长久使用，或多或少的存在痛点。</p><p>更重要的是不符合我关于笔记是 ​<strong>本地可控，纯文本</strong>​ 的需求。</p><h3 id=acknowledgements>Acknowledgements<a hidden class=anchor aria-hidden=true href=#acknowledgements>#</a></h3><blockquote><p>If I have seen further, it is by standing on the shoulders of giants. &mdash;- Sir Isaac Newton</p></blockquote><p>谢谢以下配置的作者，从他们那学到了很多关于 Emacs 的知识。排名不分先后。</p><ul><li><a href=https://github.com/bbatsov/prelude>https://github.com/bbatsov/prelude</a></li><li><a href=https://github.com/syl20bnr/spacemacs>https://github.com/syl20bnr/spacemacs</a></li><li><a href=https://github.com/seagle0128/.emacs.d>https://github.com/seagle0128/.emacs.d</a></li><li><a href=https://github.com/hlissner/doom-emacs>https://github.com/hlissner/doom-emacs</a></li><li><a href=https://github.com/remacs/remacs>https://github.com/remacs/remacs</a></li><li><a href=https://github.com/redguardtoo/emacs.d>https://github.com/redguardtoo/emacs.d</a></li><li><a href=https://github.com/manateelazycat/lazycat-emacs>https://github.com/manateelazycat/lazycat-emacs</a></li><li><a href=https://github.com/purcell/emacs.d>https://github.com/purcell/emacs.d</a></li><li><a href=https://github.com/MatthewZMD/.emacs.d>https://github.com/MatthewZMD/.emacs.d</a></li><li><a href=https://sachachua.com/dotemacs/>https://sachachua.com/dotemacs/</a></li><li><a href=https://github.com/raxod502/radian>https://github.com/raxod502/radian</a></li><li><a href=https://tecosaur.github.io/emacs-config/config.html>https://tecosaur.github.io/emacs-config/config.html</a></li></ul><h2 id=rudimentary-configuration>Rudimentary configuration<a hidden class=anchor aria-hidden=true href=#rudimentary-configuration>#</a></h2><p>Make this file run (slightly) faster with lexical binding (see <a href=https://nullprogram.com/blog/2016/12/22/>Blog</a>).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;; init.el --- My personal emacs configuration -*- lexical-binding: t; -*-</span>
</span></span></code></pre></div><h3 id=early-init>Early Init<a hidden class=anchor aria-hidden=true href=#early-init>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;;; early-init.el --- Early Init File -*- lexical-binding: t; no-byte-compile: t -*-</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; NOTE: early-init.el is now generated from readme.org.  Please edit that file instead</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Defer garbage collection further back in the startup process</span>
</span></span><span style=display:flex><span>(setq gc-cons-threshold most-positive-fixnum
</span></span><span style=display:flex><span>      gc-cons-percentage <span style=color:#ae81ff>0.6</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; In Emacs 27+, package initialization occurs before `user-init-file&#39; is</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; loaded, but after `early-init-file&#39;. Doom handles package initialization, so</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; we must prevent Emacs from doing it early!</span>
</span></span><span style=display:flex><span>(setq package-enable-at-startup <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>;; Do not allow loading from the package cache (same reason).</span>
</span></span><span style=display:flex><span>(setq package-quickstart <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Prevent the glimpse of un-styled Emacs by disabling these UI elements early.</span>
</span></span><span style=display:flex><span>(setq inhibit-startup-message <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq inhibit-splash-screen <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(push <span style=color:#f92672>&#39;</span>(menu-bar-lines <span style=color:#f92672>.</span> <span style=color:#ae81ff>0</span>) default-frame-alist)
</span></span><span style=display:flex><span>(push <span style=color:#f92672>&#39;</span>(tool-bar-lines <span style=color:#f92672>.</span> <span style=color:#ae81ff>0</span>) default-frame-alist)
</span></span><span style=display:flex><span>(push <span style=color:#f92672>&#39;</span>(vertical-scroll-bars) default-frame-alist)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Resizing the Emacs frame can be a terribly expensive part of changing the</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; font. By inhibiting this, we easily halve startup times with fonts that are</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; larger than the system default.</span>
</span></span><span style=display:flex><span>(setq frame-inhibit-implied-resize <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq inhibit-compacting-font-caches <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq use-file-dialog <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Make the initial buffer load faster by setting its mode to fundamental-mode</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (setq initial-major-mode &#39;fundamental-mode)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Prevent unwanted runtime builds in gccemacs (native-comp); packages are</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; compiled ahead-of-time when they are installed and site files are compiled</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; when gccemacs is installed.</span>
</span></span><span style=display:flex><span>(setq comp-deferred-compilation <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Disable mode-line, It&#39;s uglily after theme changed</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (setq-default mode-line-format nil)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; early-init.el ends here</span>
</span></span></code></pre></div><h3 id=borg-package-manage>Borg - Package manage<a hidden class=anchor aria-hidden=true href=#borg-package-manage>#</a></h3><p>Update:2022-03-06. 目前我使用 borg 和 leaf 管现我的 Emacs 配置文件， borg 很好的替代了 git submodule ，不用终端直接进行 Emacs 包的管理。 leaf 目前是作为 use-package 的替代品使用，其他的还有 setup.el ，但是目前没有深入的去探索。</p><p>Update:2022-03-07 能否剥离 leaf ？目前己全删除 leaf 相关包.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;load-path</span> (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;packages/borg&#34;</span> user-emacs-directory))
</span></span><span style=display:flex><span>(eval-and-compile
</span></span><span style=display:flex><span>  (require <span style=color:#e6db74>&#39;borg</span>)
</span></span><span style=display:flex><span>  (borg-initialize))
</span></span></code></pre></div><h3 id=start-and-close-emacs>Start and close emacs<a hidden class=anchor aria-hidden=true href=#start-and-close-emacs>#</a></h3><h4 id=speedup>Speedup<a hidden class=anchor aria-hidden=true href=#speedup>#</a></h4><p>该配置来自 <a href=https://github.com/seagle0128/.emacs.d/blob/master/init.el>Centaur Emacs</a> ，可以有效减少 Emacs 的启动时间，约 0.5s 。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq auto-mode-case-fold <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(unless (or (<span style=color:#a6e22e>daemonp</span>) noninteractive)
</span></span><span style=display:flex><span>  (let ((old-file-name-handler-alist file-name-handler-alist))
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; If `file-name-handler-alist&#39; is nil, no 256 colors in TUI</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; @see https://emacs-china.org/t/spacemacs-centaur-emacs/3802/839</span>
</span></span><span style=display:flex><span>    (setq file-name-handler-alist
</span></span><span style=display:flex><span>	  (unless (display-graphic-p)
</span></span><span style=display:flex><span>	    <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;\\(?:\\.tzst\\|\\.zst\\|\\.dz\\|\\.txz\\|\\.xz\\|\\.lzma\\|\\.lz\\|\\.g?z\\|\\.\\(?:tgz\\|svgz\\|sifz\\)\\|\\.tbz2?\\|\\.bz2\\|\\.Z\\)\\(?:~\\|\\.~[-[:alnum:]:#@^._]+\\(?:~[[:digit:]]+\\)?~\\)?\\&#39;&#34;</span> <span style=color:#f92672>.</span> jka-compr-handler))))
</span></span><span style=display:flex><span>    (add-hook <span style=color:#e6db74>&#39;emacs-startup-hook</span>
</span></span><span style=display:flex><span>	      (lambda ()
</span></span><span style=display:flex><span>		<span style=color:#e6db74>&#34;Recover file name handlers.&#34;</span>
</span></span><span style=display:flex><span>		(setq file-name-handler-alist
</span></span><span style=display:flex><span>		      (delete-dups (<span style=color:#a6e22e>append</span> file-name-handler-alist
</span></span><span style=display:flex><span>					   old-file-name-handler-alist)))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq gc-cons-threshold most-positive-fixnum
</span></span><span style=display:flex><span>      gc-cons-percentage <span style=color:#ae81ff>0.5</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;emacs-startup-hook</span>
</span></span><span style=display:flex><span>	  (lambda ()
</span></span><span style=display:flex><span>	    <span style=color:#e6db74>&#34;Recover GC values after startup.&#34;</span>
</span></span><span style=display:flex><span>	    (setq gc-cons-threshold <span style=color:#ae81ff>800000</span>
</span></span><span style=display:flex><span>		  gc-cons-percentage <span style=color:#ae81ff>0.1</span>)))
</span></span></code></pre></div><h4 id=gcmh>gcmh<a hidden class=anchor aria-hidden=true href=#gcmh>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(gcmh-mode)
</span></span></code></pre></div><h4 id=restart-emacs>restart-emacs<a hidden class=anchor aria-hidden=true href=#restart-emacs>#</a></h4><p>Never exit Emacs ！！！</p><p>防止自己误按 C-x C-c 导致 Emacs 退出， So stupid behavior 。 如果想要退出，使用 M-x save-buffers-kill-emacs 。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-x C-c&#34;</span>) <span style=color:#e6db74>&#39;restart-emacs</span>)
</span></span></code></pre></div><h3 id=personal-information>Personal information<a hidden class=anchor aria-hidden=true href=#personal-information>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq <span style=color:#a6e22e>user-full-name</span> <span style=color:#e6db74>&#34;DN&#34;</span>
</span></span><span style=display:flex><span>      user-mail-address <span style=color:#e6db74>&#34;duan_n@outlook.com&#34;</span>)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq auth-sources <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;~/.authinfo&#34;</span>))
</span></span><span style=display:flex><span><span style=color:#75715e>;; auth-source-cache-expiry nil)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (setq auth-sources &#39;(macos-keychain-generic))</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (setq auth-sources (quote (macos-keychain-internet macos-keychain-generic)))</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq epa-pinentry-mode <span style=color:#e6db74>&#39;loopback</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(pinentry-start)
</span></span></code></pre></div><h3 id=variables>Variables<a hidden class=anchor aria-hidden=true href=#variables>#</a></h3><p>自定义一些变量，方便配置文件位置或争对特定系统进行相关设定。</p><h4 id=folder>folder<a hidden class=anchor aria-hidden=true href=#folder>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defvar dn-cloud <span style=color:#e6db74>&#34;~/Nextcloud&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;This folder is My cloud.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defvar dn-galaxy (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;L.Personal.Galaxy&#34;</span> dn-cloud)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;This folder stores all the plain text files of my life.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defvar dn-roam (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;roam&#34;</span> dn-galaxy)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;This is the org-roam folder.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defvar dn-finance (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;finance&#34;</span> dn-galaxy)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;This folder stores all my finance files.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defvar dn-finance-year (<span style=color:#a6e22e>expand-file-name</span> (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%Y&#34;</span>) dn-finance)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;This folder stores all my finance files of current year.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defvar dn-pdf-storage (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;storage/pdf&#34;</span> dn-galaxy)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;This folder stores all the pdf files.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defvar dn-cache-directory <span style=color:#e6db74>&#34;~/.cache/emacs&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;This folder stores all EMACS cache file.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defvar dn-template-directory (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;template&#34;</span> (file-truename user-emacs-directory)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defvar default-search-engine-url <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;Google&#34;</span> <span style=color:#e6db74>&#34;www.google.com&#34;</span>))
</span></span></code></pre></div><h4 id=system-type>system type<a hidden class=anchor aria-hidden=true href=#system-type>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defvar sys-linux
</span></span><span style=display:flex><span>  (and (<span style=color:#a6e22e>eq</span> system-type <span style=color:#e6db74>&#39;gnu/linux</span>) (<span style=color:#a6e22e>null</span> (getenv <span style=color:#e6db74>&#34;ANDROID_ROOT&#34;</span>)))
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;GNU Emacs is running on Linux, not termux.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defvar sys-winp
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>eq</span> system-type <span style=color:#e6db74>&#39;windows-nt</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Are we running on a WinTel system?&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defvar sys-macp
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>eq</span> system-type <span style=color:#e6db74>&#39;darwin</span>)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Are we running on a mac system&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defvar sys-wslp
</span></span><span style=display:flex><span>  (and (<span style=color:#a6e22e>eq</span> system-type <span style=color:#e6db74>&#39;gnu/linux</span>)
</span></span><span style=display:flex><span>       (<span style=color:#a6e22e>string-match</span> <span style=color:#e6db74>&#34;-[Mm]icrosoft&#34;</span> operating-system-release))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Are we running on a GNU/Linux system?&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defvar sys-termuxp
</span></span><span style=display:flex><span>  (and (<span style=color:#a6e22e>eq</span> system-type <span style=color:#e6db74>&#39;gnu/linux</span>) (not (<span style=color:#a6e22e>null</span> (getenv <span style=color:#e6db74>&#34;ANDROID_ROOT&#34;</span>))))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;GNU Emacs is running on Termux, not Linux system.&#34;</span>)
</span></span></code></pre></div><h3 id=better-defaults>Better defaults<a hidden class=anchor aria-hidden=true href=#better-defaults>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(if (<span style=color:#a6e22e>boundp</span> <span style=color:#e6db74>&#39;use-short-answers</span>)
</span></span><span style=display:flex><span>    (setq use-short-answers <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>  (advice-add <span style=color:#e6db74>&#39;yes-or-no-p</span> :override <span style=color:#a6e22e>#&#39;</span>y-or-n-p))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq help-window-select <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq ring-bell-function <span style=color:#e6db74>&#39;ignore</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Do not saves duplicates in kill-ring</span>
</span></span><span style=display:flex><span>(customize-set-variable <span style=color:#e6db74>&#39;kill-do-not-save-duplicates</span> <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h4 id=system-code-type>system code type<a hidden class=anchor aria-hidden=true href=#system-code-type>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(prefer-coding-system <span style=color:#e6db74>&#39;utf-8</span>)
</span></span><span style=display:flex><span>(set-default-coding-systems <span style=color:#e6db74>&#39;utf-8</span>)
</span></span><span style=display:flex><span>(set-terminal-coding-system <span style=color:#e6db74>&#39;utf-8</span>)
</span></span><span style=display:flex><span>(set-keyboard-coding-system <span style=color:#e6db74>&#39;utf-8</span>)
</span></span></code></pre></div><h4 id=dialog-box>dialog box<a hidden class=anchor aria-hidden=true href=#dialog-box>#</a></h4><p>Never popup dialog box.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq use-dialog-box <span style=color:#66d9ef>nil</span>)
</span></span></code></pre></div><h4 id=define-fringe-bitmap>define-fringe-bitmap<a hidden class=anchor aria-hidden=true href=#define-fringe-bitmap>#</a></h4><p>Word wrap at window edge, hide the right and left curly arrow. So ugly.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(<span style=color:#a6e22e>define-fringe-bitmap</span> <span style=color:#e6db74>&#39;right-curly-arrow</span>  [])
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>define-fringe-bitmap</span> <span style=color:#e6db74>&#39;left-curly-arrow</span>  [])
</span></span></code></pre></div><h4 id=hide-mouse>hide mouse<a hidden class=anchor aria-hidden=true href=#hide-mouse>#</a></h4><p>Builtin function. Hide mouse when type.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(mouse-avoidance-mode <span style=color:#e6db74>&#39;banish</span>)
</span></span></code></pre></div><h4 id=builtin-modes>builtin modes<a hidden class=anchor aria-hidden=true href=#builtin-modes>#</a></h4><p>Emacs 有很多的内置 mode ，这些 mode 实现简单，功能很强大。这部份的详细介绍，可以参见 <a href=https://github.com/condy0919/emacs-newbie/blob/master/introduction-to-builtin-modes.md>Emacs builtin modes 功能介绍</a>。</p><ul><li><p>paren</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq show-paren-style <span style=color:#e6db74>&#39;mixed</span>
</span></span><span style=display:flex><span>      show-paren-when-point-inside-paren <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      show-paren-when-point-in-periphery <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(show-paren-mode)
</span></span></code></pre></div></li></ul><ul><li><p>elec-pair</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(electric-pair-mode)
</span></span></code></pre></div></li></ul><ul><li><p>linum</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq display-line-numbers <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;prog-mode-hook</span> <span style=color:#e6db74>&#39;display-line-numbers-mode</span>)
</span></span></code></pre></div></li></ul><ul><li><p>simple</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;; (eval-expression-print-length)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (eval-expression-print-level)</span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;after-init-hook</span> (lambda ()
</span></span><span style=display:flex><span>			     (line-number-mode)
</span></span><span style=display:flex><span>			     (column-number-mode)
</span></span><span style=display:flex><span>			     (size-indication-mode)))
</span></span></code></pre></div></li></ul><ul><li><p>bookmark</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq bookmark-default-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;storage/bookmarks&#34;</span> dn-galaxy))
</span></span></code></pre></div></li></ul><ul><li><p>autorevert</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(global-auto-revert-mode)
</span></span></code></pre></div></li></ul><ul><li><p>subword</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(global-subword-mode)
</span></span></code></pre></div></li></ul><ul><li><p>winner</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq winner-dont-bind-my-keys <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(winner-mode)
</span></span></code></pre></div></li></ul><ul><li><p>server</p><p>According to this <a href=https://emacshorrors.com/posts/determining-if-the-server-is-started-or-the-wonders-of-server-running-p.html>blog</a>, use <code>server-process</code> instead of <code>server-ruanning-p</code> 。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(unless (bound-and-true-p server-process)
</span></span><span style=display:flex><span>  (server-start))
</span></span></code></pre></div></li></ul><ul><li><p>prettify-symbols-mode</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq prettify-symbols-alist <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;lambda&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>?λ</span>)
</span></span><span style=display:flex><span>			       (<span style=color:#e6db74>&#34;function&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>?𝑓</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;prog-mode-hook</span> <span style=color:#e6db74>&#39;prettify-symbols-mode</span>)
</span></span></code></pre></div></li></ul><ul><li><p>so-long</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(global-so-long-mode)
</span></span></code></pre></div></li></ul><ul><li><p>delsel</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(delete-selection-mode)
</span></span></code></pre></div></li></ul><ul><li><p>webjump</p><p>基本用不上，我使用 google-this 这个包。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq webjump-sites <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;Emacs China&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;https://emacs-china.org&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		      (<span style=color:#e6db74>&#34;DuckDuckGo&#34;</span> <span style=color:#f92672>.</span> [simple-query <span style=color:#e6db74>&#34;duckduckgo.com&#34;</span>
</span></span><span style=display:flex><span>						    <span style=color:#e6db74>&#34;duckduckgo.com/?q=&#34;</span> <span style=color:#e6db74>&#34;&#34;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		      (<span style=color:#e6db74>&#34;Douban read&#34;</span> <span style=color:#f92672>.</span> [simple-query <span style=color:#e6db74>&#34;https://search.douban.com&#34;</span>
</span></span><span style=display:flex><span>						     <span style=color:#e6db74>&#34;https://search.douban.com/book/subject_search?search_text=&#34;</span> <span style=color:#e6db74>&#34;&#34;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		      (<span style=color:#e6db74>&#34;Google&#34;</span> <span style=color:#f92672>.</span> [simple-query <span style=color:#e6db74>&#34;https://www.google.com&#34;</span>
</span></span><span style=display:flex><span>						<span style=color:#e6db74>&#34;https://www.google.com/search?q=&#34;</span> <span style=color:#e6db74>&#34;&#34;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		      (<span style=color:#e6db74>&#34;Baidu&#34;</span> <span style=color:#f92672>.</span> [simple-query <span style=color:#e6db74>&#34;https://www.baidu.com&#34;</span>
</span></span><span style=display:flex><span>					       <span style=color:#e6db74>&#34;https://www.baidu.com/s?ie=utf-8&amp;wd=&#34;</span> <span style=color:#e6db74>&#34;&#34;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		      (<span style=color:#e6db74>&#34;Wikipedia&#34;</span> <span style=color:#f92672>.</span> [simple-query <span style=color:#e6db74>&#34;https://wikipedia.org&#34;</span>
</span></span><span style=display:flex><span>						   <span style=color:#e6db74>&#34;https://wikipedia.org/wiki/&#34;</span> <span style=color:#e6db74>&#34;&#34;</span>])))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;s-/&#34;</span>) <span style=color:#e6db74>&#39;webjump</span>)
</span></span></code></pre></div></li></ul><h4 id=large-file>large file<a hidden class=anchor aria-hidden=true href=#large-file>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq large-file-warning-threshold <span style=color:#66d9ef>nil</span>)
</span></span></code></pre></div><h4 id=custom-file>Custom file<a hidden class=anchor aria-hidden=true href=#custom-file>#</a></h4><p>Emacs 有时会将一些配置自动导入到此文件中。如果不配置，它会自动将配置附加到 init.el 文件中。我不喜欢这个文件，当其出现的时候，我会手动删除。也许可以写个 function 自动执行。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq custom-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;custom.el&#34;</span> user-emacs-directory))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (load custom-file t)</span>
</span></span></code></pre></div><h4 id=private-file>Private file<a hidden class=anchor aria-hidden=true href=#private-file>#</a></h4><p>私有配置不进行同步。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq private-file <span style=color:#e6db74>&#34;~/.emacs.d/private.el&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>load</span> private-file <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h2 id=user-interface>User interface<a hidden class=anchor aria-hidden=true href=#user-interface>#</a></h2><p>2022-03-07 目前我喜欢极简的界面。</p><h3 id=fonts>Fonts<a hidden class=anchor aria-hidden=true href=#fonts>#</a></h3><p>Update:2022-03-07 很想把 sarasa 这个字体去掉，但是目前还不知道怎么配置，主要是在 org-table 中要能实现中英文的等宽。另处我不想使用 cnfonts 或 valign 此类包。</p><p>Update:2022-03-08 仅在 org-table 中使用 sarasa 字根。目前没什么好的能够替代 <a href=https://github.com/be5invis/Sarasa-Gothic>sarasa</a> 的字体。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(set-face-attribute <span style=color:#e6db74>&#39;default</span> <span style=color:#66d9ef>nil</span> :family <span style=color:#e6db74>&#34;Sarasa Mono SC&#34;</span> :weight <span style=color:#e6db74>&#39;regular</span> :height <span style=color:#ae81ff>160</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#e6db74>&#39;han</span> (<span style=color:#a6e22e>font-spec</span> :name <span style=color:#e6db74>&#34;Source Han Serif SC&#34;</span> :size <span style=color:#ae81ff>16</span>))
</span></span></code></pre></div><h3 id=icon>Icon<a hidden class=anchor aria-hidden=true href=#icon>#</a></h3><h4 id=all-the-icons>all-the-icons<a hidden class=anchor aria-hidden=true href=#all-the-icons>#</a></h4><p>可以使 Emacs 显示 icon ，看上去更像是一个现代的编辑器。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;all-the-icons</span>)
</span></span></code></pre></div><h4 id=all-the-icons-completion>all-the-icons-completion<a hidden class=anchor aria-hidden=true href=#all-the-icons-completion>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(all-the-icons-completion-mode)
</span></span></code></pre></div><h4 id=kind-icon>kind-icon<a hidden class=anchor aria-hidden=true href=#kind-icon>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;kind-icon</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq kind-icon-default-face <span style=color:#e6db74>&#39;corfu-default</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;corfu</span>
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;corfu-margin-formatters</span> <span style=color:#a6e22e>#&#39;</span>kind-icon-margin-formatter))
</span></span></code></pre></div><h3 id=cursor>Cursor<a hidden class=anchor aria-hidden=true href=#cursor>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(blink-cursor-mode <span style=color:#ae81ff>-1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq-default cursor-in-non-selected-windows <span style=color:#66d9ef>nil</span>)
</span></span></code></pre></div><p>我 Fork 了 <a href=https://github.com/Jousimies/im-cursor-chg>im-cursor-chg</a> 这个包，对其做了一些修改，以实现主题切换时能自动切换光标颜色。</p><h4 id=cursor-color>cursor color<a hidden class=anchor aria-hidden=true href=#cursor-color>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq im-cursor-color <span style=color:#e6db74>&#34;Red&#34;</span>)
</span></span><span style=display:flex><span>(cursor-chg-mode)
</span></span></code></pre></div><h3 id=themes>Themes<a hidden class=anchor aria-hidden=true href=#themes>#</a></h3><p>我的默认主题是 modus-themes ，这个包的自定义性特别高，有黑白配色两套。</p><p>搭配 circadian 使用，可实现自动切换主题。</p><p>目前切换到了 Macos 上使用 Emacs ，<a href=https://github.com/d12frosted/homebrew-emacs-plus>Emacs-plus</a> 可根据系统主题自动切换 Emacs 主题。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq modus-themes-italic-constructs <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      modus-themes-bold-constructs <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>      modus-themes-region <span style=color:#f92672>&#39;</span>(bg-only no-extend)
</span></span><span style=display:flex><span>      modus-themes-lang-checkers <span style=color:#f92672>&#39;</span>(background text-also straight-underline)
</span></span><span style=display:flex><span>      modus-themes-links <span style=color:#f92672>&#39;</span>(italic background faint neutral-underline)
</span></span><span style=display:flex><span>      modus-themes-hl-line <span style=color:#f92672>&#39;</span>(accented intense)
</span></span><span style=display:flex><span>      modus-themes-paren-match <span style=color:#f92672>&#39;</span>(intense)
</span></span><span style=display:flex><span>      modus-themes-org-blocks <span style=color:#e6db74>&#39;tinted-background</span>
</span></span><span style=display:flex><span>      modus-themes-org-agenda <span style=color:#f92672>&#39;</span>((header-block <span style=color:#f92672>.</span> (variable-pitch <span style=color:#ae81ff>1.2</span>))
</span></span><span style=display:flex><span>				(habit <span style=color:#f92672>.</span> traffic-light))
</span></span><span style=display:flex><span>      modus-themes-headings <span style=color:#f92672>&#39;</span>((<span style=color:#66d9ef>t</span> <span style=color:#f92672>.</span> (rainbow))))
</span></span></code></pre></div><h4 id=override-color-for-distraction-free>Override color for distraction free<a hidden class=anchor aria-hidden=true href=#override-color-for-distraction-free>#</a></h4><p>搭配 centaur-tabs 使用，默认的 tab bar 主题是灰度的，我不喜欢，我把它修改成了与主题色相配的黑白色。
bg-main bg-dim 控制背景色。 magenta-nuanced-bg 控制 org-src block 的背景色。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq modus-themes-operandi-color-overrides <span style=color:#f92672>&#39;</span>((bg-main <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;#F2F0EF&#34;</span>)
</span></span><span style=display:flex><span>					      (bg-dim <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;#F2F0EF&#34;</span>)
</span></span><span style=display:flex><span>					      <span style=color:#75715e>;; (bg-hl-line . &#34;#F2F0EF&#34;)</span>
</span></span><span style=display:flex><span>					      <span style=color:#75715e>;; (bg-active . &#34;#F2F0EF&#34;)</span>
</span></span><span style=display:flex><span>					      <span style=color:#75715e>;; (bg-inactive . &#34;#ffffff&#34;)</span>
</span></span><span style=display:flex><span>					      <span style=color:#75715e>;; (bg-tab-bar . &#34;#F2F0EF&#34;)</span>
</span></span><span style=display:flex><span>					      <span style=color:#75715e>;; (bg-tab-active . &#34;#F2F0EF&#34;)</span>
</span></span><span style=display:flex><span>					      <span style=color:#75715e>;; (bg-tab-inactive . &#34;#F2F0EF&#34;)</span>
</span></span><span style=display:flex><span>					      <span style=color:#75715e>;; (blue . &#34;#252321&#34;)</span>
</span></span><span style=display:flex><span>					      (magenta-nuanced-bg <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;#FFFFFF&#34;</span>)
</span></span><span style=display:flex><span>					      ))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq modus-themes-vivendi-color-overrides <span style=color:#f92672>&#39;</span>((bg-main <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;#252321&#34;</span>)
</span></span><span style=display:flex><span>					     (bg-dim <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;#252321&#34;</span>)
</span></span><span style=display:flex><span>					     <span style=color:#75715e>;; (bg-hl-line . &#34;#252321&#34;)</span>
</span></span><span style=display:flex><span>					     <span style=color:#75715e>;; (bg-active . &#34;#252321&#34;)</span>
</span></span><span style=display:flex><span>					     <span style=color:#75715e>;; (bg-inactive . &#34;#615F5D&#34;)</span>
</span></span><span style=display:flex><span>					     <span style=color:#75715e>;; (bg-tab-bar . &#34;#252321&#34;)</span>
</span></span><span style=display:flex><span>					     <span style=color:#75715e>;; (bg-tab-active . &#34;#252321&#34;)</span>
</span></span><span style=display:flex><span>					     <span style=color:#75715e>;; (bg-tab-inactive . &#34;#252321&#34;)</span>
</span></span><span style=display:flex><span>					     <span style=color:#75715e>;; (blue . &#34;#F2F0EF&#34;)</span>
</span></span><span style=display:flex><span>					     (magenta-nuanced-bg <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;#615F5D&#34;</span>)
</span></span><span style=display:flex><span>					     ))
</span></span></code></pre></div><h4 id=theme-auto-change>Theme auto change<a hidden class=anchor aria-hidden=true href=#theme-auto-change>#</a></h4><ul><li><p>Theme change</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/apply-theme (appearance)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Load theme, taking current system APPEARANCE into consideration.&#34;</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>mapc</span> <span style=color:#a6e22e>#&#39;</span>disable-theme custom-enabled-themes)
</span></span><span style=display:flex><span>  (pcase appearance
</span></span><span style=display:flex><span>    (<span style=color:#e6db74>&#39;light</span> (load-theme <span style=color:#e6db74>&#39;modus-operandi</span> <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>    (<span style=color:#e6db74>&#39;dark</span> (load-theme <span style=color:#e6db74>&#39;modus-vivendi</span> <span style=color:#66d9ef>t</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;ns-system-appearance-change-functions</span> <span style=color:#a6e22e>#&#39;</span>my/apply-theme)
</span></span></code></pre></div></li></ul><h3 id=dashboard>Dashboard<a hidden class=anchor aria-hidden=true href=#dashboard>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq dashboard-startup-banner <span style=color:#e6db74>&#34;~/.emacs.d/banner.txt&#34;</span>
</span></span><span style=display:flex><span>      dashboard-center-content <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      dashboard-set-init-info <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      dashboard-set-file-icons <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      dashboard-modify-heading-icons <span style=color:#f92672>&#39;</span>((recents <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;file-text&#34;</span>)
</span></span><span style=display:flex><span>				       (bookmarks <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;book&#34;</span>))
</span></span><span style=display:flex><span>      dashboard-items <span style=color:#f92672>&#39;</span>((recents  <span style=color:#f92672>.</span> <span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>			(bookmarks <span style=color:#f92672>.</span> <span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>			(agenda <span style=color:#f92672>.</span> <span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>			(registers <span style=color:#f92672>.</span> <span style=color:#ae81ff>5</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq dashboard-set-navigator <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>#xe03d</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>#xe03d</span>) (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Material Icons&#34;</span>))
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>#xe051</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>#xe051</span>) (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Material Icons&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq dashboard-navigator-buttons
</span></span><span style=display:flex><span>      <span style=color:#f92672>`</span>(
</span></span><span style=display:flex><span>	((<span style=color:#f92672>,</span>(all-the-icons-octicon <span style=color:#e6db74>&#34;mark-github&#34;</span> :height <span style=color:#ae81ff>1</span> :v-adjust <span style=color:#ae81ff>0.0</span>)
</span></span><span style=display:flex><span>	  <span style=color:#e6db74>&#34;Homepage&#34;</span>
</span></span><span style=display:flex><span>	  <span style=color:#e6db74>&#34;Browse homepage&#34;</span>
</span></span><span style=display:flex><span>	  (lambda (<span style=color:#66d9ef>&amp;rest</span> _) (browse-url <span style=color:#e6db74>&#34;https://github.com/Jousimies/.emacs.d&#34;</span>)))
</span></span><span style=display:flex><span>	 (<span style=color:#f92672>,</span>(all-the-icons-octicon <span style=color:#e6db74>&#34;tools&#34;</span> :height <span style=color:#ae81ff>1</span> :v-adjust <span style=color:#ae81ff>0.0</span>)
</span></span><span style=display:flex><span>	  <span style=color:#e6db74>&#34;Settings&#34;</span> <span style=color:#e6db74>&#34;Open README file&#34;</span>
</span></span><span style=display:flex><span>	  (lambda (<span style=color:#66d9ef>&amp;rest</span> _) (find-file <span style=color:#e6db74>&#34;~/.emacs.d/README.org&#34;</span>)))
</span></span><span style=display:flex><span>	 (<span style=color:#f92672>,</span>(all-the-icons-faicon <span style=color:#e6db74>&#34;sitemap&#34;</span> :height <span style=color:#ae81ff>1</span> :v-adjust <span style=color:#ae81ff>0.0</span>)
</span></span><span style=display:flex><span>	  <span style=color:#e6db74>&#34;Blog&#34;</span> <span style=color:#e6db74>&#34;Browse Blog&#34;</span>
</span></span><span style=display:flex><span>	  (lambda (<span style=color:#66d9ef>&amp;rest</span> _) (browse-url <span style=color:#e6db74>&#34;https://jousimies.github.io&#34;</span>)))
</span></span><span style=display:flex><span>	 (<span style=color:#f92672>,</span>(all-the-icons-material <span style=color:#e6db74>&#34;queue_music&#34;</span> :height <span style=color:#ae81ff>1</span> :v-adjust <span style=color:#ae81ff>-0.2</span>)
</span></span><span style=display:flex><span>	  <span style=color:#e6db74>&#34;Music&#34;</span> <span style=color:#e6db74>&#34;Netease cloud music&#34;</span>
</span></span><span style=display:flex><span>	  (lambda (<span style=color:#66d9ef>&amp;rest</span> _) (netease-cloud-music))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq dashboard-footer-icon (all-the-icons-octicon <span style=color:#e6db74>&#34;dashboard&#34;</span>
</span></span><span style=display:flex><span>						   :height <span style=color:#ae81ff>1.1</span>
</span></span><span style=display:flex><span>						   :v-adjust <span style=color:#ae81ff>-0.05</span>
</span></span><span style=display:flex><span>						   :face <span style=color:#e6db74>&#39;font-lock-keyword-face</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq dashboard-footer-messages <span style=color:#f92672>`</span>(<span style=color:#f92672>,</span>(<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;Happy hacking, jousimies - Emacs &#34;</span>
</span></span><span style=display:flex><span>					   (all-the-icons-octicon <span style=color:#e6db74>&#34;heart&#34;</span>
</span></span><span style=display:flex><span>								  :height <span style=color:#ae81ff>1.1</span>
</span></span><span style=display:flex><span>								  :v-adjust <span style=color:#ae81ff>-0.05</span>)
</span></span><span style=display:flex><span>					   <span style=color:#e6db74>&#34; you!&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(dashboard-setup-startup-hook)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;&lt;f5&gt;&#34;</span>) <span style=color:#e6db74>&#39;dashboard-refresh-buffer</span>)
</span></span></code></pre></div><h3 id=rainbow-mode>rainbow-mode<a hidden class=anchor aria-hidden=true href=#rainbow-mode>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;prog-mode-hook</span> <span style=color:#e6db74>&#39;rainbow-mode</span>)
</span></span></code></pre></div><h3 id=helpful>helpful<a hidden class=anchor aria-hidden=true href=#helpful>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(global-set-key [remap describe-function] <span style=color:#e6db74>&#39;helpful-callable</span>)
</span></span><span style=display:flex><span>(global-set-key [remap describe-variable] <span style=color:#e6db74>&#39;helpful-variable</span>)
</span></span><span style=display:flex><span>(global-set-key [remap describe-key] <span style=color:#e6db74>&#39;helpful-key</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-h F&#34;</span>) <span style=color:#e6db74>&#39;helpful-function</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-h C&#34;</span>) <span style=color:#e6db74>&#39;helpful-command</span>)
</span></span></code></pre></div><h3 id=info-colors>info-colors<a hidden class=anchor aria-hidden=true href=#info-colors>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;Info-selection-hook</span> <span style=color:#e6db74>&#39;info-colors-fontify-node</span>)
</span></span></code></pre></div><h3 id=goggles>goggles<a hidden class=anchor aria-hidden=true href=#goggles>#</a></h3><blockquote><p>Goggles highlights the modified region using pulse. Currently the commands undo, yank, kill and delete are supported.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq-default goggles-pulse <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;prog-mode-hook</span> <span style=color:#e6db74>&#39;goggles-mode</span>)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;text-mode-hook</span> <span style=color:#e6db74>&#39;goggles-mode</span>)
</span></span></code></pre></div><h3 id=emojify>emojify<a hidden class=anchor aria-hidden=true href=#emojify>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;after-init-hook</span> <span style=color:#a6e22e>#&#39;</span>global-emojify-mode)
</span></span></code></pre></div><h3 id=svg>svg<a hidden class=anchor aria-hidden=true href=#svg>#</a></h3><p>将文字显示为图形，有很强的视觉效果，但是同时很容易使人分心，所以应该有所克制的使用此功能。 DISTRACT FREE ！！</p><h4 id=svg-lib>svg-lib<a hidden class=anchor aria-hidden=true href=#svg-lib>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq svg-lib-icons-dir (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;svg-lib&#34;</span> dn-cache-directory))
</span></span></code></pre></div><h4 id=define-gtd-keywords-faces>Define gtd keywords faces<a hidden class=anchor aria-hidden=true href=#define-gtd-keywords-faces>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defface gtd-next
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>((((background light))
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#1d9537&#34;</span>)
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#007d65&#34;</span>))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;GTD face.&#34;</span>
</span></span><span style=display:flex><span>  :group <span style=color:#e6db74>&#39;gtd-faces</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defface gtd-wait
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>((((background light))
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#dea32c&#34;</span>)
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#fcaf17&#34;</span>))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;GTD face.&#34;</span>
</span></span><span style=display:flex><span>  :group <span style=color:#e6db74>&#39;gtd-faces</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defface gtd-someday
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>((((background light))
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#7d5886&#34;</span>)
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#c77eb5&#34;</span>))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;GTD face.&#34;</span>
</span></span><span style=display:flex><span>  :group <span style=color:#e6db74>&#39;gtd-faces</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defface gtd-cncl
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>((((background light))
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#999d9c&#34;</span>)
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#4f5555&#34;</span>))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;GTD face.&#34;</span>
</span></span><span style=display:flex><span>  :group <span style=color:#e6db74>&#39;gtd-faces</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defface gtd-a
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>((((background light))
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#f05b72&#34;</span>)
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#f58f98&#34;</span>))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;GTD face.&#34;</span>
</span></span><span style=display:flex><span>  :group <span style=color:#e6db74>&#39;gtd-faces</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defface gtd-b
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>((((background light))
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#1d9537&#34;</span>)
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#007d65&#34;</span>))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;GTD face.&#34;</span>
</span></span><span style=display:flex><span>  :group <span style=color:#e6db74>&#39;gtd-faces</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defface gtd-c
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>((((background light))
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#999d9c&#34;</span>)
</span></span><span style=display:flex><span>    (<span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#4f5555&#34;</span>))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;GTD face.&#34;</span>
</span></span><span style=display:flex><span>  :group <span style=color:#e6db74>&#39;gtd-faces</span>)
</span></span></code></pre></div><h4 id=svg-tag-mode>svg-tag-mode<a hidden class=anchor aria-hidden=true href=#svg-tag-mode>#</a></h4><p><code>svg-tag-mode</code> 没有 autoload ，所以需要显式的 require 此包。不能使用 <code>global-svg-tag-mode~，目前己知的问题是会导致 ~netease-cloud-musci</code> 报 numperp 的错误。 mu4e 中的图标显示成灰度图像。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;svg-tag-mode</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defconst date-re <span style=color:#e6db74>&#34;[0-9]\\{4\\}-[0-9]\\{2\\}-[0-9]\\{2\\}&#34;</span>)
</span></span><span style=display:flex><span>(defconst time-re <span style=color:#e6db74>&#34;[0-9]\\{2\\}:[0-9]\\{2\\}&#34;</span>)
</span></span><span style=display:flex><span>(defconst day-re <span style=color:#e6db74>&#34;[A-Za-z]\\{3\\}&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun svg-progress-count (value)
</span></span><span style=display:flex><span>  (let* ((seq (<span style=color:#a6e22e>mapcar</span> <span style=color:#a6e22e>#&#39;string-to-number</span> (split-string value <span style=color:#e6db74>&#34;/&#34;</span>)))
</span></span><span style=display:flex><span>	 (count (<span style=color:#a6e22e>float</span> (<span style=color:#a6e22e>car</span> seq)))
</span></span><span style=display:flex><span>	 (total (<span style=color:#a6e22e>float</span> (cadr seq))))
</span></span><span style=display:flex><span>  (svg-image (svg-lib-concat
</span></span><span style=display:flex><span>	      (svg-lib-progress-bar (<span style=color:#a6e22e>/</span> count total) <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>				    :margin <span style=color:#ae81ff>0</span> :stroke <span style=color:#ae81ff>2</span> :radius <span style=color:#ae81ff>3</span> :padding <span style=color:#ae81ff>2</span> :width <span style=color:#ae81ff>11</span>)
</span></span><span style=display:flex><span>	      (svg-lib-tag value <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>			   :stroke <span style=color:#ae81ff>2</span> :padding <span style=color:#ae81ff>2</span> :margin <span style=color:#ae81ff>1</span>)) :ascent <span style=color:#e6db74>&#39;center</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq svg-tag-tags
</span></span><span style=display:flex><span>      <span style=color:#f92672>`</span>((<span style=color:#e6db74>&#34;TODO&#34;</span> <span style=color:#f92672>.</span> ((lambda (tag) (svg-tag-make <span style=color:#e6db74>&#34;TODO&#34;</span> :face <span style=color:#e6db74>&#39;org-todo</span> :inverse <span style=color:#66d9ef>t</span> :margin <span style=color:#ae81ff>0</span>))))
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;NEXT&#34;</span> <span style=color:#f92672>.</span> ((lambda (tag) (svg-tag-make <span style=color:#e6db74>&#34;NEXT&#34;</span> :face <span style=color:#e6db74>&#39;gtd-next</span> :inverse <span style=color:#66d9ef>t</span> :margin <span style=color:#ae81ff>0</span>))))
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;WAIT&#34;</span> <span style=color:#f92672>.</span> ((lambda (tag) (svg-tag-make <span style=color:#e6db74>&#34;WAIT&#34;</span> :face <span style=color:#e6db74>&#39;gtd-wait</span> :inverse <span style=color:#66d9ef>t</span> :margin <span style=color:#ae81ff>0</span>))))
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;SOMEDAY&#34;</span> <span style=color:#f92672>.</span> ((lambda (tag) (svg-tag-make <span style=color:#e6db74>&#34;SOMEDAY&#34;</span> :face <span style=color:#e6db74>&#39;gtd-someday</span> :inverse <span style=color:#66d9ef>t</span> :margin <span style=color:#ae81ff>0</span>))))
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;CNCL&#34;</span> <span style=color:#f92672>.</span> ((lambda (tag) (svg-tag-make <span style=color:#e6db74>&#34;CNCL&#34;</span> :face <span style=color:#e6db74>&#39;gtd-cncl</span> :inverse <span style=color:#66d9ef>t</span> :margin <span style=color:#ae81ff>0</span>))))
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;DONE&#34;</span> <span style=color:#f92672>.</span> ((lambda (tag) (svg-tag-make <span style=color:#e6db74>&#34;DONE&#34;</span> :face <span style=color:#e6db74>&#39;org-done</span> :margin <span style=color:#ae81ff>0</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;\\[#[A]\\]&#34;</span> <span style=color:#f92672>.</span> ( (lambda (tag)
</span></span><span style=display:flex><span>			      (svg-tag-make tag :face <span style=color:#e6db74>&#39;gtd-a</span>
</span></span><span style=display:flex><span>					    :inverse <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>					    :beg <span style=color:#ae81ff>2</span> :end <span style=color:#ae81ff>-1</span> :margin <span style=color:#ae81ff>0</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;\\[#[B]\\]&#34;</span> <span style=color:#f92672>.</span> ( (lambda (tag)
</span></span><span style=display:flex><span>			      (svg-tag-make tag :face <span style=color:#e6db74>&#39;gtd-b</span>
</span></span><span style=display:flex><span>					    :inverse <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>					    :beg <span style=color:#ae81ff>2</span> :end <span style=color:#ae81ff>-1</span> :margin <span style=color:#ae81ff>0</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;\\[#[C]\\]&#34;</span> <span style=color:#f92672>.</span> ( (lambda (tag)
</span></span><span style=display:flex><span>			      (svg-tag-make tag :face <span style=color:#e6db74>&#39;gtd-c</span>
</span></span><span style=display:flex><span>					    :inverse <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>					    :beg <span style=color:#ae81ff>2</span> :end <span style=color:#ae81ff>-1</span> :margin <span style=color:#ae81ff>0</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;\\(\\[[0-9]+/[0-9]+\\]\\)&#34;</span> <span style=color:#f92672>.</span> ((lambda (tag)
</span></span><span style=display:flex><span>					  (svg-progress-count (<span style=color:#a6e22e>substring</span> tag <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>-1</span>)))))
</span></span><span style=display:flex><span>	))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;svg-tag-mode</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>;; (global-svg-tag-mode)</span>
</span></span></code></pre></div><h4 id=auto-update-svg-tag>Auto update svg-tag<a hidden class=anchor aria-hidden=true href=#auto-update-svg-tag>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(advice-add <span style=color:#e6db74>&#39;modus-themes-toggle</span> :after <span style=color:#e6db74>&#39;svg-tag-mode-on</span>)
</span></span><span style=display:flex><span>(advice-add <span style=color:#e6db74>&#39;circadian-activate-latest-theme</span> :after <span style=color:#e6db74>&#39;svg-tag-mode-on</span>)
</span></span></code></pre></div><h3 id=lin>lin<a hidden class=anchor aria-hidden=true href=#lin>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq lin-face <span style=color:#e6db74>&#39;lin-blue</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq lin-mode-hooks <span style=color:#f92672>&#39;</span>(bongo-mode-hook
</span></span><span style=display:flex><span>		       dired-mode-hook
</span></span><span style=display:flex><span>		       elfeed-search-mode-hook
</span></span><span style=display:flex><span>		       elfeed-summary-mode-hook
</span></span><span style=display:flex><span>		       elfeed-show-mode-hook
</span></span><span style=display:flex><span>		       git-rebase-mode-hook
</span></span><span style=display:flex><span>		       grep-mode-hook
</span></span><span style=display:flex><span>		       ibuffer-mode-hook
</span></span><span style=display:flex><span>		       ilist-mode-hook
</span></span><span style=display:flex><span>		       pdf-outline-minor-mode-hook
</span></span><span style=display:flex><span>		       ledger-report-mode-hook
</span></span><span style=display:flex><span>		       log-view-mode-hook
</span></span><span style=display:flex><span>		       magit-log-mode-hook
</span></span><span style=display:flex><span>		       mu4e-headers-mode
</span></span><span style=display:flex><span>		       notmuch-search-mode-hook
</span></span><span style=display:flex><span>		       notmuch-tree-mode-hook
</span></span><span style=display:flex><span>		       occur-mode-hook
</span></span><span style=display:flex><span>		       elfeed-show-mode-hook
</span></span><span style=display:flex><span>		       org-agenda-mode-hook
</span></span><span style=display:flex><span>		       proced-mode-hook
</span></span><span style=display:flex><span>		       ebib-entry-mode-hook
</span></span><span style=display:flex><span>		       ebib-index-mode-hook
</span></span><span style=display:flex><span>		       netease-cloud-music-mode-hook
</span></span><span style=display:flex><span>		       tabulated-list-mode-hook))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(lin-global-mode <span style=color:#ae81ff>1</span>)
</span></span></code></pre></div><h3 id=frame-management>Frame management<a hidden class=anchor aria-hidden=true href=#frame-management>#</a></h3><h4 id=fullscreen>Fullscreen<a hidden class=anchor aria-hidden=true href=#fullscreen>#</a></h4><p>我总是全屏使用 Emacs。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(toggle-frame-fullscreen)
</span></span></code></pre></div><h4 id=quit-and-delete-window>Quit and delete window<a hidden class=anchor aria-hidden=true href=#quit-and-delete-window>#</a></h4><p>删除窗口，而不是只是隐藏它，见 <a href=https://www.reddit.com/r/emacs/comments/t1rvbd/help_wanted_emacs_doesnt_really_deletes_special/>Reddit</a> 。</p><p>这个对于一些临时 buffer 很有用，使用 ESC 进行最近 buffer 切换时，就不会出现不想要的 buffer ，如 \*fanyi\*, \*G0-Translator\* \*help\* 等。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun quit-window-delete (<span style=color:#66d9ef>&amp;optional</span> kill window)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Quit WINDOW, deleting it, and bury its buffer.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>WINDOW must be a live window and defaults to the selected one.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>With prefix argument KILL non-nil, kill the buffer instead of
</span></span></span><span style=display:flex><span><span style=color:#e6db74>burying it.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>This is similar to the version of </span><span style=color:#e6db74>`quit-window&#39;</span><span style=color:#e6db74> that Emacs had before
</span></span></span><span style=display:flex><span><span style=color:#e6db74>the introduction of </span><span style=color:#e6db74>`quit-restore-window&#39;</span><span style=color:#e6db74>.  It ignores the information
</span></span></span><span style=display:flex><span><span style=color:#e6db74>stored in WINDOW&#39;s </span><span style=color:#e6db74>`quit-restore&#39;</span><span style=color:#e6db74> window parameter.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>It deletes the WINDOW more often, rather than switching to another
</span></span></span><span style=display:flex><span><span style=color:#e6db74>buffer in it.  If WINDOW is alone in its frame then the frame is
</span></span></span><span style=display:flex><span><span style=color:#e6db74>deleted or iconified, according to option </span><span style=color:#e6db74>`frame-auto-hide-function&#39;</span><span style=color:#e6db74>.&#34;</span>
</span></span><span style=display:flex><span>  (interactive <span style=color:#e6db74>&#34;P&#34;</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>set-window-parameter</span> window <span style=color:#e6db74>&#39;quit-restore</span> <span style=color:#f92672>`</span>(frame frame <span style=color:#66d9ef>nil</span> <span style=color:#f92672>,</span>(<span style=color:#a6e22e>current-buffer</span>)))
</span></span><span style=display:flex><span>  (quit-restore-window window (if kill <span style=color:#e6db74>&#39;kill</span> <span style=color:#e6db74>&#39;bury</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key [remap quit-window] <span style=color:#e6db74>&#39;quit-window-delete</span>)
</span></span><span style=display:flex><span>(global-set-key [remap meow-quit] <span style=color:#e6db74>&#39;quit-window-delete</span>)
</span></span></code></pre></div><h4 id=scroll-other-window>Scroll other window<a hidden class=anchor aria-hidden=true href=#scroll-other-window>#</a></h4><p>这个在并排使用两个 buffer 的时候很好用。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun dn/scroll-other-windown-down ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Scroll other window down.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (scroll-other-window-down <span style=color:#ae81ff>2</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun dn/scroll-other-windown ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Scroll other window up.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>scroll-other-window</span> <span style=color:#ae81ff>2</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;M-n&#34;</span>) <span style=color:#e6db74>&#39;dn/scroll-other-windown</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;M-p&#34;</span>) <span style=color:#e6db74>&#39;dn/scroll-other-windown-down</span>)
</span></span></code></pre></div><h4 id=org-src>Org-src<a hidden class=anchor aria-hidden=true href=#org-src>#</a></h4><p>默认是在右侧打开编辑 buffer ，我的屏幕小，所以我选择当前窗口打开编辑 buffer 。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;org</span>
</span></span><span style=display:flex><span>  (setq org-src-window-setup <span style=color:#e6db74>&#39;current-window</span>))
</span></span></code></pre></div><h4 id=display-buffer-alist>display-buffer-alist<a hidden class=anchor aria-hidden=true href=#display-buffer-alist>#</a></h4><p>我选择使用 display-buffer-alist 进行窗口的管理，有一些包如 popup ， shackle 等也可以使用。</p><ul><li><p>one-key buffer</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq display-buffer-alist
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;*One-Key*&#34;</span>
</span></span><span style=display:flex><span>	(display-buffer-reuse-window
</span></span><span style=display:flex><span>	 display-buffer-in-side-window)
</span></span><span style=display:flex><span>	(side <span style=color:#f92672>.</span> bottom)
</span></span><span style=display:flex><span>	(reusable-frames <span style=color:#f92672>.</span> visible)
</span></span><span style=display:flex><span>	(<span style=color:#a6e22e>window-parameters</span>
</span></span><span style=display:flex><span>	 (select <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>	 (quit <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>	 (popup <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>	 (mode-line-format <span style=color:#f92672>.</span> none)
</span></span><span style=display:flex><span>	 (tab-line-format <span style=color:#f92672>.</span> none)))))
</span></span></code></pre></div></li></ul><ul><li><p>eshell buffer</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>	     <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;*eshell*&#34;</span>
</span></span><span style=display:flex><span>	       (display-buffer-reuse-window
</span></span><span style=display:flex><span>		display-buffer-in-side-window)
</span></span><span style=display:flex><span>	       (side <span style=color:#f92672>.</span> bottom)
</span></span><span style=display:flex><span>	       (window-height <span style=color:#f92672>.</span> <span style=color:#ae81ff>0.8</span>)
</span></span><span style=display:flex><span>	       (slot <span style=color:#f92672>.</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>	       (<span style=color:#a6e22e>window-parameters</span>
</span></span><span style=display:flex><span>		(mode-line-format <span style=color:#f92672>.</span> none)
</span></span><span style=display:flex><span>		(tab-line-format <span style=color:#f92672>.</span> none))))
</span></span></code></pre></div></li></ul><ul><li><p>help buffer</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>	     <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;*Help*&#34;</span>
</span></span><span style=display:flex><span>	       (display-buffer-in-side-window)
</span></span><span style=display:flex><span>	       (side <span style=color:#f92672>.</span> right)
</span></span><span style=display:flex><span>	       (window-width <span style=color:#f92672>.</span> <span style=color:#ae81ff>0.5</span>)
</span></span><span style=display:flex><span>	       (slot <span style=color:#f92672>.</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>	       (<span style=color:#a6e22e>window-parameters</span>
</span></span><span style=display:flex><span>		(mode-line-format <span style=color:#f92672>.</span> none)
</span></span><span style=display:flex><span>		(tab-line-format <span style=color:#f92672>.</span> none))))
</span></span></code></pre></div></li></ul><ul><li><p>org-roam buffer</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>	     <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;\\*org-roam\\*&#34;</span>
</span></span><span style=display:flex><span>	       (display-buffer-in-direction)
</span></span><span style=display:flex><span>	       (direction <span style=color:#f92672>.</span> right)
</span></span><span style=display:flex><span>	       (window-width <span style=color:#f92672>.</span> <span style=color:#ae81ff>0.25</span>)
</span></span><span style=display:flex><span>	       (window-height <span style=color:#f92672>.</span> fit-window-to-buffer)
</span></span><span style=display:flex><span>	       (<span style=color:#a6e22e>window-parameters</span>
</span></span><span style=display:flex><span>		(mode-line-format <span style=color:#f92672>.</span> none)
</span></span><span style=display:flex><span>		(tab-line-format <span style=color:#f92672>.</span> none))))
</span></span></code></pre></div></li></ul><ul><li><p>Ilist buffer</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;display-buffer-alist</span>
</span></span><span style=display:flex><span>	     <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;*Ilist*&#34;</span>
</span></span><span style=display:flex><span>	       (display-buffer-in-side-window)
</span></span><span style=display:flex><span>	       (side <span style=color:#f92672>.</span> right)
</span></span><span style=display:flex><span>	       (window-width <span style=color:#f92672>.</span> <span style=color:#ae81ff>0.3</span>)
</span></span><span style=display:flex><span>	       (slot <span style=color:#f92672>.</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>	       (<span style=color:#a6e22e>window-parameters</span>
</span></span><span style=display:flex><span>		(mode-line-format <span style=color:#f92672>.</span> none)
</span></span><span style=display:flex><span>		(tab-line-format <span style=color:#f92672>.</span> none))))
</span></span></code></pre></div></li></ul><h3 id=awesome-tray>Awesome Tray<a hidden class=anchor aria-hidden=true href=#awesome-tray>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq awesome-tray-active-modules <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;buffer-name&#34;</span> <span style=color:#e6db74>&#34;input-method&#34;</span> <span style=color:#e6db74>&#34;date&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(awesome-tray-mode <span style=color:#ae81ff>1</span>)
</span></span></code></pre></div><h4 id=awesome-try-and-and-meow-state>awesome try && meow state<a hidden class=anchor aria-hidden=true href=#awesome-try-and-and-meow-state>#</a></h4><p>Copy from <a href=https://emacs-china.org/t/awesome-tray-emacs-mode-line/7250/148>https://emacs-china.org/t/awesome-tray-emacs-mode-line/7250/148</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun awesome-tray-module-meow-info ()
</span></span><span style=display:flex><span>  (string-trim (meow-indicator)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;awesome-tray-module-alist</span>
</span></span><span style=display:flex><span>	     <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;meow&#34;</span> <span style=color:#f92672>.</span> (awesome-tray-module-meow-info awesome-tray-module-evil-face)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;awesome-tray-active-modules</span> <span style=color:#e6db74>&#34;meow&#34;</span>)
</span></span></code></pre></div><h4 id=awesome-tray-and-and-mu4e-unread>awesome tray && mu4e unread<a hidden class=anchor aria-hidden=true href=#awesome-tray-and-and-mu4e-unread>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;mu4e-alert</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; Copied from mu4e-alert</span>
</span></span><span style=display:flex><span>  (defun mu4e-alert-enable-tray-display ()
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Enable display of unread emails in mode-line.&#34;</span>
</span></span><span style=display:flex><span>    (interactive)
</span></span><span style=display:flex><span>    (add-hook <span style=color:#e6db74>&#39;mu4e-index-updated-hook</span> <span style=color:#a6e22e>#&#39;</span>mu4e-alert-update-mail-count-modeline)
</span></span><span style=display:flex><span>    (add-hook <span style=color:#e6db74>&#39;mu4e-message-changed-hook</span> <span style=color:#a6e22e>#&#39;</span>mu4e-alert-update-mail-count-modeline)
</span></span><span style=display:flex><span>    (advice-add <span style=color:#a6e22e>#&#39;</span>mu4e-context-switch :around <span style=color:#a6e22e>#&#39;</span>mu4e-alert--context-switch)
</span></span><span style=display:flex><span>    (mu4e-alert-update-mail-count-modeline))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (mu4e-alert-enable-tray-display)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (defun awesome-tray-module-mail-info ()
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;EMAIL:&#34;</span> (<span style=color:#a6e22e>substring</span> mu4e-alert-mode-line <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>9</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;awesome-tray-module-alist</span>
</span></span><span style=display:flex><span>	       <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;mail&#34;</span> <span style=color:#f92672>.</span> (awesome-tray-module-mail-info awesome-tray-module-belong-face)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;awesome-tray-active-modules</span> <span style=color:#e6db74>&#34;mail&#34;</span>))
</span></span></code></pre></div><h4 id=update-awesome-tray-status>Update awesome tray status<a hidden class=anchor aria-hidden=true href=#update-awesome-tray-status>#</a></h4><p>Enable awesome tray when theme changed。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defvar after-load-theme-hook <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Hook run after a color theme is loaded using </span><span style=color:#e6db74>`load-theme&#39;</span><span style=color:#e6db74>.&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defadvice load-theme (after run-after-load-theme-hook activate)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Run </span><span style=color:#e6db74>`after-load-theme-hook&#39;</span><span style=color:#e6db74>.&#34;</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>run-hooks</span> <span style=color:#e6db74>&#39;after-load-theme-hook</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;after-load-theme-hook</span> <span style=color:#e6db74>&#39;awesome-tray-enable</span> <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h2 id=editor-enhancement-c-dot-r-dot-u-dot-d>Editor Enhancement &ndash; C.R.U.D<a hidden class=anchor aria-hidden=true href=#editor-enhancement-c-dot-r-dot-u-dot-d>#</a></h2><p>编辑器的功能是为了更好的增删改查。</p><h3 id=rime>rime<a hidden class=anchor aria-hidden=true href=#rime>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq rime-librime-root <span style=color:#e6db74>&#34;~/.emacs.d/librime/dist&#34;</span>
</span></span><span style=display:flex><span>      rime-emacs-module-header-root <span style=color:#e6db74>&#34;/opt/homebrew/opt/emacs-plus@28/include&#34;</span>
</span></span><span style=display:flex><span>      rime-user-data-dir <span style=color:#e6db74>&#34;~/Library/Rime/&#34;</span>
</span></span><span style=display:flex><span>      default-input-method <span style=color:#e6db74>&#34;rime&#34;</span>
</span></span><span style=display:flex><span>      rime-show-candidate <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq rime-disable-predicates <span style=color:#f92672>&#39;</span>(meow-normal-mode-p
</span></span><span style=display:flex><span>				meow-motion-mode-p
</span></span><span style=display:flex><span>				meow-keypad-mode-p
</span></span><span style=display:flex><span>				rime-predicate-prog-in-code-p
</span></span><span style=display:flex><span>				rime-predicate-org-in-src-block-p
</span></span><span style=display:flex><span>				rime-predicate-current-uppercase-letter-p))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq rime-inline-predicates <span style=color:#f92672>&#39;</span>(rime-predicate-space-after-cc-p
</span></span><span style=display:flex><span>			       rime-predicate-after-alphabet-char-p))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> (lambda () (set-input-method <span style=color:#e6db74>&#34;rime&#34;</span>)))
</span></span></code></pre></div><h3 id=rime-regexp>rime-regexp<a hidden class=anchor aria-hidden=true href=#rime-regexp>#</a></h3><p>使用拼音进行中文的检索。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(rime-regexp-mode)
</span></span></code></pre></div><h3 id=autoinsert>autoinsert<a hidden class=anchor aria-hidden=true href=#autoinsert>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(define-auto-insert
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>cons</span> <span style=color:#e6db74>&#34;init-.*\\.el&#34;</span> <span style=color:#e6db74>&#34;Emacs Lisp Skeleton&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;Emacs Configuration Description: &#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;;;;; &#34;</span> (<span style=color:#a6e22e>file-name-nondirectory</span> (<span style=color:#a6e22e>buffer-file-name</span>)) <span style=color:#e6db74>&#34; --- &#34;</span> str
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>make-string</span> (<span style=color:#a6e22e>max</span> <span style=color:#ae81ff>2</span> (<span style=color:#a6e22e>-</span> <span style=color:#ae81ff>80</span> (<span style=color:#a6e22e>current-column</span>) <span style=color:#ae81ff>27</span>)) <span style=color:#e6db74>?\s</span>)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;-*- lexical-binding: t; -*-&#34;</span> <span style=color:#f92672>&#39;</span>(setq lexical-binding <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>;; Copyright (C) &#34;</span> (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%Y&#34;</span>) <span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>;;; Commentary:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>;; &#34;</span> _ <span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>;;; Code:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>(provide &#39;&#34;</span>
</span></span><span style=display:flex><span>    (file-name-base (<span style=color:#a6e22e>buffer-file-name</span>))
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;)
</span></span></span><span style=display:flex><span><span style=color:#e6db74>;;; &#34;</span> (<span style=color:#a6e22e>file-name-nondirectory</span> (<span style=color:#a6e22e>buffer-file-name</span>)) <span style=color:#e6db74>&#34; ends here\n&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(auto-insert-mode)
</span></span></code></pre></div><h3 id=embrace>embrace<a hidden class=anchor aria-hidden=true href=#embrace>#</a></h3><p>这个包很方便的对文本进行括号的增删改。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;embrace</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(set-face-attribute <span style=color:#e6db74>&#39;embrace-help-pair-face</span> <span style=color:#66d9ef>nil</span> :inherit font-lock-function-name-face :inverse-video <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-,&#34;</span>) <span style=color:#e6db74>&#39;embrace-commander</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun embrace-org-mode-hook ()
</span></span><span style=display:flex><span>  (dolist (lst <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>?=</span> <span style=color:#e6db74>&#34; =&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;= &#34;</span>)
</span></span><span style=display:flex><span>		 (<span style=color:#e6db74>?~</span> <span style=color:#e6db74>&#34; ~&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;~ &#34;</span>)
</span></span><span style=display:flex><span>		 (<span style=color:#e6db74>?/</span> <span style=color:#e6db74>&#34; /&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;/ &#34;</span>)
</span></span><span style=display:flex><span>		 (<span style=color:#e6db74>?*</span> <span style=color:#e6db74>&#34; *&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;* &#34;</span>)
</span></span><span style=display:flex><span>		 (<span style=color:#e6db74>?_</span> <span style=color:#e6db74>&#34; _&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;_ &#34;</span>)
</span></span><span style=display:flex><span>		 (<span style=color:#e6db74>?+</span> <span style=color:#e6db74>&#34; +&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;+ &#34;</span>)
</span></span><span style=display:flex><span>		 (<span style=color:#e6db74>?k</span> <span style=color:#e6db74>&#34;@@html:&lt;kbd&gt;@@&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;@@html:&lt;/kbd&gt;@@&#34;</span>)))
</span></span><span style=display:flex><span>    (embrace-add-pair (<span style=color:#a6e22e>car</span> lst) (cadr lst) (cddr lst))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;embrace-org-mode-hook</span>)
</span></span></code></pre></div><h3 id=recent-file>recent file<a hidden class=anchor aria-hidden=true href=#recent-file>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;after-init-hook</span> <span style=color:#a6e22e>#&#39;</span>recentf-mode)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;kill-emacs-hook</span> <span style=color:#a6e22e>#&#39;</span>recentf-cleanup)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq recentf-save-file <span style=color:#e6db74>&#34;/Users/duanning/.cache/emacs/recentf&#34;</span>
</span></span><span style=display:flex><span>      recentf-max-saved-items <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>      recentf-exclude <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;[0-9]*-.*.org&#34;</span> <span style=color:#e6db74>&#34;slipbox&#34;</span> <span style=color:#e6db74>&#34;todos&#34;</span> <span style=color:#e6db74>&#34;recentf&#34;</span> <span style=color:#e6db74>&#34;M.Calibre&#34;</span> <span style=color:#e6db74>&#34;.elfeed&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq recentf-auto-cleanup (if (<span style=color:#a6e22e>daemonp</span>)
</span></span><span style=display:flex><span>			       <span style=color:#ae81ff>300</span>))
</span></span></code></pre></div><h3 id=dired-mode>dired-mode<a hidden class=anchor aria-hidden=true href=#dired-mode>#</a></h3><h4 id=files>files<a hidden class=anchor aria-hidden=true href=#files>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(make-directory (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;backups/&#34;</span> dn-cache-directory) <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq confirm-kill-processes <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq backup-directory-alist <span style=color:#f92672>`</span>((<span style=color:#e6db74>&#34;.&#34;</span> <span style=color:#f92672>.</span> <span style=color:#f92672>,</span>(<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;backups/&#34;</span> dn-cache-directory))))
</span></span></code></pre></div><h4 id=dired>dired<a hidden class=anchor aria-hidden=true href=#dired>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq dired-recursive-deletes <span style=color:#e6db74>&#39;always</span>
</span></span><span style=display:flex><span>      dired-recursive-copies <span style=color:#e6db74>&#39;always</span>
</span></span><span style=display:flex><span>      global-auto-revert-non-file-buffers <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      auto-revert-verbose <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>      dired-dwim-target <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      delete-by-moving-to-trash <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      load-prefer-newer <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      auto-revert-use-notify <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>      auto-revert-interval <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>      insert-directory-program <span style=color:#e6db74>&#34;gls&#34;</span> dired-use-ls-dired <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      dired-listing-switches <span style=color:#e6db74>&#34;-al --group-directories-first&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>put</span> <span style=color:#e6db74>&#39;dired-find-alternate-file</span> <span style=color:#e6db74>&#39;disabled</span> <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;dired</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> dired-mode-map (kbd <span style=color:#e6db74>&#34;P&#34;</span>) <span style=color:#e6db74>&#39;peep-dired</span>))
</span></span></code></pre></div><h4 id=dired-x>dired-x<a hidden class=anchor aria-hidden=true href=#dired-x>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-x C-j&#34;</span>) <span style=color:#e6db74>&#39;dired-jump</span>)
</span></span></code></pre></div><h4 id=diredfl>diredfl<a hidden class=anchor aria-hidden=true href=#diredfl>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(diredfl-global-mode)
</span></span></code></pre></div><h4 id=peep-dired>peep-dired<a hidden class=anchor aria-hidden=true href=#peep-dired>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq peep-dired-ignored-extensions <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;mkv&#34;</span> <span style=color:#e6db74>&#34;iso&#34;</span> <span style=color:#e6db74>&#34;mp4&#34;</span> <span style=color:#e6db74>&#34;pdf&#34;</span>))
</span></span></code></pre></div><h4 id=dired-hide-dotfiles>dired-hide-dotfiles<a hidden class=anchor aria-hidden=true href=#dired-hide-dotfiles>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my-dired-mode-hook ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;My </span><span style=color:#e6db74>`dired&#39;</span><span style=color:#e6db74> mode hook.&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; To hide dot-files by default</span>
</span></span><span style=display:flex><span>  (dired-hide-dotfiles-mode))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>define-key</span> dired-mode-map <span style=color:#e6db74>&#34;.&#34;</span> <span style=color:#a6e22e>#&#39;</span>dired-hide-dotfiles-mode)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;dired-mode-hook</span> <span style=color:#a6e22e>#&#39;</span>my-dired-mode-hook)
</span></span></code></pre></div><h4 id=dired-git-info>dired-git-info<a hidden class=anchor aria-hidden=true href=#dired-git-info>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq dgi-auto-hide-details-p <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;dired</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> dired-mode-map <span style=color:#e6db74>&#34;)&#34;</span> <span style=color:#e6db74>&#39;dired-git-info-mode</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;dired-after-readin-hook</span> <span style=color:#e6db74>&#39;dired-git-info-auto-enable</span>)
</span></span></code></pre></div><h3 id=hungry-delete>hungry delete<a hidden class=anchor aria-hidden=true href=#hungry-delete>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;hungry-delete</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq hungry-delete-chars-to-skip <span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>\f&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;after-init-hook</span> <span style=color:#e6db74>&#39;global-hungry-delete-mode</span>)
</span></span></code></pre></div><h3 id=auto-save>auto save<a hidden class=anchor aria-hidden=true href=#auto-save>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;auto-save</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;after-init-hook</span> <span style=color:#e6db74>&#39;auto-save-enable</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq auto-save-silent <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      auto-save-delete-trailing-whitespace <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      auto-save-list-file-prefix (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;auto-save-list/.saves-&#34;</span> dn-cache-directory))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-capture-mode-hook</span> <span style=color:#a6e22e>#&#39;</span>(lambda <span style=color:#66d9ef>nil</span> (setq auto-save-delete-trailing-whitespace <span style=color:#66d9ef>nil</span>)))
</span></span></code></pre></div><h3 id=save-place>save place<a hidden class=anchor aria-hidden=true href=#save-place>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq save-place-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;saveplace&#34;</span> dn-cache-directory))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(save-place-mode)
</span></span></code></pre></div><h3 id=save-hist>save hist<a hidden class=anchor aria-hidden=true href=#save-hist>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq savehist-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;savehist&#34;</span> dn-cache-directory)
</span></span><span style=display:flex><span>      history-length <span style=color:#ae81ff>1000</span>
</span></span><span style=display:flex><span>      savehist-save-minibuffer-history <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>      savehist-additional-variables <span style=color:#f92672>&#39;</span>(kill-ring
</span></span><span style=display:flex><span>				      search-ring
</span></span><span style=display:flex><span>				      regexp-search-ring)
</span></span><span style=display:flex><span>      history-delete-duplicates <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(savehist-mode)
</span></span></code></pre></div><h3 id=undo>Undo<a hidden class=anchor aria-hidden=true href=#undo>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(global-undo-fu-session-mode)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq undo-fu-session-directory (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;undo-fu-session&#34;</span> dn-cache-directory))
</span></span></code></pre></div><h3 id=vundo>Vundo<a hidden class=anchor aria-hidden=true href=#vundo>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;vundo</span>)
</span></span><span style=display:flex><span>(setq vundo-glyph-alist vundo-unicode-symbols)
</span></span></code></pre></div><h3 id=ctrlf>ctrlf<a hidden class=anchor aria-hidden=true href=#ctrlf>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;; (require &#39;ctrlf)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(ctrlf-mode)
</span></span></code></pre></div><h3 id=google-this>google-this<a hidden class=anchor aria-hidden=true href=#google-this>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(google-this-mode)
</span></span></code></pre></div><h3 id=vertico>vertico<a hidden class=anchor aria-hidden=true href=#vertico>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(customize-set-variable <span style=color:#e6db74>&#39;vertico-cycle</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;vertico</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> vertico-map (kbd <span style=color:#e6db74>&#34;C-j&#34;</span>) <span style=color:#e6db74>&#39;vertico-directory-up</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(vertico-mode)
</span></span></code></pre></div><h3 id=marginalia>marginalia<a hidden class=anchor aria-hidden=true href=#marginalia>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(customize-set-variable <span style=color:#e6db74>&#39;marginalia-annotators</span> <span style=color:#f92672>&#39;</span>(marginalia-annotators-heavy marginalia-annotators-light <span style=color:#66d9ef>nil</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(marginalia-mode)
</span></span></code></pre></div><h3 id=consult>consult<a hidden class=anchor aria-hidden=true href=#consult>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;completion-list-mode-hook</span> <span style=color:#e6db74>&#39;consult-preview-at-point-mode</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-x C-b&#34;</span>) <span style=color:#e6db74>&#39;consult-buffer</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;M-y&#34;</span>) <span style=color:#e6db74>&#39;consult-yank-pop</span>)
</span></span></code></pre></div><h3 id=consult-dir>consult-dir<a hidden class=anchor aria-hidden=true href=#consult-dir>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;consult-dir</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-x C-d&#34;</span>) <span style=color:#e6db74>&#39;consult-dir</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;vertico</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> vertico-map (kbd <span style=color:#e6db74>&#34;C-x C-d&#34;</span>) <span style=color:#e6db74>&#39;consult-dir</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> vertico-map (kbd <span style=color:#e6db74>&#34;C-x C-j&#34;</span>) <span style=color:#e6db74>&#39;consult-dir-jump-file</span>))
</span></span></code></pre></div><h3 id=orderless>orderless<a hidden class=anchor aria-hidden=true href=#orderless>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;orderless</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq completion-styles <span style=color:#f92672>&#39;</span>(orderless partial-completion)
</span></span><span style=display:flex><span>      completion-category-defaults <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>      completion-category-overrides <span style=color:#f92672>&#39;</span>((file (styles <span style=color:#f92672>.</span> (partial-completion)))))
</span></span></code></pre></div><h3 id=corfu>corfu<a hidden class=anchor aria-hidden=true href=#corfu>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq corfu-auto <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      corfu-cycle <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      corfu-quit-at-boundary <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      corfu-auto-prefix <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>      corfu-preselect-first <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      corfu-quit-no-match <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;corfu</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> corfu-map (kbd <span style=color:#e6db74>&#34;C-n&#34;</span>) <span style=color:#e6db74>&#39;corfu-next</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> corfu-map (kbd <span style=color:#e6db74>&#34;C-p&#34;</span>) <span style=color:#e6db74>&#39;corfu-previous</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> corfu-map (kbd <span style=color:#e6db74>&#34;&lt;escape&gt;&#34;</span>) <span style=color:#e6db74>&#39;corfu-quit</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(corfu-global-mode)
</span></span></code></pre></div><h3 id=corfu-doc>corfu-doc<a hidden class=anchor aria-hidden=true href=#corfu-doc>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;corfu-doc</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;corfu-mode-hook</span> <span style=color:#e6db74>&#39;corfu-doc-mode</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq corfu-doc-delay <span style=color:#ae81ff>0.5</span>
</span></span><span style=display:flex><span>      corfu-doc-max-width <span style=color:#ae81ff>70</span>
</span></span><span style=display:flex><span>      corfu-doc-max-height <span style=color:#ae81ff>20</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>define-key</span> corfu-map (kbd <span style=color:#e6db74>&#34;M-p&#34;</span>) <span style=color:#e6db74>&#39;corfu-doc-scroll-down</span>)
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>define-key</span> corfu-map (kbd <span style=color:#e6db74>&#34;M-n&#34;</span>) <span style=color:#e6db74>&#39;corfu-doc-scroll-up</span>)
</span></span></code></pre></div><h3 id=embark>embark<a hidden class=anchor aria-hidden=true href=#embark>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(global-set-key [remap describe-bindings] <span style=color:#a6e22e>#&#39;</span>embark-bindings)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-.&#34;</span>) <span style=color:#e6db74>&#39;embark-act</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;M-.&#34;</span>) <span style=color:#e6db74>&#39;embark-dwim</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Use Embark to show bindings in a key prefix with `C-h`</span>
</span></span><span style=display:flex><span>(setq prefix-help-command <span style=color:#a6e22e>#&#39;</span>embark-prefix-help-command)
</span></span></code></pre></div><h3 id=prescient>prescient<a hidden class=anchor aria-hidden=true href=#prescient>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;prescient</span>)
</span></span></code></pre></div><h3 id=dabbrev>dabbrev<a hidden class=anchor aria-hidden=true href=#dabbrev>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;M-/&#34;</span>) <span style=color:#e6db74>&#39;dabbrev-completion</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-M-/&#34;</span>) <span style=color:#e6db74>&#39;dabbrev-expand</span>)
</span></span></code></pre></div><h3 id=cape>cape<a hidden class=anchor aria-hidden=true href=#cape>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;cape</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-c p p&#34;</span>) <span style=color:#e6db74>&#39;completion-at-point</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-c p t&#34;</span>) <span style=color:#e6db74>&#39;complete-tag</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-c p d&#34;</span>) <span style=color:#e6db74>&#39;cape-dabbrev</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-c p f&#34;</span>) <span style=color:#e6db74>&#39;cape-file</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-c p k&#34;</span>) <span style=color:#e6db74>&#39;cape-keyword</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-c p s&#34;</span>) <span style=color:#e6db74>&#39;cape-symbol</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-c p a&#34;</span>) <span style=color:#e6db74>&#39;cape-abbrev</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-c p i&#34;</span>) <span style=color:#e6db74>&#39;cape-ispell</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-c p l&#34;</span>) <span style=color:#e6db74>&#39;cape-line</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-c p w&#34;</span>) <span style=color:#e6db74>&#39;cape-dict</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-c p \\&#34;</span>) <span style=color:#e6db74>&#39;cape-tex</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-c p &amp;&#34;</span>) <span style=color:#e6db74>&#39;cape-sgml</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-c p r&#34;</span>) <span style=color:#e6db74>&#39;cape-rfc1345</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;completion-at-point-functions</span> <span style=color:#a6e22e>#&#39;</span>cape-file)
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;completion-at-point-functions</span> <span style=color:#a6e22e>#&#39;</span>cape-tex)
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;completion-at-point-functions</span> <span style=color:#a6e22e>#&#39;</span>cape-dabbrev)
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;completion-at-point-functions</span> <span style=color:#a6e22e>#&#39;</span>cape-keyword)
</span></span><span style=display:flex><span><span style=color:#75715e>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-sgml)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-rfc1345)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-abbrev)</span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;completion-at-point-functions</span> <span style=color:#a6e22e>#&#39;</span>cape-ispell)
</span></span><span style=display:flex><span><span style=color:#75715e>;; (add-to-list &#39;completion-at-point-functions #&#39;cape-dict)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-symbol)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-line)</span>
</span></span></code></pre></div><h3 id=tempel>tempel<a hidden class=anchor aria-hidden=true href=#tempel>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;tempel</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq tempel-path <span style=color:#e6db74>&#34;~/.emacs.d/template/tempel&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun tempel-setup-capf ()
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; Add the Tempel Capf to `completion-at-point-functions&#39;. `tempel-expand&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; only triggers on exact matches. Alternatively use `tempel-complete&#39; if</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; you want to see all matches, but then Tempel will probably trigger too</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; often when you don&#39;t expect it.</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; NOTE: We add `tempel-expand&#39; *before* the main programming mode Capf,</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>;; such that it will be tried first.</span>
</span></span><span style=display:flex><span>  (setq-local completion-at-point-functions
</span></span><span style=display:flex><span>	      (<span style=color:#a6e22e>cons</span> <span style=color:#a6e22e>#&#39;</span>tempel-expand
</span></span><span style=display:flex><span>		    completion-at-point-functions)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;text-mode-hook</span> <span style=color:#e6db74>&#39;tempel-setup-capf</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;M-+&#34;</span>) <span style=color:#e6db74>&#39;tempel-complete</span>)
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;M-*&#34;</span>) <span style=color:#e6db74>&#39;tempel-insert</span>)
</span></span></code></pre></div><h3 id=open-in-external-apps>Open in external apps<a hidden class=anchor aria-hidden=true href=#open-in-external-apps>#</a></h3><p>有些时候需要使用外部应用打开相应的文件，比如打印文件的时候。目前还没有发现直接使用 Emacs 打印文件的方法。</p><p>这里只使用 safari 打开相应的文件，如需要使用其他的应用，可以参照<a href=http://xahlee.info/emacs/emacs/emacs_dired_open_file_in_ext_apps.html>博客</a>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun xah-html-open-in-safari ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Open the current file or </span><span style=color:#e6db74>`dired&#39;</span><span style=color:#e6db74> marked files in Mac&#39;s Safari browser.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>If the file is not saved, save it first.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>URL </span><span style=color:#e6db74>`http://xahlee.info/emacs/emacs/emacs_dired_open_file_in_ext_apps.html&#39;</span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Version 2018-02-26&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let* (
</span></span><span style=display:flex><span>	 ($file-list
</span></span><span style=display:flex><span>	  (if (<span style=color:#a6e22e>string-equal</span> major-mode <span style=color:#e6db74>&#34;dired-mode&#34;</span>)
</span></span><span style=display:flex><span>	      (dired-get-marked-files)
</span></span><span style=display:flex><span>	    (<span style=color:#a6e22e>list</span> (<span style=color:#a6e22e>buffer-file-name</span>))))
</span></span><span style=display:flex><span>	 ($do-it-p (if (<span style=color:#a6e22e>&lt;=</span> (<span style=color:#a6e22e>length</span> $file-list) <span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>		       <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>		     (y-or-n-p <span style=color:#e6db74>&#34;Open more than 5 files? &#34;</span>))))
</span></span><span style=display:flex><span>    (when $do-it-p
</span></span><span style=display:flex><span>      (cond
</span></span><span style=display:flex><span>       ((<span style=color:#a6e22e>string-equal</span> system-type <span style=color:#e6db74>&#34;darwin&#34;</span>)
</span></span><span style=display:flex><span>	(<span style=color:#a6e22e>mapc</span>
</span></span><span style=display:flex><span>	 (lambda ($fpath)
</span></span><span style=display:flex><span>	   (when (<span style=color:#a6e22e>buffer-modified-p</span> )
</span></span><span style=display:flex><span>	     (save-buffer))
</span></span><span style=display:flex><span>	   (shell-command
</span></span><span style=display:flex><span>	    (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;open -a Safari.app \&#34;%s\&#34;&#34;</span> $fpath))) $file-list))))))
</span></span></code></pre></div><h2 id=language-configuration>Language configuration<a hidden class=anchor aria-hidden=true href=#language-configuration>#</a></h2><h3 id=lsp-language-service-protocol>LSP: Language service protocol<a hidden class=anchor aria-hidden=true href=#lsp-language-service-protocol>#</a></h3><h4 id=eldoc>eldoc<a hidden class=anchor aria-hidden=true href=#eldoc>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(eldoc-mode)
</span></span></code></pre></div><h4 id=eglot>eglot<a hidden class=anchor aria-hidden=true href=#eglot>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;python-mode-hook</span> <span style=color:#e6db74>&#39;eglot-ensure</span>)
</span></span></code></pre></div><h3 id=language-spell-check-and-translate>Language spell check and translate<a hidden class=anchor aria-hidden=true href=#language-spell-check-and-translate>#</a></h3><h4 id=ispell>ispell<a hidden class=anchor aria-hidden=true href=#ispell>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq ispell-program-name <span style=color:#e6db74>&#34;aspell&#34;</span>
</span></span><span style=display:flex><span>      ispell-extra-args <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;--sug-mode=ultra&#34;</span> <span style=color:#e6db74>&#34;--lang=en_US&#34;</span> <span style=color:#e6db74>&#34;--run-together&#34;</span>))
</span></span></code></pre></div><h4 id=flyspell>flyspell<a hidden class=anchor aria-hidden=true href=#flyspell>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;text-mode-hook</span> <span style=color:#e6db74>&#39;flyspell-mode</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;flyspell</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> flyspell-mode-map (kbd <span style=color:#e6db74>&#34;C-;&#34;</span>) <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> flyspell-mode-map (kbd <span style=color:#e6db74>&#34;C-,&#34;</span>) <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> flyspell-mode-map (kbd <span style=color:#e6db74>&#34;C-.&#34;</span>) <span style=color:#66d9ef>nil</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq flyspell-duplicate-distance <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>      flyspell-mark-duplications-flag <span style=color:#66d9ef>nil</span>)
</span></span></code></pre></div><h4 id=flyspell-correct>flyspell-correct<a hidden class=anchor aria-hidden=true href=#flyspell-correct>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-;&#34;</span>) <span style=color:#f92672>&#39;</span> flyspell-correct-wrapper)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq flyspell-correct-interface <span style=color:#a6e22e>#&#39;</span>flyspell-correct-popup)
</span></span></code></pre></div><h4 id=fanyi>fanyi<a hidden class=anchor aria-hidden=true href=#fanyi>#</a></h4><p>此包对单词进行查询。2022-04-14 目前使用有些 fanyi provider 有点慢，不知道是为什么。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;fanyi</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(custom-set-variables <span style=color:#f92672>&#39;</span>(fanyi-providers <span style=color:#f92672>&#39;</span>(
</span></span><span style=display:flex><span>					  <span style=color:#75715e>;; fanyi-haici-provider</span>
</span></span><span style=display:flex><span>					  fanyi-youdao-thesaurus-provider
</span></span><span style=display:flex><span>					  <span style=color:#75715e>;; fanyi-etymon-provider</span>
</span></span><span style=display:flex><span>					  <span style=color:#75715e>;; fanyi-longman-provider</span>
</span></span><span style=display:flex><span>					  <span style=color:#75715e>;; fanyi-libre-provider</span>
</span></span><span style=display:flex><span>					  )))
</span></span></code></pre></div><h4 id=powerthesaurus>Powerthesaurus<a hidden class=anchor aria-hidden=true href=#powerthesaurus>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;powerthesaurus</span>)
</span></span></code></pre></div><h4 id=smog>Smog<a hidden class=anchor aria-hidden=true href=#smog>#</a></h4><p><a href=https://github.com/zzkt/smog/tree/28b053198ff9c1b142789614d85d7d762d9b0fa3>https://github.com/zzkt/smog/tree/28b053198ff9c1b142789614d85d7d762d9b0fa3</a></p><p><a href="https://wiki.christophchamp.com/index.php?title=Style_and_Diction">https://wiki.christophchamp.com/index.php?title=Style_and_Diction</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;smog</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq smog-command <span style=color:#e6db74>&#34;style -L en&#34;</span>)
</span></span></code></pre></div><h4 id=osx-dictionary>osx-dictionary<a hidden class=anchor aria-hidden=true href=#osx-dictionary>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;osx-dictionary</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq osx-dictionary-use-chinese-text-segmentation <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h4 id=go-translate>go-translate<a hidden class=anchor aria-hidden=true href=#go-translate>#</a></h4><p>此包可对整句进行翻译。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;go-translate</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq gts-translate-list <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;en&#34;</span> <span style=color:#e6db74>&#34;zh&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq gts-default-translator (gts-translator
</span></span><span style=display:flex><span>			      :picker (gts-noprompt-picker)
</span></span><span style=display:flex><span>			      :engines (<span style=color:#a6e22e>list</span>
</span></span><span style=display:flex><span>					(gts-bing-engine)
</span></span><span style=display:flex><span>					(gts-google-engine :parser (gts-google-summary-parser))
</span></span><span style=display:flex><span>					<span style=color:#75715e>;; (gts-google-rpc-engine :parser (gts-google-rpc-parser) :url &#34;https://translate.google.com&#34;)</span>
</span></span><span style=display:flex><span>					)
</span></span><span style=display:flex><span>			      :render (gts-buffer-render)))
</span></span></code></pre></div><h3 id=program-language>Program language<a hidden class=anchor aria-hidden=true href=#program-language>#</a></h3><h4 id=markdown>Markdown<a hidden class=anchor aria-hidden=true href=#markdown>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;auto-mode-alist</span>
</span></span><span style=display:flex><span>	     <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;README\\.md\\&#39;&#34;</span> <span style=color:#f92672>.</span> gfm-mode))
</span></span></code></pre></div><h4 id=beancount>Beancount<a hidden class=anchor aria-hidden=true href=#beancount>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq beancount-electric-currency <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;auto-mode-alist</span>
</span></span><span style=display:flex><span>	     <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;\\.bean\\&#39;&#34;</span> <span style=color:#f92672>.</span> beancount-mode))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;beancount-mode-hook</span> <span style=color:#a6e22e>#&#39;</span>outline-minor-mode)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;beancount-mode-hook</span> <span style=color:#a6e22e>#&#39;</span>(lambda <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>				   (setq-local electric-indent-chars <span style=color:#66d9ef>nil</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;beancount</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> beancount-mode-map (kbd <span style=color:#e6db74>&#34;C-c C-n&#34;</span>) <span style=color:#e6db74>&#39;outline-next-visible-heading</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> beancount-mode-map (kbd <span style=color:#e6db74>&#34;C-c C-p&#34;</span>) <span style=color:#e6db74>&#39;outline-previous-visible-heading</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;all-the-icons-icon-alist</span>
</span></span><span style=display:flex><span>	     <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;\\.bean\\&#39;&#34;</span> all-the-icons-material <span style=color:#e6db74>&#34;attach_money&#34;</span> :face all-the-icons-lblue))
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;all-the-icons-mode-icon-alist</span>
</span></span><span style=display:flex><span>	     <span style=color:#f92672>&#39;</span>(beancount-mode all-the-icons-material <span style=color:#e6db74>&#34;attach_money&#34;</span> :face all-the-icons-lblue))
</span></span></code></pre></div><h4 id=csv>CSV<a hidden class=anchor aria-hidden=true href=#csv>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;auto-mode-alist</span>
</span></span><span style=display:flex><span>	     <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;\\.csv\\&#39;&#34;</span> <span style=color:#f92672>.</span> csv-mode))
</span></span></code></pre></div><h4 id=yaml>Yaml<a hidden class=anchor aria-hidden=true href=#yaml>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;auto-mode-alist</span>
</span></span><span style=display:flex><span>	     <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;\\.yaml\\&#39;&#34;</span> <span style=color:#f92672>.</span> yaml-mode))
</span></span></code></pre></div><h4 id=python>Python<a hidden class=anchor aria-hidden=true href=#python>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq python-shell-interpreter <span style=color:#e6db74>&#34;python3&#34;</span>
</span></span><span style=display:flex><span>      python-indent-guess-indent-offset <span style=color:#66d9ef>nil</span>)
</span></span></code></pre></div><h3 id=organize-life-with-org-mode>Organize life with org-mode<a hidden class=anchor aria-hidden=true href=#organize-life-with-org-mode>#</a></h3><p>使用纯文本组织生活，是一种哲学，是一种生活方式。此 <a href=http://doc.norang.ca/org-mode.html>Blog</a> 是践行此哲学的开端。</p><h4 id=better-default>Better Default<a hidden class=anchor aria-hidden=true href=#better-default>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq org-modules  <span style=color:#f92672>&#39;</span>()
</span></span><span style=display:flex><span>      org-deadline-warning-days <span style=color:#ae81ff>7</span>
</span></span><span style=display:flex><span>      org-return-follows-link <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      org-agenda-dim-blocked-tasks <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      org-image-actual-width <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>      org-display-remote-inline-images <span style=color:#e6db74>&#39;download</span>
</span></span><span style=display:flex><span>      org-log-into-drawer <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      org-fast-tag-selection-single-key <span style=color:#e6db74>&#39;expert</span>
</span></span><span style=display:flex><span>      org-adapt-indentation <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>      org-fontify-quote-and-verse-blocks <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      org-support-shift-select <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; org--leading-stars t</span>
</span></span><span style=display:flex><span>      org-treat-S-cursor-todo-selection-as-state-change <span style=color:#66d9ef>nil</span>)
</span></span></code></pre></div><ul><li><p>Word wrap</p><p>我喜欢文本在窗口的边缘进行折行。不喜欢使用 visual-line-mode 式的折行，此方式当中英文夹杂时，在行尾参差不齐，实在是用不来。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;menu-bar--wrap-long-lines-window-edge</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>;; (global-visual-line-mode 1)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (setq word-wrap-by-category t)</span>
</span></span></code></pre></div></li></ul><ul><li><p>todo keywords and faces</p><p>If you do not provide the separator bar, the last state is used as the DONE state.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq org-todo-keywords
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#39;</span>((sequence <span style=color:#e6db74>&#34;TODO(t)&#34;</span> <span style=color:#e6db74>&#34;NEXT(n)&#34;</span> <span style=color:#e6db74>&#34;STARTED&#34;</span> <span style=color:#e6db74>&#34;|&#34;</span> <span style=color:#e6db74>&#34;WAIT(w@)&#34;</span> <span style=color:#e6db74>&#34;SOMEDAY(s@)&#34;</span> <span style=color:#e6db74>&#34;CNCL(c@/!)&#34;</span> <span style=color:#e6db74>&#34;DONE(d)&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-todo-keyword-faces
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;TODO&#34;</span> :foreground <span style=color:#e6db74>&#34;Red&#34;</span> :weight bold)
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;NEXT&#34;</span> :foreground <span style=color:#e6db74>&#34;Forest green&#34;</span> :weight bold)
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;SOMEDAY&#34;</span> :foreground <span style=color:#e6db74>&#34;blue&#34;</span> :weight bold)
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;DONE&#34;</span> :foreground <span style=color:#e6db74>&#34;#705628&#34;</span> :weight bold)
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;WAIT&#34;</span> :foreground <span style=color:#e6db74>&#34;Orange&#34;</span> :weight bold)
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;CNCL&#34;</span> :foreground <span style=color:#e6db74>&#34;#b4534b&#34;</span> :weight bold)))
</span></span></code></pre></div></li></ul><ul><li><p>todo state triggers</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq org-todo-state-tags-triggers
</span></span><span style=display:flex><span>      (quote ((<span style=color:#e6db74>&#34;CNCL&#34;</span> (<span style=color:#e6db74>&#34;CNCL&#34;</span> <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>	      (<span style=color:#e6db74>&#34;WAIT&#34;</span> (<span style=color:#e6db74>&#34;WAIT&#34;</span> <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>	      (<span style=color:#e6db74>&#34;SOMEDAY&#34;</span> (<span style=color:#e6db74>&#34;WAIT&#34;</span>) (<span style=color:#e6db74>&#34;SOMEDAY&#34;</span> <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>	      (done (<span style=color:#e6db74>&#34;WAIT&#34;</span>) (<span style=color:#e6db74>&#34;SOMEDAY&#34;</span>))
</span></span><span style=display:flex><span>	      (<span style=color:#e6db74>&#34;TODO&#34;</span> (<span style=color:#e6db74>&#34;WAIT&#34;</span>) (<span style=color:#e6db74>&#34;CNCL&#34;</span>) (<span style=color:#e6db74>&#34;SOMEDAY&#34;</span>))
</span></span><span style=display:flex><span>	      (<span style=color:#e6db74>&#34;NEXT&#34;</span> (<span style=color:#e6db74>&#34;WAIT&#34;</span>) (<span style=color:#e6db74>&#34;CNCL&#34;</span>) (<span style=color:#e6db74>&#34;SOMEDAY&#34;</span>))
</span></span><span style=display:flex><span>	      (<span style=color:#e6db74>&#34;DONE&#34;</span> (<span style=color:#e6db74>&#34;WAIT&#34;</span>) (<span style=color:#e6db74>&#34;CNCL&#34;</span>) (<span style=color:#e6db74>&#34;SOMEDAY&#34;</span>)))))
</span></span></code></pre></div></li></ul><ul><li><p>org priority</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq org-priority-faces <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>?A</span> <span style=color:#f92672>.</span> <span style=color:#f92672>&#39;</span>(bold org-priority))
</span></span><span style=display:flex><span>			   (<span style=color:#e6db74>?B</span> <span style=color:#f92672>.</span> org-priority)
</span></span><span style=display:flex><span>			   (<span style=color:#e6db74>?C</span> <span style=color:#f92672>.</span> <span style=color:#f92672>&#39;</span>(shadow org-priority))))
</span></span></code></pre></div></li></ul><ul><li><p>org emphasis color</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defface my-org-emphasis-bold
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>((default :inherit bold)
</span></span><span style=display:flex><span>    (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background light))
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#a60000&#34;</span>)
</span></span><span style=display:flex><span>    (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background dark))
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#ff8059&#34;</span>))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;My bold emphasis for Org.&#34;</span>
</span></span><span style=display:flex><span>  :group <span style=color:#e6db74>&#39;org-faces</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defface my-org-emphasis-italic
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>((default :inherit italic)
</span></span><span style=display:flex><span>    (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background light))
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#005e00&#34;</span>)
</span></span><span style=display:flex><span>    (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background dark))
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#44bc44&#34;</span>))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;My italic emphasis for Org.&#34;</span>
</span></span><span style=display:flex><span>  :group <span style=color:#e6db74>&#39;org-faces</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defface my-org-emphasis-underline
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>((default :inherit underline)
</span></span><span style=display:flex><span>    (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background light))
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#813e00&#34;</span>)
</span></span><span style=display:flex><span>    (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background dark))
</span></span><span style=display:flex><span>     :foreground <span style=color:#e6db74>&#34;#d0bc00&#34;</span>))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;My underline emphasis for Org.&#34;</span>
</span></span><span style=display:flex><span>  :group <span style=color:#e6db74>&#39;org-faces</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defface my-org-emphasis-strike-through
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>((((class color) (min-colors <span style=color:#ae81ff>88</span>) (background light))
</span></span><span style=display:flex><span>     :strike-through <span style=color:#e6db74>&#34;#972500&#34;</span> :foreground <span style=color:#e6db74>&#34;#505050&#34;</span>)
</span></span><span style=display:flex><span>    (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background dark))
</span></span><span style=display:flex><span>     :strike-through <span style=color:#e6db74>&#34;#ef8b50&#34;</span> :foreground <span style=color:#e6db74>&#34;#a8a8a8&#34;</span>))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;My strike-through emphasis for Org.&#34;</span>
</span></span><span style=display:flex><span>  :group <span style=color:#e6db74>&#39;org-faces</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defface my-org-emphasis-verbatim
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#39;</span>((((class color) (min-colors <span style=color:#ae81ff>88</span>) (background light))
</span></span><span style=display:flex><span>     :background <span style=color:#e6db74>&#34;#F7B80A&#34;</span>)
</span></span><span style=display:flex><span>    (((class color) (min-colors <span style=color:#ae81ff>88</span>) (background dark))
</span></span><span style=display:flex><span>     :background <span style=color:#e6db74>&#34;#6DA906&#34;</span>))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;My strike-through emphasis for Org.&#34;</span>
</span></span><span style=display:flex><span>  :group <span style=color:#e6db74>&#39;org-faces</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-emphasis-alist
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;*&#34;</span> my-org-emphasis-bold)
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;/&#34;</span> my-org-emphasis-italic)
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;_&#34;</span> my-org-emphasis-underline)
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;~&#34;</span> org-code verbatim)
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;+&#34;</span> my-org-emphasis-strike-through)
</span></span><span style=display:flex><span>	(<span style=color:#e6db74>&#34;=&#34;</span> my-org-emphasis-verbatim)))
</span></span></code></pre></div></li></ul><ul><li><p>org-babel-load-languages</p><p>根据需要加载 org-babel-load-languages, 加快 Emacs 的启动速度，<a href=https://emacs-china.org/t/org-babel/18699>相关讨论见 Emacs-china 论坛</a>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(org-babel-do-load-languages
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#39;org-babel-load-languages</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>((emacs-lisp <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/org-babel-execute-src-block (<span style=color:#66d9ef>&amp;optional</span> _arg info _params)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Load language if needed&#34;</span>
</span></span><span style=display:flex><span>  (let* ((lang (<span style=color:#a6e22e>nth</span> <span style=color:#ae81ff>0</span> info))
</span></span><span style=display:flex><span>	 (sym (if (<span style=color:#a6e22e>member</span> (<span style=color:#a6e22e>downcase</span> lang) <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;c&#34;</span> <span style=color:#e6db74>&#34;cpp&#34;</span> <span style=color:#e6db74>&#34;c++&#34;</span>)) <span style=color:#e6db74>&#39;C</span> (<span style=color:#a6e22e>intern</span> lang)))
</span></span><span style=display:flex><span>	 (backup-languages org-babel-load-languages))
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; - (LANG . nil) 明确禁止的语言，不加载。</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; - (LANG . t) 已加载过的语言，不重复载。</span>
</span></span><span style=display:flex><span>    (unless (<span style=color:#a6e22e>assoc</span> sym backup-languages)
</span></span><span style=display:flex><span>      (condition-case err
</span></span><span style=display:flex><span>	  (progn
</span></span><span style=display:flex><span>	    (org-babel-do-load-languages <span style=color:#e6db74>&#39;org-babel-load-languages</span> (<span style=color:#a6e22e>list</span> (<span style=color:#a6e22e>cons</span> sym <span style=color:#66d9ef>t</span>)))
</span></span><span style=display:flex><span>	    (setq-default org-babel-load-languages (<span style=color:#a6e22e>append</span> (<span style=color:#a6e22e>list</span> (<span style=color:#a6e22e>cons</span> sym <span style=color:#66d9ef>t</span>)) backup-languages)))
</span></span><span style=display:flex><span>	(file-missing
</span></span><span style=display:flex><span>	 (setq-default org-babel-load-languages backup-languages)
</span></span><span style=display:flex><span>	 err)))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(advice-add <span style=color:#e6db74>&#39;org-babel-execute-src-block</span> :before <span style=color:#e6db74>&#39;my/org-babel-execute-src-block</span>)
</span></span></code></pre></div></li></ul><ul><li><p>org-capture</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq org-capture-templates
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;i&#34;</span> <span style=color:#e6db74>&#34;Inbox - todo item&#34;</span> entry (file (lambda () (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;todos/inbox.org&#34;</span> dn-galaxy)))
</span></span><span style=display:flex><span>       <span style=color:#e6db74>&#34;* TODO %?\n%U\n\n&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/org-capture-inbox ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (org-capture <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#34;i&#34;</span>))
</span></span></code></pre></div></li></ul><ul><li><p>org-attach</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq org-attach-id-to-path-function-list
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#39;</span>(org-attach-id-ts-folder-format
</span></span><span style=display:flex><span>	org-attach-id-uuid-folder-format))
</span></span><span style=display:flex><span>(setq org-attach-dir-relative <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div></li></ul><ul><li><p>org-refile</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq org-refile-targets <span style=color:#f92672>&#39;</span>((<span style=color:#66d9ef>nil</span> :maxlevel <span style=color:#f92672>.</span> <span style=color:#ae81ff>9</span>)
</span></span><span style=display:flex><span>			   (org-agenda-files :maxlevel <span style=color:#f92672>.</span> <span style=color:#ae81ff>9</span>)))
</span></span><span style=display:flex><span>(setq org-refile-use-outline-path <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq org-outline-path-complete-in-steps <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>(setq org-refile-allow-creating-parent-nodes <span style=color:#e6db74>&#39;confirm</span>)
</span></span><span style=display:flex><span>(setq org-refile-use-outline-path <span style=color:#e6db74>&#39;file</span>)
</span></span><span style=display:flex><span>(setq org-refile-active-region-within-subtree <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div></li></ul><ul><li><p>org-archive</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(customize-set-variable <span style=color:#e6db74>&#39;org-archive-location</span> <span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/todos/gtd.org_archive::datetree/* From %s&#34;</span>)
</span></span></code></pre></div></li></ul><ul><li><p>org-habit</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;org-modules</span> <span style=color:#e6db74>&#39;org-habit</span> <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div></li></ul><ul><li><p>org-id</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq org-id-method <span style=color:#e6db74>&#39;ts</span>)
</span></span><span style=display:flex><span>(setq org-id-link-to-org-use-id <span style=color:#e6db74>&#39;create-if-interactive</span>)
</span></span><span style=display:flex><span>(setq org-id-locations-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;.org-id-locations&#34;</span> dn-cache-directory))
</span></span></code></pre></div><ul><li><p>Copy id to clipboard</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun dn/copy-idlink-to-clipboard ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Copy idlink to clipboard.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (when (<span style=color:#a6e22e>eq</span> major-mode <span style=color:#e6db74>&#39;org-agenda-mode</span>) <span style=color:#75715e>;switch to orgmode</span>
</span></span><span style=display:flex><span>    (org-agenda-show)
</span></span><span style=display:flex><span>    (org-agenda-goto))
</span></span><span style=display:flex><span>  (when (<span style=color:#a6e22e>eq</span> major-mode <span style=color:#e6db74>&#39;org-mode</span>) <span style=color:#75715e>; do this only in org-mode buffers</span>
</span></span><span style=display:flex><span>    (let* ((mytmphead (<span style=color:#a6e22e>nth</span> <span style=color:#ae81ff>4</span> (org-heading-components)))
</span></span><span style=display:flex><span>	   (mytmpid (<span style=color:#a6e22e>funcall</span> <span style=color:#e6db74>&#39;org-id-get-create</span>))
</span></span><span style=display:flex><span>	   (mytmplink (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;[[id:%s][%s]]&#34;</span> mytmpid mytmphead)))
</span></span><span style=display:flex><span>      (kill-new mytmplink)
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Copied %s to killring (clipboard)&#34;</span> mytmplink)))
</span></span><span style=display:flex><span>  (switch-to-buffer (<span style=color:#a6e22e>concat</span> (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%Y-%m-%d&#34;</span>) <span style=color:#e6db74>&#34;.org&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;&lt;f8&gt;&#34;</span>) <span style=color:#e6db74>&#39;dn/copy-idlink-to-clipboard</span>)
</span></span></code></pre></div></li></ul></li></ul><ul><li><p>org-clock</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(org-clock-persistence-insinuate)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-clock-into-drawer <span style=color:#e6db74>&#34;LOGCLOCK&#34;</span>)
</span></span><span style=display:flex><span>(setq org-clock-out-remove-zero-time-clocks <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq org-clock-out-when-done <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq org-clock-persist <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq org-clock-report-include-clocking-task <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq org-clock-persist-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;org-clock-save.el&#34;</span> dn-cache-directory))
</span></span></code></pre></div><ul><li><p>switch task from TODO to STARTED</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun bh/is-task-p ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Any task with a todo keyword and no subtask&#34;</span>
</span></span><span style=display:flex><span>  (save-restriction
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>widen</span>)
</span></span><span style=display:flex><span>    (let ((has-subtask)
</span></span><span style=display:flex><span>	  (subtree-end (save-excursion (org-end-of-subtree <span style=color:#66d9ef>t</span>)))
</span></span><span style=display:flex><span>	  (is-a-task (<span style=color:#a6e22e>member</span> (<span style=color:#a6e22e>nth</span> <span style=color:#ae81ff>2</span> (org-heading-components)) org-todo-keywords-1)))
</span></span><span style=display:flex><span>      (save-excursion
</span></span><span style=display:flex><span>	(<span style=color:#a6e22e>forward-line</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>	(while (and (not has-subtask)
</span></span><span style=display:flex><span>		    (<span style=color:#a6e22e>&lt;</span> (<span style=color:#a6e22e>point</span>) subtree-end)
</span></span><span style=display:flex><span>		    (<span style=color:#a6e22e>re-search-forward</span> <span style=color:#e6db74>&#34;^\*+ &#34;</span> subtree-end <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>	  (when (<span style=color:#a6e22e>member</span> (org-get-todo-state) org-todo-keywords-1)
</span></span><span style=display:flex><span>	    (setq has-subtask <span style=color:#66d9ef>t</span>))))
</span></span><span style=display:flex><span>      (and is-a-task (not has-subtask)))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun bh/clock-in-to-next (kw)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Switch a task from TODO to NEXT when clocking in.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Skips capture tasks, projects, and subprojects.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Switch projects and subprojects from NEXT back to TODO&#34;</span>
</span></span><span style=display:flex><span>  (when (not (and (<span style=color:#a6e22e>boundp</span> <span style=color:#e6db74>&#39;org-capture-mode</span>) org-capture-mode))
</span></span><span style=display:flex><span>    (cond
</span></span><span style=display:flex><span>     ((and (<span style=color:#a6e22e>member</span> (org-get-todo-state) (<span style=color:#a6e22e>list</span> <span style=color:#e6db74>&#34;TODO&#34;</span>))
</span></span><span style=display:flex><span>	   (bh/is-task-p))
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;NEXT&#34;</span>)
</span></span><span style=display:flex><span>     ((and (<span style=color:#a6e22e>member</span> (org-get-todo-state) (<span style=color:#a6e22e>list</span> <span style=color:#e6db74>&#34;NEXT&#34;</span>))
</span></span><span style=display:flex><span>	   (bh/is-project-p))
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;TODO&#34;</span>))))
</span></span></code></pre></div></li></ul></li></ul><ul><li><p>org-num</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;org-num-mode</span>)
</span></span></code></pre></div></li></ul><h4 id=packages-enhance-org>Packages enhance org<a hidden class=anchor aria-hidden=true href=#packages-enhance-org>#</a></h4><ul><li><p>auto-tangle</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(unless
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>fboundp</span> <span style=color:#e6db74>&#39;org-auto-tangle-mode</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>autoload</span> <span style=color:#a6e22e>#&#39;</span>org-auto-tangle-mode <span style=color:#e6db74>&#34;org-auto-tangle&#34;</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;org-auto-tangle-mode</span>)
</span></span></code></pre></div><ul><li><p>toc-org</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;toc-org-mode</span>)
</span></span></code></pre></div></li></ul></li></ul><ul><li><p>org-superstar</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;org-superstar-mode</span>)
</span></span></code></pre></div></li></ul><ul><li><p>org-download</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(customize-set-variable <span style=color:#e6db74>&#39;org-download-image-dir</span> <span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/roam/pic&#34;</span>)
</span></span><span style=display:flex><span>(customize-set-variable <span style=color:#e6db74>&#39;org-download-screenshot-method</span> <span style=color:#e6db74>&#39;screencapture</span>)
</span></span><span style=display:flex><span>(customize-set-variable <span style=color:#e6db74>&#39;org-download-abbreviate-filename-function</span> <span style=color:#e6db74>&#39;expand-file-name</span>)
</span></span><span style=display:flex><span>(customize-set-variable <span style=color:#e6db74>&#39;org-download-timestamp</span> <span style=color:#e6db74>&#34;%Y%m%d%H%M%S&#34;</span>)
</span></span><span style=display:flex><span>(customize-set-variable <span style=color:#e6db74>&#39;org-download-display-inline-images</span> <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>(customize-set-variable <span style=color:#e6db74>&#39;org-download-heading-lvl</span> <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>(customize-set-variable <span style=color:#e6db74>&#39;org-download-annotate-function</span> (lambda (_link) <span style=color:#e6db74>&#34;&#34;</span>))
</span></span><span style=display:flex><span>(customize-set-variable <span style=color:#e6db74>&#39;org-download-image-attr-list</span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;#+NAME: &#34;</span> <span style=color:#e6db74>&#34;#+CAPTION: &#34;</span> <span style=color:#e6db74>&#34;#+ATTR_LATEX: :width 10cm :placement [!htpb]&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;org-download-enable</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(advice-add <span style=color:#e6db74>&#39;org-download-clipboard</span> :after <span style=color:#e6db74>&#39;org-download-rename-last-file</span>)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/replace-org-download-file-path ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (previous-line)
</span></span><span style=display:flex><span>  (replace-string <span style=color:#e6db74>&#34;/Users/duanning&#34;</span> <span style=color:#e6db74>&#34;~&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(advice-add <span style=color:#e6db74>&#39;org-download-clipboard</span> :after <span style=color:#e6db74>&#39;my/replace-org-download-file-path</span>)
</span></span></code></pre></div></li></ul><ul><li><p>org-auto-tangle</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;org-auto-tangle-mode</span>)
</span></span></code></pre></div></li></ul><ul><li><p>olivetti</p><p>设置 olivetti 的主体宽度，<a href=https://zh-yue.wikipedia.org/wiki/%E9%BB%83%E9%87%91%E6%AF%94%E4%BE%8B>黄金分割率</a>，此分割具有美感。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq olivetti-body-width <span style=color:#ae81ff>0.618</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;olivetti-mode</span>)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;mu4e-main-mode-hook</span> <span style=color:#e6db74>&#39;olivetti-mode</span>)
</span></span></code></pre></div><p>感谢 <a href=https://emacs-china.org/t/emacs/19797/3>patrolli</a> . 一个更强大的是 writeroom 这个包，但是其中有些功能我用不到，有些我自己己配置。</p><p>此代码实现的功能是当窗口只有一个 buffer ，或者窗口布局是上下形式的时候，开启该模式，如果存在左右布局，就关闭该模式。有个问题是自己不能手动关闭 Olivetti 模式，暂时就不起用这个了。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/olivetti-mode ()
</span></span><span style=display:flex><span>  (if (and (<span style=color:#a6e22e>eq</span> (<span style=color:#a6e22e>buffer-local-value</span> <span style=color:#e6db74>&#39;major-mode</span> (<span style=color:#a6e22e>current-buffer</span>)) <span style=color:#e6db74>&#39;org-mode</span>)
</span></span><span style=display:flex><span>	   (<span style=color:#a6e22e>&gt;</span> (window-width) (<span style=color:#a6e22e>/</span> (frame-width) <span style=color:#ae81ff>2</span>)))
</span></span><span style=display:flex><span>      (olivetti-mode <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    (olivetti-mode <span style=color:#ae81ff>0</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;find-file-hook</span> <span style=color:#e6db74>&#39;my/olivetti-mode</span>)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;window-configuration-change-hook</span> <span style=color:#e6db74>&#39;my/olivetti-mode</span>)
</span></span></code></pre></div></li></ul><ul><li><p>org-appear</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;org-appear</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-appear-trigger <span style=color:#e6db74>&#39;manual</span>
</span></span><span style=display:flex><span>      org-appear-autolinks <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;org-appear-mode</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> (lambda ()
</span></span><span style=display:flex><span>			   (add-hook <span style=color:#e6db74>&#39;meow-insert-enter-hook</span> <span style=color:#a6e22e>#&#39;</span>org-appear-manual-start <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>			   (add-hook <span style=color:#e6db74>&#39;meow-insert-exit-hook</span> <span style=color:#a6e22e>#&#39;</span>org-appear-manual-stop <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span>)))
</span></span></code></pre></div></li></ul><ul><li><p>org-cliplink</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;org-cliplink</span>)
</span></span></code></pre></div></li></ul><h4 id=note-taking>Note taking<a hidden class=anchor aria-hidden=true href=#note-taking>#</a></h4><ul><li><p>org-roam</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(unless
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>fboundp</span> <span style=color:#e6db74>&#39;org-roam-db-autosync-enable</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>autoload</span> <span style=color:#a6e22e>#&#39;</span>org-roam-db-autosync-enable <span style=color:#e6db74>&#34;org-roam&#34;</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(if sys-termuxp
</span></span><span style=display:flex><span>    (setq org-roam-database-connector <span style=color:#e6db74>&#39;sqlite3</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;after-init-hook</span> <span style=color:#e6db74>&#39;org-roam-db-autosync-enable</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>;; (add-hook &#39;org-roam-mode-hook &#39;turn-on-visual-line-mode)</span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> (lambda ()
</span></span><span style=display:flex><span>			   (setq-local time-stamp-active <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>				       time-stamp-start <span style=color:#e6db74>&#34;#\\+MODIFIED:[ \t]*&#34;</span>
</span></span><span style=display:flex><span>				       time-stamp-end <span style=color:#e6db74>&#34;$&#34;</span>
</span></span><span style=display:flex><span>				       time-stamp-format <span style=color:#e6db74>&#34;\[%Y-%m-%d %3a %H:%M\]&#34;</span>)
</span></span><span style=display:flex><span>			   (add-hook <span style=color:#e6db74>&#39;before-save-hook</span> <span style=color:#e6db74>&#39;time-stamp</span> <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#39;local</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;org-roam</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; https://jethrokuan.github.io/org-roam-guide/</span>
</span></span><span style=display:flex><span>(cl-defmethod org-roam-node-type ((node org-roam-node))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Return the TYPE of NODE.&#34;</span>
</span></span><span style=display:flex><span>  (condition-case <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>file-name-nondirectory</span>
</span></span><span style=display:flex><span>       (<span style=color:#a6e22e>directory-file-name</span>
</span></span><span style=display:flex><span>	(<span style=color:#a6e22e>file-name-directory</span>
</span></span><span style=display:flex><span>	 (file-relative-name (org-roam-node-file node) org-roam-directory))))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>error</span> <span style=color:#e6db74>&#34;&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; Codes blow are used to general a hierachy for title nodes that under a file</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; https://github.com/nowislewis/nowisemacs/blob/master/init.org</span>
</span></span><span style=display:flex><span>(cl-defmethod org-roam-node-doom-filetitle ((node org-roam-node))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Return the value of \&#34;#+title:\&#34; (if any) from file that NODE resides in.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>If there&#39;s no file-level title in the file, return empty string.&#34;</span>
</span></span><span style=display:flex><span>  (or (if (<span style=color:#a6e22e>=</span> (org-roam-node-level node) <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>	  (org-roam-node-title node)
</span></span><span style=display:flex><span>	(org-roam-get-keyword <span style=color:#e6db74>&#34;TITLE&#34;</span> (org-roam-node-file node)))
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(cl-defmethod org-roam-node-doom-hierarchy ((node org-roam-node))
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Return hierarchy for NODE, constructed of its file title, OLP and direct title.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  If some elements are missing, they will be stripped out.&#34;</span>
</span></span><span style=display:flex><span>  (let ((title     (org-roam-node-title node))
</span></span><span style=display:flex><span>	(olp       (org-roam-node-olp   node))
</span></span><span style=display:flex><span>	(level     (org-roam-node-level node))
</span></span><span style=display:flex><span>	(filetitle (org-roam-node-doom-filetitle node))
</span></span><span style=display:flex><span>	(separator (<span style=color:#a6e22e>propertize</span> <span style=color:#e6db74>&#34; &gt; &#34;</span> <span style=color:#e6db74>&#39;face</span> <span style=color:#e6db74>&#39;shadow</span>)))
</span></span><span style=display:flex><span>    (cl-case level
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; node is a top-level file</span>
</span></span><span style=display:flex><span>      (<span style=color:#ae81ff>0</span> filetitle)
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; node is a level 1 heading</span>
</span></span><span style=display:flex><span>      (<span style=color:#ae81ff>1</span> (<span style=color:#a6e22e>concat</span> (<span style=color:#a6e22e>propertize</span> filetitle <span style=color:#e6db74>&#39;face</span> <span style=color:#f92672>&#39;</span>(shadow italic))
</span></span><span style=display:flex><span>		 separator title))
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; node is a heading with an arbitrary outline path</span>
</span></span><span style=display:flex><span>      (<span style=color:#66d9ef>t</span> (<span style=color:#a6e22e>concat</span> (<span style=color:#a6e22e>propertize</span> filetitle <span style=color:#e6db74>&#39;face</span> <span style=color:#f92672>&#39;</span>(shadow italic))
</span></span><span style=display:flex><span>		 separator (<span style=color:#a6e22e>propertize</span> (string-join olp <span style=color:#e6db74>&#34; &gt; &#34;</span>) <span style=color:#e6db74>&#39;face</span> <span style=color:#f92672>&#39;</span>(shadow italic))
</span></span><span style=display:flex><span>		 separator title)))))
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-roam-db-gc-threshold most-positive-fixnum
</span></span><span style=display:flex><span>      org-roam-completion-everywhere <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      org-roam-directory (file-truename dn-roam)
</span></span><span style=display:flex><span>      org-roam-db-location (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;org-roam.db&#34;</span> dn-cache-directory)
</span></span><span style=display:flex><span>      org-roam-node-display-template (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;${type:15} ${doom-hierarchy:*} &#34;</span> (<span style=color:#a6e22e>propertize</span> <span style=color:#e6db74>&#34;${tags:20}&#34;</span> <span style=color:#e6db74>&#39;face</span> <span style=color:#e6db74>&#39;org-tag</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-roam-capture-templates <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#e6db74>&#34;articles&#34;</span> plain <span style=color:#e6db74>&#34;%?&#34;</span>
</span></span><span style=display:flex><span>				    :target (file+head <span style=color:#e6db74>&#34;articles/${slug}.org&#34;</span>
</span></span><span style=display:flex><span>						       <span style=color:#e6db74>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span>)
</span></span><span style=display:flex><span>				    :unnarrowed <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>				   (<span style=color:#e6db74>&#34;b&#34;</span> <span style=color:#e6db74>&#34;Books&#34;</span> plain (file <span style=color:#e6db74>&#34;~/.emacs.d/template/readinglog&#34;</span>)
</span></span><span style=display:flex><span>				    :target (file+head <span style=color:#e6db74>&#34;books/${slug}.org&#34;</span>
</span></span><span style=display:flex><span>						       <span style=color:#e6db74>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span>)
</span></span><span style=display:flex><span>				    :unnarrowed <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>				   (<span style=color:#e6db74>&#34;d&#34;</span> <span style=color:#e6db74>&#34;default&#34;</span> plain <span style=color:#e6db74>&#34;%?&#34;</span>
</span></span><span style=display:flex><span>				    :target (file+head <span style=color:#e6db74>&#34;main/${slug}.org&#34;</span>
</span></span><span style=display:flex><span>						       <span style=color:#e6db74>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span>)
</span></span><span style=display:flex><span>				    :unnarrowed <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>				   (<span style=color:#e6db74>&#34;p&#34;</span> <span style=color:#e6db74>&#34;people&#34;</span> plain (file <span style=color:#e6db74>&#34;~/.emacs.d/template/crm&#34;</span>)
</span></span><span style=display:flex><span>				    :target (file+head <span style=color:#e6db74>&#34;crm/${slug}.org&#34;</span>
</span></span><span style=display:flex><span>						       <span style=color:#e6db74>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span>)
</span></span><span style=display:flex><span>				    :unnarrowed <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>				   (<span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#e6db74>&#34;reference&#34;</span> plain (file <span style=color:#e6db74>&#34;~/.emacs.d/template/reference&#34;</span>)
</span></span><span style=display:flex><span>				    :target (file+head <span style=color:#e6db74>&#34;ref/${citekey}.org&#34;</span>
</span></span><span style=display:flex><span>						       <span style=color:#e6db74>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span>)
</span></span><span style=display:flex><span>				    :unnarrowed <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>				   (<span style=color:#e6db74>&#34;w&#34;</span> <span style=color:#e6db74>&#34;work&#34;</span> plain <span style=color:#e6db74>&#34;%?&#34;</span>
</span></span><span style=display:flex><span>				    :target (file+head <span style=color:#e6db74>&#34;work/${slug}.org&#34;</span>
</span></span><span style=display:flex><span>						       <span style=color:#e6db74>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span>)
</span></span><span style=display:flex><span>				    :unnarrowed <span style=color:#66d9ef>t</span>)))
</span></span></code></pre></div></li></ul><ul><li><p>diary</p><p>此处的实现来自晨间日记的奇迹的这本书。在当前的日期中显示过去的日记，这样就可以看到过去的今天自己干了什么，这个信息还是挺有用的。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/history-morning-diary-body ()
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>insert</span> (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;** %s-%s\n&#34;</span> (<span style=color:#a6e22e>+</span> i init-year) cur-date))
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>insert</span> (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;#+transclude: [[file:&#34;</span> (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;%s-%s.org&#34;</span> (<span style=color:#a6e22e>+</span> i init-year) cur-date) <span style=color:#e6db74>&#34;::Morning Diary]] :only-contents\n&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/insert-history-morning-diary ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Insert my history diary to today diary, for convenient reflection my past time.&#34;</span>
</span></span><span style=display:flex><span>  (let* ((init-year <span style=color:#ae81ff>2022</span>)
</span></span><span style=display:flex><span>	 (cur-year (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%Y&#34;</span>))
</span></span><span style=display:flex><span>	 (year-span (<span style=color:#a6e22e>-</span> (<span style=color:#a6e22e>string-to-number</span> (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%Y&#34;</span>)) init-year))
</span></span><span style=display:flex><span>	 (cur-date (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%m-%d&#34;</span>)))
</span></span><span style=display:flex><span>    (cond
</span></span><span style=display:flex><span>     ((and (org-roam-dailies--daily-note-p) (<span style=color:#a6e22e>=</span> <span style=color:#ae81ff>0</span> year-span))
</span></span><span style=display:flex><span>      (progn
</span></span><span style=display:flex><span>	(<span style=color:#a6e22e>goto-char</span> (org-find-exact-headline-in-buffer <span style=color:#e6db74>&#34;History Diary&#34;</span>))
</span></span><span style=display:flex><span>	(<span style=color:#a6e22e>forward-line</span>)
</span></span><span style=display:flex><span>	(<span style=color:#a6e22e>insert</span> <span style=color:#e6db74>&#34;First Year Of Your Diary! KEEP NOTING EVERYTHING! Best Wishes!\n&#34;</span>)))
</span></span><span style=display:flex><span>     ((and (org-roam-dailies--daily-note-p) (<span style=color:#a6e22e>&lt;</span> <span style=color:#ae81ff>0</span> year-span))
</span></span><span style=display:flex><span>      (progn
</span></span><span style=display:flex><span>	(<span style=color:#a6e22e>goto-char</span> (org-find-exact-headline-in-buffer <span style=color:#e6db74>&#34;History Diary&#34;</span>))
</span></span><span style=display:flex><span>	(<span style=color:#a6e22e>forward-line</span>)
</span></span><span style=display:flex><span>	(if (<span style=color:#a6e22e>&lt;</span> year-span <span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>	    (dotimes (i year-span)
</span></span><span style=display:flex><span>	      (my/history-morning-diary-body))
</span></span><span style=display:flex><span>	  (dotimes (i <span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>	    (my/history-morning-diary-body))))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/org-roam-dailies-exclude ()
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>goto-char</span> (<span style=color:#a6e22e>point-min</span>))
</span></span><span style=display:flex><span>  (org-set-property <span style=color:#e6db74>&#34;ROAM_EXCLUDE&#34;</span> <span style=color:#e6db74>&#34;t&#34;</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>goto-char</span> (<span style=color:#a6e22e>point-max</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/org-roam-morning-diary-body (tpl)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Insert diary content to org-roam-dailies-today according TPL&#34;</span>
</span></span><span style=display:flex><span>  (org-roam-dailies-goto-today)
</span></span><span style=display:flex><span>  (my/org-roam-dailies-exclude)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>insert</span> <span style=color:#e6db74>&#34;\n* Random Notes\n\n* GTD [/]\n\n* History Diary\n\n* Morning Diary\n\n* Clock Report\n\n&#34;</span>)
</span></span><span style=display:flex><span>  (my/insert-history-morning-diary)
</span></span><span style=display:flex><span>  (org-transclusion-add-all)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>goto-char</span> (org-find-exact-headline-in-buffer <span style=color:#e6db74>&#34;Clock Report&#34;</span>))
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>forward-line</span>)
</span></span><span style=display:flex><span>  (tempel-insert tpl)
</span></span><span style=display:flex><span>  (org-clock-report)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>goto-char</span> (org-find-exact-headline-in-buffer <span style=color:#e6db74>&#34;Morning Diary&#34;</span>))
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>forward-line</span>)
</span></span><span style=display:flex><span>  (tempel-insert <span style=color:#e6db74>&#39;diary</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/omd-clock-report ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Update omd(org morning diary) clock report&#34;</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>goto-char</span> (org-find-exact-headline-in-buffer <span style=color:#e6db74>&#34;Clock Report&#34;</span>))
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>forward-line</span>)
</span></span><span style=display:flex><span>  (org-ctrl-c-ctrl-c))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/org-roam-morning-diary ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;If org roam dailies today exist, then go to the file , update clock report and jump to Events
</span></span></span><span style=display:flex><span><span style=color:#e6db74>If org roam dailies today do not exist, the create it.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Weekend and daytime use different templeate to create org-clock-report&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let* ((date (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%Y-%m-%d&#34;</span>))
</span></span><span style=display:flex><span>	 (org-roam-dailies-today (<span style=color:#a6e22e>concat</span> dn-roam <span style=color:#e6db74>&#34;/daily/&#34;</span> date <span style=color:#e6db74>&#34;.org&#34;</span>))
</span></span><span style=display:flex><span>	 (weeknum (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%u&#34;</span>)))
</span></span><span style=display:flex><span>    (org-roam-dailies-goto-today)
</span></span><span style=display:flex><span>    (if (<span style=color:#a6e22e>file-exists-p</span> org-roam-dailies-today)
</span></span><span style=display:flex><span>	(progn
</span></span><span style=display:flex><span>	  (my/omd-clock-report)
</span></span><span style=display:flex><span>	  (<span style=color:#a6e22e>goto-char</span> (org-find-exact-headline-in-buffer <span style=color:#e6db74>&#34;Random Notes&#34;</span>)))
</span></span><span style=display:flex><span>      (cond ((<span style=color:#a6e22e>equal</span> weeknum <span style=color:#ae81ff>7</span>)
</span></span><span style=display:flex><span>	     (my/org-roam-morning-diary-body <span style=color:#e6db74>&#39;weekend</span>))
</span></span><span style=display:flex><span>	    ((not (<span style=color:#a6e22e>equal</span> weeknum <span style=color:#ae81ff>7</span>))
</span></span><span style=display:flex><span>	     (my/org-roam-morning-diary-body <span style=color:#e6db74>&#39;clockday</span>))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;&lt;f6&gt;&#34;</span>) <span style=color:#e6db74>&#39;my/org-roam-morning-diary</span>)
</span></span></code></pre></div></li></ul><ul><li><p>org-roam-ui</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq org-roam-ui-sync-theme <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq org-roam-ui-follow <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq org-roam-ui-update-on-save <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq org-roam-ui-open-on-start <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;org-roam-ui</span>
</span></span><span style=display:flex><span>  (require <span style=color:#e6db74>&#39;websocket</span>))
</span></span></code></pre></div></li></ul><ul><li><p>org-roam buffer</p><p>当当前打开的文件是 org-roam 文件时，自动打开 org-roam-buffer 。总是打开 org-roam-buffer 不太实用，并不是总是需要看这个 buffer 。得思考何时才需要使用，或者手动切换更合适。
<a href=https://github.com/org-roam/org-roam/issues/507>https://github.com/org-roam/org-roam/issues/507</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun tim/org-roam-buffer-show (_)
</span></span><span style=display:flex><span>  (if (and
</span></span><span style=display:flex><span>       <span style=color:#75715e>;; don&#39;t do anything if we&#39;re in the minibuffer</span>
</span></span><span style=display:flex><span>       (not (<span style=color:#a6e22e>minibufferp</span>))
</span></span><span style=display:flex><span>       <span style=color:#75715e>;; show org-roam buffer if the current buffer has a org-roam file</span>
</span></span><span style=display:flex><span>       (xor (org-roam-file-p) (<span style=color:#a6e22e>eq</span> <span style=color:#e6db74>&#39;visible</span> (org-roam-buffer--visibility))))
</span></span><span style=display:flex><span>      (org-roam-buffer-toggle)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;window-buffer-change-functions</span> <span style=color:#e6db74>&#39;tim/org-roam-buffer-show</span>)
</span></span></code></pre></div></li></ul><ul><li><p>search org-roam-node with rg</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun bms/org-roam-rg-search ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Search org-roam directory using consult-ripgrep. With live-preview.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let ((consult-ripgrep-command
</span></span><span style=display:flex><span>	 <span style=color:#e6db74>&#34;rg --null --ignore-case --type org --line-buffered --color=always --max-columns=500 --no-heading --line-number . -e ARG OPTS&#34;</span>))
</span></span><span style=display:flex><span>    (consult-ripgrep org-roam-directory)))
</span></span></code></pre></div></li></ul><h4 id=bibtex-manage>Bibtex manage<a hidden class=anchor aria-hidden=true href=#bibtex-manage>#</a></h4><ul><li><p>bibtex</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq bibtex-autokey-year-length <span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>(setq bibtex-autokey-name-year-separator <span style=color:#e6db74>&#34;-&#34;</span>)
</span></span><span style=display:flex><span>(setq bibtex-autokey-year-title-separator <span style=color:#e6db74>&#34;-&#34;</span>)
</span></span><span style=display:flex><span>(setq bibtex-autokey-titleword-separator <span style=color:#e6db74>&#34;-&#34;</span>)
</span></span><span style=display:flex><span>(setq bibtex-autokey-titlewords <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>(setq bibtex-autokey-titlewords-stretch <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>(setq bibtex-autokey-titleword-length <span style=color:#ae81ff>5</span>)
</span></span></code></pre></div></li></ul><ul><li><p>bibtex-completion</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq bibtex-completion-library-path <span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/storage/pdf&#34;</span>
</span></span><span style=display:flex><span>      bibtex-completion-bibliography <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/roam/References.bib&#34;</span>
</span></span><span style=display:flex><span>				       <span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/roam/Book.bib&#34;</span>)
</span></span><span style=display:flex><span>      bibtex-completion-notes-path <span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/roam/ref&#34;</span>
</span></span><span style=display:flex><span>      bibtex-completion-additional-search-fields <span style=color:#f92672>&#39;</span>(keywords journal booktitle)
</span></span><span style=display:flex><span>      bibtex-completion-pdf-symbol <span style=color:#e6db74>&#34;P&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; bibtex-completion-pdf-symbol (all-the-icons-octicon &#34;file-pdf&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; 							  :height 1</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; 							  :v-adjust -0.05</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; 							  :face &#39;font-lock-doc-face)</span>
</span></span><span style=display:flex><span>      bibtex-completion-notes-symbol <span style=color:#e6db74>&#34;N&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; bibtex-completion-notes-symbol (all-the-icons-octicon &#34;file-text&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; 							    :height 1</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; 							    :v-adjust -0.05</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>;; 							    :face &#39;font-lock-doc-face)</span>
</span></span><span style=display:flex><span>      bibtex-completion-display-formats <span style=color:#f92672>&#39;</span>((article <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} ${journal:40}&#34;</span>)
</span></span><span style=display:flex><span>					  (inbook <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} Chapter ${chapter:32}&#34;</span>)
</span></span><span style=display:flex><span>					  (incollection <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} ${booktitle:40}&#34;</span>)
</span></span><span style=display:flex><span>					  (inproceedings <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} ${booktitle:40}&#34;</span>)
</span></span><span style=display:flex><span>					  (<span style=color:#66d9ef>t</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*}&#34;</span>)))
</span></span><span style=display:flex><span><span style=color:#75715e>;; (setq bibtex-completion-pdf-symbol (all-the-icons-octicon &#34;file-pdf&#34;))</span>
</span></span></code></pre></div></li></ul><ul><li><p>ebib</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(unless
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>fboundp</span> <span style=color:#e6db74>&#39;ebib</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>autoload</span> <span style=color:#a6e22e>#&#39;</span>ebib <span style=color:#e6db74>&#34;ebib&#34;</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq ebib-preload-bib-files <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/roam/References.bib&#34;</span>
</span></span><span style=display:flex><span>				 <span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/roam/Book.bib&#34;</span>))
</span></span><span style=display:flex><span>(setq ebib-file-search-dirs <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/storage/pdf&#34;</span>))
</span></span><span style=display:flex><span>(setq ebib-keywords (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;ref/keywords.txt&#34;</span> dn-roam))
</span></span><span style=display:flex><span>(setq ebib-notes-directory (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;ref&#34;</span> dn-roam))
</span></span><span style=display:flex><span>(setq ebib-filters-default-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;ref/ebib-filters&#34;</span> dn-roam))
</span></span><span style=display:flex><span>(setq ebib-reading-list-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;ref/reading_list.org&#34;</span> dn-roam))
</span></span><span style=display:flex><span>(setq ebib-keywords-field-keep-sorted <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq ebib-keywords-file-save-on-exit <span style=color:#e6db74>&#39;always</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>;; (setq ebib-index-columns &#39;((&#34;Entry Key&#34; 30 t) (&#34;Note&#34; 1 nil) (&#34;Year&#34; 6 t) (&#34;Author/Editor&#34; 30 nil) (&#34;Title&#34; 50 t)))</span>
</span></span><span style=display:flex><span>(setq ebib-index-columns <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;Entry Key&#34;</span> <span style=color:#ae81ff>30</span> <span style=color:#66d9ef>t</span>) (<span style=color:#e6db74>&#34;Note&#34;</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>nil</span>) (<span style=color:#e6db74>&#34;Title&#34;</span> <span style=color:#ae81ff>50</span> <span style=color:#66d9ef>t</span>)))
</span></span><span style=display:flex><span>(setq ebib-file-associations <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;ps&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;gv&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;&lt;f2&gt;&#34;</span>) <span style=color:#e6db74>&#39;ebib</span>)
</span></span></code></pre></div></li></ul><ul><li><p>import bib to ebib from zotero</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/ebib-import-from-zotero ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Import entry from zotero to ebib.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (ebib)
</span></span><span style=display:flex><span>  (find-file <span style=color:#e6db74>&#34;~/Documents/zotero.bib&#34;</span>)
</span></span><span style=display:flex><span>  (ebib-import-entries)
</span></span><span style=display:flex><span>  (quit-window-delete)
</span></span><span style=display:flex><span>  (ebib-quit-entry-buffer))
</span></span></code></pre></div></li></ul><ul><li><p>oc-csl</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(if (version&lt; <span style=color:#e6db74>&#34;9.5&#34;</span> org-version)
</span></span><span style=display:flex><span>    (progn
</span></span><span style=display:flex><span>      (require <span style=color:#e6db74>&#39;oc-csl</span>)
</span></span><span style=display:flex><span>      (setq org-cite-global-bibliography <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;/Users/duanning/Nextcloud/L.Personal.Galaxy/roam/References.bib&#34;</span>
</span></span><span style=display:flex><span>					   <span style=color:#e6db74>&#34;/Users/duanning/Nextcloud/L.Personal.Galaxy/roam/Book.bib&#34;</span>))
</span></span><span style=display:flex><span>      (setq org-cite-insert-processor <span style=color:#e6db74>&#39;citar</span>
</span></span><span style=display:flex><span>	    org-cite-follow-processor <span style=color:#e6db74>&#39;citar</span>
</span></span><span style=display:flex><span>	    org-cite-activate-processor <span style=color:#e6db74>&#39;citar</span>)))
</span></span></code></pre></div></li></ul><ul><li><p>citar</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq citar-bibliography <span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/roam/References.bib&#34;</span>
</span></span><span style=display:flex><span>      citar-templates <span style=color:#f92672>&#39;</span>((main <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${author editor:30} ${date year issued:4} ${title:48}&#34;</span>)
</span></span><span style=display:flex><span>			  (suffix <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${=key= id:15} ${=type=:12} ${tags keywords:*}&#34;</span>)
</span></span><span style=display:flex><span>			  (preview <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;${author editor} (${year issued date}) ${title}, ${journal journaltitle publisher container-title collection-title}.\n&#34;</span>)
</span></span><span style=display:flex><span>			  (note <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;#+title: Notes on ${author editor}, ${title}&#34;</span>))
</span></span><span style=display:flex><span>      citar-at-point-function <span style=color:#e6db74>&#39;embark-act</span>
</span></span><span style=display:flex><span>      citar-open-note-function <span style=color:#e6db74>&#39;orb-citar-edit-note</span>
</span></span><span style=display:flex><span>      citar-notes-paths <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/roam/ref&#34;</span>)
</span></span><span style=display:flex><span>      citar-library-paths <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/storage/pdf&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq citar-symbols
</span></span><span style=display:flex><span>      <span style=color:#f92672>`</span>((file <span style=color:#f92672>,</span>(all-the-icons-faicon <span style=color:#e6db74>&#34;file-o&#34;</span> :face <span style=color:#e6db74>&#39;all-the-icons-green</span> :v-adjust <span style=color:#ae81ff>-0.1</span>) <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34; &#34;</span>)
</span></span><span style=display:flex><span>	(note <span style=color:#f92672>,</span>(all-the-icons-material <span style=color:#e6db74>&#34;speaker_notes&#34;</span> :face <span style=color:#e6db74>&#39;all-the-icons-blue</span> :v-adjust <span style=color:#ae81ff>-0.3</span>) <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34; &#34;</span>)
</span></span><span style=display:flex><span>	(link <span style=color:#f92672>,</span>(all-the-icons-octicon <span style=color:#e6db74>&#34;link&#34;</span> :face <span style=color:#e6db74>&#39;all-the-icons-orange</span> :v-adjust <span style=color:#ae81ff>0.01</span>) <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34; &#34;</span>)))
</span></span><span style=display:flex><span>(setq citar-symbol-separator <span style=color:#e6db74>&#34;  &#34;</span>)
</span></span></code></pre></div></li></ul><ul><li><p>consult-bibtex</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;consult-bibtex</span>)
</span></span></code></pre></div></li></ul><ul><li><p>org-roam-bibtex</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq orb-note-actions-interface <span style=color:#e6db74>&#39;default</span>
</span></span><span style=display:flex><span>      orb-roam-ref-format <span style=color:#e6db74>&#39;org-cite</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(org-roam-bibtex-mode)
</span></span></code></pre></div></li></ul><h4 id=tasks-manage>Tasks manage<a hidden class=anchor aria-hidden=true href=#tasks-manage>#</a></h4><ul><li><p>Enhance function</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp></code></pre></div></li></ul><ul><li><p>org-gtd</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(unless
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>fboundp</span> <span style=color:#e6db74>&#39;org-edna-mode</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>autoload</span> <span style=color:#a6e22e>#&#39;</span>org-edna-mode <span style=color:#e6db74>&#34;org-gtd&#34;</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(require <span style=color:#e6db74>&#39;org-gtd</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-edna-use-inheritance <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      org-gtd-directory (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;todos&#34;</span> dn-galaxy))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#a6e22e>#&#39;</span>org-edna-mode)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;org-gtd</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> org-gtd-process-map (kbd <span style=color:#e6db74>&#34;C-c C-c&#34;</span>) <span style=color:#e6db74>&#39;org-gtd-choose</span>))
</span></span></code></pre></div></li></ul><ul><li><p>org-agenda</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-agenda-finalize-hook</span> <span style=color:#a6e22e>#&#39;</span>org-agenda-find-same-or-today-or-agenda <span style=color:#ae81ff>90</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-agenda-hide-tags-regexp (regexp-opt <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;project&#34;</span>))) <span style=color:#75715e>;; hide project tag</span>
</span></span><span style=display:flex><span>(setq org-agenda-files <span style=color:#f92672>`</span>(<span style=color:#f92672>,</span>org-gtd-directory))
</span></span><span style=display:flex><span>(setq org-agenda-prefix-format <span style=color:#f92672>&#39;</span>((agenda <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34; %i %?-12t% s&#34;</span>)
</span></span><span style=display:flex><span>				 (todo   <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34; %i&#34;</span>)
</span></span><span style=display:flex><span>				 (tags   <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34; %i %-12:c&#34;</span>)
</span></span><span style=display:flex><span>				 (search <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34; %i %-12:c&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-agenda-tags-todo-honor-ignore-options <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      org-agenda-start-on-weekday <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>      org-agenda-dim-blocked-tasks <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>      org-agenda-compact-blocks <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      org-agenda-to-appt <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/org-agenda ()
</span></span><span style=display:flex><span>    (interactive)
</span></span><span style=display:flex><span>    (org-agenda <span style=color:#66d9ef>nil</span> <span style=color:#e6db74>&#34; &#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;org</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> org-mode-map (kbd <span style=color:#e6db74>&#34;C-,&#34;</span>) <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> org-mode-map (kbd <span style=color:#e6db74>&#34;C-&#39;&#34;</span>) <span style=color:#66d9ef>nil</span>))
</span></span></code></pre></div></li></ul><ul><li><p>Dynamic agenda</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#75715e>;; https://magnus.therning.org/2021-07-23-keeping-todo-items-in-org-roam-v2.html</span>
</span></span><span style=display:flex><span>(defun vulpea-project-p ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Return non-nil if current buffer has any todo entry.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>TODO entries marked as done are ignored, meaning the this
</span></span></span><span style=display:flex><span><span style=color:#e6db74>function returns nil if current buffer contains only completed
</span></span></span><span style=display:flex><span><span style=color:#e6db74>tasks.&#34;</span>
</span></span><span style=display:flex><span>  (seq-find                                 <span style=color:#75715e>; (3)</span>
</span></span><span style=display:flex><span>   (lambda (type)
</span></span><span style=display:flex><span>     (or (<span style=color:#a6e22e>eq</span> type <span style=color:#e6db74>&#39;todo</span>)
</span></span><span style=display:flex><span>	 (<span style=color:#a6e22e>eq</span> type <span style=color:#e6db74>&#39;done</span>)))
</span></span><span style=display:flex><span>   (org-element-map                         <span style=color:#75715e>; (2)</span>
</span></span><span style=display:flex><span>       (org-element-parse-buffer <span style=color:#e6db74>&#39;headline</span>) <span style=color:#75715e>; (1)</span>
</span></span><span style=display:flex><span>       <span style=color:#e6db74>&#39;headline</span>
</span></span><span style=display:flex><span>     (lambda (h)
</span></span><span style=display:flex><span>       (org-element-property :todo-type h)))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun vulpea-project-update-tag ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Update PROJECT tag in the current buffer.&#34;</span>
</span></span><span style=display:flex><span>  (when (and (not (<span style=color:#a6e22e>active-minibuffer-window</span>))
</span></span><span style=display:flex><span>	     (vulpea-buffer-p))
</span></span><span style=display:flex><span>    (save-excursion
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>goto-char</span> (<span style=color:#a6e22e>point-min</span>))
</span></span><span style=display:flex><span>      (let* ((tags (vulpea-buffer-tags-get))
</span></span><span style=display:flex><span>	     (original-tags tags))
</span></span><span style=display:flex><span>	(if (vulpea-project-p)
</span></span><span style=display:flex><span>	    (setq tags (<span style=color:#a6e22e>cons</span> <span style=color:#e6db74>&#34;project&#34;</span> tags))
</span></span><span style=display:flex><span>	  (setq tags (remove <span style=color:#e6db74>&#34;project&#34;</span> tags)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>;; cleanup duplicates</span>
</span></span><span style=display:flex><span>	(setq tags (seq-uniq tags))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>;; update tags if changed</span>
</span></span><span style=display:flex><span>	(when (or (seq-difference tags original-tags)
</span></span><span style=display:flex><span>		  (seq-difference original-tags tags))
</span></span><span style=display:flex><span>	  (<span style=color:#a6e22e>apply</span> <span style=color:#a6e22e>#&#39;</span>vulpea-buffer-tags-set tags))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun vulpea-buffer-p ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Return non-nil if the currently visited buffer is a note.&#34;</span>
</span></span><span style=display:flex><span>  (and <span style=color:#a6e22e>buffer-file-name</span>
</span></span><span style=display:flex><span>       (string-prefix-p
</span></span><span style=display:flex><span>	(<span style=color:#a6e22e>expand-file-name</span> (<span style=color:#a6e22e>file-name-as-directory</span> org-roam-directory))
</span></span><span style=display:flex><span>	(<span style=color:#a6e22e>file-name-directory</span> <span style=color:#a6e22e>buffer-file-name</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (defun vulpea-project-files ()</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;     &#34;Return a list of note files containing &#39;project&#39; tag.&#34; ;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;     (seq-uniq</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;      (seq-map</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;       #&#39;car</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;       (org-roam-db-query</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;        [:select [nodes:file]</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;         :from tags</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;         :left-join nodes</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;         :on (= tags:node-id nodes:id)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;         :where (like tag (quote &#34;%\&#34;project\&#34;%&#34;))]))))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (defun vulpea-agenda-files-update (&amp;rest _)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;   &#34;Update the value of `org-agenda-files&#39;.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;   (setq org-agenda-files (vulpea-project-files)))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; functions borrowed from `vulpea&#39; library</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; https://github.com/d12frosted/vulpea/blob/6a735c34f1f64e1f70da77989e9ce8da7864e5ff/vulpea-buffer.el</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun vulpea-buffer-tags-get ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Return filetags value in current buffer.&#34;</span>
</span></span><span style=display:flex><span>  (vulpea-buffer-prop-get-list <span style=color:#e6db74>&#34;filetags&#34;</span> <span style=color:#e6db74>&#34;[ :]&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun vulpea-buffer-tags-set (<span style=color:#66d9ef>&amp;rest</span> tags)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Set TAGS in current buffer.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>If filetags value is already set, replace it.&#34;</span>
</span></span><span style=display:flex><span>  (if tags
</span></span><span style=display:flex><span>      (vulpea-buffer-prop-set
</span></span><span style=display:flex><span>       <span style=color:#e6db74>&#34;filetags&#34;</span> (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;:&#34;</span> (string-join tags <span style=color:#e6db74>&#34;:&#34;</span>) <span style=color:#e6db74>&#34;:&#34;</span>))
</span></span><span style=display:flex><span>    (vulpea-buffer-prop-remove <span style=color:#e6db74>&#34;filetags&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun vulpea-buffer-tags-add (tag)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Add a TAG to filetags in current buffer.&#34;</span>
</span></span><span style=display:flex><span>  (let* ((tags (vulpea-buffer-tags-get))
</span></span><span style=display:flex><span>	 (tags (<span style=color:#a6e22e>append</span> tags (<span style=color:#a6e22e>list</span> tag))))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>apply</span> <span style=color:#a6e22e>#&#39;</span>vulpea-buffer-tags-set tags)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun vulpea-buffer-tags-remove (tag)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Remove a TAG from filetags in current buffer.&#34;</span>
</span></span><span style=display:flex><span>  (let* ((tags (vulpea-buffer-tags-get))
</span></span><span style=display:flex><span>	 (tags (<span style=color:#a6e22e>delete</span> tag tags)))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>apply</span> <span style=color:#a6e22e>#&#39;</span>vulpea-buffer-tags-set tags)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun vulpea-buffer-prop-set (name value)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Set a file property called NAME to VALUE in buffer file.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>If the property is already set, replace its value.&#34;</span>
</span></span><span style=display:flex><span>  (setq name (<span style=color:#a6e22e>downcase</span> name))
</span></span><span style=display:flex><span>  (org-with-point-at <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    (let ((case-fold-search <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>      (if (<span style=color:#a6e22e>re-search-forward</span> (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;^#\\+&#34;</span> name <span style=color:#e6db74>&#34;:\\(.*\\)&#34;</span>)
</span></span><span style=display:flex><span>			     (<span style=color:#a6e22e>point-max</span>) <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>	  (<span style=color:#a6e22e>replace-match</span> (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;#+&#34;</span> name <span style=color:#e6db74>&#34;: &#34;</span> value) <span style=color:#e6db74>&#39;fixedcase</span>)
</span></span><span style=display:flex><span>	(while (and (not (<span style=color:#a6e22e>eobp</span>))
</span></span><span style=display:flex><span>		    (<span style=color:#a6e22e>looking-at</span> <span style=color:#e6db74>&#34;^[#:]&#34;</span>))
</span></span><span style=display:flex><span>	  (if (save-excursion (<span style=color:#a6e22e>end-of-line</span>) (<span style=color:#a6e22e>eobp</span>))
</span></span><span style=display:flex><span>	      (progn
</span></span><span style=display:flex><span>		(<span style=color:#a6e22e>end-of-line</span>)
</span></span><span style=display:flex><span>		(<span style=color:#a6e22e>insert</span> <span style=color:#e6db74>&#34;\n&#34;</span>))
</span></span><span style=display:flex><span>	    (<span style=color:#a6e22e>forward-line</span>)
</span></span><span style=display:flex><span>	    (<span style=color:#a6e22e>beginning-of-line</span>)))
</span></span><span style=display:flex><span>	(<span style=color:#a6e22e>insert</span> <span style=color:#e6db74>&#34;#+&#34;</span> name <span style=color:#e6db74>&#34;: &#34;</span> value <span style=color:#e6db74>&#34;\n&#34;</span>)))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun vulpea-buffer-prop-set-list (name values <span style=color:#66d9ef>&amp;optional</span> separators)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Set a file property called NAME to VALUES in current buffer.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>VALUES are quoted and combined into single string using
</span></span></span><span style=display:flex><span><span style=color:#e6db74></span><span style=color:#e6db74>`combine-and-quote-strings&#39;</span><span style=color:#e6db74>.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>If SEPARATORS is non-nil, it should be a regular expression
</span></span></span><span style=display:flex><span><span style=color:#e6db74>matching text that separates, but is not part of, the substrings.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>If nil it defaults to </span><span style=color:#e6db74>`split-string-default-separators&#39;</span><span style=color:#e6db74>, normally
</span></span></span><span style=display:flex><span><span style=color:#e6db74>\&#34;[ \f\t\n\r\v]+\&#34;, and OMIT-NULLS is forced to t.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>If the property is already set, replace its value.&#34;</span>
</span></span><span style=display:flex><span>  (vulpea-buffer-prop-set
</span></span><span style=display:flex><span>   name (combine-and-quote-strings values separators)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun vulpea-buffer-prop-get (name)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Get a buffer property called NAME as a string.&#34;</span>
</span></span><span style=display:flex><span>  (org-with-point-at <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    (when (<span style=color:#a6e22e>re-search-forward</span> (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;^#\\+&#34;</span> name <span style=color:#e6db74>&#34;: \\(.*\\)&#34;</span>)
</span></span><span style=display:flex><span>			     (<span style=color:#a6e22e>point-max</span>) <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>buffer-substring-no-properties</span>
</span></span><span style=display:flex><span>       (<span style=color:#a6e22e>match-beginning</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>       (<span style=color:#a6e22e>match-end</span> <span style=color:#ae81ff>1</span>)))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun vulpea-buffer-prop-get-list (name <span style=color:#66d9ef>&amp;optional</span> separators)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Get a buffer property NAME as a list using SEPARATORS.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>If SEPARATORS is non-nil, it should be a regular expression
</span></span></span><span style=display:flex><span><span style=color:#e6db74>matching text that separates, but is not part of, the substrings.
</span></span></span><span style=display:flex><span><span style=color:#e6db74>If nil it defaults to </span><span style=color:#e6db74>`split-string-default-separators&#39;</span><span style=color:#e6db74>, normally
</span></span></span><span style=display:flex><span><span style=color:#e6db74>\&#34;[ \f\t\n\r\v]+\&#34;, and OMIT-NULLS is forced to t.&#34;</span>
</span></span><span style=display:flex><span>  (let ((value (vulpea-buffer-prop-get name)))
</span></span><span style=display:flex><span>    (when (and value (not (string-empty-p value)))
</span></span><span style=display:flex><span>      (split-string-and-unquote value separators))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun vulpea-buffer-prop-remove (name)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Remove a buffer property called NAME.&#34;</span>
</span></span><span style=display:flex><span>  (org-with-point-at <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    (when (<span style=color:#a6e22e>re-search-forward</span> (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;\\(^#\\+&#34;</span> name <span style=color:#e6db74>&#34;:.*\n?\\)&#34;</span>)
</span></span><span style=display:flex><span>			     (<span style=color:#a6e22e>point-max</span>) <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>replace-match</span> <span style=color:#e6db74>&#34;&#34;</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; https://systemcrafters.net/build-a-second-brain-in-emacs/5-org-roam-hacks/</span>
</span></span><span style=display:flex><span>(defun my/org-roam-filter-by-tag (tag-name)
</span></span><span style=display:flex><span>  (lambda (node)
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>member</span> tag-name (org-roam-node-tags node))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/org-roam-list-notes-by-tag (tag-name)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>mapcar</span> <span style=color:#a6e22e>#&#39;</span>org-roam-node-file
</span></span><span style=display:flex><span>	  (seq-filter
</span></span><span style=display:flex><span>	   (my/org-roam-filter-by-tag tag-name)
</span></span><span style=display:flex><span>	   (org-roam-node-list))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/org-roam-refresh-agenda-list ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (dolist (project-file (my/org-roam-list-notes-by-tag <span style=color:#e6db74>&#34;project&#34;</span>))
</span></span><span style=display:flex><span>    (add-to-list <span style=color:#e6db74>&#39;org-agenda-files</span> project-file)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;find-file-hook</span> <span style=color:#a6e22e>#&#39;</span>vulpea-project-update-tag)
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;before-save-hook</span> <span style=color:#a6e22e>#&#39;</span>vulpea-project-update-tag)
</span></span><span style=display:flex><span><span style=color:#75715e>;; (add-hook &#39;org-agenda-mode-hook #&#39;my/org-roam-refresh-agenda-list)</span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;after-init-hook</span> <span style=color:#a6e22e>#&#39;</span>my/org-roam-refresh-agenda-list)
</span></span></code></pre></div></li></ul><ul><li><p>Org agenda view</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq org-agenda-custom-commands
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34; &#34;</span> <span style=color:#e6db74>&#34;Agendas&#34;</span>
</span></span><span style=display:flex><span>	 ((agenda <span style=color:#e6db74>&#34;&#34;</span> ((org-agenda-span <span style=color:#e6db74>&#39;day</span>)
</span></span><span style=display:flex><span>		      (org-super-agenda-groups
</span></span><span style=display:flex><span>		       <span style=color:#f92672>&#39;</span>((:name <span style=color:#e6db74>&#34;Today with specific time&#34;</span>
</span></span><span style=display:flex><span>				:time-grid <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>				:order <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>			 (:name <span style=color:#e6db74>&#34;Habit and Daily Review: DO IT EVERYDAY&#34;</span>
</span></span><span style=display:flex><span>				:and (:scheduled <span style=color:#66d9ef>t</span> :tag (<span style=color:#e6db74>&#34;Habit&#34;</span> <span style=color:#e6db74>&#34;Review&#34;</span>) :todo <span style=color:#e6db74>&#34;NEXT&#34;</span>)
</span></span><span style=display:flex><span>				:order <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>			 (:name <span style=color:#e6db74>&#34;Life and Family: WITH SCHEDULED TODAY&#34;</span>
</span></span><span style=display:flex><span>				:and (:tag (<span style=color:#e6db74>&#34;Family&#34;</span> <span style=color:#e6db74>&#34;Son&#34;</span> <span style=color:#e6db74>&#34;Daughter&#34;</span> <span style=color:#e6db74>&#34;Wife&#34;</span> <span style=color:#e6db74>&#34;Parents&#34;</span> <span style=color:#e6db74>&#34;Life&#34;</span> <span style=color:#e6db74>&#34;Memorial&#34;</span> <span style=color:#e6db74>&#34;Insurance&#34;</span>) :scheduled today)
</span></span><span style=display:flex><span>				:order <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>			 (:name <span style=color:#e6db74>&#34;Finance&#34;</span>
</span></span><span style=display:flex><span>				:and (:tag (<span style=color:#e6db74>&#34;Finance&#34;</span>) :scheduled today))
</span></span><span style=display:flex><span>			 (:name <span style=color:#e6db74>&#34;Due Today&#34;</span>
</span></span><span style=display:flex><span>				:deadline today
</span></span><span style=display:flex><span>				:face (:foreground <span style=color:#e6db74>&#34;Red&#34;</span> :underline <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>				:order <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>			 (:name <span style=color:#e6db74>&#34;Due Soon&#34;</span>
</span></span><span style=display:flex><span>				:deadline future
</span></span><span style=display:flex><span>				:order <span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>			 (:name <span style=color:#e6db74>&#34;Overdue&#34;</span>
</span></span><span style=display:flex><span>				:deadline past
</span></span><span style=display:flex><span>				:order <span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>			 (:discard (:tag (<span style=color:#e6db74>&#34;Review&#34;</span>)))))))
</span></span><span style=display:flex><span>	  (todo <span style=color:#e6db74>&#34;&#34;</span> ((org-agenda-overriding-header <span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span>		    (org-super-agenda-groups
</span></span><span style=display:flex><span>		     <span style=color:#f92672>&#39;</span>((:name <span style=color:#e6db74>&#34;Projects lists&#34;</span>
</span></span><span style=display:flex><span>			      :children <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>			      :order <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>		       (:name <span style=color:#e6db74>&#34;Next List: DO IT ASAP.&#34;</span>
</span></span><span style=display:flex><span>			      :and (:todo <span style=color:#e6db74>&#34;NEXT&#34;</span> :scheduled <span style=color:#66d9ef>nil</span> :deadline <span style=color:#66d9ef>nil</span> :not (:tag (<span style=color:#e6db74>&#34;Review&#34;</span> <span style=color:#e6db74>&#34;FunTime&#34;</span> <span style=color:#e6db74>&#34;Reading&#34;</span>))))
</span></span><span style=display:flex><span>		       (:name <span style=color:#e6db74>&#34;Life and Family: WITHOUT SCHEDULED&#34;</span>
</span></span><span style=display:flex><span>			      :and (:tag (<span style=color:#e6db74>&#34;Family&#34;</span> <span style=color:#e6db74>&#34;Son&#34;</span> <span style=color:#e6db74>&#34;Daughter&#34;</span> <span style=color:#e6db74>&#34;Wife&#34;</span> <span style=color:#e6db74>&#34;Parents&#34;</span> <span style=color:#e6db74>&#34;Life&#34;</span> <span style=color:#e6db74>&#34;Memorial&#34;</span>) :scheduled <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>			      :order <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>		       (:name <span style=color:#e6db74>&#34;Work&#34;</span>
</span></span><span style=display:flex><span>			      :and (:tag (<span style=color:#e6db74>&#34;Work&#34;</span>) :scheduled <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>			      :order <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>		       (:name <span style=color:#e6db74>&#34;Reading lists&#34;</span>
</span></span><span style=display:flex><span>			      :tag <span style=color:#e6db74>&#34;Reading&#34;</span>)
</span></span><span style=display:flex><span>		       (:name <span style=color:#e6db74>&#34;Fun time&#34;</span>
</span></span><span style=display:flex><span>			      :and (:tag (<span style=color:#e6db74>&#34;FunTime&#34;</span>) :scheduled <span style=color:#66d9ef>nil</span>)) <span style=color:#75715e>;; 此为 funtime ，无 scheduled ，因为有 scheduled ，当时间到的时该应该显示在 schedule 中。</span>
</span></span><span style=display:flex><span>		       (:name <span style=color:#e6db74>&#34;COMPUTER SCIENCE&#34;</span>
</span></span><span style=display:flex><span>			      :and (:tag (<span style=color:#e6db74>&#34;Emacs&#34;</span> <span style=color:#e6db74>&#34;Arch&#34;</span> <span style=color:#e6db74>&#34;Linux&#34;</span> <span style=color:#e6db74>&#34;Ubuntu&#34;</span> <span style=color:#e6db74>&#34;Windows&#34;</span> <span style=color:#e6db74>&#34;Computer&#34;</span>))
</span></span><span style=display:flex><span>			      :order <span style=color:#ae81ff>80</span>)
</span></span><span style=display:flex><span>		       (:discard (:scheduled <span style=color:#66d9ef>t</span> :deadline <span style=color:#66d9ef>t</span>))))))
</span></span><span style=display:flex><span>	  (todo <span style=color:#e6db74>&#34;SOMEDAY&#34;</span> ((org-agenda-overriding-header <span style=color:#e6db74>&#34;==============MAYBE FUTURE==============&#34;</span>)))
</span></span><span style=display:flex><span>	  (todo <span style=color:#e6db74>&#34;WAIT&#34;</span> ((org-agenda-overriding-header <span style=color:#e6db74>&#34;&#34;</span>)))
</span></span><span style=display:flex><span>	  (todo <span style=color:#e6db74>&#34;CNCL&#34;</span> ((org-agenda-overriding-header <span style=color:#e6db74>&#34;&#34;</span>)))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;after-init-hook</span> <span style=color:#e6db74>&#39;org-super-agenda-mode</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>;; (org-super-agenda-mode)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq org-agenda-custom-commands
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34; &#34;</span> <span style=color:#e6db74>&#34;Agendas&#34;</span>
</span></span><span style=display:flex><span>	 ((agenda <span style=color:#e6db74>&#34;&#34;</span> ((org-agenda-span <span style=color:#e6db74>&#39;day</span>)
</span></span><span style=display:flex><span>		      (org-super-agenda-groups
</span></span><span style=display:flex><span>		       <span style=color:#f92672>&#39;</span>((:name <span style=color:#e6db74>&#34;Scheduled earlier&#34;</span>
</span></span><span style=display:flex><span>				:scheduled past)
</span></span><span style=display:flex><span>			 (:name <span style=color:#e6db74>&#34;Today&#34;</span>
</span></span><span style=display:flex><span>				:and (:scheduled today :not (:tag (<span style=color:#e6db74>&#34;Family&#34;</span> <span style=color:#e6db74>&#34;Reading&#34;</span>))))
</span></span><span style=display:flex><span>			 (:name <span style=color:#e6db74>&#34;Due Today&#34;</span>
</span></span><span style=display:flex><span>				:deadline today
</span></span><span style=display:flex><span>				:face (:foreground <span style=color:#e6db74>&#34;Red&#34;</span> :underline <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>				:order <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>			 (:name <span style=color:#e6db74>&#34;Due Soon&#34;</span>
</span></span><span style=display:flex><span>				:deadline future
</span></span><span style=display:flex><span>				:order <span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>			 (:name <span style=color:#e6db74>&#34;Overdue&#34;</span>
</span></span><span style=display:flex><span>				:deadline past
</span></span><span style=display:flex><span>				:order <span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>			 (:discard (:anything <span style=color:#66d9ef>t</span>))))))
</span></span><span style=display:flex><span>	  (todo <span style=color:#e6db74>&#34;&#34;</span> ((org-agenda-overriding-header <span style=color:#e6db74>&#34;&#34;</span>)
</span></span><span style=display:flex><span>		    (org-super-agenda-groups
</span></span><span style=display:flex><span>		     <span style=color:#f92672>&#39;</span>((:name <span style=color:#e6db74>&#34;Next List: DO IT ASAP.&#34;</span>
</span></span><span style=display:flex><span>			      :and (:todo <span style=color:#e6db74>&#34;NEXT&#34;</span> :scheduled <span style=color:#66d9ef>nil</span> :deadline <span style=color:#66d9ef>nil</span> :not (:tag (<span style=color:#e6db74>&#34;Review&#34;</span> <span style=color:#e6db74>&#34;FunTime&#34;</span> <span style=color:#e6db74>&#34;Reading&#34;</span>))))
</span></span><span style=display:flex><span>		       (:name <span style=color:#e6db74>&#34;Family&#34;</span>
</span></span><span style=display:flex><span>			      :and (:tag (<span style=color:#e6db74>&#34;Family&#34;</span> <span style=color:#e6db74>&#34;Life&#34;</span> <span style=color:#e6db74>&#34;Memorial&#34;</span> <span style=color:#e6db74>&#34;Insurance&#34;</span>) :scheduled today))
</span></span><span style=display:flex><span>		       (:name <span style=color:#e6db74>&#34;Projects lists&#34;</span>
</span></span><span style=display:flex><span>			      :children <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>			      :order <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>		       (:habit <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>		       (:name <span style=color:#e6db74>&#34;Work&#34;</span>
</span></span><span style=display:flex><span>			      :and (:tag (<span style=color:#e6db74>&#34;Work&#34;</span>) :scheduled <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>			      :order <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>		       (:name <span style=color:#e6db74>&#34;Reading lists&#34;</span>
</span></span><span style=display:flex><span>			      :tag <span style=color:#e6db74>&#34;Reading&#34;</span>)
</span></span><span style=display:flex><span>		       (:name <span style=color:#e6db74>&#34;Fun time&#34;</span>
</span></span><span style=display:flex><span>			      :and (:tag (<span style=color:#e6db74>&#34;FunTime&#34;</span>) :scheduled <span style=color:#66d9ef>nil</span>))
</span></span><span style=display:flex><span>		       (:name <span style=color:#e6db74>&#34;COMPUTER SCIENCE&#34;</span>
</span></span><span style=display:flex><span>			      :and (:tag (<span style=color:#e6db74>&#34;Emacs&#34;</span> <span style=color:#e6db74>&#34;Arch&#34;</span> <span style=color:#e6db74>&#34;Linux&#34;</span> <span style=color:#e6db74>&#34;Ubuntu&#34;</span> <span style=color:#e6db74>&#34;Windows&#34;</span> <span style=color:#e6db74>&#34;Computer&#34;</span>))
</span></span><span style=display:flex><span>			      :order <span style=color:#ae81ff>80</span>)
</span></span><span style=display:flex><span>		       (:discard (:scheduled <span style=color:#66d9ef>t</span> :deadline <span style=color:#66d9ef>t</span>))))))
</span></span><span style=display:flex><span>	  (todo <span style=color:#e6db74>&#34;SOMEDAY&#34;</span> ((org-agenda-overriding-header <span style=color:#e6db74>&#34;==============MAYBE FUTURE==============&#34;</span>)))
</span></span><span style=display:flex><span>	  (todo <span style=color:#e6db74>&#34;WAIT&#34;</span> ((org-agenda-overriding-header <span style=color:#e6db74>&#34;&#34;</span>)))
</span></span><span style=display:flex><span>	  (todo <span style=color:#e6db74>&#34;CNCL&#34;</span> ((org-agenda-overriding-header <span style=color:#e6db74>&#34;&#34;</span>)))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;after-init-hook</span> <span style=color:#e6db74>&#39;org-super-agenda-mode</span>)
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;org-super-agenda</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> org-super-agenda-header-map (kbd <span style=color:#e6db74>&#34;j&#34;</span>) <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> org-super-agenda-header-map (kbd <span style=color:#e6db74>&#34;k&#34;</span>) <span style=color:#66d9ef>nil</span>))
</span></span></code></pre></div></li></ul><ul><li><p>org-caldav</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;org-caldav</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-caldav-calendar-id <span style=color:#e6db74>&#34;gtd&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-caldav-inbox <span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/todos/inbox.org&#34;</span>
</span></span><span style=display:flex><span>      org-caldav-files <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/todos/org-gtd-tasks.org&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-caldav-select-tags <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;gtd&#34;</span>))
</span></span><span style=display:flex><span>(setq org-caldav-exclude-tags <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;nogtd&#34;</span>))
</span></span><span style=display:flex><span>(setq org-icalendar-timezone <span style=color:#e6db74>&#34;Asia/Shanghai&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-icalendar-include-todo <span style=color:#e6db74>&#39;all</span>)
</span></span><span style=display:flex><span>(setq org-caldav-todo-percent-states <span style=color:#f92672>&#39;</span>((<span style=color:#ae81ff>0</span> <span style=color:#e6db74>&#34;SOMEDAY&#34;</span>)
</span></span><span style=display:flex><span>				       (<span style=color:#ae81ff>1</span> <span style=color:#e6db74>&#34;TODO&#34;</span>)
</span></span><span style=display:flex><span>				       (<span style=color:#ae81ff>2</span> <span style=color:#e6db74>&#34;NEXT&#34;</span>)
</span></span><span style=display:flex><span>				       (<span style=color:#ae81ff>10</span> <span style=color:#e6db74>&#34;WAIT&#34;</span>)
</span></span><span style=display:flex><span>				       (<span style=color:#ae81ff>100</span> <span style=color:#e6db74>&#34;DONE&#34;</span>)))
</span></span><span style=display:flex><span>(setq org-caldav-sync-todo <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><p>动态的更新 <code>org-caldav-files</code> ，和 <code>org-agenda-files</code> 一样。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/org-caldav-refresh-list ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (dolist (project-file (my/org-roam-list-notes-by-tag <span style=color:#e6db74>&#34;project&#34;</span>))
</span></span><span style=display:flex><span>    (add-to-list <span style=color:#e6db74>&#39;org-caldav-files</span> project-file)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;after-init-hook</span> <span style=color:#a6e22e>#&#39;</span>my/org-caldav-refresh-list)
</span></span></code></pre></div><p>只当8点到23点之间，自动与服务器同步。当 Emacs 闲置 5 分钟时进行同步，以免卡 Emacs 。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/org-caldav-sync ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (org-caldav-sync)
</span></span><span style=display:flex><span>  (quit-window-delete))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (defun my/org-caldav-sync-start ()</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;   (interactive)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;   (let* ((current-time (string-to-number (format-time-string &#34;%H&#34;)))</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; 	 (morning-time 8)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; 	 (evening-time 23))</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;     (if (and (&lt; morning-time current-time)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; 	     (&lt; current-time evening-time))</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; 	(run-with-idle-timer 10 t #&#39;my/org-caldav-sync)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; 	(my/org-caldav-sync))))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(let* ((<span style=color:#a6e22e>current-time</span> (<span style=color:#a6e22e>string-to-number</span> (<span style=color:#a6e22e>format-time-string</span> <span style=color:#e6db74>&#34;%H&#34;</span>)))
</span></span><span style=display:flex><span>       (morning-time <span style=color:#ae81ff>8</span>)
</span></span><span style=display:flex><span>       (evening-time <span style=color:#ae81ff>23</span>))
</span></span><span style=display:flex><span>  (if (and (<span style=color:#a6e22e>&lt;</span> morning-time <span style=color:#a6e22e>current-time</span>)
</span></span><span style=display:flex><span>	   (<span style=color:#a6e22e>&lt;</span> <span style=color:#a6e22e>current-time</span> evening-time))
</span></span><span style=display:flex><span>      (run-with-idle-timer <span style=color:#ae81ff>60</span> <span style=color:#66d9ef>t</span> <span style=color:#a6e22e>#&#39;</span>my/org-caldav-sync)))
</span></span></code></pre></div></li></ul><h4 id=org-export>Org Export<a hidden class=anchor aria-hidden=true href=#org-export>#</a></h4><ul><li><p>ox-hugo</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;ox</span>
</span></span><span style=display:flex><span>  (require <span style=color:#e6db74>&#39;ox-hugo</span>))
</span></span></code></pre></div></li></ul><ul><li><p>export org to docx with pandoc</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun org-export-docx ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Convert org to docx.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let ((docx-file (<span style=color:#a6e22e>concat</span> (file-name-sans-extension (<span style=color:#a6e22e>buffer-file-name</span>)) <span style=color:#e6db74>&#34;.docx&#34;</span>))
</span></span><span style=display:flex><span>	(template-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;template.docx&#34;</span> dn-template-directory)))
</span></span><span style=display:flex><span>    (shell-command (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;pandoc %s -o %s --reference-doc=%s&#34;</span> (<span style=color:#a6e22e>buffer-file-name</span>) docx-file template-file))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Convert finish: %s&#34;</span> docx-file)))
</span></span></code></pre></div></li></ul><h3 id=latex>Latex<a hidden class=anchor aria-hidden=true href=#latex>#</a></h3><h4 id=defaults>Defaults<a hidden class=anchor aria-hidden=true href=#defaults>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq org-highlight-latex-and-related <span style=color:#f92672>&#39;</span>(latex script))
</span></span></code></pre></div><h4 id=ox-latex>ox-latex<a hidden class=anchor aria-hidden=true href=#ox-latex>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq org-highlight-latex-and-related <span style=color:#f92672>&#39;</span>(latex script))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;ox-latex</span>
</span></span><span style=display:flex><span>  (add-to-list <span style=color:#e6db74>&#39;org-latex-classes</span>
</span></span><span style=display:flex><span>	       <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;dissertation&#34;</span>
</span></span><span style=display:flex><span>		 <span style=color:#e6db74>&#34;\\documentclass[UTF8,twoside,a4paper,12pt,openright]{ctexrep}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>		[NO-DEFAULT-PACKAGES]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>		[NO-PACKAGES]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>		[EXTRA]&#34;</span>
</span></span><span style=display:flex><span>		 (<span style=color:#e6db74>&#34;\\chapter{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\chapter*{%s}&#34;</span>)
</span></span><span style=display:flex><span>		 (<span style=color:#e6db74>&#34;\\section{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\section*{%s}&#34;</span>)
</span></span><span style=display:flex><span>		 (<span style=color:#e6db74>&#34;\\subsection{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\subsection*{%s}&#34;</span>)
</span></span><span style=display:flex><span>		 (<span style=color:#e6db74>&#34;\\subsubsection{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\subsubsection*{%s}&#34;</span>)
</span></span><span style=display:flex><span>		 (<span style=color:#e6db74>&#34;\\paragraph{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\paragraph*{%s}&#34;</span>)
</span></span><span style=display:flex><span>		 (<span style=color:#e6db74>&#34;\\subparagraph{%s}&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;\\subparagraph*{%s}&#34;</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-latex-compiler <span style=color:#e6db74>&#34;xelatex&#34;</span>
</span></span><span style=display:flex><span>      org-latex-pdf-process <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;xelatex -interaction nonstopmode %f&#34;</span>
</span></span><span style=display:flex><span>			      <span style=color:#e6db74>&#34;bibtex %b&#34;</span>
</span></span><span style=display:flex><span>			      <span style=color:#e6db74>&#34;xelatex -interaction nonstopmode %f&#34;</span>
</span></span><span style=display:flex><span>			      <span style=color:#e6db74>&#34;xelatex -interaction nonstopmode %f&#34;</span>
</span></span><span style=display:flex><span>			      <span style=color:#e6db74>&#34;rm -fr %b.out %b.log %b.tex %b.brf %b.bbl&#34;</span>)
</span></span><span style=display:flex><span>      org-latex-logfiles-extensions <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;lof&#34;</span> <span style=color:#e6db74>&#34;lot&#34;</span> <span style=color:#e6db74>&#34;tex~&#34;</span> <span style=color:#e6db74>&#34;aux&#34;</span> <span style=color:#e6db74>&#34;idx&#34;</span> <span style=color:#e6db74>&#34;log&#34;</span> <span style=color:#e6db74>&#34;out&#34;</span> <span style=color:#e6db74>&#34;toc&#34;</span> <span style=color:#e6db74>&#34;nav&#34;</span> <span style=color:#e6db74>&#34;snm&#34;</span> <span style=color:#e6db74>&#34;vrb&#34;</span> <span style=color:#e6db74>&#34;dvi&#34;</span> <span style=color:#e6db74>&#34;fdb_latexmk&#34;</span> <span style=color:#e6db74>&#34;blg&#34;</span> <span style=color:#e6db74>&#34;brf&#34;</span> <span style=color:#e6db74>&#34;fls&#34;</span> <span style=color:#e6db74>&#34;entoc&#34;</span> <span style=color:#e6db74>&#34;ps&#34;</span> <span style=color:#e6db74>&#34;spl&#34;</span> <span style=color:#e6db74>&#34;bbl&#34;</span>)
</span></span><span style=display:flex><span>      org-latex-prefer-user-labels <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h4 id=org-latex-impatient>org-latex-impatient<a hidden class=anchor aria-hidden=true href=#org-latex-impatient>#</a></h4><p>可以实时的预览公式。我原来使用的时 popweb 这个包，但是在 Macos 上目前有依赖无法解决。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;org-latex-impatient</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;org-mode-hook</span> <span style=color:#e6db74>&#39;org-latex-impatient-mode</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-latex-impatient-tex2svg-bin <span style=color:#e6db74>&#34;~/node_modules/mathjax-node-cli/bin/tex2svg&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq org-latex-impatient-scale <span style=color:#ae81ff>3.0</span>)
</span></span></code></pre></div><h2 id=application>Application<a hidden class=anchor aria-hidden=true href=#application>#</a></h2><h3 id=calendar>Calendar<a hidden class=anchor aria-hidden=true href=#calendar>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;cal-china-x</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq calendar-mode-line-format <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq calendar-mark-holidays-flag <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      cal-china-x-important-holidays cal-china-x-chinese-holidays
</span></span><span style=display:flex><span>      cal-china-x-general-holidays <span style=color:#f92672>&#39;</span>((holiday-lunar <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>15</span> <span style=color:#e6db74>&#34;元宵节&#34;</span>)
</span></span><span style=display:flex><span>				     (holiday-lunar <span style=color:#ae81ff>7</span> <span style=color:#ae81ff>7</span> <span style=color:#e6db74>&#34;七夕节&#34;</span>)
</span></span><span style=display:flex><span>				     (holiday-fixed <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>8</span> <span style=color:#e6db74>&#34;妇女节&#34;</span>)
</span></span><span style=display:flex><span>				     (holiday-fixed <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>12</span> <span style=color:#e6db74>&#34;植树节&#34;</span>)
</span></span><span style=display:flex><span>				     (holiday-fixed <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>4</span> <span style=color:#e6db74>&#34;青年节&#34;</span>)
</span></span><span style=display:flex><span>				     (holiday-fixed <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>1</span> <span style=color:#e6db74>&#34;儿童节&#34;</span>)
</span></span><span style=display:flex><span>				     (holiday-fixed <span style=color:#ae81ff>9</span> <span style=color:#ae81ff>10</span> <span style=color:#e6db74>&#34;教师节&#34;</span>))
</span></span><span style=display:flex><span>      holiday-other-holidays <span style=color:#f92672>&#39;</span>((holiday-fixed <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>14</span> <span style=color:#e6db74>&#34;情人节&#34;</span>)
</span></span><span style=display:flex><span>			       (holiday-fixed <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>1</span> <span style=color:#e6db74>&#34;愚人节&#34;</span>)
</span></span><span style=display:flex><span>			       (holiday-fixed <span style=color:#ae81ff>12</span> <span style=color:#ae81ff>25</span> <span style=color:#e6db74>&#34;圣诞节&#34;</span>)
</span></span><span style=display:flex><span>			       (holiday-float <span style=color:#ae81ff>5</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>2</span> <span style=color:#e6db74>&#34;母亲节&#34;</span>)
</span></span><span style=display:flex><span>			       (holiday-float <span style=color:#ae81ff>6</span> <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>3</span> <span style=color:#e6db74>&#34;父亲节&#34;</span>)
</span></span><span style=display:flex><span>			       (holiday-float <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>4</span> <span style=color:#ae81ff>4</span> <span style=color:#e6db74>&#34;感恩节&#34;</span>))
</span></span><span style=display:flex><span>      calendar-holidays (<span style=color:#a6e22e>append</span> cal-china-x-important-holidays
</span></span><span style=display:flex><span>				cal-china-x-general-holidays
</span></span><span style=display:flex><span>				holiday-other-holidays))
</span></span></code></pre></div><h3 id=pdf-reader>PDF Reader<a hidden class=anchor aria-hidden=true href=#pdf-reader>#</a></h3><h4 id=pdf-tools>pdf tools<a hidden class=anchor aria-hidden=true href=#pdf-tools>#</a></h4><p>如果不想高亮文件后打开标注，可以将 <code>pdf-annot-activate-created-annotations</code> 设置为 <code>nil</code> 。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(pdf-tools-install <span style=color:#66d9ef>t</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span> <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq pdf-view-use-scaling <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      pdf-view-use-imagemagick <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>      pdf-annot-activate-created-annotations <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      pdf-misc-print-program-executable <span style=color:#e6db74>&#34;/usr/bin/lp&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;revert-without-query</span> <span style=color:#e6db74>&#34;.+\\.pdf&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;pdf-tools-enabled-hook</span> <span style=color:#e6db74>&#39;pdf-view-themed-minor-mode</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;pdf-outline</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> pdf-outline-buffer-mode-map (kbd <span style=color:#e6db74>&#34;&lt;RET&gt;&#34;</span>) <span style=color:#e6db74>&#39;pdf-outline-follow-link-and-quit</span>))
</span></span></code></pre></div><h4 id=pdf-print>pdf print<a hidden class=anchor aria-hidden=true href=#pdf-print>#</a></h4><p>可以通过命令行使用打印机，不再需要用外部软件打开再去打印文件，而且可以选择打印的页数。来自 <a href=https://qua.name/mrb/an-org-babel-based-emacs-configuration#orgbf8348e>Marcel van der Boom</a> 的配置文件。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun mrb/pdf-misc-print-pages(filename pages <span style=color:#66d9ef>&amp;optional</span> interactive-p)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Wrapper for `pdf-misc-print-document` to add page selection support&#34;</span>
</span></span><span style=display:flex><span>    (interactive (<span style=color:#a6e22e>list</span> (pdf-view-buffer-file-name)
</span></span><span style=display:flex><span>		       (<span style=color:#a6e22e>read-string</span> <span style=color:#e6db74>&#34;Page range (empty for all pages): &#34;</span>
</span></span><span style=display:flex><span>				    (<span style=color:#a6e22e>number-to-string</span> (pdf-view-current-page)))
</span></span><span style=display:flex><span>		       <span style=color:#66d9ef>t</span>) pdf-view-mode)
</span></span><span style=display:flex><span>    (let ((pdf-misc-print-program-args
</span></span><span style=display:flex><span>	   (if (not (string-blank-p pages))
</span></span><span style=display:flex><span>	       (<span style=color:#a6e22e>cons</span> (<span style=color:#a6e22e>concat</span> <span style=color:#e6db74>&#34;-P &#34;</span> pages) pdf-misc-print-program-args)
</span></span><span style=display:flex><span>	     pdf-misc-print-program-args)))
</span></span><span style=display:flex><span>      (pdf-misc-print-document filename)))
</span></span></code></pre></div><h4 id=pdf-key-settings>pdf key settings<a hidden class=anchor aria-hidden=true href=#pdf-key-settings>#</a></h4><p>绑定 w ，获得文件名，我不需要那一大串路径。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/get-file-name ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (kill-new (file-name-base (<span style=color:#a6e22e>buffer-file-name</span>)))
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>message</span> <span style=color:#e6db74>&#34;Copied %s&#34;</span> (file-name-base (<span style=color:#a6e22e>buffer-file-name</span>))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>define-key</span> pdf-view-mode-map (kbd <span style=color:#e6db74>&#34;w&#34;</span>) <span style=color:#e6db74>&#39;my/get-file-name</span>)
</span></span></code></pre></div><p>重新定义按键，相比原来的 <code>C-x C-a h</code> 等按键设定要方便的多。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(<span style=color:#a6e22e>define-key</span> pdf-view-mode-map (kbd <span style=color:#e6db74>&#34;h&#34;</span>) <span style=color:#e6db74>&#39;pdf-annot-add-highlight-markup-annotation</span>)
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>define-key</span> pdf-view-mode-map (kbd <span style=color:#e6db74>&#34;t&#34;</span>) <span style=color:#e6db74>&#39;pdf-annot-add-text-annotation</span>)
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>define-key</span> pdf-view-mode-map (kbd <span style=color:#e6db74>&#34;d&#34;</span>) <span style=color:#e6db74>&#39;pdf-annot-delete</span>)
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>define-key</span> pdf-view-mode-map (kbd <span style=color:#e6db74>&#34;q&#34;</span>) <span style=color:#e6db74>&#39;kill-this-buffer</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>define-key</span> pdf-view-mode-map [remap pdf-misc-print-document] <span style=color:#e6db74>&#39;mrb/pdf-misc-print-pages</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;pdf-annot</span>
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> pdf-annot-edit-contents-minor-mode-map (kbd <span style=color:#e6db74>&#34;&lt;return&gt;&#34;</span>) <span style=color:#e6db74>&#39;pdf-annot-edit-contents-commit</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> pdf-annot-edit-contents-minor-mode-map (kbd <span style=color:#e6db74>&#34;&lt;S-return&gt;&#34;</span>) <span style=color:#e6db74>&#39;newline</span>))
</span></span></code></pre></div><h4 id=save-place>save place<a hidden class=anchor aria-hidden=true href=#save-place>#</a></h4><p>saveplace-pdf-view 可以保存 pdf 视图的位置。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(save-place-mode <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;save-place</span>
</span></span><span style=display:flex><span>  (advice-add <span style=color:#e6db74>&#39;save-place-find-file-hook</span> :around <span style=color:#a6e22e>#&#39;</span>saveplace-pdf-view-find-file-advice)
</span></span><span style=display:flex><span>  (advice-add <span style=color:#e6db74>&#39;save-place-to-alist</span> :around <span style=color:#a6e22e>#&#39;</span>saveplace-pdf-view-to-alist-advice))
</span></span></code></pre></div><h4 id=pdf-annotations>pdf annotations<a hidden class=anchor aria-hidden=true href=#pdf-annotations>#</a></h4><p>Create pdf annotations file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/edit-notes ()
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Edit reference note base pdf name.&#34;</span>
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (if (<span style=color:#a6e22e>equal</span> (file-name-extension (<span style=color:#a6e22e>buffer-name</span>)) <span style=color:#e6db74>&#34;pdf&#34;</span>)
</span></span><span style=display:flex><span>      (consult-bibtex-edit-notes (file-name-sans-extension (<span style=color:#a6e22e>buffer-name</span>)))
</span></span><span style=display:flex><span>    (consult-bibtex-edit-notes (consult-bibtex--read-entry))))
</span></span></code></pre></div><p>Extract pdf annotations with <a href=https://github.com/0xabu/pdfannots>pdfannots</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun my/org-delete-heading-content (heading)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Delete content of specific HEADING&#34;</span>
</span></span><span style=display:flex><span>  (org-map-entries
</span></span><span style=display:flex><span>   (lambda ()
</span></span><span style=display:flex><span>     (let ((name (<span style=color:#a6e22e>nth</span> <span style=color:#ae81ff>4</span> (org-heading-components))))
</span></span><span style=display:flex><span>       (if (string= name heading)
</span></span><span style=display:flex><span>	   (save-restriction
</span></span><span style=display:flex><span>	     (org-mark-subtree)
</span></span><span style=display:flex><span>	     (<span style=color:#a6e22e>forward-line</span>)
</span></span><span style=display:flex><span>	     (<span style=color:#a6e22e>delete-region</span> (<span style=color:#a6e22e>region-beginning</span>) (<span style=color:#a6e22e>region-end</span>))))))))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(defun my/extract-pdf-annots-to-ref-note ()
</span></span><span style=display:flex><span>  (interactive)
</span></span><span style=display:flex><span>  (let (annots)
</span></span><span style=display:flex><span>    (setf annots (shell-command-to-string (<span style=color:#a6e22e>format</span> <span style=color:#e6db74>&#34;pdfannots.py %s&#34;</span> (find-file (<span style=color:#a6e22e>buffer-name</span>)))))
</span></span><span style=display:flex><span>    (consult-bibtex-edit-notes (file-name-sans-extension (<span style=color:#a6e22e>buffer-name</span>)))
</span></span><span style=display:flex><span>    (my/org-delete-heading-content <span style=color:#e6db74>&#34;Research Contribution&#34;</span>)
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>goto-char</span> (org-find-exact-headline-in-buffer <span style=color:#e6db74>&#34;Research Contribution&#34;</span>))
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>forward-line</span>)
</span></span><span style=display:flex><span>    (dolist (item (split-string annots <span style=color:#e6db74>&#34;\n&#34;</span>))
</span></span><span style=display:flex><span>      (if (string-prefix-p <span style=color:#e6db74>&#34;   &gt;&#34;</span> item)
</span></span><span style=display:flex><span>	  (<span style=color:#a6e22e>princ</span> (<span style=color:#a6e22e>concat</span> (replace-regexp-in-string <span style=color:#e6db74>&#34;   &gt;&#34;</span> <span style=color:#e6db74>&#34;+&#34;</span> item) <span style=color:#e6db74>&#34;\n&#34;</span>)
</span></span><span style=display:flex><span>		 (<span style=color:#a6e22e>current-buffer</span>))))))
</span></span></code></pre></div><h3 id=git>GIT<a hidden class=anchor aria-hidden=true href=#git>#</a></h3><h4 id=magit>Magit<a hidden class=anchor aria-hidden=true href=#magit>#</a></h4><p>Magit related configuration</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq transient-history-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;transient/history.el&#34;</span> dn-cache-directory))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;magit</span>
</span></span><span style=display:flex><span>  (setq magit-display-buffer-function <span style=color:#e6db74>&#39;magit-display-buffer-fullframe-status-topleft-v1</span>)
</span></span><span style=display:flex><span>  (magit-add-section-hook <span style=color:#e6db74>&#39;magit-status-sections-hook</span>
</span></span><span style=display:flex><span>			  <span style=color:#e6db74>&#39;magit-insert-modules</span>
</span></span><span style=display:flex><span>			  <span style=color:#e6db74>&#39;magit-insert-stashes</span>
</span></span><span style=display:flex><span>			  <span style=color:#e6db74>&#39;append</span>))
</span></span></code></pre></div><h4 id=git-timemachine>git-timemachine<a hidden class=anchor aria-hidden=true href=#git-timemachine>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(unless
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>fboundp</span> <span style=color:#e6db74>&#39;git-timemachine</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>autoload</span> <span style=color:#a6e22e>#&#39;</span>git-timemachine <span style=color:#e6db74>&#34;git-timemachine&#34;</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span>))
</span></span></code></pre></div><h4 id=browse-at-remote>Browse at remote<a hidden class=anchor aria-hidden=true href=#browse-at-remote>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;browse-at-remote</span>)
</span></span></code></pre></div><h3 id=terminal>Terminal<a hidden class=anchor aria-hidden=true href=#terminal>#</a></h3><h4 id=eshell>eshell<a hidden class=anchor aria-hidden=true href=#eshell>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;C-`&#34;</span>) <span style=color:#e6db74>&#39;eshell</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq eshell-directory-name (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;eshell&#34;</span> dn-cache-directory))
</span></span></code></pre></div><h4 id=eshell-info-banner>eshell-info-banner<a hidden class=anchor aria-hidden=true href=#eshell-info-banner>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;eshell-banner-load-hook</span> <span style=color:#e6db74>&#39;eshell-info-banner-update-banner</span>)
</span></span></code></pre></div><h4 id=shell-path>shell path<a hidden class=anchor aria-hidden=true href=#shell-path>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(exec-path-from-shell-initialize)
</span></span></code></pre></div><h3 id=rss-management>Rss management<a hidden class=anchor aria-hidden=true href=#rss-management>#</a></h3><h4 id=elfeed>elfeed<a hidden class=anchor aria-hidden=true href=#elfeed>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq elfeed-db-directory (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;elfeed&#34;</span> dn-cache-directory))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq elfeed-show-entry-switch <span style=color:#a6e22e>#&#39;</span>elfeed-display-buffer)
</span></span></code></pre></div><p>elfeed buffer display. 代码借鉴自 <a href=https://github.com/karthink/.emacs.d/blob/master/lisp/setup-elfeed.el>karthink</a> 的配置。这样可以去掉 elfeed-goodies 这个包了。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun elfeed-display-buffer (buf <span style=color:#66d9ef>&amp;optional</span> act)
</span></span><span style=display:flex><span>  (pop-to-buffer buf <span style=color:#f92672>&#39;</span>((display-buffer-reuse-window display-buffer-in-side-window)
</span></span><span style=display:flex><span>		       (side <span style=color:#f92672>.</span> bottom)
</span></span><span style=display:flex><span>		       (window-height <span style=color:#f92672>.</span> <span style=color:#ae81ff>0.8</span>)
</span></span><span style=display:flex><span>		       (reusable-frames <span style=color:#f92672>.</span> visible)
</span></span><span style=display:flex><span>		       (<span style=color:#a6e22e>window-parameters</span>
</span></span><span style=display:flex><span>			(select <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>			(quit <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>			(popup <span style=color:#f92672>.</span> <span style=color:#66d9ef>t</span>)))))
</span></span></code></pre></div><h4 id=elfeed-org>elfeed-org<a hidden class=anchor aria-hidden=true href=#elfeed-org>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;elfeed</span>
</span></span><span style=display:flex><span>  (setq rmh-elfeed-org-files (<span style=color:#a6e22e>list</span> <span style=color:#e6db74>&#34;~/Nextcloud/L.Personal.Galaxy/roam/main/elfeed.org&#34;</span>))
</span></span><span style=display:flex><span>  (elfeed-org))
</span></span></code></pre></div><h4 id=elfeed-score>elfeed-score<a hidden class=anchor aria-hidden=true href=#elfeed-score>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;elfeed</span>
</span></span><span style=display:flex><span>  (setq elfeed-score-rule-stats-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;elfeed.stats&#34;</span> dn-cache-directory))
</span></span><span style=display:flex><span>  (elfeed-score-enable)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>define-key</span> elfeed-search-mode-map <span style=color:#e6db74>&#34;=&#34;</span> elfeed-score-map))
</span></span></code></pre></div><h4 id=elfeed-summary>elfeed-summary<a hidden class=anchor aria-hidden=true href=#elfeed-summary>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;elfeed-summary</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq elfeed-summary-other-window <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(advice-add <span style=color:#e6db74>&#39;elfeed-summary</span> :after <span style=color:#e6db74>&#39;elfeed-update</span>)
</span></span></code></pre></div><h3 id=email>Email<a hidden class=anchor aria-hidden=true href=#email>#</a></h3><p>我使用 Mu4e 和 mbsync 管理邮件。Mu4e 的安装见官方手册（<a href=https://www.djcbsoftware.nl/code/mu/mu4e/Installation.html>Installation</a>）。
Macos 上安装的可见，<a href=https://macowners.club/posts/email-emacs-mu4e-macos/>Blog</a>，目前最详细的。</p><h4 id=mu4e>mu4e<a hidden class=anchor aria-hidden=true href=#mu4e>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(unless
</span></span><span style=display:flex><span>    (<span style=color:#a6e22e>fboundp</span> <span style=color:#e6db74>&#39;mu4e</span>)
</span></span><span style=display:flex><span>  (<span style=color:#a6e22e>autoload</span> <span style=color:#a6e22e>#&#39;</span>mu4e <span style=color:#e6db74>&#34;mu4e&#34;</span> <span style=color:#66d9ef>nil</span> <span style=color:#66d9ef>t</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq mu4e-mu-binary (executable-find <span style=color:#e6db74>&#34;mu&#34;</span>)
</span></span><span style=display:flex><span>      mu4e-get-mail-command (<span style=color:#a6e22e>concat</span> (executable-find <span style=color:#e6db74>&#34;mbsync&#34;</span>) <span style=color:#e6db74>&#34; -a&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq mu4e-maildir <span style=color:#e6db74>&#34;~/.maildir&#34;</span>
</span></span><span style=display:flex><span>      mu4e-attachment-dir <span style=color:#e6db74>&#34;~/Downloads/&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq mu4e-use-fancy-chars <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq mu4e-headers-precise-alignment <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; https://github.com/emacsmirror/mu4e-marker-icons/blob/main/mu4e-marker-icons.el</span>
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>#xe0e1</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>#xe0e1</span>) (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Material Icons&#34;</span>))
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>#xe159</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>#xe159</span>) (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Material Icons&#34;</span>))
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>#xe7f5</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>#xe7f5</span>) (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Material Icons&#34;</span>))
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>#xe5ca</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>#xe5ca</span>) (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Material Icons&#34;</span>))
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>#xe63f</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>#xe63f</span>) (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Material Icons&#34;</span>))
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>#xe0e1</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>#xe0e1</span>) (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Material Icons&#34;</span>))
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>#xe151</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>#xe151</span>) (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Material Icons&#34;</span>))
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>#xe2bc</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>#xe2bc</span>) (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Material Icons&#34;</span>))
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>#xe3b5</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>#xe3b5</span>) (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Material Icons&#34;</span>))
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>#xe153</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>#xe153</span>) (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Material Icons&#34;</span>))
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>#xe15f</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>#xe15f</span>) (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Material Icons&#34;</span>))
</span></span><span style=display:flex><span>(<span style=color:#a6e22e>set-fontset-font</span> <span style=color:#66d9ef>t</span> <span style=color:#f92672>&#39;</span>(<span style=color:#ae81ff>#xe92b</span> <span style=color:#f92672>.</span> <span style=color:#ae81ff>#xe92b</span>) (<span style=color:#a6e22e>font-spec</span> :family <span style=color:#e6db74>&#34;Material Icons&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq mu4e-headers-seen-mark <span style=color:#f92672>`</span>(<span style=color:#e6db74>&#34;S&#34;</span> <span style=color:#f92672>.</span> <span style=color:#f92672>,</span>(<span style=color:#a6e22e>propertize</span>
</span></span><span style=display:flex><span>				       (all-the-icons-material <span style=color:#e6db74>&#34;mail_outline&#34;</span>)
</span></span><span style=display:flex><span>				       <span style=color:#e6db74>&#39;face</span> <span style=color:#f92672>`</span>(:family <span style=color:#f92672>,</span>(all-the-icons-material-family)
</span></span><span style=display:flex><span>						       :foreground <span style=color:#f92672>,</span>(face-background <span style=color:#e6db74>&#39;default</span>))))
</span></span><span style=display:flex><span>      mu4e-headers-new-mark <span style=color:#f92672>`</span>(<span style=color:#e6db74>&#34;N&#34;</span> <span style=color:#f92672>.</span> <span style=color:#f92672>,</span>(<span style=color:#a6e22e>propertize</span>
</span></span><span style=display:flex><span>				      (all-the-icons-material <span style=color:#e6db74>&#34;markunread&#34;</span>)
</span></span><span style=display:flex><span>				      <span style=color:#e6db74>&#39;face</span> <span style=color:#f92672>`</span>(:family <span style=color:#f92672>,</span>(all-the-icons-material-family)
</span></span><span style=display:flex><span>						      :foreground <span style=color:#f92672>,</span>(face-background <span style=color:#e6db74>&#39;default</span>))))
</span></span><span style=display:flex><span>      mu4e-headers-unread-mark <span style=color:#f92672>`</span>(<span style=color:#e6db74>&#34;u&#34;</span> <span style=color:#f92672>.</span> <span style=color:#f92672>,</span>(<span style=color:#a6e22e>propertize</span>
</span></span><span style=display:flex><span>					 (all-the-icons-material <span style=color:#e6db74>&#34;notifications_none&#34;</span>)
</span></span><span style=display:flex><span>					 <span style=color:#e6db74>&#39;face</span> <span style=color:#e6db74>&#39;mu4e-unread-face</span>))
</span></span><span style=display:flex><span>      mu4e-headers-signed-mark <span style=color:#f92672>`</span>(<span style=color:#e6db74>&#34;s&#34;</span> <span style=color:#f92672>.</span> <span style=color:#f92672>,</span>(<span style=color:#a6e22e>propertize</span>
</span></span><span style=display:flex><span>					 (all-the-icons-material <span style=color:#e6db74>&#34;check&#34;</span>)
</span></span><span style=display:flex><span>					 <span style=color:#e6db74>&#39;face</span> <span style=color:#f92672>`</span>(:family <span style=color:#f92672>,</span>(all-the-icons-material-family)
</span></span><span style=display:flex><span>							 :foreground <span style=color:#e6db74>&#34;DarkCyan&#34;</span>)))
</span></span><span style=display:flex><span>      mu4e-headers-encrypted-mark <span style=color:#f92672>`</span>(<span style=color:#e6db74>&#34;x&#34;</span> <span style=color:#f92672>.</span> <span style=color:#f92672>,</span>(<span style=color:#a6e22e>propertize</span>
</span></span><span style=display:flex><span>					    (all-the-icons-material <span style=color:#e6db74>&#34;enhanced_encryption&#34;</span>)
</span></span><span style=display:flex><span>					    <span style=color:#e6db74>&#39;face</span> <span style=color:#f92672>`</span>(:family <span style=color:#f92672>,</span>(all-the-icons-material-family)
</span></span><span style=display:flex><span>							    :foreground <span style=color:#e6db74>&#34;CornflowerBlue&#34;</span>)))
</span></span><span style=display:flex><span>      mu4e-headers-draft-mark <span style=color:#f92672>`</span>(<span style=color:#e6db74>&#34;D&#34;</span> <span style=color:#f92672>.</span> <span style=color:#f92672>,</span>(<span style=color:#a6e22e>propertize</span>
</span></span><span style=display:flex><span>					(all-the-icons-material <span style=color:#e6db74>&#34;drafts&#34;</span>)
</span></span><span style=display:flex><span>					<span style=color:#e6db74>&#39;face</span> <span style=color:#e6db74>&#39;mu4e-draft-face</span>))
</span></span><span style=display:flex><span>      mu4e-headers-attach-mark <span style=color:#f92672>`</span>(<span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#f92672>.</span> <span style=color:#f92672>,</span>(<span style=color:#a6e22e>propertize</span>
</span></span><span style=display:flex><span>					 (all-the-icons-material <span style=color:#e6db74>&#34;attachment&#34;</span>)
</span></span><span style=display:flex><span>					 <span style=color:#e6db74>&#39;face</span> <span style=color:#e6db74>&#39;mu4e-attach-number-face</span>))
</span></span><span style=display:flex><span>      mu4e-headers-passed-mark <span style=color:#f92672>`</span>(<span style=color:#e6db74>&#34;P&#34;</span> <span style=color:#f92672>.</span> <span style=color:#f92672>,</span>(<span style=color:#a6e22e>propertize</span> <span style=color:#75715e>; ❯ (I&#39;m participated in thread)</span>
</span></span><span style=display:flex><span>					 (all-the-icons-material <span style=color:#e6db74>&#34;center_focus_weak&#34;</span>)
</span></span><span style=display:flex><span>					 <span style=color:#e6db74>&#39;face</span> <span style=color:#f92672>`</span>(:family <span style=color:#f92672>,</span>(all-the-icons-material-family)
</span></span><span style=display:flex><span>							 :foreground <span style=color:#e6db74>&#34;yellow&#34;</span>)))
</span></span><span style=display:flex><span>      mu4e-headers-flagged-mark <span style=color:#f92672>`</span>(<span style=color:#e6db74>&#34;F&#34;</span> <span style=color:#f92672>.</span> <span style=color:#f92672>,</span>(<span style=color:#a6e22e>propertize</span>
</span></span><span style=display:flex><span>					  (all-the-icons-material <span style=color:#e6db74>&#34;flag&#34;</span>)
</span></span><span style=display:flex><span>					  <span style=color:#e6db74>&#39;face</span> <span style=color:#e6db74>&#39;mu4e-flagged-face</span>))
</span></span><span style=display:flex><span>      mu4e-headers-replied-mark <span style=color:#f92672>`</span>(<span style=color:#e6db74>&#34;R&#34;</span> <span style=color:#f92672>.</span> <span style=color:#f92672>,</span>(<span style=color:#a6e22e>propertize</span>
</span></span><span style=display:flex><span>					  (all-the-icons-material <span style=color:#e6db74>&#34;reply_all&#34;</span>)
</span></span><span style=display:flex><span>					  <span style=color:#e6db74>&#39;face</span> <span style=color:#e6db74>&#39;mu4e-replied-face</span>))
</span></span><span style=display:flex><span>      mu4e-headers-trashed-mark <span style=color:#f92672>`</span>(<span style=color:#e6db74>&#34;T&#34;</span> <span style=color:#f92672>.</span> <span style=color:#f92672>,</span>(<span style=color:#a6e22e>propertize</span>
</span></span><span style=display:flex><span>					  (all-the-icons-material <span style=color:#e6db74>&#34;delete_forever&#34;</span>)
</span></span><span style=display:flex><span>					  <span style=color:#e6db74>&#39;face</span> <span style=color:#e6db74>&#39;mu4e-trashed-face</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq mail-user-agent <span style=color:#e6db74>&#39;mu4e-user-agent</span>
</span></span><span style=display:flex><span>      mu4e-update-interval <span style=color:#ae81ff>600</span>
</span></span><span style=display:flex><span>      mu4e-index-update-in-background <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      mu4e-index-update-error-warning <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      mu4e-view-show-images <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      mu4e-view-image-max-width <span style=color:#ae81ff>800</span>
</span></span><span style=display:flex><span>      mu4e-confirm-quit <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>      mu4e-view-show-addresses <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      mu4e-headers-include-related <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      mu4e-headers-auto-update <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      mu4e-index-update-error-warning <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>      mu4e-index-cleanup <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      mu4e-context-policy <span style=color:#e6db74>&#39;pick-first</span>
</span></span><span style=display:flex><span>      mu4e-headers-date-format <span style=color:#e6db74>&#34;%d/%m/%y&#34;</span>
</span></span><span style=display:flex><span>      mu4e-headers-time-format <span style=color:#e6db74>&#34;%H:%M&#34;</span>
</span></span><span style=display:flex><span>      mu4e-headers-fields <span style=color:#f92672>&#39;</span>((:flags <span style=color:#f92672>.</span> <span style=color:#ae81ff>6</span>)
</span></span><span style=display:flex><span>			    (:human-date <span style=color:#f92672>.</span> <span style=color:#ae81ff>9</span>)
</span></span><span style=display:flex><span>			    (:subject <span style=color:#f92672>.</span> <span style=color:#ae81ff>90</span>)
</span></span><span style=display:flex><span>			    (:from-or-to <span style=color:#f92672>.</span> <span style=color:#ae81ff>40</span>)
</span></span><span style=display:flex><span>			    (:tags <span style=color:#f92672>.</span> <span style=color:#ae81ff>20</span>))
</span></span><span style=display:flex><span>      mu4e-compose-reply-ignore-address <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;no-?reply&#34;</span> <span style=color:#e6db74>&#34;duan_n@outlook.com&#34;</span>)
</span></span><span style=display:flex><span>      mu4e-bookmarks <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;flag:unread AND NOT flag:trashed&#34;</span> <span style=color:#e6db74>&#34;Unread messages&#34;</span> <span style=color:#e6db74>?u</span>)
</span></span><span style=display:flex><span>		       (<span style=color:#e6db74>&#34;date:today..now&#34;</span> <span style=color:#e6db74>&#34;Today&#39;s messages&#34;</span> <span style=color:#e6db74>?t</span>)
</span></span><span style=display:flex><span>		       (<span style=color:#e6db74>&#34;date:7d..now&#34;</span> <span style=color:#e6db74>&#34;Last 7 days&#34;</span> <span style=color:#e6db74>?w</span>)
</span></span><span style=display:flex><span>		       (<span style=color:#e6db74>&#34;date:1d..now AND NOT list:emacs-orgmode.gnu.org&#34;</span> <span style=color:#e6db74>&#34;Last 1 days&#34;</span> <span style=color:#e6db74>?o</span>)
</span></span><span style=display:flex><span>		       (<span style=color:#e6db74>&#34;date:1d..now AND list:emacs-orgmode.gnu.org&#34;</span> <span style=color:#e6db74>&#34;Last 1 days (org mode)&#34;</span> <span style=color:#e6db74>?m</span>)
</span></span><span style=display:flex><span>		       (<span style=color:#e6db74>&#34;maildir:/drafts&#34;</span> <span style=color:#e6db74>&#34;drafts&#34;</span> <span style=color:#e6db74>?d</span>)
</span></span><span style=display:flex><span>		       (<span style=color:#e6db74>&#34;flag:flagged AND NOT flag:trashed&#34;</span> <span style=color:#e6db74>&#34;flagged&#34;</span> <span style=color:#e6db74>?f</span>)
</span></span><span style=display:flex><span>		       (<span style=color:#e6db74>&#34;mime:image/*&#34;</span> <span style=color:#e6db74>&#34;Messages with images&#34;</span> <span style=color:#e6db74>?p</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;mu4e</span>
</span></span><span style=display:flex><span>  (setq mu4e-sent-folder   <span style=color:#e6db74>&#34;/outlook/Sent&#34;</span>
</span></span><span style=display:flex><span>	mu4e-drafts-folder <span style=color:#e6db74>&#34;/outlook/Drafts&#34;</span>
</span></span><span style=display:flex><span>	mu4e-trash-folder  <span style=color:#e6db74>&#34;/outlook/Deleted&#34;</span>
</span></span><span style=display:flex><span>	mu4e-refile-folder  <span style=color:#e6db74>&#34;/outlook/Archive&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;; (add-hook &#39;after-init-hook &#39;mu4e)</span>
</span></span><span style=display:flex><span>(mu4e <span style=color:#e6db74>&#39;background</span>)
</span></span></code></pre></div><h4 id=mu4e-alert>mu4e-alert<a hidden class=anchor aria-hidden=true href=#mu4e-alert>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;mu4e</span>
</span></span><span style=display:flex><span>  (mu4e-alert-set-default-style <span style=color:#e6db74>&#39;notifier</span>)
</span></span><span style=display:flex><span>  (add-hook <span style=color:#e6db74>&#39;after-init-hook</span> <span style=color:#a6e22e>#&#39;</span>mu4e-alert-enable-notifications)
</span></span><span style=display:flex><span>  (with-eval-after-load <span style=color:#e6db74>&#39;doom-modeline</span>
</span></span><span style=display:flex><span>    (mu4e-alert-enable-mode-line-display)))
</span></span></code></pre></div><h4 id=sent-mail>sent mail<a hidden class=anchor aria-hidden=true href=#sent-mail>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq message-send-mail-function <span style=color:#e6db74>&#39;smtpmail-send-it</span>)
</span></span></code></pre></div><h4 id=mu4e-column-faces>mu4e-column-faces<a hidden class=anchor aria-hidden=true href=#mu4e-column-faces>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(with-eval-after-load <span style=color:#e6db74>&#39;mu4e</span>
</span></span><span style=display:flex><span>  (mu4e-column-faces-mode))
</span></span></code></pre></div><h4 id=org-msg>Org-msg<a hidden class=anchor aria-hidden=true href=#org-msg>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq org-msg-options <span style=color:#e6db74>&#34;html-postamble:nil H:5 num:nil ^:{} toc:nil author:nil email:nil \\n:t&#34;</span>
</span></span><span style=display:flex><span>      org-msg-startup <span style=color:#e6db74>&#34;hidestars indent inlineimages&#34;</span>
</span></span><span style=display:flex><span>      org-msg-greeting-fmt <span style=color:#e6db74>&#34;\nHi%s,\n\n&#34;</span>
</span></span><span style=display:flex><span>      org-msg-recipient-names <span style=color:#f92672>&#39;</span>((<span style=color:#e6db74>&#34;jeremy.compostella@gmail.com&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Jérémy&#34;</span>))
</span></span><span style=display:flex><span>      org-msg-greeting-name-limit <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>      org-msg-default-alternatives <span style=color:#f92672>&#39;</span>((new		<span style=color:#f92672>.</span> (text html))
</span></span><span style=display:flex><span>				     (reply-to-html	<span style=color:#f92672>.</span> (text html))
</span></span><span style=display:flex><span>				     (reply-to-text	<span style=color:#f92672>.</span> (text)))
</span></span><span style=display:flex><span>      org-msg-convert-citation <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      org-msg-signature <span style=color:#e6db74>&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74> Regards,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74> #+begin_signature
</span></span></span><span style=display:flex><span><span style=color:#e6db74> --
</span></span></span><span style=display:flex><span><span style=color:#e6db74> *Duan Ning*
</span></span></span><span style=display:flex><span><span style=color:#e6db74> /One Emacs to rule them all/
</span></span></span><span style=display:flex><span><span style=color:#e6db74> #+end_signature&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(org-msg-mode)
</span></span></code></pre></div><h3 id=telegaram>Telegaram<a hidden class=anchor aria-hidden=true href=#telegaram>#</a></h3><p>非官方的 telegram 客户端。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq telega-server-libs-prefix <span style=color:#e6db74>&#34;~/td/tdlib&#34;</span>)
</span></span><span style=display:flex><span>(setq telega-proxies (<span style=color:#a6e22e>list</span>
</span></span><span style=display:flex><span>		      <span style=color:#f92672>&#39;</span>(:server <span style=color:#e6db74>&#34;127.0.0.1&#34;</span> :port <span style=color:#ae81ff>7891</span> :enable <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>				:type (:@type <span style=color:#e6db74>&#34;proxyTypeSocks5&#34;</span>))))
</span></span></code></pre></div><h3 id=calibre>Calibre<a hidden class=anchor aria-hidden=true href=#calibre>#</a></h3><p><a href=https://calibredb.hkvim.com>https://calibredb.hkvim.com</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(setq calibredb-root-dir <span style=color:#e6db74>&#34;~/Calibre Library&#34;</span>
</span></span><span style=display:flex><span>      calibredb-db-dir (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;metadata.db&#34;</span> calibredb-root-dir))
</span></span><span style=display:flex><span>(setq calibredb-format-all-the-icons <span style=color:#66d9ef>t</span>
</span></span><span style=display:flex><span>      calibredb-title-width <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>      calibredb-size-show <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>(setq calibredb-fetch-metadata-source-list <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;Google&#34;</span> <span style=color:#e6db74>&#34;Amazon.com&#34;</span>))
</span></span></code></pre></div><h3 id=music>Music<a hidden class=anchor aria-hidden=true href=#music>#</a></h3><p>2022-04-14 目前使用不己， API NULL。需要包作者进行更新。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(global-set-key (kbd <span style=color:#e6db74>&#34;&lt;f7&gt;&#34;</span>) <span style=color:#e6db74>&#39;netease-cloud-music</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq request-storage-directory (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;request&#34;</span> dn-cache-directory))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq netease-cloud-music-cache-directory (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;netease-cloud-music&#34;</span> dn-cache-directory))
</span></span></code></pre></div><h2 id=keybindings>Keybindings<a hidden class=anchor aria-hidden=true href=#keybindings>#</a></h2><h3 id=keyfreq>Keyfreq<a hidden class=anchor aria-hidden=true href=#keyfreq>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(keyfreq-mode <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(keyfreq-autosave-mode <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq keyfreq-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;.emacs.keyfreq&#34;</span> dn-cache-directory))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq keyfreq-excluded-commands <span style=color:#f92672>&#39;</span>(<span style=color:#a6e22e>self-insert-command</span>
</span></span><span style=display:flex><span>				  <span style=color:#a6e22e>forward-char</span>
</span></span><span style=display:flex><span>				  <span style=color:#a6e22e>backward-char</span>
</span></span><span style=display:flex><span>				  previous-line
</span></span><span style=display:flex><span>				  next-line))
</span></span></code></pre></div><h3 id=meow>Meow<a hidden class=anchor aria-hidden=true href=#meow>#</a></h3><blockquote><p><a href=https://github.com/meow-edit/meow>Meow</a> is yet another modal editing mode for Emacs.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(defun meow-setup ()
</span></span><span style=display:flex><span>  (meow-motion-overwrite-define-key
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;j&#34;</span> <span style=color:#f92672>.</span> meow-next)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;k&#34;</span> <span style=color:#f92672>.</span> meow-prev))
</span></span><span style=display:flex><span>  (meow-leader-define-key
</span></span><span style=display:flex><span>   <span style=color:#75715e>;; SPC j/k will run the original command in MOTION state.</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;j&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;H-j&#34;</span>)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;k&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;H-k&#34;</span>)
</span></span><span style=display:flex><span>   <span style=color:#75715e>;; Use SPC (0-9) for digit arguments.</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#f92672>.</span> meow-digit-argument)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;2&#34;</span> <span style=color:#f92672>.</span> meow-digit-argument)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;3&#34;</span> <span style=color:#f92672>.</span> meow-digit-argument)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;4&#34;</span> <span style=color:#f92672>.</span> meow-digit-argument)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;5&#34;</span> <span style=color:#f92672>.</span> meow-digit-argument)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;6&#34;</span> <span style=color:#f92672>.</span> meow-digit-argument)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;7&#34;</span> <span style=color:#f92672>.</span> meow-digit-argument)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;8&#34;</span> <span style=color:#f92672>.</span> meow-digit-argument)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;9&#34;</span> <span style=color:#f92672>.</span> meow-digit-argument)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;0&#34;</span> <span style=color:#f92672>.</span> meow-digit-argument)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;/&#34;</span> <span style=color:#f92672>.</span> meow-keypad-describe-key)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;?&#34;</span> <span style=color:#f92672>.</span> meow-cheatsheet))
</span></span><span style=display:flex><span>  (meow-normal-define-key
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;0&#34;</span> <span style=color:#f92672>.</span> meow-expand-0)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;9&#34;</span> <span style=color:#f92672>.</span> meow-expand-9)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;8&#34;</span> <span style=color:#f92672>.</span> meow-expand-8)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;7&#34;</span> <span style=color:#f92672>.</span> meow-expand-7)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;6&#34;</span> <span style=color:#f92672>.</span> meow-expand-6)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;5&#34;</span> <span style=color:#f92672>.</span> meow-expand-5)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;4&#34;</span> <span style=color:#f92672>.</span> meow-expand-4)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;3&#34;</span> <span style=color:#f92672>.</span> meow-expand-3)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;2&#34;</span> <span style=color:#f92672>.</span> meow-expand-2)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;1&#34;</span> <span style=color:#f92672>.</span> meow-expand-1)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;-&#34;</span> <span style=color:#f92672>.</span> negative-argument)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;;&#34;</span> <span style=color:#f92672>.</span> meow-reverse)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;,&#34;</span> <span style=color:#f92672>.</span> meow-inner-of-thing)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;.&#34;</span> <span style=color:#f92672>.</span> meow-bounds-of-thing)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;[&#34;</span> <span style=color:#f92672>.</span> meow-beginning-of-thing)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;]&#34;</span> <span style=color:#f92672>.</span> meow-end-of-thing)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#f92672>.</span> meow-append)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;A&#34;</span> <span style=color:#f92672>.</span> meow-open-below)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;b&#34;</span> <span style=color:#f92672>.</span> meow-back-word)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;B&#34;</span> <span style=color:#f92672>.</span> meow-back-symbol)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;c&#34;</span> <span style=color:#f92672>.</span> meow-change)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;d&#34;</span> <span style=color:#f92672>.</span> meow-delete)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;D&#34;</span> <span style=color:#f92672>.</span> meow-backward-delete)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;e&#34;</span> <span style=color:#f92672>.</span> meow-next-word)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;E&#34;</span> <span style=color:#f92672>.</span> meow-next-symbol)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;f&#34;</span> <span style=color:#f92672>.</span> meow-find)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;g&#34;</span> <span style=color:#f92672>.</span> meow-cancel-selection)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;G&#34;</span> <span style=color:#f92672>.</span> meow-grab)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;h&#34;</span> <span style=color:#f92672>.</span> meow-left)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;H&#34;</span> <span style=color:#f92672>.</span> meow-left-expand)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;i&#34;</span> <span style=color:#f92672>.</span> meow-insert)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;I&#34;</span> <span style=color:#f92672>.</span> meow-open-above)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;j&#34;</span> <span style=color:#f92672>.</span> meow-next)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;J&#34;</span> <span style=color:#f92672>.</span> meow-next-expand)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;k&#34;</span> <span style=color:#f92672>.</span> meow-prev)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;K&#34;</span> <span style=color:#f92672>.</span> meow-prev-expand)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;l&#34;</span> <span style=color:#f92672>.</span> meow-right)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;L&#34;</span> <span style=color:#f92672>.</span> meow-right-expand)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;m&#34;</span> <span style=color:#f92672>.</span> meow-join)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;n&#34;</span> <span style=color:#f92672>.</span> meow-search)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;o&#34;</span> <span style=color:#f92672>.</span> meow-block)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;O&#34;</span> <span style=color:#f92672>.</span> meow-to-block)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;p&#34;</span> <span style=color:#f92672>.</span> meow-yank)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;q&#34;</span> <span style=color:#f92672>.</span> meow-quit)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;Q&#34;</span> <span style=color:#f92672>.</span> meow-goto-line)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#f92672>.</span> meow-replace)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;R&#34;</span> <span style=color:#f92672>.</span> meow-swap-grab)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;s&#34;</span> <span style=color:#f92672>.</span> meow-kill)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;t&#34;</span> <span style=color:#f92672>.</span> meow-till)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;u&#34;</span> <span style=color:#f92672>.</span> undo)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;U&#34;</span> <span style=color:#f92672>.</span> undo-redo)
</span></span><span style=display:flex><span>   <span style=color:#75715e>;; &#39;(&#34;u&#34; . meow-undo)</span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>;; &#39;(&#34;U&#34; . meow-undo-in-selection)</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;v&#34;</span> <span style=color:#f92672>.</span> meow-visit)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;w&#34;</span> <span style=color:#f92672>.</span> meow-mark-word)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;W&#34;</span> <span style=color:#f92672>.</span> meow-mark-symbol)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;x&#34;</span> <span style=color:#f92672>.</span> meow-line)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;X&#34;</span> <span style=color:#f92672>.</span> meow-goto-line)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;y&#34;</span> <span style=color:#f92672>.</span> meow-save)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;Y&#34;</span> <span style=color:#f92672>.</span> meow-sync-grab)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;z&#34;</span> <span style=color:#f92672>.</span> meow-pop-selection)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;&#39;&#34;</span> <span style=color:#f92672>.</span> repeat)
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;&lt;escape&gt;&#34;</span> <span style=color:#f92672>.</span> mode-line-other-buffer)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-hook <span style=color:#e6db74>&#39;after-init-hook</span> <span style=color:#e6db74>&#39;meow-setup</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(meow-global-mode)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq meow-use-clipboard <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;meow-mode-state-list</span> <span style=color:#f92672>&#39;</span>(netease-cloud-music-mode <span style=color:#f92672>.</span> motion))
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;meow-mode-state-list</span> <span style=color:#f92672>&#39;</span>(osx-dictionary-mode <span style=color:#f92672>.</span> motion))
</span></span><span style=display:flex><span>(add-to-list <span style=color:#e6db74>&#39;meow-mode-state-list</span> <span style=color:#f92672>&#39;</span>(stock-tracker-mode <span style=color:#f92672>.</span> motion))
</span></span></code></pre></div><h3 id=one-key>One Key<a hidden class=anchor aria-hidden=true href=#one-key>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(require <span style=color:#e6db74>&#39;one-key</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(setq one-key-popup-window <span style=color:#66d9ef>nil</span>)
</span></span></code></pre></div><h4 id=one-key-for-bibtex>one key for bibtex<a hidden class=anchor aria-hidden=true href=#one-key-for-bibtex>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(one-key-create-menu
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;BIBTEX&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(((<span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Actions&#34;</span>) <span style=color:#f92672>.</span> orb-note-actions)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;o&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;open&#34;</span>) <span style=color:#f92672>.</span> consult-bibtex-open-any)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;e&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;entry&#34;</span>) <span style=color:#f92672>.</span> consult-bibtex-show-entry)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;n&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;note&#34;</span>) <span style=color:#f92672>.</span> my/edit-notes)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;x&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;extract annots&#34;</span>) <span style=color:#f92672>.</span> my/extract-pdf-annots-to-ref-note))
</span></span><span style=display:flex><span> <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h4 id=one-key-for-org-download>one key for org download<a hidden class=anchor aria-hidden=true href=#one-key-for-org-download>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(one-key-create-menu
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;DOWNLOAD&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(((<span style=color:#e6db74>&#34;c&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;clipboard&#34;</span>) <span style=color:#f92672>.</span> org-download-clipboard)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;i&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;image&#34;</span>) <span style=color:#f92672>.</span> org-download-image)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;s&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;screenshot&#34;</span>) <span style=color:#f92672>.</span> org-download-screenshot))
</span></span><span style=display:flex><span> <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h4 id=one-key-for-language>one key for language<a hidden class=anchor aria-hidden=true href=#one-key-for-language>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(one-key-create-menu
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;LANGUAGE&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(((<span style=color:#e6db74>&#34;t&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Translate&#34;</span>) <span style=color:#f92672>.</span> gts-do-translate)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;f&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Fanyi Point&#34;</span>) <span style=color:#f92672>.</span> fanyi-dwim2)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;F&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Fanyi Input&#34;</span>) <span style=color:#f92672>.</span> fanyi-dwim)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;d&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Dictionary Point&#34;</span>) <span style=color:#f92672>.</span> osx-dictionary-search-pointer)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;D&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Dictionary Input&#34;</span>) <span style=color:#f92672>.</span> osx-dictionary-search-input)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;p&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Powerthesaurus&#34;</span>) <span style=color:#f92672>.</span> powerthesaurus-lookup-dwim)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;s&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Style region&#34;</span>) <span style=color:#f92672>.</span> smog-check)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;S&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Style buffer&#34;</span>) <span style=color:#f92672>.</span> smog-check-buffer))
</span></span><span style=display:flex><span> <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h4 id=one-key-for-file>one key for file<a hidden class=anchor aria-hidden=true href=#one-key-for-file>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(one-key-create-menu
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;FILE&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(((<span style=color:#e6db74>&#34;f&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;FINANCE&#34;</span>) <span style=color:#f92672>.</span> one-key-menu-beancount)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;recent&#34;</span>) <span style=color:#f92672>.</span> consult-recent-file)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;o&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;open&#34;</span>) <span style=color:#f92672>.</span> one-key-menu-specific-file)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;e&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;External&#34;</span>) <span style=color:#f92672>.</span> xah-html-open-in-safari))
</span></span><span style=display:flex><span> <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h4 id=one-key-for-directory>one key for directory<a hidden class=anchor aria-hidden=true href=#one-key-for-directory>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(one-key-create-menu
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;DIRECTORY&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(((<span style=color:#e6db74>&#34;c&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Cloud&#34;</span>) <span style=color:#f92672>.</span> (lambda () (interactive) (dired <span style=color:#e6db74>&#34;~/Nextcloud/&#34;</span>)))
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;d&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Downloads&#34;</span>) <span style=color:#f92672>.</span> (lambda () (interactive) (dired <span style=color:#e6db74>&#34;~/Downloads/&#34;</span>)))
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;p&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Pictures&#34;</span>) <span style=color:#f92672>.</span> (lambda () (interactive) (dired <span style=color:#e6db74>&#34;~/Pictures/&#34;</span>))))
</span></span><span style=display:flex><span> <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h4 id=one-key-for-open-specific-file>one key for open specific file<a hidden class=anchor aria-hidden=true href=#one-key-for-open-specific-file>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(one-key-create-menu
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;SPECIFIC-FILE&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(((<span style=color:#e6db74>&#34;b&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Blog file&#34;</span>) <span style=color:#f92672>.</span> (lambda () (interactive) (find-file <span style=color:#e6db74>&#34;~/hugo-source/content-org/all-posts.org&#34;</span>)))
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;I&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;README.org&#34;</span>) <span style=color:#f92672>.</span> (lambda () (interactive) (find-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;README.org&#34;</span> user-emacs-directory))))
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;i&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Inbox&#34;</span>) <span style=color:#f92672>.</span> (lambda () (interactive) (find-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;daily/inbox.org&#34;</span> dn-galaxy))))
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;rss&#34;</span>) <span style=color:#f92672>.</span> (lambda () (interactive) (find-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;main/elfeed.org&#34;</span> dn-roam))))
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;g&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;gtd&#34;</span>) <span style=color:#f92672>.</span> (lambda () (interactive) (find-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;todos/org-gtd-tasks.org&#34;</span> dn-galaxy))))
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;alipay&#34;</span>) <span style=color:#f92672>.</span> (lambda () (interactive) (find-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;alipay.bean&#34;</span> dn-finance-year))))
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;m&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Beancount main&#34;</span>) <span style=color:#f92672>.</span> (lambda () (interactive) (find-file (<span style=color:#a6e22e>expand-file-name</span> <span style=color:#e6db74>&#34;main.bean&#34;</span> dn-finance)))))
</span></span><span style=display:flex><span> <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h4 id=one-key-for-org>one key for org<a hidden class=anchor aria-hidden=true href=#one-key-for-org>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(one-key-create-menu
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;ORG&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(((<span style=color:#e6db74>&#34;c&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Clock&#34;</span>) <span style=color:#f92672>.</span> one-key-menu-org-clock)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;d&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Download&#34;</span>) <span style=color:#f92672>.</span> one-key-menu-download)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;p&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Process&#34;</span>) <span style=color:#f92672>.</span> org-gtd-process-inbox)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;l&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;cliplink&#34;</span>) <span style=color:#f92672>.</span> org-cliplink)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;i&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;ID&#34;</span>) <span style=color:#f92672>.</span> org-id-get-create))
</span></span><span style=display:flex><span> <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><ul><li><p>org-clock</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(one-key-create-menu
</span></span><span style=display:flex><span>   <span style=color:#e6db74>&#34;ORG-CLOCK&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>&#39;</span>(((<span style=color:#e6db74>&#34;i&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;In&#34;</span>) <span style=color:#f92672>.</span> org-clock-in)
</span></span><span style=display:flex><span>     ((<span style=color:#e6db74>&#34;o&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Out&#34;</span>) <span style=color:#f92672>.</span> org-clock-out)
</span></span><span style=display:flex><span>     ((<span style=color:#e6db74>&#34;g&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;goto&#34;</span>) <span style=color:#f92672>.</span> org-clock-goto)
</span></span><span style=display:flex><span>     ((<span style=color:#e6db74>&#34;l&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;last&#34;</span>) <span style=color:#f92672>.</span> org-clock-in-last))
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div></li></ul><h4 id=one-key-for-org-transclusion>one key for org transclusion<a hidden class=anchor aria-hidden=true href=#one-key-for-org-transclusion>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(one-key-create-menu
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;TRANSCLUSION&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(((<span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Add&#34;</span>) <span style=color:#f92672>.</span> org-transclusion-add)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;A&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Add all&#34;</span>) <span style=color:#f92672>.</span> org-transclusion-add-all)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Remove&#34;</span>) <span style=color:#f92672>.</span> org-transclusion-remove)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;R&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Remove all&#34;</span>) <span style=color:#f92672>.</span> org-transclusion-remove-all)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;g&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Refresh&#34;</span>) <span style=color:#f92672>.</span> org-transclusion-refresh)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;m&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;make&#34;</span>) <span style=color:#f92672>.</span> org-transclusion-make-from-link)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;o&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Open&#34;</span>) <span style=color:#f92672>.</span> org-transclusion-open-source)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;e&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Edit&#34;</span>) <span style=color:#f92672>.</span> org-transclusion-live-sync-start))
</span></span><span style=display:flex><span> <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h4 id=one-key-for-org-roam>one key for org roam<a hidden class=anchor aria-hidden=true href=#one-key-for-org-roam>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(one-key-create-menu
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;ROAM&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(((<span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Alias&#34;</span>) <span style=color:#f92672>.</span> one-key-menu-roam-alias)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;b&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Roam Buffer&#34;</span>) <span style=color:#f92672>.</span> org-roam-buffer-toggle)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;c&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Roam capture&#34;</span>) <span style=color:#f92672>.</span> org-roam-capture)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;d&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Dailies&#34;</span>) <span style=color:#f92672>.</span> one-key-menu-roam-dailies)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;f&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Node find&#34;</span>) <span style=color:#f92672>.</span> org-roam-node-find)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;i&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Node insert&#34;</span>) <span style=color:#f92672>.</span> org-roam-node-insert)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;s&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Search content&#34;</span>) <span style=color:#f92672>.</span> bms/org-roam-rg-search)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;t&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Tags&#34;</span>) <span style=color:#f92672>.</span> one-key-menu-roam-tags)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Ref&#34;</span>) <span style=color:#f92672>.</span> one-key-menu-roam-ref))
</span></span><span style=display:flex><span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(one-key-create-menu
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;ROAM-ALIAS&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(((<span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Add&#34;</span>) <span style=color:#f92672>.</span> org-roam-alias-add)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Remove&#34;</span>) <span style=color:#f92672>.</span> org-roam-alias-remove))
</span></span><span style=display:flex><span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(one-key-create-menu
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;ROAM-DAILIES&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(((<span style=color:#e6db74>&#34;t&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Today&#34;</span>) <span style=color:#f92672>.</span> org-roam-dailies-find-today)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;y&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Yesterday&#34;</span>) <span style=color:#f92672>.</span> org-roam-dailies-find-yesterday)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;d&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Directory&#34;</span>) <span style=color:#f92672>.</span> org-roam-dailies-find-directory)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Date&#34;</span>) <span style=color:#f92672>.</span> org-roam-dailies-find-date)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;p&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Past Diary&#34;</span>) <span style=color:#f92672>.</span> my/history-morning-diary))
</span></span><span style=display:flex><span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(one-key-create-menu
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;ROAM-REF&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(((<span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Add&#34;</span>) <span style=color:#f92672>.</span> org-roam-ref-add)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;f&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Find&#34;</span>) <span style=color:#f92672>.</span> org-roam-ref-find)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Remove&#34;</span>) <span style=color:#f92672>.</span> org-roam-ref-remove))
</span></span><span style=display:flex><span> <span style=color:#66d9ef>t</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(one-key-create-menu
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;ROAM-TAGS&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(((<span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Add&#34;</span>) <span style=color:#f92672>.</span> org-roam-tag-add)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;c&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Completion&#34;</span>) <span style=color:#f92672>.</span> org-roam-tag-completions)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Remove&#34;</span>) <span style=color:#f92672>.</span> org-roam-tag-remove))
</span></span><span style=display:flex><span> <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h4 id=one-key-for-window-frame>one key for window frame<a hidden class=anchor aria-hidden=true href=#one-key-for-window-frame>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(one-key-create-menu
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;WINDOWS&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(((<span style=color:#e6db74>&#34;c&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Tabs:common&#34;</span>) <span style=color:#f92672>.</span> (lambda () (interactive) (centaur-tabs-switch-group <span style=color:#e6db74>&#34;Common&#34;</span>)))
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;d&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Destroy&#34;</span>) <span style=color:#f92672>.</span> kill-this-buffer)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;g&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Tabs:Groups&#34;</span>) <span style=color:#f92672>.</span> awesome-tab-switch-group)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;o&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Tabs:org&#34;</span>) <span style=color:#f92672>.</span> (lambda () (interactive) (centaur-tabs-switch-group <span style=color:#e6db74>&#34;OrgMode&#34;</span>)))
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;h&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Left&#34;</span>) <span style=color:#f92672>.</span> windmove-left)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;j&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Down&#34;</span>) <span style=color:#f92672>.</span> windmove-down)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;k&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Up&#34;</span>) <span style=color:#f92672>.</span> windmove-up)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;l&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Right&#34;</span>) <span style=color:#f92672>.</span> windmove-right)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;e&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Email&#34;</span>) <span style=color:#f92672>.</span> mu4e)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;rss&#34;</span>) <span style=color:#f92672>.</span> elfeed-summary)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;t&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Telega&#34;</span>) <span style=color:#f92672>.</span> telega)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;m&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Message&#34;</span>) <span style=color:#f92672>.</span> (lambda () (interactive) (switch-to-buffer <span style=color:#e6db74>&#34;*Messages*&#34;</span>)))
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;s&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;scratch&#34;</span>) <span style=color:#f92672>.</span> (lambda () (interactive) (switch-to-buffer <span style=color:#e6db74>&#34;*scratch*&#34;</span>)))
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;u&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;Winner Undo&#34;</span>) <span style=color:#f92672>.</span> winner-undo)
</span></span><span style=display:flex><span>   ((<span style=color:#e6db74>&#34;v&#34;</span> <span style=color:#f92672>.</span> <span style=color:#e6db74>&#34;vundo&#34;</span>) <span style=color:#f92672>.</span> vundo))
</span></span><span style=display:flex><span> <span style=color:#66d9ef>t</span>)
</span></span></code></pre></div><h3 id=bind-meow-leader-with-one-key-menu>Bind meow leader with one-key-menu<a hidden class=anchor aria-hidden=true href=#bind-meow-leader-with-one-key-menu>#</a></h3><p>不要绑定在 <code>c</code> <code>m</code> <code>g</code> 上，这几个键在 <code>Meow</code> 中被使用。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(meow-leader-define-key
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#f92672>.</span> my/org-agenda)
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;SPC&#34;</span> <span style=color:#f92672>.</span> meow-M-x)
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;b&#34;</span> <span style=color:#f92672>.</span> one-key-menu-bibtex)
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;d&#34;</span> <span style=color:#f92672>.</span> one-key-menu-directory)
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;f&#34;</span> <span style=color:#f92672>.</span> one-key-menu-file)
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;i&#34;</span> <span style=color:#f92672>.</span> my/org-capture-inbox)
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;l&#34;</span> <span style=color:#f92672>.</span> one-key-menu-language)
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;r&#34;</span> <span style=color:#f92672>.</span> one-key-menu-roam)
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;o&#34;</span> <span style=color:#f92672>.</span> one-key-menu-org)
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;s&#34;</span> <span style=color:#f92672>.</span> eshell)
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;t&#34;</span> <span style=color:#f92672>.</span> one-key-menu-transclusion)
</span></span><span style=display:flex><span> <span style=color:#f92672>&#39;</span>(<span style=color:#e6db74>&#34;w&#34;</span> <span style=color:#f92672>.</span> one-key-menu-windows))
</span></span></code></pre></div></div><footer class=post-footer><nav class=paginav><a class=next href=https://jousimies.github.io/posts/%E6%88%91%E5%85%B3%E6%B3%A8%E7%9A%84-rss-%E6%BA%90/><span class=title>Next Page »</span><br><span>我关注的 RSS 源</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Jousimies's Personal Emacs Configuration on twitter" href="https://twitter.com/intent/tweet/?text=Jousimies%27s%20Personal%20Emacs%20Configuration&url=https%3a%2f%2fjousimies.github.io%2fposts%2freadme%2f&hashtags="><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://jousimies.github.io>探索世界，践行人生</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerText="copy";function s(){e.innerText="copied!",setTimeout(()=>{e.innerText="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>