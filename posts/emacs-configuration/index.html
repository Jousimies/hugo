<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title class=pjax-title>Jousimies's Personal Emacs Configuration - 探索世界，践行人生</title><meta name=Description content="This is My New Hugo Site"><meta property="og:title" content="Jousimies's Personal Emacs Configuration"><meta property="og:description" content="Interface Show Introduction The Borg assimilate Emacs packages as Git submodules. 我使用 borg 进行 Emacs 包的管理，详细的使用见 borg 官方手册。 使用 borg 管理有个好处是， borg-assimilate 后的包和 Emacs 的内置包一样，不需要使用 use-package 或 leaf 此类包"><meta property="og:type" content="article"><meta property="og:url" content="http://example.org/posts/emacs-configuration/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-25T00:00:00+00:00"><meta property="article:modified_time" content="2022-04-25T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Jousimies's Personal Emacs Configuration"><meta name=twitter:description content="Interface Show Introduction The Borg assimilate Emacs packages as Git submodules. 我使用 borg 进行 Emacs 包的管理，详细的使用见 borg 官方手册。 使用 borg 管理有个好处是， borg-assimilate 后的包和 Emacs 的内置包一样，不需要使用 use-package 或 leaf 此类包"><meta name=application-name content="探索世界，践行人生"><meta name=apple-mobile-web-app-title content="探索世界，践行人生"><meta name=theme-color content="#f8f8f8"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=canonical href=http://example.org/posts/emacs-configuration/><link rel=next href=http://example.org/posts/org_roam_%E7%BB%93%E5%90%88_hugo_%E5%86%99_blog/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/fontawesome-free/all.min.css><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload='this.onload=null,this.rel="stylesheet"' href=/lib/animate/animate.min.css><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Jousimies's Personal Emacs Configuration","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/example.org\/posts\/emacs-configuration\/"},"genre":"posts","wordcount":10835,"url":"http:\/\/example.org\/posts\/emacs-configuration\/","datePublished":"2022-04-25T00:00:00+00:00","dateModified":"2022-04-25T00:00:00+00:00","publisher":{"@type":"Organization","name":"Jousimies"},"author":{"@type":"Person","name":"Jousimies"},"description":""}</script></head><body header-desktop header-mobile><script type=text/javascript>function setTheme(e){document.body.setAttribute("theme",e),document.documentElement.style.setProperty("color-scheme",e==="light"?"light":"dark")}function saveTheme(e){window.localStorage&&localStorage.setItem("theme",e)}function getMeta(t){const e=document.getElementsByTagName("meta");for(let n=0;n<e.length;n++)if(e[n].getAttribute("name")===t)return e[n];return''}if(window.localStorage&&localStorage.getItem("theme")){let e=localStorage.getItem("theme");e==="light"||e==="dark"||e==="black"?setTheme(e):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?setTheme("dark"):setTheme("light")}else"auto"==="light"||"auto"==="dark"||"auto"==="black"?(setTheme("auto"),saveTheme("auto")):(saveTheme("auto"),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?setTheme("dark"):setTheme("light"));let metaColors={light:"#f8f8f8",dark:"#252627",black:"#000000"};getMeta("theme-color").content=metaColors[document.body.getAttribute("theme")]</script><div id=back-to-top></div><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=探索世界，践行人生>探索世界，践行人生</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=# onclick=return!1 class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=# onclick=return!1 class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=# onclick=return!1 class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=探索世界，践行人生>探索世界，践行人生</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=# onclick=return!1 class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a>
<a href=# onclick=return!1 class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=# onclick=return!1 class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a href=# onclick=return!1 class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto><nav id=TableOfContents><ul><li><a href=#interface-show>Interface Show</a></li><li><a href=#introduction>Introduction</a><ul><li><a href=#why-emacs>Why Emacs</a></li><li><a href=#about-other-note-taking-software>About other note taking software</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></li><li><a href=#rudimentary-configuration>Rudimentary configuration</a><ul><li><a href=#early-init>Early Init</a></li><li><a href=#borg-package-manage>Borg - Package manage</a></li><li><a href=#start-and-close-emacs>Start and close emacs</a></li><li><a href=#personal-information>Personal information</a></li><li><a href=#variables>Variables</a></li><li><a href=#better-defaults>Better defaults</a></li></ul></li><li><a href=#user-interface>User interface</a><ul><li><a href=#fonts>Fonts</a></li><li><a href=#icon>Icon</a></li><li><a href=#cursor>Cursor</a></li><li><a href=#themes>Themes</a></li><li><a href=#dashboard>Dashboard</a></li><li><a href=#rainbow-mode>rainbow-mode</a></li><li><a href=#helpful>helpful</a></li><li><a href=#info-colors>info-colors</a></li><li><a href=#goggles>goggles</a></li><li><a href=#emojify>emojify</a></li><li><a href=#svg>svg</a></li><li><a href=#lin>lin</a></li><li><a href=#frame-management>Frame management</a></li><li><a href=#awesome-tray>Awesome Tray</a></li></ul></li><li><a href=#editor-enhancement-c-dot-r-dot-u-dot-d>Editor Enhancement &ndash; C.R.U.D</a><ul><li><a href=#rime>rime</a></li><li><a href=#rime-regexp>rime-regexp</a></li><li><a href=#autoinsert>autoinsert</a></li><li><a href=#embrace>embrace</a></li><li><a href=#recent-file>recent file</a></li><li><a href=#dired-mode>dired-mode</a></li><li><a href=#hungry-delete>hungry delete</a></li><li><a href=#auto-save>auto save</a></li><li><a href=#save-place>save place</a></li><li><a href=#save-hist>save hist</a></li><li><a href=#undo>Undo</a></li><li><a href=#vundo>Vundo</a></li><li><a href=#ctrlf>ctrlf</a></li><li><a href=#google-this>google-this</a></li><li><a href=#vertico>vertico</a></li><li><a href=#marginalia>marginalia</a></li><li><a href=#consult>consult</a></li><li><a href=#consult-dir>consult-dir</a></li><li><a href=#orderless>orderless</a></li><li><a href=#corfu>corfu</a></li><li><a href=#corfu-doc>corfu-doc</a></li><li><a href=#embark>embark</a></li><li><a href=#prescient>prescient</a></li><li><a href=#dabbrev>dabbrev</a></li><li><a href=#cape>cape</a></li><li><a href=#tempel>tempel</a></li><li><a href=#open-in-external-apps>Open in external apps</a></li></ul></li><li><a href=#language-configuration>Language configuration</a><ul><li><a href=#lsp-language-service-protocol>LSP: Language service protocol</a></li><li><a href=#language-spell-check-and-translate>Language spell check and translate</a></li><li><a href=#program-language>Program language</a></li><li><a href=#organize-life-with-org-mode>Organize life with org-mode</a></li><li><a href=#latex>Latex</a></li></ul></li><li><a href=#application>Application</a><ul><li><a href=#calendar>Calendar</a></li><li><a href=#pdf-reader>PDF Reader</a></li><li><a href=#git>GIT</a></li><li><a href=#terminal>Terminal</a></li><li><a href=#rss-management>Rss management</a></li><li><a href=#email>Email</a></li><li><a href=#telegaram>Telegaram</a></li><li><a href=#calibre>Calibre</a></li><li><a href=#music>Music</a></li></ul></li><li><a href=#keybindings>Keybindings</a><ul><li><a href=#keyfreq>Keyfreq</a></li><li><a href=#meow>Meow</a></li><li><a href=#one-key>One Key</a></li><li><a href=#bind-meow-leader-with-one-key-menu>Bind meow leader with one-key-menu</a></li></ul></li></ul></nav></div></div><script>document.getElementsByTagName("main")[0].setAttribute("pageStyle","normal")</script><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Jousimies's Personal Emacs Configuration</h1><div class=post-meta><div class=post-meta-line><span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=/ title=Author rel=author class=author>Jousimies</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2022-04-25>2022-04-25</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=2022-04-25>2022-04-25</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 10835 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 22 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#interface-show>Interface Show</a></li><li><a href=#introduction>Introduction</a><ul><li><a href=#why-emacs>Why Emacs</a></li><li><a href=#about-other-note-taking-software>About other note taking software</a></li><li><a href=#acknowledgements>Acknowledgements</a></li></ul></li><li><a href=#rudimentary-configuration>Rudimentary configuration</a><ul><li><a href=#early-init>Early Init</a></li><li><a href=#borg-package-manage>Borg - Package manage</a></li><li><a href=#start-and-close-emacs>Start and close emacs</a></li><li><a href=#personal-information>Personal information</a></li><li><a href=#variables>Variables</a></li><li><a href=#better-defaults>Better defaults</a></li></ul></li><li><a href=#user-interface>User interface</a><ul><li><a href=#fonts>Fonts</a></li><li><a href=#icon>Icon</a></li><li><a href=#cursor>Cursor</a></li><li><a href=#themes>Themes</a></li><li><a href=#dashboard>Dashboard</a></li><li><a href=#rainbow-mode>rainbow-mode</a></li><li><a href=#helpful>helpful</a></li><li><a href=#info-colors>info-colors</a></li><li><a href=#goggles>goggles</a></li><li><a href=#emojify>emojify</a></li><li><a href=#svg>svg</a></li><li><a href=#lin>lin</a></li><li><a href=#frame-management>Frame management</a></li><li><a href=#awesome-tray>Awesome Tray</a></li></ul></li><li><a href=#editor-enhancement-c-dot-r-dot-u-dot-d>Editor Enhancement &ndash; C.R.U.D</a><ul><li><a href=#rime>rime</a></li><li><a href=#rime-regexp>rime-regexp</a></li><li><a href=#autoinsert>autoinsert</a></li><li><a href=#embrace>embrace</a></li><li><a href=#recent-file>recent file</a></li><li><a href=#dired-mode>dired-mode</a></li><li><a href=#hungry-delete>hungry delete</a></li><li><a href=#auto-save>auto save</a></li><li><a href=#save-place>save place</a></li><li><a href=#save-hist>save hist</a></li><li><a href=#undo>Undo</a></li><li><a href=#vundo>Vundo</a></li><li><a href=#ctrlf>ctrlf</a></li><li><a href=#google-this>google-this</a></li><li><a href=#vertico>vertico</a></li><li><a href=#marginalia>marginalia</a></li><li><a href=#consult>consult</a></li><li><a href=#consult-dir>consult-dir</a></li><li><a href=#orderless>orderless</a></li><li><a href=#corfu>corfu</a></li><li><a href=#corfu-doc>corfu-doc</a></li><li><a href=#embark>embark</a></li><li><a href=#prescient>prescient</a></li><li><a href=#dabbrev>dabbrev</a></li><li><a href=#cape>cape</a></li><li><a href=#tempel>tempel</a></li><li><a href=#open-in-external-apps>Open in external apps</a></li></ul></li><li><a href=#language-configuration>Language configuration</a><ul><li><a href=#lsp-language-service-protocol>LSP: Language service protocol</a></li><li><a href=#language-spell-check-and-translate>Language spell check and translate</a></li><li><a href=#program-language>Program language</a></li><li><a href=#organize-life-with-org-mode>Organize life with org-mode</a></li><li><a href=#latex>Latex</a></li></ul></li><li><a href=#application>Application</a><ul><li><a href=#calendar>Calendar</a></li><li><a href=#pdf-reader>PDF Reader</a></li><li><a href=#git>GIT</a></li><li><a href=#terminal>Terminal</a></li><li><a href=#rss-management>Rss management</a></li><li><a href=#email>Email</a></li><li><a href=#telegaram>Telegaram</a></li><li><a href=#calibre>Calibre</a></li><li><a href=#music>Music</a></li></ul></li><li><a href=#keybindings>Keybindings</a><ul><li><a href=#keyfreq>Keyfreq</a></li><li><a href=#meow>Meow</a></li><li><a href=#one-key>One Key</a></li><li><a href=#bind-meow-leader-with-one-key-menu>Bind meow leader with one-key-menu</a></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=interface-show class=headerLink><a href=#interface-show class=header-mark></a>Interface Show</h2><figure><img src=/ox-hugo/interface.png width=1000px></figure><h2 id=introduction class=headerLink><a href=#introduction class=header-mark></a>Introduction</h2><blockquote><p>The Borg assimilate Emacs packages as Git submodules.</p></blockquote><p>我使用 <a href=https://github.com/emacscollective/borg target=_blank rel="noopener noreffer">borg</a> 进行 Emacs 包的管理，详细的使用见 borg <a href=https://emacsmirror.net/manual/borg/ target=_blank rel="noopener noreffer">官方手册</a>。</p><p>使用 borg 管理有个好处是， borg-assimilate 后的包和 Emacs 的内置包一样，不需要使用 use-package 或 leaf 此类包对配置文件进行包裹。不会增超 Emacs 的启动时间，我目前有一百多个包，启动时间在 1.6s 左右（ Arch Emacs 27.2 ）。</p><p>使用 org-mode 对 Emacs 的配置文件进行管理（见<a href=https://en.wikipedia.org/wiki/Literate_programming target=_blank rel="noopener noreffer">文学编程</a>）， org-auto-tangle 自动将配置文件 tangle 到 init.el 文件中。默认会解析到 init.el 文件中，如果有不想解析或解析到其他文件的，在 src block 中加上 :tangle no 或 :tangle other.el 。</p><p>一个 init.el 文件，不需要分离配置，管理起来，没什么 STRESS.</p><h3 id=why-emacs class=headerLink><a href=#why-emacs class=header-mark></a>Why Emacs</h3><p>对于一个非专业的程序员，使用此文本编辑器对自己的生活进行方方面面的管理，简直是 AWESOME 。</p><p>Emacs 具有强大的生态，可以进行文件管理，财务管理，事务管理，邮件管理，还可以用来听音乐，看视频。</p><h3 id=about-other-note-taking-software class=headerLink><a href=#about-other-note-taking-software class=header-mark></a>About other note taking software</h3><p>我使用过的笔记软件有很多，在遇到 Emacs 前，尝试过的有 PKM 软件， Mediawiki ， Tiddly wiki ， Onenote ，印象笔记，蚂蚁笔记， Simplenote ， Joplin 等等。当然也尝试过 markdown 。</p><p>我为什么不使用类似 onenote ，印象笔记等软件？</p><p>Onenote 是私有格式，意味着当我需要夸平台时，其专有格式会给我带来麻烦。印象笔记也是如此，而且印象笔记的付费一言难尽。以上尝试的软件都没能长久使用，或多或少的存在痛点。</p><p>更重要的是不符合我关于笔记是 ​<strong>本地可控，纯文本</strong>​ 的需求。</p><h3 id=acknowledgements class=headerLink><a href=#acknowledgements class=header-mark></a>Acknowledgements</h3><blockquote><p>If I have seen further, it is by standing on the shoulders of giants. &mdash;- Sir Isaac Newton</p></blockquote><p>谢谢以下配置的作者，从他们那学到了很多关于 Emacs 的知识。排名不分先后。</p><ul><li><a href=https://github.com/bbatsov/prelude target=_blank rel="noopener noreffer">https://github.com/bbatsov/prelude</a></li><li><a href=https://github.com/syl20bnr/spacemacs target=_blank rel="noopener noreffer">https://github.com/syl20bnr/spacemacs</a></li><li><a href=https://github.com/seagle0128/.emacs.d target=_blank rel="noopener noreffer">https://github.com/seagle0128/.emacs.d</a></li><li><a href=https://github.com/hlissner/doom-emacs target=_blank rel="noopener noreffer">https://github.com/hlissner/doom-emacs</a></li><li><a href=https://github.com/remacs/remacs target=_blank rel="noopener noreffer">https://github.com/remacs/remacs</a></li><li><a href=https://github.com/redguardtoo/emacs.d target=_blank rel="noopener noreffer">https://github.com/redguardtoo/emacs.d</a></li><li><a href=https://github.com/manateelazycat/lazycat-emacs target=_blank rel="noopener noreffer">https://github.com/manateelazycat/lazycat-emacs</a></li><li><a href=https://github.com/purcell/emacs.d target=_blank rel="noopener noreffer">https://github.com/purcell/emacs.d</a></li><li><a href=https://github.com/MatthewZMD/.emacs.d target=_blank rel="noopener noreffer">https://github.com/MatthewZMD/.emacs.d</a></li><li><a href=https://sachachua.com/dotemacs/ target=_blank rel="noopener noreffer">https://sachachua.com/dotemacs/</a></li><li><a href=https://github.com/raxod502/radian target=_blank rel="noopener noreffer">https://github.com/raxod502/radian</a></li><li><a href=https://tecosaur.github.io/emacs-config/config.html target=_blank rel="noopener noreffer">https://tecosaur.github.io/emacs-config/config.html</a></li></ul><h2 id=rudimentary-configuration class=headerLink><a href=#rudimentary-configuration class=header-mark></a>Rudimentary configuration</h2><p>Make this file run (slightly) faster with lexical binding (see <a href=https://nullprogram.com/blog/2016/12/22/ target=_blank rel="noopener noreffer">Blog</a>).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=c1>;; init.el --- My personal emacs configuration -*- lexical-binding: t; -*-</span>
</span></span></code></pre></div><h3 id=early-init class=headerLink><a href=#early-init class=header-mark></a>Early Init</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=c1>;;; early-init.el --- Early Init File -*- lexical-binding: t; no-byte-compile: t -*-</span>
</span></span><span class=line><span class=cl><span class=c1>;; NOTE: early-init.el is now generated from readme.org.  Please edit that file instead</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; Defer garbage collection further back in the startup process</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>gc-cons-threshold</span> <span class=nv>most-positive-fixnum</span>
</span></span><span class=line><span class=cl>      <span class=nv>gc-cons-percentage</span> <span class=mf>0.6</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; In Emacs 27+, package initialization occurs before `user-init-file&#39; is</span>
</span></span><span class=line><span class=cl><span class=c1>;; loaded, but after `early-init-file&#39;. Doom handles package initialization, so</span>
</span></span><span class=line><span class=cl><span class=c1>;; we must prevent Emacs from doing it early!</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>package-enable-at-startup</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>;; Do not allow loading from the package cache (same reason).</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>package-quickstart</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; Prevent the glimpse of un-styled Emacs by disabling these UI elements early.</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>inhibit-startup-message</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>inhibit-splash-screen</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>push</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>menu-bar-lines</span> <span class=o>.</span> <span class=mi>0</span><span class=p>)</span> <span class=nv>default-frame-alist</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>push</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>tool-bar-lines</span> <span class=o>.</span> <span class=mi>0</span><span class=p>)</span> <span class=nv>default-frame-alist</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>push</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>vertical-scroll-bars</span><span class=p>)</span> <span class=nv>default-frame-alist</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; Resizing the Emacs frame can be a terribly expensive part of changing the</span>
</span></span><span class=line><span class=cl><span class=c1>;; font. By inhibiting this, we easily halve startup times with fonts that are</span>
</span></span><span class=line><span class=cl><span class=c1>;; larger than the system default.</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>frame-inhibit-implied-resize</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>inhibit-compacting-font-caches</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>use-file-dialog</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; Make the initial buffer load faster by setting its mode to fundamental-mode</span>
</span></span><span class=line><span class=cl><span class=c1>;; (setq initial-major-mode &#39;fundamental-mode)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; Prevent unwanted runtime builds in gccemacs (native-comp); packages are</span>
</span></span><span class=line><span class=cl><span class=c1>;; compiled ahead-of-time when they are installed and site files are compiled</span>
</span></span><span class=line><span class=cl><span class=c1>;; when gccemacs is installed.</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>comp-deferred-compilation</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; Disable mode-line, It&#39;s uglily after theme changed</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq-default</span> <span class=nv>mode-line-format</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;;; early-init.el ends here</span>
</span></span></code></pre></div><h3 id=borg-package-manage class=headerLink><a href=#borg-package-manage class=header-mark></a>Borg - Package manage</h3><p>Update:2022-03-06. 目前我使用 borg 和 leaf 管现我的 Emacs 配置文件， borg 很好的替代了 git submodule ，不用终端直接进行 Emacs 包的管理。 leaf 目前是作为 use-package 的替代品使用，其他的还有 setup.el ，但是目前没有深入的去探索。</p><p>Update:2022-03-07 能否剥离 leaf ？目前己全删除 leaf 相关包.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;load-path</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;packages/borg&#34;</span> <span class=nv>user-emacs-directory</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>eval-and-compile</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;borg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>borg-initialize</span><span class=p>))</span>
</span></span></code></pre></div><h3 id=start-and-close-emacs class=headerLink><a href=#start-and-close-emacs class=header-mark></a>Start and close emacs</h3><h4 id=speedup class=headerLink><a href=#speedup class=header-mark></a>Speedup</h4><p>该配置来自 <a href=https://github.com/seagle0128/.emacs.d/blob/master/init.el target=_blank rel="noopener noreffer">Centaur Emacs</a> ，可以有效减少 Emacs 的启动时间，约 0.5s 。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>auto-mode-case-fold</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>unless</span> <span class=p>(</span><span class=nb>or</span> <span class=p>(</span><span class=nf>daemonp</span><span class=p>)</span> <span class=nv>noninteractive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>old-file-name-handler-alist</span> <span class=nv>file-name-handler-alist</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=c1>;; If `file-name-handler-alist&#39; is nil, no 256 colors in TUI</span>
</span></span><span class=line><span class=cl>    <span class=c1>;; @see https://emacs-china.org/t/spacemacs-centaur-emacs/3802/839</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>setq</span> <span class=nv>file-name-handler-alist</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nb>unless</span> <span class=p>(</span><span class=nv>display-graphic-p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	    <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34;\\(?:\\.tzst\\|\\.zst\\|\\.dz\\|\\.txz\\|\\.xz\\|\\.lzma\\|\\.lz\\|\\.g?z\\|\\.\\(?:tgz\\|svgz\\|sifz\\)\\|\\.tbz2?\\|\\.bz2\\|\\.Z\\)\\(?:~\\|\\.~[-[:alnum:]:#@^._]+\\(?:~[[:digit:]]+\\)?~\\)?\\&#39;&#34;</span> <span class=o>.</span> <span class=nv>jka-compr-handler</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;emacs-startup-hook</span>
</span></span><span class=line><span class=cl>	      <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>		<span class=s>&#34;Recover file name handlers.&#34;</span>
</span></span><span class=line><span class=cl>		<span class=p>(</span><span class=nb>setq</span> <span class=nv>file-name-handler-alist</span>
</span></span><span class=line><span class=cl>		      <span class=p>(</span><span class=nv>delete-dups</span> <span class=p>(</span><span class=nf>append</span> <span class=nv>file-name-handler-alist</span>
</span></span><span class=line><span class=cl>					   <span class=nv>old-file-name-handler-alist</span><span class=p>)))))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>gc-cons-threshold</span> <span class=nv>most-positive-fixnum</span>
</span></span><span class=line><span class=cl>      <span class=nv>gc-cons-percentage</span> <span class=mf>0.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;emacs-startup-hook</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>	    <span class=s>&#34;Recover GC values after startup.&#34;</span>
</span></span><span class=line><span class=cl>	    <span class=p>(</span><span class=nb>setq</span> <span class=nv>gc-cons-threshold</span> <span class=mi>800000</span>
</span></span><span class=line><span class=cl>		  <span class=nv>gc-cons-percentage</span> <span class=mf>0.1</span><span class=p>)))</span>
</span></span></code></pre></div><h4 id=gcmh class=headerLink><a href=#gcmh class=header-mark></a>gcmh</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>gcmh-mode</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=restart-emacs class=headerLink><a href=#restart-emacs class=header-mark></a>restart-emacs</h4><p>Never exit Emacs ！！！</p><p>防止自己误按 C-x C-c 导致 Emacs 退出， So stupid behavior 。 如果想要退出，使用 M-x save-buffers-kill-emacs 。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-x C-c&#34;</span><span class=p>)</span> <span class=ss>&#39;restart-emacs</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=personal-information class=headerLink><a href=#personal-information class=header-mark></a>Personal information</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nf>user-full-name</span> <span class=s>&#34;DN&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>user-mail-address</span> <span class=s>&#34;duan_n@outlook.com&#34;</span><span class=p>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>auth-sources</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;~/.authinfo&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>;; auth-source-cache-expiry nil)</span>
</span></span><span class=line><span class=cl><span class=c1>;; (setq auth-sources &#39;(macos-keychain-generic))</span>
</span></span><span class=line><span class=cl><span class=c1>;; (setq auth-sources (quote (macos-keychain-internet macos-keychain-generic)))</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>epa-pinentry-mode</span> <span class=ss>&#39;loopback</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>pinentry-start</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=variables class=headerLink><a href=#variables class=header-mark></a>Variables</h3><p>自定义一些变量，方便配置文件位置或争对特定系统进行相关设定。</p><h4 id=folder class=headerLink><a href=#folder class=header-mark></a>folder</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>dn-cloud</span> <span class=s>&#34;~/Nextcloud&#34;</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;This folder is My cloud.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>dn-galaxy</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;L.Personal.Galaxy&#34;</span> <span class=nv>dn-cloud</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;This folder stores all the plain text files of my life.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>dn-roam</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;roam&#34;</span> <span class=nv>dn-galaxy</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;This is the org-roam folder.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>dn-finance</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;finance&#34;</span> <span class=nv>dn-galaxy</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;This folder stores all my finance files.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>dn-finance-year</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=p>(</span><span class=nf>format-time-string</span> <span class=s>&#34;%Y&#34;</span><span class=p>)</span> <span class=nv>dn-finance</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;This folder stores all my finance files of current year.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>dn-pdf-storage</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;storage/pdf&#34;</span> <span class=nv>dn-galaxy</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;This folder stores all the pdf files.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>dn-cache-directory</span> <span class=s>&#34;~/.cache/emacs&#34;</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;This folder stores all EMACS cache file.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>dn-template-directory</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;template&#34;</span> <span class=p>(</span><span class=nv>file-truename</span> <span class=nv>user-emacs-directory</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>default-search-engine-url</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;Google&#34;</span> <span class=s>&#34;www.google.com&#34;</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=system-type class=headerLink><a href=#system-type class=header-mark></a>system type</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>sys-linux</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>and</span> <span class=p>(</span><span class=nf>eq</span> <span class=nv>system-type</span> <span class=ss>&#39;gnu/linux</span><span class=p>)</span> <span class=p>(</span><span class=nf>null</span> <span class=p>(</span><span class=nv>getenv</span> <span class=s>&#34;ANDROID_ROOT&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;GNU Emacs is running on Linux, not termux.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>sys-winp</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>eq</span> <span class=nv>system-type</span> <span class=ss>&#39;windows-nt</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Are we running on a WinTel system?&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>sys-macp</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>eq</span> <span class=nv>system-type</span> <span class=ss>&#39;darwin</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Are we running on a mac system&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>sys-wslp</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>and</span> <span class=p>(</span><span class=nf>eq</span> <span class=nv>system-type</span> <span class=ss>&#39;gnu/linux</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=p>(</span><span class=nf>string-match</span> <span class=s>&#34;-[Mm]icrosoft&#34;</span> <span class=nv>operating-system-release</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Are we running on a GNU/Linux system?&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>sys-termuxp</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>and</span> <span class=p>(</span><span class=nf>eq</span> <span class=nv>system-type</span> <span class=ss>&#39;gnu/linux</span><span class=p>)</span> <span class=p>(</span><span class=nv>not</span> <span class=p>(</span><span class=nf>null</span> <span class=p>(</span><span class=nv>getenv</span> <span class=s>&#34;ANDROID_ROOT&#34;</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;GNU Emacs is running on Termux, not Linux system.&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=better-defaults class=headerLink><a href=#better-defaults class=header-mark></a>Better defaults</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nf>boundp</span> <span class=ss>&#39;use-short-answers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>setq</span> <span class=nv>use-short-answers</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>advice-add</span> <span class=ss>&#39;yes-or-no-p</span> <span class=nb>:override</span> <span class=nf>#&#39;</span><span class=nv>y-or-n-p</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>help-window-select</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>ring-bell-function</span> <span class=ss>&#39;ignore</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; Do not saves duplicates in kill-ring</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>customize-set-variable</span> <span class=ss>&#39;kill-do-not-save-duplicates</span> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=system-code-type class=headerLink><a href=#system-code-type class=header-mark></a>system code type</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>prefer-coding-system</span> <span class=ss>&#39;utf-8</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>set-default-coding-systems</span> <span class=ss>&#39;utf-8</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>set-terminal-coding-system</span> <span class=ss>&#39;utf-8</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>set-keyboard-coding-system</span> <span class=ss>&#39;utf-8</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=dialog-box class=headerLink><a href=#dialog-box class=header-mark></a>dialog box</h4><p>Never popup dialog box.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>use-dialog-box</span> <span class=no>nil</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=define-fringe-bitmap class=headerLink><a href=#define-fringe-bitmap class=header-mark></a>define-fringe-bitmap</h4><p>Word wrap at window edge, hide the right and left curly arrow. So ugly.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nf>define-fringe-bitmap</span> <span class=ss>&#39;right-curly-arrow</span>  <span class=p>[])</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>define-fringe-bitmap</span> <span class=ss>&#39;left-curly-arrow</span>  <span class=p>[])</span>
</span></span></code></pre></div><h4 id=hide-mouse class=headerLink><a href=#hide-mouse class=header-mark></a>hide mouse</h4><p>Builtin function. Hide mouse when type.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>mouse-avoidance-mode</span> <span class=ss>&#39;banish</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=builtin-modes class=headerLink><a href=#builtin-modes class=header-mark></a>builtin modes</h4><p>Emacs 有很多的内置 mode ，这些 mode 实现简单，功能很强大。这部份的详细介绍，可以参见 <a href=https://github.com/condy0919/emacs-newbie/blob/master/introduction-to-builtin-modes.md target=_blank rel="noopener noreffer">Emacs builtin modes 功能介绍</a>。</p><ul><li><p>paren</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>show-paren-style</span> <span class=ss>&#39;mixed</span>
</span></span><span class=line><span class=cl>      <span class=nv>show-paren-when-point-inside-paren</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>show-paren-when-point-in-periphery</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>show-paren-mode</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>elec-pair</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>electric-pair-mode</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>linum</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>display-line-numbers</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;prog-mode-hook</span> <span class=ss>&#39;display-line-numbers-mode</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>simple</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=c1>;; (eval-expression-print-length)</span>
</span></span><span class=line><span class=cl><span class=c1>;; (eval-expression-print-level)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;after-init-hook</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>			     <span class=p>(</span><span class=nv>line-number-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			     <span class=p>(</span><span class=nv>column-number-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			     <span class=p>(</span><span class=nv>size-indication-mode</span><span class=p>)))</span>
</span></span></code></pre></div></li></ul><ul><li><p>bookmark</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>bookmark-default-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;storage/bookmarks&#34;</span> <span class=nv>dn-galaxy</span><span class=p>))</span>
</span></span></code></pre></div></li></ul><ul><li><p>autorevert</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>global-auto-revert-mode</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>subword</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>global-subword-mode</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>winner</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>winner-dont-bind-my-keys</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>winner-mode</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>server</p><p>According to this <a href=https://emacshorrors.com/posts/determining-if-the-server-is-started-or-the-wonders-of-server-running-p.html target=_blank rel="noopener noreffer">blog</a>, use <code>server-process</code> instead of <code>server-ruanning-p</code> 。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>unless</span> <span class=p>(</span><span class=nv>bound-and-true-p</span> <span class=nv>server-process</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>server-start</span><span class=p>))</span>
</span></span></code></pre></div></li></ul><ul><li><p>prettify-symbols-mode</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>prettify-symbols-alist</span> <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34;lambda&#34;</span> <span class=o>.</span> <span class=sc>?λ</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			       <span class=p>(</span><span class=s>&#34;function&#34;</span> <span class=o>.</span> <span class=sc>?𝑓</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;prog-mode-hook</span> <span class=ss>&#39;prettify-symbols-mode</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>so-long</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>global-so-long-mode</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>delsel</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>delete-selection-mode</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>webjump</p><p>基本用不上，我使用 google-this 这个包。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>webjump-sites</span> <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34;Emacs China&#34;</span> <span class=o>.</span> <span class=s>&#34;https://emacs-china.org&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		      <span class=p>(</span><span class=s>&#34;DuckDuckGo&#34;</span> <span class=o>.</span> <span class=p>[</span><span class=nv>simple-query</span> <span class=s>&#34;duckduckgo.com&#34;</span>
</span></span><span class=line><span class=cl>						    <span class=s>&#34;duckduckgo.com/?q=&#34;</span> <span class=s>&#34;&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		      <span class=p>(</span><span class=s>&#34;Douban read&#34;</span> <span class=o>.</span> <span class=p>[</span><span class=nv>simple-query</span> <span class=s>&#34;https://search.douban.com&#34;</span>
</span></span><span class=line><span class=cl>						     <span class=s>&#34;https://search.douban.com/book/subject_search?search_text=&#34;</span> <span class=s>&#34;&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		      <span class=p>(</span><span class=s>&#34;Google&#34;</span> <span class=o>.</span> <span class=p>[</span><span class=nv>simple-query</span> <span class=s>&#34;https://www.google.com&#34;</span>
</span></span><span class=line><span class=cl>						<span class=s>&#34;https://www.google.com/search?q=&#34;</span> <span class=s>&#34;&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		      <span class=p>(</span><span class=s>&#34;Baidu&#34;</span> <span class=o>.</span> <span class=p>[</span><span class=nv>simple-query</span> <span class=s>&#34;https://www.baidu.com&#34;</span>
</span></span><span class=line><span class=cl>					       <span class=s>&#34;https://www.baidu.com/s?ie=utf-8&amp;wd=&#34;</span> <span class=s>&#34;&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		      <span class=p>(</span><span class=s>&#34;Wikipedia&#34;</span> <span class=o>.</span> <span class=p>[</span><span class=nv>simple-query</span> <span class=s>&#34;https://wikipedia.org&#34;</span>
</span></span><span class=line><span class=cl>						   <span class=s>&#34;https://wikipedia.org/wiki/&#34;</span> <span class=s>&#34;&#34;</span><span class=p>])))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;s-/&#34;</span><span class=p>)</span> <span class=ss>&#39;webjump</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><h4 id=large-file class=headerLink><a href=#large-file class=header-mark></a>large file</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>large-file-warning-threshold</span> <span class=no>nil</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=custom-file class=headerLink><a href=#custom-file class=header-mark></a>Custom file</h4><p>Emacs 有时会将一些配置自动导入到此文件中。如果不配置，它会自动将配置附加到 init.el 文件中。我不喜欢这个文件，当其出现的时候，我会手动删除。也许可以写个 function 自动执行。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>custom-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;custom.el&#34;</span> <span class=nv>user-emacs-directory</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; (load custom-file t)</span>
</span></span></code></pre></div><h4 id=private-file class=headerLink><a href=#private-file class=header-mark></a>Private file</h4><p>私有配置不进行同步。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>private-file</span> <span class=s>&#34;~/.emacs.d/private.el&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>load</span> <span class=nv>private-file</span> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=user-interface class=headerLink><a href=#user-interface class=header-mark></a>User interface</h2><p>2022-03-07 目前我喜欢极简的界面。</p><h3 id=fonts class=headerLink><a href=#fonts class=header-mark></a>Fonts</h3><p>Update:2022-03-07 很想把 sarasa 这个字体去掉，但是目前还不知道怎么配置，主要是在 org-table 中要能实现中英文的等宽。另处我不想使用 cnfonts 或 valign 此类包。</p><p>Update:2022-03-08 仅在 org-table 中使用 sarasa 字根。目前没什么好的能够替代 <a href=https://github.com/be5invis/Sarasa-Gothic target=_blank rel="noopener noreffer">sarasa</a> 的字体。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>set-face-attribute</span> <span class=ss>&#39;default</span> <span class=no>nil</span> <span class=nb>:family</span> <span class=s>&#34;Sarasa Mono SC&#34;</span> <span class=nb>:weight</span> <span class=ss>&#39;regular</span> <span class=nb>:height</span> <span class=mi>160</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>set-fontset-font</span> <span class=no>t</span> <span class=ss>&#39;han</span> <span class=p>(</span><span class=nf>font-spec</span> <span class=nb>:name</span> <span class=s>&#34;Source Han Serif SC&#34;</span> <span class=nb>:size</span> <span class=mi>16</span><span class=p>))</span>
</span></span></code></pre></div><h3 id=icon class=headerLink><a href=#icon class=header-mark></a>Icon</h3><h4 id=all-the-icons class=headerLink><a href=#all-the-icons class=header-mark></a>all-the-icons</h4><p>可以使 Emacs 显示 icon ，看上去更像是一个现代的编辑器。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;all-the-icons</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=all-the-icons-completion class=headerLink><a href=#all-the-icons-completion class=header-mark></a>all-the-icons-completion</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>all-the-icons-completion-mode</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=kind-icon class=headerLink><a href=#kind-icon class=header-mark></a>kind-icon</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;kind-icon</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>kind-icon-default-face</span> <span class=ss>&#39;corfu-default</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;corfu</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;corfu-margin-formatters</span> <span class=nf>#&#39;</span><span class=nv>kind-icon-margin-formatter</span><span class=p>))</span>
</span></span></code></pre></div><h3 id=cursor class=headerLink><a href=#cursor class=header-mark></a>Cursor</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>blink-cursor-mode</span> <span class=mi>-1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq-default</span> <span class=nv>cursor-in-non-selected-windows</span> <span class=no>nil</span><span class=p>)</span>
</span></span></code></pre></div><p>我 Fork 了 <a href=https://github.com/Jousimies/im-cursor-chg target=_blank rel="noopener noreffer">im-cursor-chg</a> 这个包，对其做了一些修改，以实现主题切换时能自动切换光标颜色。</p><h4 id=cursor-color class=headerLink><a href=#cursor-color class=header-mark></a>cursor color</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>im-cursor-color</span> <span class=s>&#34;Red&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>cursor-chg-mode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=themes class=headerLink><a href=#themes class=header-mark></a>Themes</h3><p>我的默认主题是 modus-themes ，这个包的自定义性特别高，有黑白配色两套。</p><p>搭配 circadian 使用，可实现自动切换主题。</p><p>目前切换到了 Macos 上使用 Emacs ，<a href=https://github.com/d12frosted/homebrew-emacs-plus target=_blank rel="noopener noreffer">Emacs-plus</a> 可根据系统主题自动切换 Emacs 主题。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>modus-themes-italic-constructs</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>modus-themes-bold-constructs</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>      <span class=nv>modus-themes-region</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>bg-only</span> <span class=nv>no-extend</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>modus-themes-lang-checkers</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>background</span> <span class=nv>text-also</span> <span class=nv>straight-underline</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>modus-themes-links</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>italic</span> <span class=nv>background</span> <span class=nv>faint</span> <span class=nv>neutral-underline</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>modus-themes-hl-line</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>accented</span> <span class=nv>intense</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>modus-themes-paren-match</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>intense</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>modus-themes-org-blocks</span> <span class=ss>&#39;tinted-background</span>
</span></span><span class=line><span class=cl>      <span class=nv>modus-themes-org-agenda</span> <span class=o>&#39;</span><span class=p>((</span><span class=nv>header-block</span> <span class=o>.</span> <span class=p>(</span><span class=nv>variable-pitch</span> <span class=mf>1.2</span><span class=p>))</span>
</span></span><span class=line><span class=cl>				<span class=p>(</span><span class=nv>habit</span> <span class=o>.</span> <span class=nv>traffic-light</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=nv>modus-themes-headings</span> <span class=o>&#39;</span><span class=p>((</span><span class=no>t</span> <span class=o>.</span> <span class=p>(</span><span class=nv>rainbow</span><span class=p>))))</span>
</span></span></code></pre></div><h4 id=override-color-for-distraction-free class=headerLink><a href=#override-color-for-distraction-free class=header-mark></a>Override color for distraction free</h4><p>搭配 centaur-tabs 使用，默认的 tab bar 主题是灰度的，我不喜欢，我把它修改成了与主题色相配的黑白色。
bg-main bg-dim 控制背景色。 magenta-nuanced-bg 控制 org-src block 的背景色。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>modus-themes-operandi-color-overrides</span> <span class=o>&#39;</span><span class=p>((</span><span class=nv>bg-main</span> <span class=o>.</span> <span class=s>&#34;#F2F0EF&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					      <span class=p>(</span><span class=nv>bg-dim</span> <span class=o>.</span> <span class=s>&#34;#F2F0EF&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					      <span class=c1>;; (bg-hl-line . &#34;#F2F0EF&#34;)</span>
</span></span><span class=line><span class=cl>					      <span class=c1>;; (bg-active . &#34;#F2F0EF&#34;)</span>
</span></span><span class=line><span class=cl>					      <span class=c1>;; (bg-inactive . &#34;#ffffff&#34;)</span>
</span></span><span class=line><span class=cl>					      <span class=c1>;; (bg-tab-bar . &#34;#F2F0EF&#34;)</span>
</span></span><span class=line><span class=cl>					      <span class=c1>;; (bg-tab-active . &#34;#F2F0EF&#34;)</span>
</span></span><span class=line><span class=cl>					      <span class=c1>;; (bg-tab-inactive . &#34;#F2F0EF&#34;)</span>
</span></span><span class=line><span class=cl>					      <span class=c1>;; (blue . &#34;#252321&#34;)</span>
</span></span><span class=line><span class=cl>					      <span class=p>(</span><span class=nv>magenta-nuanced-bg</span> <span class=o>.</span> <span class=s>&#34;#FFFFFF&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					      <span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>modus-themes-vivendi-color-overrides</span> <span class=o>&#39;</span><span class=p>((</span><span class=nv>bg-main</span> <span class=o>.</span> <span class=s>&#34;#252321&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					     <span class=p>(</span><span class=nv>bg-dim</span> <span class=o>.</span> <span class=s>&#34;#252321&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					     <span class=c1>;; (bg-hl-line . &#34;#252321&#34;)</span>
</span></span><span class=line><span class=cl>					     <span class=c1>;; (bg-active . &#34;#252321&#34;)</span>
</span></span><span class=line><span class=cl>					     <span class=c1>;; (bg-inactive . &#34;#615F5D&#34;)</span>
</span></span><span class=line><span class=cl>					     <span class=c1>;; (bg-tab-bar . &#34;#252321&#34;)</span>
</span></span><span class=line><span class=cl>					     <span class=c1>;; (bg-tab-active . &#34;#252321&#34;)</span>
</span></span><span class=line><span class=cl>					     <span class=c1>;; (bg-tab-inactive . &#34;#252321&#34;)</span>
</span></span><span class=line><span class=cl>					     <span class=c1>;; (blue . &#34;#F2F0EF&#34;)</span>
</span></span><span class=line><span class=cl>					     <span class=p>(</span><span class=nv>magenta-nuanced-bg</span> <span class=o>.</span> <span class=s>&#34;#615F5D&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					     <span class=p>))</span>
</span></span></code></pre></div><h4 id=theme-auto-change class=headerLink><a href=#theme-auto-change class=header-mark></a>Theme auto change</h4><ul><li><p>Theme change</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/apply-theme</span> <span class=p>(</span><span class=nv>appearance</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Load theme, taking current system APPEARANCE into consideration.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>mapc</span> <span class=nf>#&#39;</span><span class=nv>disable-theme</span> <span class=nv>custom-enabled-themes</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>pcase</span> <span class=nv>appearance</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=ss>&#39;light</span> <span class=p>(</span><span class=nv>load-theme</span> <span class=ss>&#39;modus-operandi</span> <span class=no>t</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=ss>&#39;dark</span> <span class=p>(</span><span class=nv>load-theme</span> <span class=ss>&#39;modus-vivendi</span> <span class=no>t</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;ns-system-appearance-change-functions</span> <span class=nf>#&#39;</span><span class=nv>my/apply-theme</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><h3 id=dashboard class=headerLink><a href=#dashboard class=header-mark></a>Dashboard</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>dashboard-startup-banner</span> <span class=s>&#34;~/.emacs.d/banner.txt&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>dashboard-center-content</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>dashboard-set-init-info</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>dashboard-set-file-icons</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>dashboard-modify-heading-icons</span> <span class=o>&#39;</span><span class=p>((</span><span class=nv>recents</span> <span class=o>.</span> <span class=s>&#34;file-text&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				       <span class=p>(</span><span class=nv>bookmarks</span> <span class=o>.</span> <span class=s>&#34;book&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=nv>dashboard-items</span> <span class=o>&#39;</span><span class=p>((</span><span class=nv>recents</span>  <span class=o>.</span> <span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=p>(</span><span class=nv>bookmarks</span> <span class=o>.</span> <span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=p>(</span><span class=nv>agenda</span> <span class=o>.</span> <span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=p>(</span><span class=nv>registers</span> <span class=o>.</span> <span class=mi>5</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>dashboard-set-navigator</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>set-fontset-font</span> <span class=no>t</span> <span class=o>&#39;</span><span class=p>(</span><span class=mh>#xe03d</span> <span class=o>.</span> <span class=mh>#xe03d</span><span class=p>)</span> <span class=p>(</span><span class=nf>font-spec</span> <span class=nb>:family</span> <span class=s>&#34;Material Icons&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>set-fontset-font</span> <span class=no>t</span> <span class=o>&#39;</span><span class=p>(</span><span class=mh>#xe051</span> <span class=o>.</span> <span class=mh>#xe051</span><span class=p>)</span> <span class=p>(</span><span class=nf>font-spec</span> <span class=nb>:family</span> <span class=s>&#34;Material Icons&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>dashboard-navigator-buttons</span>
</span></span><span class=line><span class=cl>      <span class=o>`</span><span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=p>((</span><span class=o>,</span><span class=p>(</span><span class=nv>all-the-icons-octicon</span> <span class=s>&#34;mark-github&#34;</span> <span class=nb>:height</span> <span class=mi>1</span> <span class=nb>:v-adjust</span> <span class=mf>0.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	  <span class=s>&#34;Homepage&#34;</span>
</span></span><span class=line><span class=cl>	  <span class=s>&#34;Browse homepage&#34;</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nb>lambda</span> <span class=p>(</span><span class=kp>&amp;rest</span> <span class=nv>_</span><span class=p>)</span> <span class=p>(</span><span class=nv>browse-url</span> <span class=s>&#34;https://github.com/Jousimies/.emacs.d&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=o>,</span><span class=p>(</span><span class=nv>all-the-icons-octicon</span> <span class=s>&#34;tools&#34;</span> <span class=nb>:height</span> <span class=mi>1</span> <span class=nb>:v-adjust</span> <span class=mf>0.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	  <span class=s>&#34;Settings&#34;</span> <span class=s>&#34;Open README file&#34;</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nb>lambda</span> <span class=p>(</span><span class=kp>&amp;rest</span> <span class=nv>_</span><span class=p>)</span> <span class=p>(</span><span class=nv>find-file</span> <span class=s>&#34;~/.emacs.d/README.org&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=o>,</span><span class=p>(</span><span class=nv>all-the-icons-faicon</span> <span class=s>&#34;sitemap&#34;</span> <span class=nb>:height</span> <span class=mi>1</span> <span class=nb>:v-adjust</span> <span class=mf>0.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	  <span class=s>&#34;Blog&#34;</span> <span class=s>&#34;Browse Blog&#34;</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nb>lambda</span> <span class=p>(</span><span class=kp>&amp;rest</span> <span class=nv>_</span><span class=p>)</span> <span class=p>(</span><span class=nv>browse-url</span> <span class=s>&#34;https://jousimies.github.io&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=o>,</span><span class=p>(</span><span class=nv>all-the-icons-material</span> <span class=s>&#34;queue_music&#34;</span> <span class=nb>:height</span> <span class=mi>1</span> <span class=nb>:v-adjust</span> <span class=mf>-0.2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	  <span class=s>&#34;Music&#34;</span> <span class=s>&#34;Netease cloud music&#34;</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nb>lambda</span> <span class=p>(</span><span class=kp>&amp;rest</span> <span class=nv>_</span><span class=p>)</span> <span class=p>(</span><span class=nv>netease-cloud-music</span><span class=p>))))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>dashboard-footer-icon</span> <span class=p>(</span><span class=nv>all-the-icons-octicon</span> <span class=s>&#34;dashboard&#34;</span>
</span></span><span class=line><span class=cl>						   <span class=nb>:height</span> <span class=mf>1.1</span>
</span></span><span class=line><span class=cl>						   <span class=nb>:v-adjust</span> <span class=mf>-0.05</span>
</span></span><span class=line><span class=cl>						   <span class=nb>:face</span> <span class=ss>&#39;font-lock-keyword-face</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>dashboard-footer-messages</span> <span class=o>`</span><span class=p>(</span><span class=o>,</span><span class=p>(</span><span class=nf>concat</span> <span class=s>&#34;Happy hacking, jousimies - Emacs &#34;</span>
</span></span><span class=line><span class=cl>					   <span class=p>(</span><span class=nv>all-the-icons-octicon</span> <span class=s>&#34;heart&#34;</span>
</span></span><span class=line><span class=cl>								  <span class=nb>:height</span> <span class=mf>1.1</span>
</span></span><span class=line><span class=cl>								  <span class=nb>:v-adjust</span> <span class=mf>-0.05</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					   <span class=s>&#34; you!&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>dashboard-setup-startup-hook</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;&lt;f5&gt;&#34;</span><span class=p>)</span> <span class=ss>&#39;dashboard-refresh-buffer</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=rainbow-mode class=headerLink><a href=#rainbow-mode class=header-mark></a>rainbow-mode</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;prog-mode-hook</span> <span class=ss>&#39;rainbow-mode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=helpful class=headerLink><a href=#helpful class=header-mark></a>helpful</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>[</span><span class=nv>remap</span> <span class=nv>describe-function</span><span class=p>]</span> <span class=ss>&#39;helpful-callable</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>[</span><span class=nv>remap</span> <span class=nv>describe-variable</span><span class=p>]</span> <span class=ss>&#39;helpful-variable</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>[</span><span class=nv>remap</span> <span class=nv>describe-key</span><span class=p>]</span> <span class=ss>&#39;helpful-key</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-h F&#34;</span><span class=p>)</span> <span class=ss>&#39;helpful-function</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-h C&#34;</span><span class=p>)</span> <span class=ss>&#39;helpful-command</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=info-colors class=headerLink><a href=#info-colors class=header-mark></a>info-colors</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;Info-selection-hook</span> <span class=ss>&#39;info-colors-fontify-node</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=goggles class=headerLink><a href=#goggles class=header-mark></a>goggles</h3><blockquote><p>Goggles highlights the modified region using pulse. Currently the commands undo, yank, kill and delete are supported.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq-default</span> <span class=nv>goggles-pulse</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;prog-mode-hook</span> <span class=ss>&#39;goggles-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;text-mode-hook</span> <span class=ss>&#39;goggles-mode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=emojify class=headerLink><a href=#emojify class=header-mark></a>emojify</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;after-init-hook</span> <span class=nf>#&#39;</span><span class=nv>global-emojify-mode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=svg class=headerLink><a href=#svg class=header-mark></a>svg</h3><p>将文字显示为图形，有很强的视觉效果，但是同时很容易使人分心，所以应该有所克制的使用此功能。 DISTRACT FREE ！！</p><h4 id=svg-lib class=headerLink><a href=#svg-lib class=header-mark></a>svg-lib</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>svg-lib-icons-dir</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;svg-lib&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=define-gtd-keywords-faces class=headerLink><a href=#define-gtd-keywords-faces class=header-mark></a>Define gtd keywords faces</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defface</span> <span class=nv>gtd-next</span>
</span></span><span class=line><span class=cl>  <span class=o>&#39;</span><span class=p>((((</span><span class=nv>background</span> <span class=nv>light</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#1d9537&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=no>t</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#007d65&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;GTD face.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>:group</span> <span class=ss>&#39;gtd-faces</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defface</span> <span class=nv>gtd-wait</span>
</span></span><span class=line><span class=cl>  <span class=o>&#39;</span><span class=p>((((</span><span class=nv>background</span> <span class=nv>light</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#dea32c&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=no>t</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#fcaf17&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;GTD face.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>:group</span> <span class=ss>&#39;gtd-faces</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defface</span> <span class=nv>gtd-someday</span>
</span></span><span class=line><span class=cl>  <span class=o>&#39;</span><span class=p>((((</span><span class=nv>background</span> <span class=nv>light</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#7d5886&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=no>t</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#c77eb5&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;GTD face.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>:group</span> <span class=ss>&#39;gtd-faces</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defface</span> <span class=nv>gtd-cncl</span>
</span></span><span class=line><span class=cl>  <span class=o>&#39;</span><span class=p>((((</span><span class=nv>background</span> <span class=nv>light</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#999d9c&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=no>t</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#4f5555&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;GTD face.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>:group</span> <span class=ss>&#39;gtd-faces</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defface</span> <span class=nv>gtd-a</span>
</span></span><span class=line><span class=cl>  <span class=o>&#39;</span><span class=p>((((</span><span class=nv>background</span> <span class=nv>light</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#f05b72&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=no>t</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#f58f98&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;GTD face.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>:group</span> <span class=ss>&#39;gtd-faces</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defface</span> <span class=nv>gtd-b</span>
</span></span><span class=line><span class=cl>  <span class=o>&#39;</span><span class=p>((((</span><span class=nv>background</span> <span class=nv>light</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#1d9537&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=no>t</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#007d65&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;GTD face.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>:group</span> <span class=ss>&#39;gtd-faces</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defface</span> <span class=nv>gtd-c</span>
</span></span><span class=line><span class=cl>  <span class=o>&#39;</span><span class=p>((((</span><span class=nv>background</span> <span class=nv>light</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#999d9c&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=no>t</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#4f5555&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;GTD face.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>:group</span> <span class=ss>&#39;gtd-faces</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=svg-tag-mode class=headerLink><a href=#svg-tag-mode class=header-mark></a>svg-tag-mode</h4><p><code>svg-tag-mode</code> 没有 autoload ，所以需要显式的 require 此包。不能使用 <code>global-svg-tag-mode~，目前己知的问题是会导致 ~netease-cloud-musci</code> 报 numperp 的错误。 mu4e 中的图标显示成灰度图像。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;svg-tag-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defconst</span> <span class=nv>date-re</span> <span class=s>&#34;[0-9]\\{4\\}-[0-9]\\{2\\}-[0-9]\\{2\\}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defconst</span> <span class=nv>time-re</span> <span class=s>&#34;[0-9]\\{2\\}:[0-9]\\{2\\}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defconst</span> <span class=nv>day-re</span> <span class=s>&#34;[A-Za-z]\\{3\\}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>svg-progress-count</span> <span class=p>(</span><span class=nv>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let*</span> <span class=p>((</span><span class=nv>seq</span> <span class=p>(</span><span class=nf>mapcar</span> <span class=nf>#&#39;string-to-number</span> <span class=p>(</span><span class=nv>split-string</span> <span class=nv>value</span> <span class=s>&#34;/&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>count</span> <span class=p>(</span><span class=nf>float</span> <span class=p>(</span><span class=nf>car</span> <span class=nv>seq</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>total</span> <span class=p>(</span><span class=nf>float</span> <span class=p>(</span><span class=nv>cadr</span> <span class=nv>seq</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>svg-image</span> <span class=p>(</span><span class=nv>svg-lib-concat</span>
</span></span><span class=line><span class=cl>	      <span class=p>(</span><span class=nv>svg-lib-progress-bar</span> <span class=p>(</span><span class=nf>/</span> <span class=nv>count</span> <span class=nv>total</span><span class=p>)</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>				    <span class=nb>:margin</span> <span class=mi>0</span> <span class=nb>:stroke</span> <span class=mi>2</span> <span class=nb>:radius</span> <span class=mi>3</span> <span class=nb>:padding</span> <span class=mi>2</span> <span class=nb>:width</span> <span class=mi>11</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	      <span class=p>(</span><span class=nv>svg-lib-tag</span> <span class=nv>value</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>			   <span class=nb>:stroke</span> <span class=mi>2</span> <span class=nb>:padding</span> <span class=mi>2</span> <span class=nb>:margin</span> <span class=mi>1</span><span class=p>))</span> <span class=nb>:ascent</span> <span class=ss>&#39;center</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>svg-tag-tags</span>
</span></span><span class=line><span class=cl>      <span class=o>`</span><span class=p>((</span><span class=s>&#34;TODO&#34;</span> <span class=o>.</span> <span class=p>((</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>tag</span><span class=p>)</span> <span class=p>(</span><span class=nv>svg-tag-make</span> <span class=s>&#34;TODO&#34;</span> <span class=nb>:face</span> <span class=ss>&#39;org-todo</span> <span class=nb>:inverse</span> <span class=no>t</span> <span class=nb>:margin</span> <span class=mi>0</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;NEXT&#34;</span> <span class=o>.</span> <span class=p>((</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>tag</span><span class=p>)</span> <span class=p>(</span><span class=nv>svg-tag-make</span> <span class=s>&#34;NEXT&#34;</span> <span class=nb>:face</span> <span class=ss>&#39;gtd-next</span> <span class=nb>:inverse</span> <span class=no>t</span> <span class=nb>:margin</span> <span class=mi>0</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;WAIT&#34;</span> <span class=o>.</span> <span class=p>((</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>tag</span><span class=p>)</span> <span class=p>(</span><span class=nv>svg-tag-make</span> <span class=s>&#34;WAIT&#34;</span> <span class=nb>:face</span> <span class=ss>&#39;gtd-wait</span> <span class=nb>:inverse</span> <span class=no>t</span> <span class=nb>:margin</span> <span class=mi>0</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;SOMEDAY&#34;</span> <span class=o>.</span> <span class=p>((</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>tag</span><span class=p>)</span> <span class=p>(</span><span class=nv>svg-tag-make</span> <span class=s>&#34;SOMEDAY&#34;</span> <span class=nb>:face</span> <span class=ss>&#39;gtd-someday</span> <span class=nb>:inverse</span> <span class=no>t</span> <span class=nb>:margin</span> <span class=mi>0</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;CNCL&#34;</span> <span class=o>.</span> <span class=p>((</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>tag</span><span class=p>)</span> <span class=p>(</span><span class=nv>svg-tag-make</span> <span class=s>&#34;CNCL&#34;</span> <span class=nb>:face</span> <span class=ss>&#39;gtd-cncl</span> <span class=nb>:inverse</span> <span class=no>t</span> <span class=nb>:margin</span> <span class=mi>0</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;DONE&#34;</span> <span class=o>.</span> <span class=p>((</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>tag</span><span class=p>)</span> <span class=p>(</span><span class=nv>svg-tag-make</span> <span class=s>&#34;DONE&#34;</span> <span class=nb>:face</span> <span class=ss>&#39;org-done</span> <span class=nb>:margin</span> <span class=mi>0</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;\\[#[A]\\]&#34;</span> <span class=o>.</span> <span class=p>(</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>tag</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			      <span class=p>(</span><span class=nv>svg-tag-make</span> <span class=nv>tag</span> <span class=nb>:face</span> <span class=ss>&#39;gtd-a</span>
</span></span><span class=line><span class=cl>					    <span class=nb>:inverse</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>					    <span class=nb>:beg</span> <span class=mi>2</span> <span class=nb>:end</span> <span class=mi>-1</span> <span class=nb>:margin</span> <span class=mi>0</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;\\[#[B]\\]&#34;</span> <span class=o>.</span> <span class=p>(</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>tag</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			      <span class=p>(</span><span class=nv>svg-tag-make</span> <span class=nv>tag</span> <span class=nb>:face</span> <span class=ss>&#39;gtd-b</span>
</span></span><span class=line><span class=cl>					    <span class=nb>:inverse</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>					    <span class=nb>:beg</span> <span class=mi>2</span> <span class=nb>:end</span> <span class=mi>-1</span> <span class=nb>:margin</span> <span class=mi>0</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;\\[#[C]\\]&#34;</span> <span class=o>.</span> <span class=p>(</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>tag</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			      <span class=p>(</span><span class=nv>svg-tag-make</span> <span class=nv>tag</span> <span class=nb>:face</span> <span class=ss>&#39;gtd-c</span>
</span></span><span class=line><span class=cl>					    <span class=nb>:inverse</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>					    <span class=nb>:beg</span> <span class=mi>2</span> <span class=nb>:end</span> <span class=mi>-1</span> <span class=nb>:margin</span> <span class=mi>0</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;\\(\\[[0-9]+/[0-9]+\\]\\)&#34;</span> <span class=o>.</span> <span class=p>((</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>tag</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					  <span class=p>(</span><span class=nv>svg-progress-count</span> <span class=p>(</span><span class=nf>substring</span> <span class=nv>tag</span> <span class=mi>1</span> <span class=mi>-1</span><span class=p>)))))</span>
</span></span><span class=line><span class=cl>	<span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=ss>&#39;svg-tag-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>;; (global-svg-tag-mode)</span>
</span></span></code></pre></div><h4 id=auto-update-svg-tag class=headerLink><a href=#auto-update-svg-tag class=header-mark></a>Auto update svg-tag</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>advice-add</span> <span class=ss>&#39;modus-themes-toggle</span> <span class=nb>:after</span> <span class=ss>&#39;svg-tag-mode-on</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>advice-add</span> <span class=ss>&#39;circadian-activate-latest-theme</span> <span class=nb>:after</span> <span class=ss>&#39;svg-tag-mode-on</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=lin class=headerLink><a href=#lin class=header-mark></a>lin</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>lin-face</span> <span class=ss>&#39;lin-blue</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>lin-mode-hooks</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>bongo-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>dired-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>elfeed-search-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>elfeed-summary-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>elfeed-show-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>git-rebase-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>grep-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>ibuffer-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>ilist-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>pdf-outline-minor-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>ledger-report-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>log-view-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>magit-log-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>mu4e-headers-mode</span>
</span></span><span class=line><span class=cl>		       <span class=nv>notmuch-search-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>notmuch-tree-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>occur-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>elfeed-show-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>org-agenda-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>proced-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>ebib-entry-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>ebib-index-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>netease-cloud-music-mode-hook</span>
</span></span><span class=line><span class=cl>		       <span class=nv>tabulated-list-mode-hook</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>lin-global-mode</span> <span class=mi>1</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=frame-management class=headerLink><a href=#frame-management class=header-mark></a>Frame management</h3><h4 id=fullscreen class=headerLink><a href=#fullscreen class=header-mark></a>Fullscreen</h4><p>我总是全屏使用 Emacs。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>toggle-frame-fullscreen</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=quit-and-delete-window class=headerLink><a href=#quit-and-delete-window class=header-mark></a>Quit and delete window</h4><p>删除窗口，而不是只是隐藏它，见 <a href=https://www.reddit.com/r/emacs/comments/t1rvbd/help_wanted_emacs_doesnt_really_deletes_special/ target=_blank rel="noopener noreffer">Reddit</a> 。</p><p>这个对于一些临时 buffer 很有用，使用 ESC 进行最近 buffer 切换时，就不会出现不想要的 buffer ，如 \*fanyi\*, \*G0-Translator\* \*help\* 等。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>quit-window-delete</span> <span class=p>(</span><span class=kp>&amp;optional</span> <span class=nv>kill</span> <span class=nv>window</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Quit WINDOW, deleting it, and bury its buffer.
</span></span></span><span class=line><span class=cl><span class=s>WINDOW must be a live window and defaults to the selected one.
</span></span></span><span class=line><span class=cl><span class=s>With prefix argument KILL non-nil, kill the buffer instead of
</span></span></span><span class=line><span class=cl><span class=s>burying it.
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>This is similar to the version of </span><span class=ss>`quit-window&#39;</span><span class=s> that Emacs had before
</span></span></span><span class=line><span class=cl><span class=s>the introduction of </span><span class=ss>`quit-restore-window&#39;</span><span class=s>.  It ignores the information
</span></span></span><span class=line><span class=cl><span class=s>stored in WINDOW&#39;s </span><span class=ss>`quit-restore&#39;</span><span class=s> window parameter.
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>It deletes the WINDOW more often, rather than switching to another
</span></span></span><span class=line><span class=cl><span class=s>buffer in it.  If WINDOW is alone in its frame then the frame is
</span></span></span><span class=line><span class=cl><span class=s>deleted or iconified, according to option </span><span class=ss>`frame-auto-hide-function&#39;</span><span class=s>.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span> <span class=s>&#34;P&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>set-window-parameter</span> <span class=nv>window</span> <span class=ss>&#39;quit-restore</span> <span class=o>`</span><span class=p>(</span><span class=nv>frame</span> <span class=nv>frame</span> <span class=no>nil</span> <span class=o>,</span><span class=p>(</span><span class=nf>current-buffer</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>quit-restore-window</span> <span class=nv>window</span> <span class=p>(</span><span class=nb>if</span> <span class=nv>kill</span> <span class=ss>&#39;kill</span> <span class=ss>&#39;bury</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>[</span><span class=nv>remap</span> <span class=nv>quit-window</span><span class=p>]</span> <span class=ss>&#39;quit-window-delete</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>[</span><span class=nv>remap</span> <span class=nv>meow-quit</span><span class=p>]</span> <span class=ss>&#39;quit-window-delete</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=scroll-other-window class=headerLink><a href=#scroll-other-window class=header-mark></a>Scroll other window</h4><p>这个在并排使用两个 buffer 的时候很好用。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>dn/scroll-other-windown-down</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Scroll other window down.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>scroll-other-window-down</span> <span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>dn/scroll-other-windown</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Scroll other window up.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>scroll-other-window</span> <span class=mi>2</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;M-n&#34;</span><span class=p>)</span> <span class=ss>&#39;dn/scroll-other-windown</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;M-p&#34;</span><span class=p>)</span> <span class=ss>&#39;dn/scroll-other-windown-down</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=org-src class=headerLink><a href=#org-src class=header-mark></a>Org-src</h4><p>默认是在右侧打开编辑 buffer ，我的屏幕小，所以我选择当前窗口打开编辑 buffer 。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;org</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>org-src-window-setup</span> <span class=ss>&#39;current-window</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=display-buffer-alist class=headerLink><a href=#display-buffer-alist class=header-mark></a>display-buffer-alist</h4><p>我选择使用 display-buffer-alist 进行窗口的管理，有一些包如 popup ， shackle 等也可以使用。</p><ul><li><p>one-key buffer</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>display-buffer-alist</span>
</span></span><span class=line><span class=cl>      <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34;*One-Key*&#34;</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nv>display-buffer-reuse-window</span>
</span></span><span class=line><span class=cl>	 <span class=nv>display-buffer-in-side-window</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nv>side</span> <span class=o>.</span> <span class=nv>bottom</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nv>reusable-frames</span> <span class=o>.</span> <span class=nv>visible</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nf>window-parameters</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>select</span> <span class=o>.</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>quit</span> <span class=o>.</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>popup</span> <span class=o>.</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>mode-line-format</span> <span class=o>.</span> <span class=nv>none</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>tab-line-format</span> <span class=o>.</span> <span class=nv>none</span><span class=p>)))))</span>
</span></span></code></pre></div></li></ul><ul><li><p>eshell buffer</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;display-buffer-alist</span>
</span></span><span class=line><span class=cl>	     <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;*eshell*&#34;</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>display-buffer-reuse-window</span>
</span></span><span class=line><span class=cl>		<span class=nv>display-buffer-in-side-window</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>side</span> <span class=o>.</span> <span class=nv>bottom</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>window-height</span> <span class=o>.</span> <span class=mf>0.8</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>slot</span> <span class=o>.</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nf>window-parameters</span>
</span></span><span class=line><span class=cl>		<span class=p>(</span><span class=nv>mode-line-format</span> <span class=o>.</span> <span class=nv>none</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>(</span><span class=nv>tab-line-format</span> <span class=o>.</span> <span class=nv>none</span><span class=p>))))</span>
</span></span></code></pre></div></li></ul><ul><li><p>help buffer</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;display-buffer-alist</span>
</span></span><span class=line><span class=cl>	     <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;*Help*&#34;</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>display-buffer-in-side-window</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>side</span> <span class=o>.</span> <span class=nv>right</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>window-width</span> <span class=o>.</span> <span class=mf>0.5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>slot</span> <span class=o>.</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nf>window-parameters</span>
</span></span><span class=line><span class=cl>		<span class=p>(</span><span class=nv>mode-line-format</span> <span class=o>.</span> <span class=nv>none</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>(</span><span class=nv>tab-line-format</span> <span class=o>.</span> <span class=nv>none</span><span class=p>))))</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-roam buffer</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;display-buffer-alist</span>
</span></span><span class=line><span class=cl>	     <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;\\*org-roam\\*&#34;</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>display-buffer-in-direction</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>direction</span> <span class=o>.</span> <span class=nv>right</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>window-width</span> <span class=o>.</span> <span class=mf>0.25</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>window-height</span> <span class=o>.</span> <span class=nv>fit-window-to-buffer</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nf>window-parameters</span>
</span></span><span class=line><span class=cl>		<span class=p>(</span><span class=nv>mode-line-format</span> <span class=o>.</span> <span class=nv>none</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>(</span><span class=nv>tab-line-format</span> <span class=o>.</span> <span class=nv>none</span><span class=p>))))</span>
</span></span></code></pre></div></li></ul><ul><li><p>Ilist buffer</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;display-buffer-alist</span>
</span></span><span class=line><span class=cl>	     <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;*Ilist*&#34;</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>display-buffer-in-side-window</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>side</span> <span class=o>.</span> <span class=nv>right</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>window-width</span> <span class=o>.</span> <span class=mf>0.3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nv>slot</span> <span class=o>.</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nf>window-parameters</span>
</span></span><span class=line><span class=cl>		<span class=p>(</span><span class=nv>mode-line-format</span> <span class=o>.</span> <span class=nv>none</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>(</span><span class=nv>tab-line-format</span> <span class=o>.</span> <span class=nv>none</span><span class=p>))))</span>
</span></span></code></pre></div></li></ul><h3 id=awesome-tray class=headerLink><a href=#awesome-tray class=header-mark></a>Awesome Tray</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>awesome-tray-active-modules</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;input-method&#34;</span> <span class=s>&#34;date&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>awesome-tray-mode</span> <span class=mi>1</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=awesome-try-and-and-meow-state class=headerLink><a href=#awesome-try-and-and-meow-state class=header-mark></a>awesome try && meow state</h4><p>Copy from <a href=https://emacs-china.org/t/awesome-tray-emacs-mode-line/7250/148 target=_blank rel="noopener noreffer">https://emacs-china.org/t/awesome-tray-emacs-mode-line/7250/148</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>awesome-tray-module-meow-info</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>string-trim</span> <span class=p>(</span><span class=nv>meow-indicator</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;awesome-tray-module-alist</span>
</span></span><span class=line><span class=cl>	     <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;meow&#34;</span> <span class=o>.</span> <span class=p>(</span><span class=nv>awesome-tray-module-meow-info</span> <span class=nv>awesome-tray-module-evil-face</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;awesome-tray-active-modules</span> <span class=s>&#34;meow&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=awesome-tray-and-and-mu4e-unread class=headerLink><a href=#awesome-tray-and-and-mu4e-unread class=header-mark></a>awesome tray && mu4e unread</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;mu4e-alert</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Copied from mu4e-alert</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>defun</span> <span class=nv>mu4e-alert-enable-tray-display</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;Enable display of unread emails in mode-line.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;mu4e-index-updated-hook</span> <span class=nf>#&#39;</span><span class=nv>mu4e-alert-update-mail-count-modeline</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;mu4e-message-changed-hook</span> <span class=nf>#&#39;</span><span class=nv>mu4e-alert-update-mail-count-modeline</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>advice-add</span> <span class=nf>#&#39;</span><span class=nv>mu4e-context-switch</span> <span class=nb>:around</span> <span class=nf>#&#39;</span><span class=nv>mu4e-alert--context-switch</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>mu4e-alert-update-mail-count-modeline</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>mu4e-alert-enable-tray-display</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>defun</span> <span class=nv>awesome-tray-module-mail-info</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>concat</span> <span class=s>&#34;EMAIL:&#34;</span> <span class=p>(</span><span class=nf>substring</span> <span class=nv>mu4e-alert-mode-line</span> <span class=mi>7</span> <span class=mi>9</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;awesome-tray-module-alist</span>
</span></span><span class=line><span class=cl>	       <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;mail&#34;</span> <span class=o>.</span> <span class=p>(</span><span class=nv>awesome-tray-module-mail-info</span> <span class=nv>awesome-tray-module-belong-face</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;awesome-tray-active-modules</span> <span class=s>&#34;mail&#34;</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=update-awesome-tray-status class=headerLink><a href=#update-awesome-tray-status class=header-mark></a>Update awesome tray status</h4><p>Enable awesome tray when theme changed。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defvar</span> <span class=nv>after-load-theme-hook</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Hook run after a color theme is loaded using </span><span class=ss>`load-theme&#39;</span><span class=s>.&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defadvice</span> <span class=nv>load-theme</span> <span class=p>(</span><span class=nv>after</span> <span class=nv>run-after-load-theme-hook</span> <span class=nv>activate</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Run </span><span class=ss>`after-load-theme-hook&#39;</span><span class=s>.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>run-hooks</span> <span class=ss>&#39;after-load-theme-hook</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;after-load-theme-hook</span> <span class=ss>&#39;awesome-tray-enable</span> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=editor-enhancement-c-dot-r-dot-u-dot-d class=headerLink><a href=#editor-enhancement-c-dot-r-dot-u-dot-d class=header-mark></a>Editor Enhancement &ndash; C.R.U.D</h2><p>编辑器的功能是为了更好的增删改查。</p><h3 id=rime class=headerLink><a href=#rime class=header-mark></a>rime</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>rime-librime-root</span> <span class=s>&#34;~/.emacs.d/librime/dist&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>rime-emacs-module-header-root</span> <span class=s>&#34;/opt/homebrew/opt/emacs-plus@28/include&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>rime-user-data-dir</span> <span class=s>&#34;~/Library/Rime/&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>default-input-method</span> <span class=s>&#34;rime&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>rime-show-candidate</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>rime-disable-predicates</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>meow-normal-mode-p</span>
</span></span><span class=line><span class=cl>				<span class=nv>meow-motion-mode-p</span>
</span></span><span class=line><span class=cl>				<span class=nv>meow-keypad-mode-p</span>
</span></span><span class=line><span class=cl>				<span class=nv>rime-predicate-prog-in-code-p</span>
</span></span><span class=line><span class=cl>				<span class=nv>rime-predicate-org-in-src-block-p</span>
</span></span><span class=line><span class=cl>				<span class=nv>rime-predicate-current-uppercase-letter-p</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>rime-inline-predicates</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>rime-predicate-space-after-cc-p</span>
</span></span><span class=line><span class=cl>			       <span class=nv>rime-predicate-after-alphabet-char-p</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nv>set-input-method</span> <span class=s>&#34;rime&#34;</span><span class=p>)))</span>
</span></span></code></pre></div><h3 id=rime-regexp class=headerLink><a href=#rime-regexp class=header-mark></a>rime-regexp</h3><p>使用拼音进行中文的检索。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>rime-regexp-mode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=autoinsert class=headerLink><a href=#autoinsert class=header-mark></a>autoinsert</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>define-auto-insert</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>cons</span> <span class=s>&#34;init-.*\\.el&#34;</span> <span class=s>&#34;Emacs Lisp Skeleton&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;Emacs Configuration Description: &#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;;;;; &#34;</span> <span class=p>(</span><span class=nf>file-name-nondirectory</span> <span class=p>(</span><span class=nf>buffer-file-name</span><span class=p>))</span> <span class=s>&#34; --- &#34;</span> <span class=nv>str</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>make-string</span> <span class=p>(</span><span class=nf>max</span> <span class=mi>2</span> <span class=p>(</span><span class=nf>-</span> <span class=mi>80</span> <span class=p>(</span><span class=nf>current-column</span><span class=p>)</span> <span class=mi>27</span><span class=p>))</span> <span class=sc>?\s</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;-*- lexical-binding: t; -*-&#34;</span> <span class=o>&#39;</span><span class=p>(</span><span class=nb>setq</span> <span class=nv>lexical-binding</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>;; Copyright (C) &#34;</span> <span class=p>(</span><span class=nf>format-time-string</span> <span class=s>&#34;%Y&#34;</span><span class=p>)</span> <span class=s>&#34;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>;;; Commentary:
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>;; &#34;</span> <span class=nv>_</span> <span class=s>&#34;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>;;; Code:
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>(provide &#39;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>file-name-base</span> <span class=p>(</span><span class=nf>buffer-file-name</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;)
</span></span></span><span class=line><span class=cl><span class=s>;;; &#34;</span> <span class=p>(</span><span class=nf>file-name-nondirectory</span> <span class=p>(</span><span class=nf>buffer-file-name</span><span class=p>))</span> <span class=s>&#34; ends here\n&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>auto-insert-mode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=embrace class=headerLink><a href=#embrace class=header-mark></a>embrace</h3><p>这个包很方便的对文本进行括号的增删改。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;embrace</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>set-face-attribute</span> <span class=ss>&#39;embrace-help-pair-face</span> <span class=no>nil</span> <span class=nb>:inherit</span> <span class=nv>font-lock-function-name-face</span> <span class=nb>:inverse-video</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-,&#34;</span><span class=p>)</span> <span class=ss>&#39;embrace-commander</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>embrace-org-mode-hook</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>dolist</span> <span class=p>(</span><span class=nv>lst</span> <span class=o>&#39;</span><span class=p>((</span><span class=sc>?=</span> <span class=s>&#34; =&#34;</span> <span class=o>.</span> <span class=s>&#34;= &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		 <span class=p>(</span><span class=sc>?~</span> <span class=s>&#34; ~&#34;</span> <span class=o>.</span> <span class=s>&#34;~ &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		 <span class=p>(</span><span class=sc>?/</span> <span class=s>&#34; /&#34;</span> <span class=o>.</span> <span class=s>&#34;/ &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		 <span class=p>(</span><span class=sc>?*</span> <span class=s>&#34; *&#34;</span> <span class=o>.</span> <span class=s>&#34;* &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		 <span class=p>(</span><span class=sc>?_</span> <span class=s>&#34; _&#34;</span> <span class=o>.</span> <span class=s>&#34;_ &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		 <span class=p>(</span><span class=sc>?+</span> <span class=s>&#34; +&#34;</span> <span class=o>.</span> <span class=s>&#34;+ &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		 <span class=p>(</span><span class=sc>?k</span> <span class=s>&#34;@@html:&lt;kbd&gt;@@&#34;</span> <span class=o>.</span> <span class=s>&#34;@@html:&lt;/kbd&gt;@@&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>embrace-add-pair</span> <span class=p>(</span><span class=nf>car</span> <span class=nv>lst</span><span class=p>)</span> <span class=p>(</span><span class=nv>cadr</span> <span class=nv>lst</span><span class=p>)</span> <span class=p>(</span><span class=nv>cddr</span> <span class=nv>lst</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=ss>&#39;embrace-org-mode-hook</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=recent-file class=headerLink><a href=#recent-file class=header-mark></a>recent file</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;after-init-hook</span> <span class=nf>#&#39;</span><span class=nv>recentf-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;kill-emacs-hook</span> <span class=nf>#&#39;</span><span class=nv>recentf-cleanup</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>recentf-save-file</span> <span class=s>&#34;/Users/duanning/.cache/emacs/recentf&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>recentf-max-saved-items</span> <span class=mi>1000</span>
</span></span><span class=line><span class=cl>      <span class=nv>recentf-exclude</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;[0-9]*-.*.org&#34;</span> <span class=s>&#34;slipbox&#34;</span> <span class=s>&#34;todos&#34;</span> <span class=s>&#34;recentf&#34;</span> <span class=s>&#34;M.Calibre&#34;</span> <span class=s>&#34;.elfeed&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>recentf-auto-cleanup</span> <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nf>daemonp</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			       <span class=mi>300</span><span class=p>))</span>
</span></span></code></pre></div><h3 id=dired-mode class=headerLink><a href=#dired-mode class=header-mark></a>dired-mode</h3><h4 id=files class=headerLink><a href=#files class=header-mark></a>files</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>make-directory</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;backups/&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>)</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>confirm-kill-processes</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>backup-directory-alist</span> <span class=o>`</span><span class=p>((</span><span class=s>&#34;.&#34;</span> <span class=o>.</span> <span class=o>,</span><span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;backups/&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>))))</span>
</span></span></code></pre></div><h4 id=dired class=headerLink><a href=#dired class=header-mark></a>dired</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>dired-recursive-deletes</span> <span class=ss>&#39;always</span>
</span></span><span class=line><span class=cl>      <span class=nv>dired-recursive-copies</span> <span class=ss>&#39;always</span>
</span></span><span class=line><span class=cl>      <span class=nv>global-auto-revert-non-file-buffers</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>auto-revert-verbose</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>      <span class=nv>dired-dwim-target</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>delete-by-moving-to-trash</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>load-prefer-newer</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>auto-revert-use-notify</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>      <span class=nv>auto-revert-interval</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>      <span class=nv>insert-directory-program</span> <span class=s>&#34;gls&#34;</span> <span class=nv>dired-use-ls-dired</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>dired-listing-switches</span> <span class=s>&#34;-al --group-directories-first&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>put</span> <span class=ss>&#39;dired-find-alternate-file</span> <span class=ss>&#39;disabled</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;dired</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>dired-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;P&#34;</span><span class=p>)</span> <span class=ss>&#39;peep-dired</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=dired-x class=headerLink><a href=#dired-x class=header-mark></a>dired-x</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-x C-j&#34;</span><span class=p>)</span> <span class=ss>&#39;dired-jump</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=diredfl class=headerLink><a href=#diredfl class=header-mark></a>diredfl</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>diredfl-global-mode</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=peep-dired class=headerLink><a href=#peep-dired class=header-mark></a>peep-dired</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>peep-dired-ignored-extensions</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;mkv&#34;</span> <span class=s>&#34;iso&#34;</span> <span class=s>&#34;mp4&#34;</span> <span class=s>&#34;pdf&#34;</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=dired-hide-dotfiles class=headerLink><a href=#dired-hide-dotfiles class=header-mark></a>dired-hide-dotfiles</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my-dired-mode-hook</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;My </span><span class=ss>`dired&#39;</span><span class=s> mode hook.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; To hide dot-files by default</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>dired-hide-dotfiles-mode</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>define-key</span> <span class=nv>dired-mode-map</span> <span class=s>&#34;.&#34;</span> <span class=nf>#&#39;</span><span class=nv>dired-hide-dotfiles-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;dired-mode-hook</span> <span class=nf>#&#39;</span><span class=nv>my-dired-mode-hook</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=dired-git-info class=headerLink><a href=#dired-git-info class=header-mark></a>dired-git-info</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>dgi-auto-hide-details-p</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;dired</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>dired-mode-map</span> <span class=s>&#34;)&#34;</span> <span class=ss>&#39;dired-git-info-mode</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;dired-after-readin-hook</span> <span class=ss>&#39;dired-git-info-auto-enable</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=hungry-delete class=headerLink><a href=#hungry-delete class=header-mark></a>hungry delete</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;hungry-delete</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>hungry-delete-chars-to-skip</span> <span class=s>&#34;
</span></span></span><span class=line><span class=cl><span class=s>\f&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;after-init-hook</span> <span class=ss>&#39;global-hungry-delete-mode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=auto-save class=headerLink><a href=#auto-save class=header-mark></a>auto save</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;auto-save</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;after-init-hook</span> <span class=ss>&#39;auto-save-enable</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>auto-save-silent</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>auto-save-delete-trailing-whitespace</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>auto-save-list-file-prefix</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;auto-save-list/.saves-&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-capture-mode-hook</span> <span class=nf>#&#39;</span><span class=p>(</span><span class=nb>lambda</span> <span class=no>nil</span> <span class=p>(</span><span class=nb>setq</span> <span class=nv>auto-save-delete-trailing-whitespace</span> <span class=no>nil</span><span class=p>)))</span>
</span></span></code></pre></div><h3 id=save-place class=headerLink><a href=#save-place class=header-mark></a>save place</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>save-place-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;saveplace&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>save-place-mode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=save-hist class=headerLink><a href=#save-hist class=header-mark></a>save hist</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>savehist-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;savehist&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>history-length</span> <span class=mi>1000</span>
</span></span><span class=line><span class=cl>      <span class=nv>savehist-save-minibuffer-history</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>      <span class=nv>savehist-additional-variables</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>kill-ring</span>
</span></span><span class=line><span class=cl>				      <span class=nv>search-ring</span>
</span></span><span class=line><span class=cl>				      <span class=nv>regexp-search-ring</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>history-delete-duplicates</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>savehist-mode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=undo class=headerLink><a href=#undo class=header-mark></a>Undo</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>global-undo-fu-session-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>undo-fu-session-directory</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;undo-fu-session&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>))</span>
</span></span></code></pre></div><h3 id=vundo class=headerLink><a href=#vundo class=header-mark></a>Vundo</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;vundo</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>vundo-glyph-alist</span> <span class=nv>vundo-unicode-symbols</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=ctrlf class=headerLink><a href=#ctrlf class=header-mark></a>ctrlf</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=c1>;; (require &#39;ctrlf)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>ctrlf-mode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=google-this class=headerLink><a href=#google-this class=header-mark></a>google-this</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>google-this-mode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=vertico class=headerLink><a href=#vertico class=header-mark></a>vertico</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>customize-set-variable</span> <span class=ss>&#39;vertico-cycle</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;vertico</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>vertico-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-j&#34;</span><span class=p>)</span> <span class=ss>&#39;vertico-directory-up</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>vertico-mode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=marginalia class=headerLink><a href=#marginalia class=header-mark></a>marginalia</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>customize-set-variable</span> <span class=ss>&#39;marginalia-annotators</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>marginalia-annotators-heavy</span> <span class=nv>marginalia-annotators-light</span> <span class=no>nil</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>marginalia-mode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=consult class=headerLink><a href=#consult class=header-mark></a>consult</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;completion-list-mode-hook</span> <span class=ss>&#39;consult-preview-at-point-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-x C-b&#34;</span><span class=p>)</span> <span class=ss>&#39;consult-buffer</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;M-y&#34;</span><span class=p>)</span> <span class=ss>&#39;consult-yank-pop</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=consult-dir class=headerLink><a href=#consult-dir class=header-mark></a>consult-dir</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;consult-dir</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-x C-d&#34;</span><span class=p>)</span> <span class=ss>&#39;consult-dir</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;vertico</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>vertico-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-x C-d&#34;</span><span class=p>)</span> <span class=ss>&#39;consult-dir</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>vertico-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-x C-j&#34;</span><span class=p>)</span> <span class=ss>&#39;consult-dir-jump-file</span><span class=p>))</span>
</span></span></code></pre></div><h3 id=orderless class=headerLink><a href=#orderless class=header-mark></a>orderless</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;orderless</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>completion-styles</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>orderless</span> <span class=nv>partial-completion</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>completion-category-defaults</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>      <span class=nv>completion-category-overrides</span> <span class=o>&#39;</span><span class=p>((</span><span class=nv>file</span> <span class=p>(</span><span class=nv>styles</span> <span class=o>.</span> <span class=p>(</span><span class=nv>partial-completion</span><span class=p>)))))</span>
</span></span></code></pre></div><h3 id=corfu class=headerLink><a href=#corfu class=header-mark></a>corfu</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>corfu-auto</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>corfu-cycle</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>corfu-quit-at-boundary</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>corfu-auto-prefix</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>      <span class=nv>corfu-preselect-first</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>corfu-quit-no-match</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;corfu</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>corfu-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-n&#34;</span><span class=p>)</span> <span class=ss>&#39;corfu-next</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>corfu-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-p&#34;</span><span class=p>)</span> <span class=ss>&#39;corfu-previous</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>corfu-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;&lt;escape&gt;&#34;</span><span class=p>)</span> <span class=ss>&#39;corfu-quit</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>corfu-global-mode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=corfu-doc class=headerLink><a href=#corfu-doc class=header-mark></a>corfu-doc</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;corfu-doc</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;corfu-mode-hook</span> <span class=ss>&#39;corfu-doc-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>corfu-doc-delay</span> <span class=mf>0.5</span>
</span></span><span class=line><span class=cl>      <span class=nv>corfu-doc-max-width</span> <span class=mi>70</span>
</span></span><span class=line><span class=cl>      <span class=nv>corfu-doc-max-height</span> <span class=mi>20</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>define-key</span> <span class=nv>corfu-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;M-p&#34;</span><span class=p>)</span> <span class=ss>&#39;corfu-doc-scroll-down</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>define-key</span> <span class=nv>corfu-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;M-n&#34;</span><span class=p>)</span> <span class=ss>&#39;corfu-doc-scroll-up</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=embark class=headerLink><a href=#embark class=header-mark></a>embark</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>[</span><span class=nv>remap</span> <span class=nv>describe-bindings</span><span class=p>]</span> <span class=nf>#&#39;</span><span class=nv>embark-bindings</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-.&#34;</span><span class=p>)</span> <span class=ss>&#39;embark-act</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;M-.&#34;</span><span class=p>)</span> <span class=ss>&#39;embark-dwim</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; Use Embark to show bindings in a key prefix with `C-h`</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>prefix-help-command</span> <span class=nf>#&#39;</span><span class=nv>embark-prefix-help-command</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=prescient class=headerLink><a href=#prescient class=header-mark></a>prescient</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;prescient</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=dabbrev class=headerLink><a href=#dabbrev class=header-mark></a>dabbrev</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;M-/&#34;</span><span class=p>)</span> <span class=ss>&#39;dabbrev-completion</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-M-/&#34;</span><span class=p>)</span> <span class=ss>&#39;dabbrev-expand</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=cape class=headerLink><a href=#cape class=header-mark></a>cape</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;cape</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c p p&#34;</span><span class=p>)</span> <span class=ss>&#39;completion-at-point</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c p t&#34;</span><span class=p>)</span> <span class=ss>&#39;complete-tag</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c p d&#34;</span><span class=p>)</span> <span class=ss>&#39;cape-dabbrev</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c p f&#34;</span><span class=p>)</span> <span class=ss>&#39;cape-file</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c p k&#34;</span><span class=p>)</span> <span class=ss>&#39;cape-keyword</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c p s&#34;</span><span class=p>)</span> <span class=ss>&#39;cape-symbol</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c p a&#34;</span><span class=p>)</span> <span class=ss>&#39;cape-abbrev</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c p i&#34;</span><span class=p>)</span> <span class=ss>&#39;cape-ispell</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c p l&#34;</span><span class=p>)</span> <span class=ss>&#39;cape-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c p w&#34;</span><span class=p>)</span> <span class=ss>&#39;cape-dict</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c p \\&#34;</span><span class=p>)</span> <span class=ss>&#39;cape-tex</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c p &amp;&#34;</span><span class=p>)</span> <span class=ss>&#39;cape-sgml</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c p r&#34;</span><span class=p>)</span> <span class=ss>&#39;cape-rfc1345</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;completion-at-point-functions</span> <span class=nf>#&#39;</span><span class=nv>cape-file</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;completion-at-point-functions</span> <span class=nf>#&#39;</span><span class=nv>cape-tex</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;completion-at-point-functions</span> <span class=nf>#&#39;</span><span class=nv>cape-dabbrev</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;completion-at-point-functions</span> <span class=nf>#&#39;</span><span class=nv>cape-keyword</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-sgml)</span>
</span></span><span class=line><span class=cl><span class=c1>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-rfc1345)</span>
</span></span><span class=line><span class=cl><span class=c1>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-abbrev)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;completion-at-point-functions</span> <span class=nf>#&#39;</span><span class=nv>cape-ispell</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>;; (add-to-list &#39;completion-at-point-functions #&#39;cape-dict)</span>
</span></span><span class=line><span class=cl><span class=c1>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-symbol)</span>
</span></span><span class=line><span class=cl><span class=c1>;;(add-to-list &#39;completion-at-point-functions #&#39;cape-line)</span>
</span></span></code></pre></div><h3 id=tempel class=headerLink><a href=#tempel class=header-mark></a>tempel</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;tempel</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>tempel-path</span> <span class=s>&#34;~/.emacs.d/template/tempel&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>tempel-setup-capf</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; Add the Tempel Capf to `completion-at-point-functions&#39;. `tempel-expand&#39;</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; only triggers on exact matches. Alternatively use `tempel-complete&#39; if</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; you want to see all matches, but then Tempel will probably trigger too</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; often when you don&#39;t expect it.</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; NOTE: We add `tempel-expand&#39; *before* the main programming mode Capf,</span>
</span></span><span class=line><span class=cl>  <span class=c1>;; such that it will be tried first.</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq-local</span> <span class=nv>completion-at-point-functions</span>
</span></span><span class=line><span class=cl>	      <span class=p>(</span><span class=nf>cons</span> <span class=nf>#&#39;</span><span class=nv>tempel-expand</span>
</span></span><span class=line><span class=cl>		    <span class=nv>completion-at-point-functions</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;text-mode-hook</span> <span class=ss>&#39;tempel-setup-capf</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;M-+&#34;</span><span class=p>)</span> <span class=ss>&#39;tempel-complete</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;M-*&#34;</span><span class=p>)</span> <span class=ss>&#39;tempel-insert</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=open-in-external-apps class=headerLink><a href=#open-in-external-apps class=header-mark></a>Open in external apps</h3><p>有些时候需要使用外部应用打开相应的文件，比如打印文件的时候。目前还没有发现直接使用 Emacs 打印文件的方法。</p><p>这里只使用 safari 打开相应的文件，如需要使用其他的应用，可以参照<a href=http://xahlee.info/emacs/emacs/emacs_dired_open_file_in_ext_apps.html target=_blank rel="noopener noreffer">博客</a>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>xah-html-open-in-safari</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Open the current file or </span><span class=ss>`dired&#39;</span><span class=s> marked files in Mac&#39;s Safari browser.
</span></span></span><span class=line><span class=cl><span class=s>If the file is not saved, save it first.
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>URL </span><span class=ss>`http://xahlee.info/emacs/emacs/emacs_dired_open_file_in_ext_apps.html&#39;</span><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>Version 2018-02-26&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let*</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>$file-list</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nf>string-equal</span> <span class=nv>major-mode</span> <span class=s>&#34;dired-mode&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	      <span class=p>(</span><span class=nv>dired-get-marked-files</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	    <span class=p>(</span><span class=nf>list</span> <span class=p>(</span><span class=nf>buffer-file-name</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>$do-it-p</span> <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nf>&lt;=</span> <span class=p>(</span><span class=nf>length</span> <span class=nv>$file-list</span><span class=p>)</span> <span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=no>t</span>
</span></span><span class=line><span class=cl>		     <span class=p>(</span><span class=nv>y-or-n-p</span> <span class=s>&#34;Open more than 5 files? &#34;</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>when</span> <span class=nv>$do-it-p</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nb>cond</span>
</span></span><span class=line><span class=cl>       <span class=p>((</span><span class=nf>string-equal</span> <span class=nv>system-type</span> <span class=s>&#34;darwin&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nf>mapc</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>$fpath</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	   <span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nf>buffer-modified-p</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>	     <span class=p>(</span><span class=nv>save-buffer</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	   <span class=p>(</span><span class=nv>shell-command</span>
</span></span><span class=line><span class=cl>	    <span class=p>(</span><span class=nf>format</span> <span class=s>&#34;open -a Safari.app \&#34;%s\&#34;&#34;</span> <span class=nv>$fpath</span><span class=p>)))</span> <span class=nv>$file-list</span><span class=p>))))))</span>
</span></span></code></pre></div><h2 id=language-configuration class=headerLink><a href=#language-configuration class=header-mark></a>Language configuration</h2><h3 id=lsp-language-service-protocol class=headerLink><a href=#lsp-language-service-protocol class=header-mark></a>LSP: Language service protocol</h3><h4 id=eldoc class=headerLink><a href=#eldoc class=header-mark></a>eldoc</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>eldoc-mode</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=eglot class=headerLink><a href=#eglot class=header-mark></a>eglot</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;python-mode-hook</span> <span class=ss>&#39;eglot-ensure</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=language-spell-check-and-translate class=headerLink><a href=#language-spell-check-and-translate class=header-mark></a>Language spell check and translate</h3><h4 id=ispell class=headerLink><a href=#ispell class=header-mark></a>ispell</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>ispell-program-name</span> <span class=s>&#34;aspell&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>ispell-extra-args</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;--sug-mode=ultra&#34;</span> <span class=s>&#34;--lang=en_US&#34;</span> <span class=s>&#34;--run-together&#34;</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=flyspell class=headerLink><a href=#flyspell class=header-mark></a>flyspell</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;text-mode-hook</span> <span class=ss>&#39;flyspell-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;flyspell</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>flyspell-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-;&#34;</span><span class=p>)</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>flyspell-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-,&#34;</span><span class=p>)</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>flyspell-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-.&#34;</span><span class=p>)</span> <span class=no>nil</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>flyspell-duplicate-distance</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>      <span class=nv>flyspell-mark-duplications-flag</span> <span class=no>nil</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=flyspell-correct class=headerLink><a href=#flyspell-correct class=header-mark></a>flyspell-correct</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-;&#34;</span><span class=p>)</span> <span class=o>&#39;</span> <span class=nv>flyspell-correct-wrapper</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>flyspell-correct-interface</span> <span class=nf>#&#39;</span><span class=nv>flyspell-correct-popup</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=fanyi class=headerLink><a href=#fanyi class=header-mark></a>fanyi</h4><p>此包对单词进行查询。2022-04-14 目前使用有些 fanyi provider 有点慢，不知道是为什么。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;fanyi</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>custom-set-variables</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>fanyi-providers</span> <span class=o>&#39;</span><span class=p>(</span>
</span></span><span class=line><span class=cl>					  <span class=c1>;; fanyi-haici-provider</span>
</span></span><span class=line><span class=cl>					  <span class=nv>fanyi-youdao-thesaurus-provider</span>
</span></span><span class=line><span class=cl>					  <span class=c1>;; fanyi-etymon-provider</span>
</span></span><span class=line><span class=cl>					  <span class=c1>;; fanyi-longman-provider</span>
</span></span><span class=line><span class=cl>					  <span class=c1>;; fanyi-libre-provider</span>
</span></span><span class=line><span class=cl>					  <span class=p>)))</span>
</span></span></code></pre></div><h4 id=powerthesaurus class=headerLink><a href=#powerthesaurus class=header-mark></a>Powerthesaurus</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;powerthesaurus</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=smog class=headerLink><a href=#smog class=header-mark></a>Smog</h4><p><a href=https://github.com/zzkt/smog/tree/28b053198ff9c1b142789614d85d7d762d9b0fa3 target=_blank rel="noopener noreffer">https://github.com/zzkt/smog/tree/28b053198ff9c1b142789614d85d7d762d9b0fa3</a></p><p><a href="https://wiki.christophchamp.com/index.php?title=Style_and_Diction" target=_blank rel="noopener noreffer">https://wiki.christophchamp.com/index.php?title=Style_and_Diction</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;smog</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>smog-command</span> <span class=s>&#34;style -L en&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=osx-dictionary class=headerLink><a href=#osx-dictionary class=header-mark></a>osx-dictionary</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;osx-dictionary</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>osx-dictionary-use-chinese-text-segmentation</span> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=go-translate class=headerLink><a href=#go-translate class=header-mark></a>go-translate</h4><p>此包可对整句进行翻译。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;go-translate</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>gts-translate-list</span> <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34;en&#34;</span> <span class=s>&#34;zh&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>gts-default-translator</span> <span class=p>(</span><span class=nv>gts-translator</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:picker</span> <span class=p>(</span><span class=nv>gts-noprompt-picker</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:engines</span> <span class=p>(</span><span class=nf>list</span>
</span></span><span class=line><span class=cl>					<span class=p>(</span><span class=nv>gts-bing-engine</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					<span class=p>(</span><span class=nv>gts-google-engine</span> <span class=nb>:parser</span> <span class=p>(</span><span class=nv>gts-google-summary-parser</span><span class=p>))</span>
</span></span><span class=line><span class=cl>					<span class=c1>;; (gts-google-rpc-engine :parser (gts-google-rpc-parser) :url &#34;https://translate.google.com&#34;)</span>
</span></span><span class=line><span class=cl>					<span class=p>)</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:render</span> <span class=p>(</span><span class=nv>gts-buffer-render</span><span class=p>)))</span>
</span></span></code></pre></div><h3 id=program-language class=headerLink><a href=#program-language class=header-mark></a>Program language</h3><h4 id=markdown class=headerLink><a href=#markdown class=header-mark></a>Markdown</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;auto-mode-alist</span>
</span></span><span class=line><span class=cl>	     <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;README\\.md\\&#39;&#34;</span> <span class=o>.</span> <span class=nv>gfm-mode</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=beancount class=headerLink><a href=#beancount class=header-mark></a>Beancount</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>beancount-electric-currency</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;auto-mode-alist</span>
</span></span><span class=line><span class=cl>	     <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;\\.bean\\&#39;&#34;</span> <span class=o>.</span> <span class=nv>beancount-mode</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;beancount-mode-hook</span> <span class=nf>#&#39;</span><span class=nv>outline-minor-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;beancount-mode-hook</span> <span class=nf>#&#39;</span><span class=p>(</span><span class=nb>lambda</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>				   <span class=p>(</span><span class=nb>setq-local</span> <span class=nv>electric-indent-chars</span> <span class=no>nil</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;beancount</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>beancount-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c C-n&#34;</span><span class=p>)</span> <span class=ss>&#39;outline-next-visible-heading</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>beancount-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c C-p&#34;</span><span class=p>)</span> <span class=ss>&#39;outline-previous-visible-heading</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;all-the-icons-icon-alist</span>
</span></span><span class=line><span class=cl>	     <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;\\.bean\\&#39;&#34;</span> <span class=nv>all-the-icons-material</span> <span class=s>&#34;attach_money&#34;</span> <span class=nb>:face</span> <span class=nv>all-the-icons-lblue</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;all-the-icons-mode-icon-alist</span>
</span></span><span class=line><span class=cl>	     <span class=o>&#39;</span><span class=p>(</span><span class=nv>beancount-mode</span> <span class=nv>all-the-icons-material</span> <span class=s>&#34;attach_money&#34;</span> <span class=nb>:face</span> <span class=nv>all-the-icons-lblue</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=csv class=headerLink><a href=#csv class=header-mark></a>CSV</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;auto-mode-alist</span>
</span></span><span class=line><span class=cl>	     <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;\\.csv\\&#39;&#34;</span> <span class=o>.</span> <span class=nv>csv-mode</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=yaml class=headerLink><a href=#yaml class=header-mark></a>Yaml</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;auto-mode-alist</span>
</span></span><span class=line><span class=cl>	     <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;\\.yaml\\&#39;&#34;</span> <span class=o>.</span> <span class=nv>yaml-mode</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=python class=headerLink><a href=#python class=header-mark></a>Python</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>python-shell-interpreter</span> <span class=s>&#34;python3&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>python-indent-guess-indent-offset</span> <span class=no>nil</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=organize-life-with-org-mode class=headerLink><a href=#organize-life-with-org-mode class=header-mark></a>Organize life with org-mode</h3><p>使用纯文本组织生活，是一种哲学，是一种生活方式。此 <a href=http://doc.norang.ca/org-mode.html target=_blank rel="noopener noreffer">Blog</a> 是践行此哲学的开端。</p><h4 id=better-default class=headerLink><a href=#better-default class=header-mark></a>Better Default</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-modules</span>  <span class=o>&#39;</span><span class=p>()</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-deadline-warning-days</span> <span class=mi>7</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-return-follows-link</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-agenda-dim-blocked-tasks</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-image-actual-width</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-display-remote-inline-images</span> <span class=ss>&#39;download</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-log-into-drawer</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-fast-tag-selection-single-key</span> <span class=ss>&#39;expert</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-adapt-indentation</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-fontify-quote-and-verse-blocks</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-support-shift-select</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=c1>;; org--leading-stars t</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-treat-S-cursor-todo-selection-as-state-change</span> <span class=no>nil</span><span class=p>)</span>
</span></span></code></pre></div><ul><li><p>Word wrap</p><p>我喜欢文本在窗口的边缘进行折行。不喜欢使用 visual-line-mode 式的折行，此方式当中英文夹杂时，在行尾参差不齐，实在是用不来。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=ss>&#39;menu-bar--wrap-long-lines-window-edge</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>;; (global-visual-line-mode 1)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; (setq word-wrap-by-category t)</span>
</span></span></code></pre></div></li></ul><ul><li><p>todo keywords and faces</p><p>If you do not provide the separator bar, the last state is used as the DONE state.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-todo-keywords</span>
</span></span><span class=line><span class=cl>      <span class=o>&#39;</span><span class=p>((</span><span class=nv>sequence</span> <span class=s>&#34;TODO(t)&#34;</span> <span class=s>&#34;NEXT(n)&#34;</span> <span class=s>&#34;STARTED&#34;</span> <span class=s>&#34;|&#34;</span> <span class=s>&#34;WAIT(w@)&#34;</span> <span class=s>&#34;SOMEDAY(s@)&#34;</span> <span class=s>&#34;CNCL(c@/!)&#34;</span> <span class=s>&#34;DONE(d)&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-todo-keyword-faces</span>
</span></span><span class=line><span class=cl>      <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34;TODO&#34;</span> <span class=nb>:foreground</span> <span class=s>&#34;Red&#34;</span> <span class=nb>:weight</span> <span class=nv>bold</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;NEXT&#34;</span> <span class=nb>:foreground</span> <span class=s>&#34;Forest green&#34;</span> <span class=nb>:weight</span> <span class=nv>bold</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;SOMEDAY&#34;</span> <span class=nb>:foreground</span> <span class=s>&#34;blue&#34;</span> <span class=nb>:weight</span> <span class=nv>bold</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;DONE&#34;</span> <span class=nb>:foreground</span> <span class=s>&#34;#705628&#34;</span> <span class=nb>:weight</span> <span class=nv>bold</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;WAIT&#34;</span> <span class=nb>:foreground</span> <span class=s>&#34;Orange&#34;</span> <span class=nb>:weight</span> <span class=nv>bold</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;CNCL&#34;</span> <span class=nb>:foreground</span> <span class=s>&#34;#b4534b&#34;</span> <span class=nb>:weight</span> <span class=nv>bold</span><span class=p>)))</span>
</span></span></code></pre></div></li></ul><ul><li><p>todo state triggers</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-todo-state-tags-triggers</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nb>quote</span> <span class=p>((</span><span class=s>&#34;CNCL&#34;</span> <span class=p>(</span><span class=s>&#34;CNCL&#34;</span> <span class=o>.</span> <span class=no>t</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	      <span class=p>(</span><span class=s>&#34;WAIT&#34;</span> <span class=p>(</span><span class=s>&#34;WAIT&#34;</span> <span class=o>.</span> <span class=no>t</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	      <span class=p>(</span><span class=s>&#34;SOMEDAY&#34;</span> <span class=p>(</span><span class=s>&#34;WAIT&#34;</span><span class=p>)</span> <span class=p>(</span><span class=s>&#34;SOMEDAY&#34;</span> <span class=o>.</span> <span class=no>t</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	      <span class=p>(</span><span class=nv>done</span> <span class=p>(</span><span class=s>&#34;WAIT&#34;</span><span class=p>)</span> <span class=p>(</span><span class=s>&#34;SOMEDAY&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	      <span class=p>(</span><span class=s>&#34;TODO&#34;</span> <span class=p>(</span><span class=s>&#34;WAIT&#34;</span><span class=p>)</span> <span class=p>(</span><span class=s>&#34;CNCL&#34;</span><span class=p>)</span> <span class=p>(</span><span class=s>&#34;SOMEDAY&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	      <span class=p>(</span><span class=s>&#34;NEXT&#34;</span> <span class=p>(</span><span class=s>&#34;WAIT&#34;</span><span class=p>)</span> <span class=p>(</span><span class=s>&#34;CNCL&#34;</span><span class=p>)</span> <span class=p>(</span><span class=s>&#34;SOMEDAY&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	      <span class=p>(</span><span class=s>&#34;DONE&#34;</span> <span class=p>(</span><span class=s>&#34;WAIT&#34;</span><span class=p>)</span> <span class=p>(</span><span class=s>&#34;CNCL&#34;</span><span class=p>)</span> <span class=p>(</span><span class=s>&#34;SOMEDAY&#34;</span><span class=p>)))))</span>
</span></span></code></pre></div></li></ul><ul><li><p>org priority</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-priority-faces</span> <span class=o>&#39;</span><span class=p>((</span><span class=sc>?A</span> <span class=o>.</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>bold</span> <span class=nv>org-priority</span><span class=p>))</span>
</span></span><span class=line><span class=cl>			   <span class=p>(</span><span class=sc>?B</span> <span class=o>.</span> <span class=nv>org-priority</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			   <span class=p>(</span><span class=sc>?C</span> <span class=o>.</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>shadow</span> <span class=nv>org-priority</span><span class=p>))))</span>
</span></span></code></pre></div></li></ul><ul><li><p>org emphasis color</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defface</span> <span class=nv>my-org-emphasis-bold</span>
</span></span><span class=line><span class=cl>  <span class=o>&#39;</span><span class=p>((</span><span class=nv>default</span> <span class=nb>:inherit</span> <span class=nv>bold</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(((</span><span class=nv>class</span> <span class=nv>color</span><span class=p>)</span> <span class=p>(</span><span class=nv>min-colors</span> <span class=mi>88</span><span class=p>)</span> <span class=p>(</span><span class=nv>background</span> <span class=nv>light</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#a60000&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(((</span><span class=nv>class</span> <span class=nv>color</span><span class=p>)</span> <span class=p>(</span><span class=nv>min-colors</span> <span class=mi>88</span><span class=p>)</span> <span class=p>(</span><span class=nv>background</span> <span class=nv>dark</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#ff8059&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;My bold emphasis for Org.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>:group</span> <span class=ss>&#39;org-faces</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defface</span> <span class=nv>my-org-emphasis-italic</span>
</span></span><span class=line><span class=cl>  <span class=o>&#39;</span><span class=p>((</span><span class=nv>default</span> <span class=nb>:inherit</span> <span class=nv>italic</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(((</span><span class=nv>class</span> <span class=nv>color</span><span class=p>)</span> <span class=p>(</span><span class=nv>min-colors</span> <span class=mi>88</span><span class=p>)</span> <span class=p>(</span><span class=nv>background</span> <span class=nv>light</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#005e00&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(((</span><span class=nv>class</span> <span class=nv>color</span><span class=p>)</span> <span class=p>(</span><span class=nv>min-colors</span> <span class=mi>88</span><span class=p>)</span> <span class=p>(</span><span class=nv>background</span> <span class=nv>dark</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#44bc44&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;My italic emphasis for Org.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>:group</span> <span class=ss>&#39;org-faces</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defface</span> <span class=nv>my-org-emphasis-underline</span>
</span></span><span class=line><span class=cl>  <span class=o>&#39;</span><span class=p>((</span><span class=nv>default</span> <span class=nb>:inherit</span> <span class=nv>underline</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(((</span><span class=nv>class</span> <span class=nv>color</span><span class=p>)</span> <span class=p>(</span><span class=nv>min-colors</span> <span class=mi>88</span><span class=p>)</span> <span class=p>(</span><span class=nv>background</span> <span class=nv>light</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#813e00&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(((</span><span class=nv>class</span> <span class=nv>color</span><span class=p>)</span> <span class=p>(</span><span class=nv>min-colors</span> <span class=mi>88</span><span class=p>)</span> <span class=p>(</span><span class=nv>background</span> <span class=nv>dark</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#d0bc00&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;My underline emphasis for Org.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>:group</span> <span class=ss>&#39;org-faces</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defface</span> <span class=nv>my-org-emphasis-strike-through</span>
</span></span><span class=line><span class=cl>  <span class=o>&#39;</span><span class=p>((((</span><span class=nv>class</span> <span class=nv>color</span><span class=p>)</span> <span class=p>(</span><span class=nv>min-colors</span> <span class=mi>88</span><span class=p>)</span> <span class=p>(</span><span class=nv>background</span> <span class=nv>light</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:strike-through</span> <span class=s>&#34;#972500&#34;</span> <span class=nb>:foreground</span> <span class=s>&#34;#505050&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(((</span><span class=nv>class</span> <span class=nv>color</span><span class=p>)</span> <span class=p>(</span><span class=nv>min-colors</span> <span class=mi>88</span><span class=p>)</span> <span class=p>(</span><span class=nv>background</span> <span class=nv>dark</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:strike-through</span> <span class=s>&#34;#ef8b50&#34;</span> <span class=nb>:foreground</span> <span class=s>&#34;#a8a8a8&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;My strike-through emphasis for Org.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>:group</span> <span class=ss>&#39;org-faces</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defface</span> <span class=nv>my-org-emphasis-verbatim</span>
</span></span><span class=line><span class=cl>  <span class=o>&#39;</span><span class=p>((((</span><span class=nv>class</span> <span class=nv>color</span><span class=p>)</span> <span class=p>(</span><span class=nv>min-colors</span> <span class=mi>88</span><span class=p>)</span> <span class=p>(</span><span class=nv>background</span> <span class=nv>light</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:background</span> <span class=s>&#34;#F7B80A&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(((</span><span class=nv>class</span> <span class=nv>color</span><span class=p>)</span> <span class=p>(</span><span class=nv>min-colors</span> <span class=mi>88</span><span class=p>)</span> <span class=p>(</span><span class=nv>background</span> <span class=nv>dark</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:background</span> <span class=s>&#34;#6DA906&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;My strike-through emphasis for Org.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>:group</span> <span class=ss>&#39;org-faces</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-emphasis-alist</span>
</span></span><span class=line><span class=cl>      <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34;*&#34;</span> <span class=nv>my-org-emphasis-bold</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;/&#34;</span> <span class=nv>my-org-emphasis-italic</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;_&#34;</span> <span class=nv>my-org-emphasis-underline</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;~&#34;</span> <span class=nv>org-code</span> <span class=nv>verbatim</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;+&#34;</span> <span class=nv>my-org-emphasis-strike-through</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=s>&#34;=&#34;</span> <span class=nv>my-org-emphasis-verbatim</span><span class=p>)))</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-babel-load-languages</p><p>根据需要加载 org-babel-load-languages, 加快 Emacs 的启动速度，<a href=https://emacs-china.org/t/org-babel/18699 target=_blank rel="noopener noreffer">相关讨论见 Emacs-china 论坛</a>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>org-babel-do-load-languages</span>
</span></span><span class=line><span class=cl> <span class=ss>&#39;org-babel-load-languages</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>((</span><span class=nv>emacs-lisp</span> <span class=o>.</span> <span class=no>t</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/org-babel-execute-src-block</span> <span class=p>(</span><span class=kp>&amp;optional</span> <span class=nv>_arg</span> <span class=nv>info</span> <span class=nv>_params</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Load language if needed&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let*</span> <span class=p>((</span><span class=nv>lang</span> <span class=p>(</span><span class=nf>nth</span> <span class=mi>0</span> <span class=nv>info</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>sym</span> <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nf>member</span> <span class=p>(</span><span class=nf>downcase</span> <span class=nv>lang</span><span class=p>)</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;c&#34;</span> <span class=s>&#34;cpp&#34;</span> <span class=s>&#34;c++&#34;</span><span class=p>))</span> <span class=ss>&#39;C</span> <span class=p>(</span><span class=nf>intern</span> <span class=nv>lang</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>backup-languages</span> <span class=nv>org-babel-load-languages</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=c1>;; - (LANG . nil) 明确禁止的语言，不加载。</span>
</span></span><span class=line><span class=cl>    <span class=c1>;; - (LANG . t) 已加载过的语言，不重复载。</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>unless</span> <span class=p>(</span><span class=nf>assoc</span> <span class=nv>sym</span> <span class=nv>backup-languages</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nb>condition-case</span> <span class=nv>err</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nb>progn</span>
</span></span><span class=line><span class=cl>	    <span class=p>(</span><span class=nv>org-babel-do-load-languages</span> <span class=ss>&#39;org-babel-load-languages</span> <span class=p>(</span><span class=nf>list</span> <span class=p>(</span><span class=nf>cons</span> <span class=nv>sym</span> <span class=no>t</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>	    <span class=p>(</span><span class=nb>setq-default</span> <span class=nv>org-babel-load-languages</span> <span class=p>(</span><span class=nf>append</span> <span class=p>(</span><span class=nf>list</span> <span class=p>(</span><span class=nf>cons</span> <span class=nv>sym</span> <span class=no>t</span><span class=p>))</span> <span class=nv>backup-languages</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nv>file-missing</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nb>setq-default</span> <span class=nv>org-babel-load-languages</span> <span class=nv>backup-languages</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	 <span class=nv>err</span><span class=p>)))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>advice-add</span> <span class=ss>&#39;org-babel-execute-src-block</span> <span class=nb>:before</span> <span class=ss>&#39;my/org-babel-execute-src-block</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-capture</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-capture-templates</span>
</span></span><span class=line><span class=cl>      <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34;i&#34;</span> <span class=s>&#34;Inbox - todo item&#34;</span> <span class=nv>entry</span> <span class=p>(</span><span class=nv>file</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;todos/inbox.org&#34;</span> <span class=nv>dn-galaxy</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>       <span class=s>&#34;* TODO %?\n%U\n\n&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/org-capture-inbox</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>org-capture</span> <span class=no>nil</span> <span class=s>&#34;i&#34;</span><span class=p>))</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-attach</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-attach-id-to-path-function-list</span>
</span></span><span class=line><span class=cl>      <span class=o>&#39;</span><span class=p>(</span><span class=nv>org-attach-id-ts-folder-format</span>
</span></span><span class=line><span class=cl>	<span class=nv>org-attach-id-uuid-folder-format</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-attach-dir-relative</span> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-refile</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-refile-targets</span> <span class=o>&#39;</span><span class=p>((</span><span class=no>nil</span> <span class=nb>:maxlevel</span> <span class=o>.</span> <span class=mi>9</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			   <span class=p>(</span><span class=nv>org-agenda-files</span> <span class=nb>:maxlevel</span> <span class=o>.</span> <span class=mi>9</span><span class=p>)))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-refile-use-outline-path</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-outline-path-complete-in-steps</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-refile-allow-creating-parent-nodes</span> <span class=ss>&#39;confirm</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-refile-use-outline-path</span> <span class=ss>&#39;file</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-refile-active-region-within-subtree</span> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-archive</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>customize-set-variable</span> <span class=ss>&#39;org-archive-location</span> <span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/todos/gtd.org_archive::datetree/* From %s&#34;</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-habit</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;org-modules</span> <span class=ss>&#39;org-habit</span> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-id</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-id-method</span> <span class=ss>&#39;ts</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-id-link-to-org-use-id</span> <span class=ss>&#39;create-if-interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-id-locations-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;.org-id-locations&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>))</span>
</span></span></code></pre></div><ul><li><p>Copy id to clipboard</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>dn/copy-idlink-to-clipboard</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Copy idlink to clipboard.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nf>eq</span> <span class=nv>major-mode</span> <span class=ss>&#39;org-agenda-mode</span><span class=p>)</span> <span class=c1>;switch to orgmode</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>org-agenda-show</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>org-agenda-goto</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nf>eq</span> <span class=nv>major-mode</span> <span class=ss>&#39;org-mode</span><span class=p>)</span> <span class=c1>; do this only in org-mode buffers</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>let*</span> <span class=p>((</span><span class=nv>mytmphead</span> <span class=p>(</span><span class=nf>nth</span> <span class=mi>4</span> <span class=p>(</span><span class=nv>org-heading-components</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>	   <span class=p>(</span><span class=nv>mytmpid</span> <span class=p>(</span><span class=nf>funcall</span> <span class=ss>&#39;org-id-get-create</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	   <span class=p>(</span><span class=nv>mytmplink</span> <span class=p>(</span><span class=nf>format</span> <span class=s>&#34;[[id:%s][%s]]&#34;</span> <span class=nv>mytmpid</span> <span class=nv>mytmphead</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nv>kill-new</span> <span class=nv>mytmplink</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nf>message</span> <span class=s>&#34;Copied %s to killring (clipboard)&#34;</span> <span class=nv>mytmplink</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>switch-to-buffer</span> <span class=p>(</span><span class=nf>concat</span> <span class=p>(</span><span class=nf>format-time-string</span> <span class=s>&#34;%Y-%m-%d&#34;</span><span class=p>)</span> <span class=s>&#34;.org&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;&lt;f8&gt;&#34;</span><span class=p>)</span> <span class=ss>&#39;dn/copy-idlink-to-clipboard</span><span class=p>)</span>
</span></span></code></pre></div></li></ul></li></ul><ul><li><p>org-clock</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>org-clock-persistence-insinuate</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-clock-into-drawer</span> <span class=s>&#34;LOGCLOCK&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-clock-out-remove-zero-time-clocks</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-clock-out-when-done</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-clock-persist</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-clock-report-include-clocking-task</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-clock-persist-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;org-clock-save.el&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>))</span>
</span></span></code></pre></div><ul><li><p>switch task from TODO to STARTED</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>bh/is-task-p</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Any task with a todo keyword and no subtask&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>save-restriction</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>widen</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>has-subtask</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nv>subtree-end</span> <span class=p>(</span><span class=nb>save-excursion</span> <span class=p>(</span><span class=nv>org-end-of-subtree</span> <span class=no>t</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nv>is-a-task</span> <span class=p>(</span><span class=nf>member</span> <span class=p>(</span><span class=nf>nth</span> <span class=mi>2</span> <span class=p>(</span><span class=nv>org-heading-components</span><span class=p>))</span> <span class=nv>org-todo-keywords-1</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nb>save-excursion</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nf>forward-line</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nb>while</span> <span class=p>(</span><span class=nb>and</span> <span class=p>(</span><span class=nv>not</span> <span class=nv>has-subtask</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		    <span class=p>(</span><span class=nf>&lt;</span> <span class=p>(</span><span class=nf>point</span><span class=p>)</span> <span class=nv>subtree-end</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		    <span class=p>(</span><span class=nf>re-search-forward</span> <span class=s>&#34;^\*+ &#34;</span> <span class=nv>subtree-end</span> <span class=no>t</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nf>member</span> <span class=p>(</span><span class=nv>org-get-todo-state</span><span class=p>)</span> <span class=nv>org-todo-keywords-1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	    <span class=p>(</span><span class=nb>setq</span> <span class=nv>has-subtask</span> <span class=no>t</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nb>and</span> <span class=nv>is-a-task</span> <span class=p>(</span><span class=nv>not</span> <span class=nv>has-subtask</span><span class=p>)))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>bh/clock-in-to-next</span> <span class=p>(</span><span class=nv>kw</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Switch a task from TODO to NEXT when clocking in.
</span></span></span><span class=line><span class=cl><span class=s>Skips capture tasks, projects, and subprojects.
</span></span></span><span class=line><span class=cl><span class=s>Switch projects and subprojects from NEXT back to TODO&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nv>not</span> <span class=p>(</span><span class=nb>and</span> <span class=p>(</span><span class=nf>boundp</span> <span class=ss>&#39;org-capture-mode</span><span class=p>)</span> <span class=nv>org-capture-mode</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>cond</span>
</span></span><span class=line><span class=cl>     <span class=p>((</span><span class=nb>and</span> <span class=p>(</span><span class=nf>member</span> <span class=p>(</span><span class=nv>org-get-todo-state</span><span class=p>)</span> <span class=p>(</span><span class=nf>list</span> <span class=s>&#34;TODO&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	   <span class=p>(</span><span class=nv>bh/is-task-p</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=s>&#34;NEXT&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>((</span><span class=nb>and</span> <span class=p>(</span><span class=nf>member</span> <span class=p>(</span><span class=nv>org-get-todo-state</span><span class=p>)</span> <span class=p>(</span><span class=nf>list</span> <span class=s>&#34;NEXT&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	   <span class=p>(</span><span class=nv>bh/is-project-p</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=s>&#34;TODO&#34;</span><span class=p>))))</span>
</span></span></code></pre></div></li></ul></li></ul><ul><li><p>org-num</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=ss>&#39;org-num-mode</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><h4 id=packages-enhance-org class=headerLink><a href=#packages-enhance-org class=header-mark></a>Packages enhance org</h4><ul><li><p>auto-tangle</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>unless</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>fboundp</span> <span class=ss>&#39;org-auto-tangle-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>autoload</span> <span class=nf>#&#39;</span><span class=nv>org-auto-tangle-mode</span> <span class=s>&#34;org-auto-tangle&#34;</span> <span class=no>nil</span> <span class=no>t</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=ss>&#39;org-auto-tangle-mode</span><span class=p>)</span>
</span></span></code></pre></div><ul><li><p>toc-org</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=ss>&#39;toc-org-mode</span><span class=p>)</span>
</span></span></code></pre></div></li></ul></li></ul><ul><li><p>org-superstar</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=ss>&#39;org-superstar-mode</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-download</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>customize-set-variable</span> <span class=ss>&#39;org-download-image-dir</span> <span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/roam/pic&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>customize-set-variable</span> <span class=ss>&#39;org-download-screenshot-method</span> <span class=ss>&#39;screencapture</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>customize-set-variable</span> <span class=ss>&#39;org-download-abbreviate-filename-function</span> <span class=ss>&#39;expand-file-name</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>customize-set-variable</span> <span class=ss>&#39;org-download-timestamp</span> <span class=s>&#34;%Y%m%d%H%M%S&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>customize-set-variable</span> <span class=ss>&#39;org-download-display-inline-images</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>customize-set-variable</span> <span class=ss>&#39;org-download-heading-lvl</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>customize-set-variable</span> <span class=ss>&#39;org-download-annotate-function</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>_link</span><span class=p>)</span> <span class=s>&#34;&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>customize-set-variable</span> <span class=ss>&#39;org-download-image-attr-list</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;#+NAME: &#34;</span> <span class=s>&#34;#+CAPTION: &#34;</span> <span class=s>&#34;#+ATTR_LATEX: :width 10cm :placement [!htpb]&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=ss>&#39;org-download-enable</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>advice-add</span> <span class=ss>&#39;org-download-clipboard</span> <span class=nb>:after</span> <span class=ss>&#39;org-download-rename-last-file</span><span class=p>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/replace-org-download-file-path</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>previous-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>replace-string</span> <span class=s>&#34;/Users/duanning&#34;</span> <span class=s>&#34;~&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>advice-add</span> <span class=ss>&#39;org-download-clipboard</span> <span class=nb>:after</span> <span class=ss>&#39;my/replace-org-download-file-path</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-auto-tangle</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=ss>&#39;org-auto-tangle-mode</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>olivetti</p><p>设置 olivetti 的主体宽度，<a href=https://zh-yue.wikipedia.org/wiki/%E9%BB%83%E9%87%91%E6%AF%94%E4%BE%8B target=_blank rel="noopener noreffer">黄金分割率</a>，此分割具有美感。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>olivetti-body-width</span> <span class=mf>0.618</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=ss>&#39;olivetti-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;mu4e-main-mode-hook</span> <span class=ss>&#39;olivetti-mode</span><span class=p>)</span>
</span></span></code></pre></div><p>感谢 <a href=https://emacs-china.org/t/emacs/19797/3 target=_blank rel="noopener noreffer">patrolli</a> . 一个更强大的是 writeroom 这个包，但是其中有些功能我用不到，有些我自己己配置。</p><p>此代码实现的功能是当窗口只有一个 buffer ，或者窗口布局是上下形式的时候，开启该模式，如果存在左右布局，就关闭该模式。有个问题是自己不能手动关闭 Olivetti 模式，暂时就不起用这个了。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/olivetti-mode</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nb>and</span> <span class=p>(</span><span class=nf>eq</span> <span class=p>(</span><span class=nf>buffer-local-value</span> <span class=ss>&#39;major-mode</span> <span class=p>(</span><span class=nf>current-buffer</span><span class=p>))</span> <span class=ss>&#39;org-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	   <span class=p>(</span><span class=nf>&gt;</span> <span class=p>(</span><span class=nv>window-width</span><span class=p>)</span> <span class=p>(</span><span class=nf>/</span> <span class=p>(</span><span class=nv>frame-width</span><span class=p>)</span> <span class=mi>2</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nv>olivetti-mode</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>olivetti-mode</span> <span class=mi>0</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;find-file-hook</span> <span class=ss>&#39;my/olivetti-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;window-configuration-change-hook</span> <span class=ss>&#39;my/olivetti-mode</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-appear</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;org-appear</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-appear-trigger</span> <span class=ss>&#39;manual</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-appear-autolinks</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=ss>&#39;org-appear-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>			   <span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;meow-insert-enter-hook</span> <span class=nf>#&#39;</span><span class=nv>org-appear-manual-start</span> <span class=no>nil</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			   <span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;meow-insert-exit-hook</span> <span class=nf>#&#39;</span><span class=nv>org-appear-manual-stop</span> <span class=no>nil</span> <span class=no>t</span><span class=p>)))</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-cliplink</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;org-cliplink</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><h4 id=note-taking class=headerLink><a href=#note-taking class=header-mark></a>Note taking</h4><ul><li><p>org-roam</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>unless</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nf>fboundp</span> <span class=ss>&#39;org-roam-db-autosync-enable</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>autoload</span> <span class=nf>#&#39;</span><span class=nv>org-roam-db-autosync-enable</span> <span class=s>&#34;org-roam&#34;</span> <span class=no>nil</span> <span class=no>t</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>if</span> <span class=nv>sys-termuxp</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>setq</span> <span class=nv>org-roam-database-connector</span> <span class=ss>&#39;sqlite3</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;after-init-hook</span> <span class=ss>&#39;org-roam-db-autosync-enable</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>;; (add-hook &#39;org-roam-mode-hook &#39;turn-on-visual-line-mode)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>			   <span class=p>(</span><span class=nb>setq-local</span> <span class=nv>time-stamp-active</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>				       <span class=nv>time-stamp-start</span> <span class=s>&#34;#\\+MODIFIED:[ \t]*&#34;</span>
</span></span><span class=line><span class=cl>				       <span class=nv>time-stamp-end</span> <span class=s>&#34;$&#34;</span>
</span></span><span class=line><span class=cl>				       <span class=nv>time-stamp-format</span> <span class=s>&#34;\[%Y-%m-%d %3a %H:%M\]&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			   <span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;before-save-hook</span> <span class=ss>&#39;time-stamp</span> <span class=no>nil</span> <span class=ss>&#39;local</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;org-roam</span>
</span></span><span class=line><span class=cl><span class=c1>;; https://jethrokuan.github.io/org-roam-guide/</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>cl-defmethod</span> <span class=nv>org-roam-node-type</span> <span class=p>((</span><span class=nv>node</span> <span class=nv>org-roam-node</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Return the TYPE of NODE.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>condition-case</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nf>file-name-nondirectory</span>
</span></span><span class=line><span class=cl>       <span class=p>(</span><span class=nf>directory-file-name</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nf>file-name-directory</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>file-relative-name</span> <span class=p>(</span><span class=nv>org-roam-node-file</span> <span class=nv>node</span><span class=p>)</span> <span class=nv>org-roam-directory</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=ne>error</span> <span class=s>&#34;&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; Codes blow are used to general a hierachy for title nodes that under a file</span>
</span></span><span class=line><span class=cl><span class=c1>;; https://github.com/nowislewis/nowisemacs/blob/master/init.org</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>cl-defmethod</span> <span class=nv>org-roam-node-doom-filetitle</span> <span class=p>((</span><span class=nv>node</span> <span class=nv>org-roam-node</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Return the value of \&#34;#+title:\&#34; (if any) from file that NODE resides in.
</span></span></span><span class=line><span class=cl><span class=s>If there&#39;s no file-level title in the file, return empty string.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>or</span> <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nf>=</span> <span class=p>(</span><span class=nv>org-roam-node-level</span> <span class=nv>node</span><span class=p>)</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nv>org-roam-node-title</span> <span class=nv>node</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nv>org-roam-get-keyword</span> <span class=s>&#34;TITLE&#34;</span> <span class=p>(</span><span class=nv>org-roam-node-file</span> <span class=nv>node</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>      <span class=s>&#34;&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>cl-defmethod</span> <span class=nv>org-roam-node-doom-hierarchy</span> <span class=p>((</span><span class=nv>node</span> <span class=nv>org-roam-node</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Return hierarchy for NODE, constructed of its file title, OLP and direct title.
</span></span></span><span class=line><span class=cl><span class=s>  If some elements are missing, they will be stripped out.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>title</span>     <span class=p>(</span><span class=nv>org-roam-node-title</span> <span class=nv>node</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nv>olp</span>       <span class=p>(</span><span class=nv>org-roam-node-olp</span>   <span class=nv>node</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nv>level</span>     <span class=p>(</span><span class=nv>org-roam-node-level</span> <span class=nv>node</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nv>filetitle</span> <span class=p>(</span><span class=nv>org-roam-node-doom-filetitle</span> <span class=nv>node</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nv>separator</span> <span class=p>(</span><span class=nf>propertize</span> <span class=s>&#34; &gt; &#34;</span> <span class=ss>&#39;face</span> <span class=ss>&#39;shadow</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>cl-case</span> <span class=nv>level</span>
</span></span><span class=line><span class=cl>      <span class=c1>;; node is a top-level file</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=mi>0</span> <span class=nv>filetitle</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=c1>;; node is a level 1 heading</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=mi>1</span> <span class=p>(</span><span class=nf>concat</span> <span class=p>(</span><span class=nf>propertize</span> <span class=nv>filetitle</span> <span class=ss>&#39;face</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>shadow</span> <span class=nv>italic</span><span class=p>))</span>
</span></span><span class=line><span class=cl>		 <span class=nv>separator</span> <span class=nv>title</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=c1>;; node is a heading with an arbitrary outline path</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=no>t</span> <span class=p>(</span><span class=nf>concat</span> <span class=p>(</span><span class=nf>propertize</span> <span class=nv>filetitle</span> <span class=ss>&#39;face</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>shadow</span> <span class=nv>italic</span><span class=p>))</span>
</span></span><span class=line><span class=cl>		 <span class=nv>separator</span> <span class=p>(</span><span class=nf>propertize</span> <span class=p>(</span><span class=nv>string-join</span> <span class=nv>olp</span> <span class=s>&#34; &gt; &#34;</span><span class=p>)</span> <span class=ss>&#39;face</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>shadow</span> <span class=nv>italic</span><span class=p>))</span>
</span></span><span class=line><span class=cl>		 <span class=nv>separator</span> <span class=nv>title</span><span class=p>)))))</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-roam-db-gc-threshold</span> <span class=nv>most-positive-fixnum</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-roam-completion-everywhere</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-roam-directory</span> <span class=p>(</span><span class=nv>file-truename</span> <span class=nv>dn-roam</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-roam-db-location</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;org-roam.db&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-roam-node-display-template</span> <span class=p>(</span><span class=nf>concat</span> <span class=s>&#34;${type:15} ${doom-hierarchy:*} &#34;</span> <span class=p>(</span><span class=nf>propertize</span> <span class=s>&#34;${tags:20}&#34;</span> <span class=ss>&#39;face</span> <span class=ss>&#39;org-tag</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-roam-capture-templates</span> <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34;a&#34;</span> <span class=s>&#34;articles&#34;</span> <span class=nv>plain</span> <span class=s>&#34;%?&#34;</span>
</span></span><span class=line><span class=cl>				    <span class=nb>:target</span> <span class=p>(</span><span class=nv>file+head</span> <span class=s>&#34;articles/${slug}.org&#34;</span>
</span></span><span class=line><span class=cl>						       <span class=s>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				    <span class=nb>:unnarrowed</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				   <span class=p>(</span><span class=s>&#34;b&#34;</span> <span class=s>&#34;Books&#34;</span> <span class=nv>plain</span> <span class=p>(</span><span class=nv>file</span> <span class=s>&#34;~/.emacs.d/template/readinglog&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				    <span class=nb>:target</span> <span class=p>(</span><span class=nv>file+head</span> <span class=s>&#34;books/${slug}.org&#34;</span>
</span></span><span class=line><span class=cl>						       <span class=s>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				    <span class=nb>:unnarrowed</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				   <span class=p>(</span><span class=s>&#34;d&#34;</span> <span class=s>&#34;default&#34;</span> <span class=nv>plain</span> <span class=s>&#34;%?&#34;</span>
</span></span><span class=line><span class=cl>				    <span class=nb>:target</span> <span class=p>(</span><span class=nv>file+head</span> <span class=s>&#34;main/${slug}.org&#34;</span>
</span></span><span class=line><span class=cl>						       <span class=s>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				    <span class=nb>:unnarrowed</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				   <span class=p>(</span><span class=s>&#34;p&#34;</span> <span class=s>&#34;people&#34;</span> <span class=nv>plain</span> <span class=p>(</span><span class=nv>file</span> <span class=s>&#34;~/.emacs.d/template/crm&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				    <span class=nb>:target</span> <span class=p>(</span><span class=nv>file+head</span> <span class=s>&#34;crm/${slug}.org&#34;</span>
</span></span><span class=line><span class=cl>						       <span class=s>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				    <span class=nb>:unnarrowed</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				   <span class=p>(</span><span class=s>&#34;r&#34;</span> <span class=s>&#34;reference&#34;</span> <span class=nv>plain</span> <span class=p>(</span><span class=nv>file</span> <span class=s>&#34;~/.emacs.d/template/reference&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				    <span class=nb>:target</span> <span class=p>(</span><span class=nv>file+head</span> <span class=s>&#34;ref/${citekey}.org&#34;</span>
</span></span><span class=line><span class=cl>						       <span class=s>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				    <span class=nb>:unnarrowed</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				   <span class=p>(</span><span class=s>&#34;w&#34;</span> <span class=s>&#34;work&#34;</span> <span class=nv>plain</span> <span class=s>&#34;%?&#34;</span>
</span></span><span class=line><span class=cl>				    <span class=nb>:target</span> <span class=p>(</span><span class=nv>file+head</span> <span class=s>&#34;work/${slug}.org&#34;</span>
</span></span><span class=line><span class=cl>						       <span class=s>&#34;#+TITLE: ${title}\n#+CREATED: %U\n#+MODIFIED: \n&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				    <span class=nb>:unnarrowed</span> <span class=no>t</span><span class=p>)))</span>
</span></span></code></pre></div></li></ul><ul><li><p>diary</p><p>此处的实现来自晨间日记的奇迹的这本书。在当前的日期中显示过去的日记，这样就可以看到过去的今天自己干了什么，这个信息还是挺有用的。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/history-morning-diary-body</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>insert</span> <span class=p>(</span><span class=nf>format</span> <span class=s>&#34;** %s-%s\n&#34;</span> <span class=p>(</span><span class=nf>+</span> <span class=nv>i</span> <span class=nv>init-year</span><span class=p>)</span> <span class=nv>cur-date</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>insert</span> <span class=p>(</span><span class=nf>concat</span> <span class=s>&#34;#+transclude: [[file:&#34;</span> <span class=p>(</span><span class=nf>format</span> <span class=s>&#34;%s-%s.org&#34;</span> <span class=p>(</span><span class=nf>+</span> <span class=nv>i</span> <span class=nv>init-year</span><span class=p>)</span> <span class=nv>cur-date</span><span class=p>)</span> <span class=s>&#34;::Morning Diary]] :only-contents\n&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/insert-history-morning-diary</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Insert my history diary to today diary, for convenient reflection my past time.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let*</span> <span class=p>((</span><span class=nv>init-year</span> <span class=mi>2022</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>cur-year</span> <span class=p>(</span><span class=nf>format-time-string</span> <span class=s>&#34;%Y&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>year-span</span> <span class=p>(</span><span class=nf>-</span> <span class=p>(</span><span class=nf>string-to-number</span> <span class=p>(</span><span class=nf>format-time-string</span> <span class=s>&#34;%Y&#34;</span><span class=p>))</span> <span class=nv>init-year</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>cur-date</span> <span class=p>(</span><span class=nf>format-time-string</span> <span class=s>&#34;%m-%d&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>cond</span>
</span></span><span class=line><span class=cl>     <span class=p>((</span><span class=nb>and</span> <span class=p>(</span><span class=nv>org-roam-dailies--daily-note-p</span><span class=p>)</span> <span class=p>(</span><span class=nf>=</span> <span class=mi>0</span> <span class=nv>year-span</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nb>progn</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nf>goto-char</span> <span class=p>(</span><span class=nv>org-find-exact-headline-in-buffer</span> <span class=s>&#34;History Diary&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nf>forward-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nf>insert</span> <span class=s>&#34;First Year Of Your Diary! KEEP NOTING EVERYTHING! Best Wishes!\n&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>     <span class=p>((</span><span class=nb>and</span> <span class=p>(</span><span class=nv>org-roam-dailies--daily-note-p</span><span class=p>)</span> <span class=p>(</span><span class=nf>&lt;</span> <span class=mi>0</span> <span class=nv>year-span</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nb>progn</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nf>goto-char</span> <span class=p>(</span><span class=nv>org-find-exact-headline-in-buffer</span> <span class=s>&#34;History Diary&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nf>forward-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nf>&lt;</span> <span class=nv>year-span</span> <span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	    <span class=p>(</span><span class=nb>dotimes</span> <span class=p>(</span><span class=nv>i</span> <span class=nv>year-span</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	      <span class=p>(</span><span class=nv>my/history-morning-diary-body</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nb>dotimes</span> <span class=p>(</span><span class=nv>i</span> <span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	    <span class=p>(</span><span class=nv>my/history-morning-diary-body</span><span class=p>))))))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/org-roam-dailies-exclude</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>goto-char</span> <span class=p>(</span><span class=nf>point-min</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>org-set-property</span> <span class=s>&#34;ROAM_EXCLUDE&#34;</span> <span class=s>&#34;t&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>goto-char</span> <span class=p>(</span><span class=nf>point-max</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/org-roam-morning-diary-body</span> <span class=p>(</span><span class=nv>tpl</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Insert diary content to org-roam-dailies-today according TPL&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>org-roam-dailies-goto-today</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>my/org-roam-dailies-exclude</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>insert</span> <span class=s>&#34;\n* Random Notes\n\n* GTD [/]\n\n* History Diary\n\n* Morning Diary\n\n* Clock Report\n\n&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>my/insert-history-morning-diary</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>org-transclusion-add-all</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>goto-char</span> <span class=p>(</span><span class=nv>org-find-exact-headline-in-buffer</span> <span class=s>&#34;Clock Report&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>forward-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>tempel-insert</span> <span class=nv>tpl</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>org-clock-report</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>goto-char</span> <span class=p>(</span><span class=nv>org-find-exact-headline-in-buffer</span> <span class=s>&#34;Morning Diary&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>forward-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>tempel-insert</span> <span class=ss>&#39;diary</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/omd-clock-report</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Update omd(org morning diary) clock report&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>goto-char</span> <span class=p>(</span><span class=nv>org-find-exact-headline-in-buffer</span> <span class=s>&#34;Clock Report&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>forward-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>org-ctrl-c-ctrl-c</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/org-roam-morning-diary</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;If org roam dailies today exist, then go to the file , update clock report and jump to Events
</span></span></span><span class=line><span class=cl><span class=s>If org roam dailies today do not exist, the create it.
</span></span></span><span class=line><span class=cl><span class=s>Weekend and daytime use different templeate to create org-clock-report&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let*</span> <span class=p>((</span><span class=nv>date</span> <span class=p>(</span><span class=nf>format-time-string</span> <span class=s>&#34;%Y-%m-%d&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>org-roam-dailies-today</span> <span class=p>(</span><span class=nf>concat</span> <span class=nv>dn-roam</span> <span class=s>&#34;/daily/&#34;</span> <span class=nv>date</span> <span class=s>&#34;.org&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>weeknum</span> <span class=p>(</span><span class=nf>format-time-string</span> <span class=s>&#34;%u&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>org-roam-dailies-goto-today</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nf>file-exists-p</span> <span class=nv>org-roam-dailies-today</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nb>progn</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nv>my/omd-clock-report</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nf>goto-char</span> <span class=p>(</span><span class=nv>org-find-exact-headline-in-buffer</span> <span class=s>&#34;Random Notes&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nb>cond</span> <span class=p>((</span><span class=nf>equal</span> <span class=nv>weeknum</span> <span class=mi>7</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	     <span class=p>(</span><span class=nv>my/org-roam-morning-diary-body</span> <span class=ss>&#39;weekend</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	    <span class=p>((</span><span class=nv>not</span> <span class=p>(</span><span class=nf>equal</span> <span class=nv>weeknum</span> <span class=mi>7</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	     <span class=p>(</span><span class=nv>my/org-roam-morning-diary-body</span> <span class=ss>&#39;clockday</span><span class=p>))))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;&lt;f6&gt;&#34;</span><span class=p>)</span> <span class=ss>&#39;my/org-roam-morning-diary</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-roam-ui</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-roam-ui-sync-theme</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-roam-ui-follow</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-roam-ui-update-on-save</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-roam-ui-open-on-start</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;org-roam-ui</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;websocket</span><span class=p>))</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-roam buffer</p><p>当当前打开的文件是 org-roam 文件时，自动打开 org-roam-buffer 。总是打开 org-roam-buffer 不太实用，并不是总是需要看这个 buffer 。得思考何时才需要使用，或者手动切换更合适。
<a href=https://github.com/org-roam/org-roam/issues/507 target=_blank rel="noopener noreffer">https://github.com/org-roam/org-roam/issues/507</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>tim/org-roam-buffer-show</span> <span class=p>(</span><span class=nv>_</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nb>and</span>
</span></span><span class=line><span class=cl>       <span class=c1>;; don&#39;t do anything if we&#39;re in the minibuffer</span>
</span></span><span class=line><span class=cl>       <span class=p>(</span><span class=nv>not</span> <span class=p>(</span><span class=nf>minibufferp</span><span class=p>))</span>
</span></span><span class=line><span class=cl>       <span class=c1>;; show org-roam buffer if the current buffer has a org-roam file</span>
</span></span><span class=line><span class=cl>       <span class=p>(</span><span class=nv>xor</span> <span class=p>(</span><span class=nv>org-roam-file-p</span><span class=p>)</span> <span class=p>(</span><span class=nf>eq</span> <span class=ss>&#39;visible</span> <span class=p>(</span><span class=nv>org-roam-buffer--visibility</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nv>org-roam-buffer-toggle</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;window-buffer-change-functions</span> <span class=ss>&#39;tim/org-roam-buffer-show</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>search org-roam-node with rg</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>bms/org-roam-rg-search</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Search org-roam directory using consult-ripgrep. With live-preview.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>consult-ripgrep-command</span>
</span></span><span class=line><span class=cl>	 <span class=s>&#34;rg --null --ignore-case --type org --line-buffered --color=always --max-columns=500 --no-heading --line-number . -e ARG OPTS&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>consult-ripgrep</span> <span class=nv>org-roam-directory</span><span class=p>)))</span>
</span></span></code></pre></div></li></ul><h4 id=bibtex-manage class=headerLink><a href=#bibtex-manage class=header-mark></a>Bibtex manage</h4><ul><li><p>bibtex</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>bibtex-autokey-year-length</span> <span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>bibtex-autokey-name-year-separator</span> <span class=s>&#34;-&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>bibtex-autokey-year-title-separator</span> <span class=s>&#34;-&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>bibtex-autokey-titleword-separator</span> <span class=s>&#34;-&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>bibtex-autokey-titlewords</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>bibtex-autokey-titlewords-stretch</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>bibtex-autokey-titleword-length</span> <span class=mi>5</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>bibtex-completion</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>bibtex-completion-library-path</span> <span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/storage/pdf&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>bibtex-completion-bibliography</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/roam/References.bib&#34;</span>
</span></span><span class=line><span class=cl>				       <span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/roam/Book.bib&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>bibtex-completion-notes-path</span> <span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/roam/ref&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>bibtex-completion-additional-search-fields</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>keywords</span> <span class=nv>journal</span> <span class=nv>booktitle</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>bibtex-completion-pdf-symbol</span> <span class=s>&#34;P&#34;</span>
</span></span><span class=line><span class=cl>      <span class=c1>;; bibtex-completion-pdf-symbol (all-the-icons-octicon &#34;file-pdf&#34;</span>
</span></span><span class=line><span class=cl>      <span class=c1>;; 							  :height 1</span>
</span></span><span class=line><span class=cl>      <span class=c1>;; 							  :v-adjust -0.05</span>
</span></span><span class=line><span class=cl>      <span class=c1>;; 							  :face &#39;font-lock-doc-face)</span>
</span></span><span class=line><span class=cl>      <span class=nv>bibtex-completion-notes-symbol</span> <span class=s>&#34;N&#34;</span>
</span></span><span class=line><span class=cl>      <span class=c1>;; bibtex-completion-notes-symbol (all-the-icons-octicon &#34;file-text&#34;</span>
</span></span><span class=line><span class=cl>      <span class=c1>;; 							    :height 1</span>
</span></span><span class=line><span class=cl>      <span class=c1>;; 							    :v-adjust -0.05</span>
</span></span><span class=line><span class=cl>      <span class=c1>;; 							    :face &#39;font-lock-doc-face)</span>
</span></span><span class=line><span class=cl>      <span class=nv>bibtex-completion-display-formats</span> <span class=o>&#39;</span><span class=p>((</span><span class=nv>article</span> <span class=o>.</span> <span class=s>&#34;${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} ${journal:40}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					  <span class=p>(</span><span class=nv>inbook</span> <span class=o>.</span> <span class=s>&#34;${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} Chapter ${chapter:32}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					  <span class=p>(</span><span class=nv>incollection</span> <span class=o>.</span> <span class=s>&#34;${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} ${booktitle:40}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					  <span class=p>(</span><span class=nv>inproceedings</span> <span class=o>.</span> <span class=s>&#34;${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*} ${booktitle:40}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					  <span class=p>(</span><span class=no>t</span> <span class=o>.</span> <span class=s>&#34;${=has-pdf=:1} ${=has-note=:1} ${year:4} ${author:36} ${title:*}&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl><span class=c1>;; (setq bibtex-completion-pdf-symbol (all-the-icons-octicon &#34;file-pdf&#34;))</span>
</span></span></code></pre></div></li></ul><ul><li><p>ebib</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>unless</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>fboundp</span> <span class=ss>&#39;ebib</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>autoload</span> <span class=nf>#&#39;</span><span class=nv>ebib</span> <span class=s>&#34;ebib&#34;</span> <span class=no>nil</span> <span class=no>t</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>ebib-preload-bib-files</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/roam/References.bib&#34;</span>
</span></span><span class=line><span class=cl>				 <span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/roam/Book.bib&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>ebib-file-search-dirs</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/storage/pdf&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>ebib-keywords</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;ref/keywords.txt&#34;</span> <span class=nv>dn-roam</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>ebib-notes-directory</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;ref&#34;</span> <span class=nv>dn-roam</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>ebib-filters-default-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;ref/ebib-filters&#34;</span> <span class=nv>dn-roam</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>ebib-reading-list-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;ref/reading_list.org&#34;</span> <span class=nv>dn-roam</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>ebib-keywords-field-keep-sorted</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>ebib-keywords-file-save-on-exit</span> <span class=ss>&#39;always</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>;; (setq ebib-index-columns &#39;((&#34;Entry Key&#34; 30 t) (&#34;Note&#34; 1 nil) (&#34;Year&#34; 6 t) (&#34;Author/Editor&#34; 30 nil) (&#34;Title&#34; 50 t)))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>ebib-index-columns</span> <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34;Entry Key&#34;</span> <span class=mi>30</span> <span class=no>t</span><span class=p>)</span> <span class=p>(</span><span class=s>&#34;Note&#34;</span> <span class=mi>1</span> <span class=no>nil</span><span class=p>)</span> <span class=p>(</span><span class=s>&#34;Title&#34;</span> <span class=mi>50</span> <span class=no>t</span><span class=p>)))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>ebib-file-associations</span> <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34;ps&#34;</span> <span class=o>.</span> <span class=s>&#34;gv&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;&lt;f2&gt;&#34;</span><span class=p>)</span> <span class=ss>&#39;ebib</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>import bib to ebib from zotero</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/ebib-import-from-zotero</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Import entry from zotero to ebib.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>ebib</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>find-file</span> <span class=s>&#34;~/Documents/zotero.bib&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>ebib-import-entries</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>quit-window-delete</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>ebib-quit-entry-buffer</span><span class=p>))</span>
</span></span></code></pre></div></li></ul><ul><li><p>oc-csl</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nv>version&lt;</span> <span class=s>&#34;9.5&#34;</span> <span class=nv>org-version</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>progn</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;oc-csl</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nb>setq</span> <span class=nv>org-cite-global-bibliography</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;/Users/duanning/Nextcloud/L.Personal.Galaxy/roam/References.bib&#34;</span>
</span></span><span class=line><span class=cl>					   <span class=s>&#34;/Users/duanning/Nextcloud/L.Personal.Galaxy/roam/Book.bib&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nb>setq</span> <span class=nv>org-cite-insert-processor</span> <span class=ss>&#39;citar</span>
</span></span><span class=line><span class=cl>	    <span class=nv>org-cite-follow-processor</span> <span class=ss>&#39;citar</span>
</span></span><span class=line><span class=cl>	    <span class=nv>org-cite-activate-processor</span> <span class=ss>&#39;citar</span><span class=p>)))</span>
</span></span></code></pre></div></li></ul><ul><li><p>citar</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>citar-bibliography</span> <span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/roam/References.bib&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>citar-templates</span> <span class=o>&#39;</span><span class=p>((</span><span class=nv>main</span> <span class=o>.</span> <span class=s>&#34;${author editor:30} ${date year issued:4} ${title:48}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			  <span class=p>(</span><span class=nv>suffix</span> <span class=o>.</span> <span class=s>&#34;${=key= id:15} ${=type=:12} ${tags keywords:*}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			  <span class=p>(</span><span class=nv>preview</span> <span class=o>.</span> <span class=s>&#34;${author editor} (${year issued date}) ${title}, ${journal journaltitle publisher container-title collection-title}.\n&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			  <span class=p>(</span><span class=nv>note</span> <span class=o>.</span> <span class=s>&#34;#+title: Notes on ${author editor}, ${title}&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=nv>citar-at-point-function</span> <span class=ss>&#39;embark-act</span>
</span></span><span class=line><span class=cl>      <span class=nv>citar-open-note-function</span> <span class=ss>&#39;orb-citar-edit-note</span>
</span></span><span class=line><span class=cl>      <span class=nv>citar-notes-paths</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/roam/ref&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>citar-library-paths</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/storage/pdf&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>citar-symbols</span>
</span></span><span class=line><span class=cl>      <span class=o>`</span><span class=p>((</span><span class=nv>file</span> <span class=o>,</span><span class=p>(</span><span class=nv>all-the-icons-faicon</span> <span class=s>&#34;file-o&#34;</span> <span class=nb>:face</span> <span class=ss>&#39;all-the-icons-green</span> <span class=nb>:v-adjust</span> <span class=mf>-0.1</span><span class=p>)</span> <span class=o>.</span> <span class=s>&#34; &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nv>note</span> <span class=o>,</span><span class=p>(</span><span class=nv>all-the-icons-material</span> <span class=s>&#34;speaker_notes&#34;</span> <span class=nb>:face</span> <span class=ss>&#39;all-the-icons-blue</span> <span class=nb>:v-adjust</span> <span class=mf>-0.3</span><span class=p>)</span> <span class=o>.</span> <span class=s>&#34; &#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nv>link</span> <span class=o>,</span><span class=p>(</span><span class=nv>all-the-icons-octicon</span> <span class=s>&#34;link&#34;</span> <span class=nb>:face</span> <span class=ss>&#39;all-the-icons-orange</span> <span class=nb>:v-adjust</span> <span class=mf>0.01</span><span class=p>)</span> <span class=o>.</span> <span class=s>&#34; &#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>citar-symbol-separator</span> <span class=s>&#34;  &#34;</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>consult-bibtex</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;consult-bibtex</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-roam-bibtex</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>orb-note-actions-interface</span> <span class=ss>&#39;default</span>
</span></span><span class=line><span class=cl>      <span class=nv>orb-roam-ref-format</span> <span class=ss>&#39;org-cite</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>org-roam-bibtex-mode</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><h4 id=tasks-manage class=headerLink><a href=#tasks-manage class=header-mark></a>Tasks manage</h4><ul><li><p>Enhance function</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp></code></pre></div></li></ul><ul><li><p>org-gtd</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>unless</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>fboundp</span> <span class=ss>&#39;org-edna-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>autoload</span> <span class=nf>#&#39;</span><span class=nv>org-edna-mode</span> <span class=s>&#34;org-gtd&#34;</span> <span class=no>nil</span> <span class=no>t</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;org-gtd</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-edna-use-inheritance</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-gtd-directory</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;todos&#34;</span> <span class=nv>dn-galaxy</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=nf>#&#39;</span><span class=nv>org-edna-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;org-gtd</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>org-gtd-process-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-c C-c&#34;</span><span class=p>)</span> <span class=ss>&#39;org-gtd-choose</span><span class=p>))</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-agenda</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-agenda-finalize-hook</span> <span class=nf>#&#39;</span><span class=nv>org-agenda-find-same-or-today-or-agenda</span> <span class=mi>90</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-agenda-hide-tags-regexp</span> <span class=p>(</span><span class=nv>regexp-opt</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;project&#34;</span><span class=p>)))</span> <span class=c1>;; hide project tag</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-agenda-files</span> <span class=o>`</span><span class=p>(</span><span class=o>,</span><span class=nv>org-gtd-directory</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-agenda-prefix-format</span> <span class=o>&#39;</span><span class=p>((</span><span class=nv>agenda</span> <span class=o>.</span> <span class=s>&#34; %i %?-12t% s&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				 <span class=p>(</span><span class=nv>todo</span>   <span class=o>.</span> <span class=s>&#34; %i&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				 <span class=p>(</span><span class=nv>tags</span>   <span class=o>.</span> <span class=s>&#34; %i %-12:c&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				 <span class=p>(</span><span class=nv>search</span> <span class=o>.</span> <span class=s>&#34; %i %-12:c&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-agenda-tags-todo-honor-ignore-options</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-agenda-start-on-weekday</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-agenda-dim-blocked-tasks</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-agenda-compact-blocks</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-agenda-to-appt</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/org-agenda</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>org-agenda</span> <span class=no>nil</span> <span class=s>&#34; &#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;org</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>org-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-,&#34;</span><span class=p>)</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>org-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-&#39;&#34;</span><span class=p>)</span> <span class=no>nil</span><span class=p>))</span>
</span></span></code></pre></div></li></ul><ul><li><p>Dynamic agenda</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=c1>;; https://magnus.therning.org/2021-07-23-keeping-todo-items-in-org-roam-v2.html</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>vulpea-project-p</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Return non-nil if current buffer has any todo entry.
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>TODO entries marked as done are ignored, meaning the this
</span></span></span><span class=line><span class=cl><span class=s>function returns nil if current buffer contains only completed
</span></span></span><span class=line><span class=cl><span class=s>tasks.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>seq-find</span>                                 <span class=c1>; (3)</span>
</span></span><span class=line><span class=cl>   <span class=p>(</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>type</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=nb>or</span> <span class=p>(</span><span class=nf>eq</span> <span class=nv>type</span> <span class=ss>&#39;todo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nf>eq</span> <span class=nv>type</span> <span class=ss>&#39;done</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>   <span class=p>(</span><span class=nv>org-element-map</span>                         <span class=c1>; (2)</span>
</span></span><span class=line><span class=cl>       <span class=p>(</span><span class=nv>org-element-parse-buffer</span> <span class=ss>&#39;headline</span><span class=p>)</span> <span class=c1>; (1)</span>
</span></span><span class=line><span class=cl>       <span class=ss>&#39;headline</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>h</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=p>(</span><span class=nv>org-element-property</span> <span class=nb>:todo-type</span> <span class=nv>h</span><span class=p>)))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>vulpea-project-update-tag</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Update PROJECT tag in the current buffer.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nb>and</span> <span class=p>(</span><span class=nv>not</span> <span class=p>(</span><span class=nf>active-minibuffer-window</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	     <span class=p>(</span><span class=nv>vulpea-buffer-p</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>save-excursion</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nf>goto-char</span> <span class=p>(</span><span class=nf>point-min</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nb>let*</span> <span class=p>((</span><span class=nv>tags</span> <span class=p>(</span><span class=nv>vulpea-buffer-tags-get</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	     <span class=p>(</span><span class=nv>original-tags</span> <span class=nv>tags</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nv>vulpea-project-p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	    <span class=p>(</span><span class=nb>setq</span> <span class=nv>tags</span> <span class=p>(</span><span class=nf>cons</span> <span class=s>&#34;project&#34;</span> <span class=nv>tags</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nb>setq</span> <span class=nv>tags</span> <span class=p>(</span><span class=nv>remove</span> <span class=s>&#34;project&#34;</span> <span class=nv>tags</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>;; cleanup duplicates</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nb>setq</span> <span class=nv>tags</span> <span class=p>(</span><span class=nv>seq-uniq</span> <span class=nv>tags</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>;; update tags if changed</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nb>or</span> <span class=p>(</span><span class=nv>seq-difference</span> <span class=nv>tags</span> <span class=nv>original-tags</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		  <span class=p>(</span><span class=nv>seq-difference</span> <span class=nv>original-tags</span> <span class=nv>tags</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nf>apply</span> <span class=nf>#&#39;</span><span class=nv>vulpea-buffer-tags-set</span> <span class=nv>tags</span><span class=p>))))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>vulpea-buffer-p</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Return non-nil if the currently visited buffer is a note.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>and</span> <span class=nf>buffer-file-name</span>
</span></span><span class=line><span class=cl>       <span class=p>(</span><span class=nv>string-prefix-p</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nf>expand-file-name</span> <span class=p>(</span><span class=nf>file-name-as-directory</span> <span class=nv>org-roam-directory</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nf>file-name-directory</span> <span class=nf>buffer-file-name</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; (defun vulpea-project-files ()</span>
</span></span><span class=line><span class=cl><span class=c1>;;     &#34;Return a list of note files containing &#39;project&#39; tag.&#34; ;</span>
</span></span><span class=line><span class=cl><span class=c1>;;     (seq-uniq</span>
</span></span><span class=line><span class=cl><span class=c1>;;      (seq-map</span>
</span></span><span class=line><span class=cl><span class=c1>;;       #&#39;car</span>
</span></span><span class=line><span class=cl><span class=c1>;;       (org-roam-db-query</span>
</span></span><span class=line><span class=cl><span class=c1>;;        [:select [nodes:file]</span>
</span></span><span class=line><span class=cl><span class=c1>;;         :from tags</span>
</span></span><span class=line><span class=cl><span class=c1>;;         :left-join nodes</span>
</span></span><span class=line><span class=cl><span class=c1>;;         :on (= tags:node-id nodes:id)</span>
</span></span><span class=line><span class=cl><span class=c1>;;         :where (like tag (quote &#34;%\&#34;project\&#34;%&#34;))]))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; (defun vulpea-agenda-files-update (&amp;rest _)</span>
</span></span><span class=line><span class=cl><span class=c1>;;   &#34;Update the value of `org-agenda-files&#39;.&#34;</span>
</span></span><span class=line><span class=cl><span class=c1>;;   (setq org-agenda-files (vulpea-project-files)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; functions borrowed from `vulpea&#39; library</span>
</span></span><span class=line><span class=cl><span class=c1>;; https://github.com/d12frosted/vulpea/blob/6a735c34f1f64e1f70da77989e9ce8da7864e5ff/vulpea-buffer.el</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>vulpea-buffer-tags-get</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Return filetags value in current buffer.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>vulpea-buffer-prop-get-list</span> <span class=s>&#34;filetags&#34;</span> <span class=s>&#34;[ :]&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>vulpea-buffer-tags-set</span> <span class=p>(</span><span class=kp>&amp;rest</span> <span class=nv>tags</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Set TAGS in current buffer.
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>If filetags value is already set, replace it.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>if</span> <span class=nv>tags</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nv>vulpea-buffer-prop-set</span>
</span></span><span class=line><span class=cl>       <span class=s>&#34;filetags&#34;</span> <span class=p>(</span><span class=nf>concat</span> <span class=s>&#34;:&#34;</span> <span class=p>(</span><span class=nv>string-join</span> <span class=nv>tags</span> <span class=s>&#34;:&#34;</span><span class=p>)</span> <span class=s>&#34;:&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>vulpea-buffer-prop-remove</span> <span class=s>&#34;filetags&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>vulpea-buffer-tags-add</span> <span class=p>(</span><span class=nv>tag</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Add a TAG to filetags in current buffer.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let*</span> <span class=p>((</span><span class=nv>tags</span> <span class=p>(</span><span class=nv>vulpea-buffer-tags-get</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>tags</span> <span class=p>(</span><span class=nf>append</span> <span class=nv>tags</span> <span class=p>(</span><span class=nf>list</span> <span class=nv>tag</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>apply</span> <span class=nf>#&#39;</span><span class=nv>vulpea-buffer-tags-set</span> <span class=nv>tags</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>vulpea-buffer-tags-remove</span> <span class=p>(</span><span class=nv>tag</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Remove a TAG from filetags in current buffer.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let*</span> <span class=p>((</span><span class=nv>tags</span> <span class=p>(</span><span class=nv>vulpea-buffer-tags-get</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	 <span class=p>(</span><span class=nv>tags</span> <span class=p>(</span><span class=nf>delete</span> <span class=nv>tag</span> <span class=nv>tags</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>apply</span> <span class=nf>#&#39;</span><span class=nv>vulpea-buffer-tags-set</span> <span class=nv>tags</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>vulpea-buffer-prop-set</span> <span class=p>(</span><span class=nv>name</span> <span class=nv>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Set a file property called NAME to VALUE in buffer file.
</span></span></span><span class=line><span class=cl><span class=s>If the property is already set, replace its value.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>name</span> <span class=p>(</span><span class=nf>downcase</span> <span class=nv>name</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>org-with-point-at</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>case-fold-search</span> <span class=no>t</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nf>re-search-forward</span> <span class=p>(</span><span class=nf>concat</span> <span class=s>&#34;^#\\+&#34;</span> <span class=nv>name</span> <span class=s>&#34;:\\(.*\\)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			     <span class=p>(</span><span class=nf>point-max</span><span class=p>)</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nf>replace-match</span> <span class=p>(</span><span class=nf>concat</span> <span class=s>&#34;#+&#34;</span> <span class=nv>name</span> <span class=s>&#34;: &#34;</span> <span class=nv>value</span><span class=p>)</span> <span class=ss>&#39;fixedcase</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nb>while</span> <span class=p>(</span><span class=nb>and</span> <span class=p>(</span><span class=nv>not</span> <span class=p>(</span><span class=nf>eobp</span><span class=p>))</span>
</span></span><span class=line><span class=cl>		    <span class=p>(</span><span class=nf>looking-at</span> <span class=s>&#34;^[#:]&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nb>save-excursion</span> <span class=p>(</span><span class=nf>end-of-line</span><span class=p>)</span> <span class=p>(</span><span class=nf>eobp</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	      <span class=p>(</span><span class=nb>progn</span>
</span></span><span class=line><span class=cl>		<span class=p>(</span><span class=nf>end-of-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>(</span><span class=nf>insert</span> <span class=s>&#34;\n&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	    <span class=p>(</span><span class=nf>forward-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	    <span class=p>(</span><span class=nf>beginning-of-line</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nf>insert</span> <span class=s>&#34;#+&#34;</span> <span class=nv>name</span> <span class=s>&#34;: &#34;</span> <span class=nv>value</span> <span class=s>&#34;\n&#34;</span><span class=p>)))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>vulpea-buffer-prop-set-list</span> <span class=p>(</span><span class=nv>name</span> <span class=nv>values</span> <span class=kp>&amp;optional</span> <span class=nv>separators</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Set a file property called NAME to VALUES in current buffer.
</span></span></span><span class=line><span class=cl><span class=s>VALUES are quoted and combined into single string using
</span></span></span><span class=line><span class=cl><span class=s></span><span class=ss>`combine-and-quote-strings&#39;</span><span class=s>.
</span></span></span><span class=line><span class=cl><span class=s>If SEPARATORS is non-nil, it should be a regular expression
</span></span></span><span class=line><span class=cl><span class=s>matching text that separates, but is not part of, the substrings.
</span></span></span><span class=line><span class=cl><span class=s>If nil it defaults to </span><span class=ss>`split-string-default-separators&#39;</span><span class=s>, normally
</span></span></span><span class=line><span class=cl><span class=s>\&#34;[ \f\t\n\r\v]+\&#34;, and OMIT-NULLS is forced to t.
</span></span></span><span class=line><span class=cl><span class=s>If the property is already set, replace its value.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>vulpea-buffer-prop-set</span>
</span></span><span class=line><span class=cl>   <span class=nv>name</span> <span class=p>(</span><span class=nv>combine-and-quote-strings</span> <span class=nv>values</span> <span class=nv>separators</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>vulpea-buffer-prop-get</span> <span class=p>(</span><span class=nv>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Get a buffer property called NAME as a string.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>org-with-point-at</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nf>re-search-forward</span> <span class=p>(</span><span class=nf>concat</span> <span class=s>&#34;^#\\+&#34;</span> <span class=nv>name</span> <span class=s>&#34;: \\(.*\\)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			     <span class=p>(</span><span class=nf>point-max</span><span class=p>)</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nf>buffer-substring-no-properties</span>
</span></span><span class=line><span class=cl>       <span class=p>(</span><span class=nf>match-beginning</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=p>(</span><span class=nf>match-end</span> <span class=mi>1</span><span class=p>)))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>vulpea-buffer-prop-get-list</span> <span class=p>(</span><span class=nv>name</span> <span class=kp>&amp;optional</span> <span class=nv>separators</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Get a buffer property NAME as a list using SEPARATORS.
</span></span></span><span class=line><span class=cl><span class=s>If SEPARATORS is non-nil, it should be a regular expression
</span></span></span><span class=line><span class=cl><span class=s>matching text that separates, but is not part of, the substrings.
</span></span></span><span class=line><span class=cl><span class=s>If nil it defaults to </span><span class=ss>`split-string-default-separators&#39;</span><span class=s>, normally
</span></span></span><span class=line><span class=cl><span class=s>\&#34;[ \f\t\n\r\v]+\&#34;, and OMIT-NULLS is forced to t.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>value</span> <span class=p>(</span><span class=nv>vulpea-buffer-prop-get</span> <span class=nv>name</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nb>and</span> <span class=nv>value</span> <span class=p>(</span><span class=nv>not</span> <span class=p>(</span><span class=nv>string-empty-p</span> <span class=nv>value</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nv>split-string-and-unquote</span> <span class=nv>value</span> <span class=nv>separators</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>vulpea-buffer-prop-remove</span> <span class=p>(</span><span class=nv>name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Remove a buffer property called NAME.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>org-with-point-at</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>when</span> <span class=p>(</span><span class=nf>re-search-forward</span> <span class=p>(</span><span class=nf>concat</span> <span class=s>&#34;\\(^#\\+&#34;</span> <span class=nv>name</span> <span class=s>&#34;:.*\n?\\)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			     <span class=p>(</span><span class=nf>point-max</span><span class=p>)</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nf>replace-match</span> <span class=s>&#34;&#34;</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; https://systemcrafters.net/build-a-second-brain-in-emacs/5-org-roam-hacks/</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/org-roam-filter-by-tag</span> <span class=p>(</span><span class=nv>tag-name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>lambda</span> <span class=p>(</span><span class=nv>node</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>member</span> <span class=nv>tag-name</span> <span class=p>(</span><span class=nv>org-roam-node-tags</span> <span class=nv>node</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/org-roam-list-notes-by-tag</span> <span class=p>(</span><span class=nv>tag-name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>mapcar</span> <span class=nf>#&#39;</span><span class=nv>org-roam-node-file</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nv>seq-filter</span>
</span></span><span class=line><span class=cl>	   <span class=p>(</span><span class=nv>my/org-roam-filter-by-tag</span> <span class=nv>tag-name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	   <span class=p>(</span><span class=nv>org-roam-node-list</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/org-roam-refresh-agenda-list</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>dolist</span> <span class=p>(</span><span class=nv>project-file</span> <span class=p>(</span><span class=nv>my/org-roam-list-notes-by-tag</span> <span class=s>&#34;project&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;org-agenda-files</span> <span class=nv>project-file</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;find-file-hook</span> <span class=nf>#&#39;</span><span class=nv>vulpea-project-update-tag</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;before-save-hook</span> <span class=nf>#&#39;</span><span class=nv>vulpea-project-update-tag</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>;; (add-hook &#39;org-agenda-mode-hook #&#39;my/org-roam-refresh-agenda-list)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;after-init-hook</span> <span class=nf>#&#39;</span><span class=nv>my/org-roam-refresh-agenda-list</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>Org agenda view</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-agenda-custom-commands</span>
</span></span><span class=line><span class=cl>      <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34; &#34;</span> <span class=s>&#34;Agendas&#34;</span>
</span></span><span class=line><span class=cl>	 <span class=p>((</span><span class=nv>agenda</span> <span class=s>&#34;&#34;</span> <span class=p>((</span><span class=nv>org-agenda-span</span> <span class=ss>&#39;day</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		      <span class=p>(</span><span class=nv>org-super-agenda-groups</span>
</span></span><span class=line><span class=cl>		       <span class=o>&#39;</span><span class=p>((</span><span class=nb>:name</span> <span class=s>&#34;Today with specific time&#34;</span>
</span></span><span class=line><span class=cl>				<span class=nb>:time-grid</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>				<span class=nb>:order</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			 <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Habit and Daily Review: DO IT EVERYDAY&#34;</span>
</span></span><span class=line><span class=cl>				<span class=nb>:and</span> <span class=p>(</span><span class=nb>:scheduled</span> <span class=no>t</span> <span class=nb>:tag</span> <span class=p>(</span><span class=s>&#34;Habit&#34;</span> <span class=s>&#34;Review&#34;</span><span class=p>)</span> <span class=nb>:todo</span> <span class=s>&#34;NEXT&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				<span class=nb>:order</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			 <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Life and Family: WITH SCHEDULED TODAY&#34;</span>
</span></span><span class=line><span class=cl>				<span class=nb>:and</span> <span class=p>(</span><span class=nb>:tag</span> <span class=p>(</span><span class=s>&#34;Family&#34;</span> <span class=s>&#34;Son&#34;</span> <span class=s>&#34;Daughter&#34;</span> <span class=s>&#34;Wife&#34;</span> <span class=s>&#34;Parents&#34;</span> <span class=s>&#34;Life&#34;</span> <span class=s>&#34;Memorial&#34;</span> <span class=s>&#34;Insurance&#34;</span><span class=p>)</span> <span class=nb>:scheduled</span> <span class=nv>today</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				<span class=nb>:order</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			 <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Finance&#34;</span>
</span></span><span class=line><span class=cl>				<span class=nb>:and</span> <span class=p>(</span><span class=nb>:tag</span> <span class=p>(</span><span class=s>&#34;Finance&#34;</span><span class=p>)</span> <span class=nb>:scheduled</span> <span class=nv>today</span><span class=p>))</span>
</span></span><span class=line><span class=cl>			 <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Due Today&#34;</span>
</span></span><span class=line><span class=cl>				<span class=nb>:deadline</span> <span class=nv>today</span>
</span></span><span class=line><span class=cl>				<span class=nb>:face</span> <span class=p>(</span><span class=nb>:foreground</span> <span class=s>&#34;Red&#34;</span> <span class=nb>:underline</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				<span class=nb>:order</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			 <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Due Soon&#34;</span>
</span></span><span class=line><span class=cl>				<span class=nb>:deadline</span> <span class=nv>future</span>
</span></span><span class=line><span class=cl>				<span class=nb>:order</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			 <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Overdue&#34;</span>
</span></span><span class=line><span class=cl>				<span class=nb>:deadline</span> <span class=nv>past</span>
</span></span><span class=line><span class=cl>				<span class=nb>:order</span> <span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			 <span class=p>(</span><span class=nb>:discard</span> <span class=p>(</span><span class=nb>:tag</span> <span class=p>(</span><span class=s>&#34;Review&#34;</span><span class=p>)))))))</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nv>todo</span> <span class=s>&#34;&#34;</span> <span class=p>((</span><span class=nv>org-agenda-overriding-header</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		    <span class=p>(</span><span class=nv>org-super-agenda-groups</span>
</span></span><span class=line><span class=cl>		     <span class=o>&#39;</span><span class=p>((</span><span class=nb>:name</span> <span class=s>&#34;Projects lists&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:children</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:order</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Next List: DO IT ASAP.&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:and</span> <span class=p>(</span><span class=nb>:todo</span> <span class=s>&#34;NEXT&#34;</span> <span class=nb>:scheduled</span> <span class=no>nil</span> <span class=nb>:deadline</span> <span class=no>nil</span> <span class=nb>:not</span> <span class=p>(</span><span class=nb>:tag</span> <span class=p>(</span><span class=s>&#34;Review&#34;</span> <span class=s>&#34;FunTime&#34;</span> <span class=s>&#34;Reading&#34;</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Life and Family: WITHOUT SCHEDULED&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:and</span> <span class=p>(</span><span class=nb>:tag</span> <span class=p>(</span><span class=s>&#34;Family&#34;</span> <span class=s>&#34;Son&#34;</span> <span class=s>&#34;Daughter&#34;</span> <span class=s>&#34;Wife&#34;</span> <span class=s>&#34;Parents&#34;</span> <span class=s>&#34;Life&#34;</span> <span class=s>&#34;Memorial&#34;</span><span class=p>)</span> <span class=nb>:scheduled</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:order</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Work&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:and</span> <span class=p>(</span><span class=nb>:tag</span> <span class=p>(</span><span class=s>&#34;Work&#34;</span><span class=p>)</span> <span class=nb>:scheduled</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:order</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Reading lists&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:tag</span> <span class=s>&#34;Reading&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Fun time&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:and</span> <span class=p>(</span><span class=nb>:tag</span> <span class=p>(</span><span class=s>&#34;FunTime&#34;</span><span class=p>)</span> <span class=nb>:scheduled</span> <span class=no>nil</span><span class=p>))</span> <span class=c1>;; 此为 funtime ，无 scheduled ，因为有 scheduled ，当时间到的时该应该显示在 schedule 中。</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;COMPUTER SCIENCE&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:and</span> <span class=p>(</span><span class=nb>:tag</span> <span class=p>(</span><span class=s>&#34;Emacs&#34;</span> <span class=s>&#34;Arch&#34;</span> <span class=s>&#34;Linux&#34;</span> <span class=s>&#34;Ubuntu&#34;</span> <span class=s>&#34;Windows&#34;</span> <span class=s>&#34;Computer&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:order</span> <span class=mi>80</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nb>:discard</span> <span class=p>(</span><span class=nb>:scheduled</span> <span class=no>t</span> <span class=nb>:deadline</span> <span class=no>t</span><span class=p>))))))</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nv>todo</span> <span class=s>&#34;SOMEDAY&#34;</span> <span class=p>((</span><span class=nv>org-agenda-overriding-header</span> <span class=s>&#34;==============MAYBE FUTURE==============&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nv>todo</span> <span class=s>&#34;WAIT&#34;</span> <span class=p>((</span><span class=nv>org-agenda-overriding-header</span> <span class=s>&#34;&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nv>todo</span> <span class=s>&#34;CNCL&#34;</span> <span class=p>((</span><span class=nv>org-agenda-overriding-header</span> <span class=s>&#34;&#34;</span><span class=p>)))))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;after-init-hook</span> <span class=ss>&#39;org-super-agenda-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>;; (org-super-agenda-mode)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-agenda-custom-commands</span>
</span></span><span class=line><span class=cl>      <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34; &#34;</span> <span class=s>&#34;Agendas&#34;</span>
</span></span><span class=line><span class=cl>	 <span class=p>((</span><span class=nv>agenda</span> <span class=s>&#34;&#34;</span> <span class=p>((</span><span class=nv>org-agenda-span</span> <span class=ss>&#39;day</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		      <span class=p>(</span><span class=nv>org-super-agenda-groups</span>
</span></span><span class=line><span class=cl>		       <span class=o>&#39;</span><span class=p>((</span><span class=nb>:name</span> <span class=s>&#34;Scheduled earlier&#34;</span>
</span></span><span class=line><span class=cl>				<span class=nb>:scheduled</span> <span class=nv>past</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			 <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Today&#34;</span>
</span></span><span class=line><span class=cl>				<span class=nb>:and</span> <span class=p>(</span><span class=nb>:scheduled</span> <span class=nv>today</span> <span class=nb>:not</span> <span class=p>(</span><span class=nb>:tag</span> <span class=p>(</span><span class=s>&#34;Family&#34;</span> <span class=s>&#34;Reading&#34;</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>			 <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Due Today&#34;</span>
</span></span><span class=line><span class=cl>				<span class=nb>:deadline</span> <span class=nv>today</span>
</span></span><span class=line><span class=cl>				<span class=nb>:face</span> <span class=p>(</span><span class=nb>:foreground</span> <span class=s>&#34;Red&#34;</span> <span class=nb>:underline</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				<span class=nb>:order</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			 <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Due Soon&#34;</span>
</span></span><span class=line><span class=cl>				<span class=nb>:deadline</span> <span class=nv>future</span>
</span></span><span class=line><span class=cl>				<span class=nb>:order</span> <span class=mi>3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			 <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Overdue&#34;</span>
</span></span><span class=line><span class=cl>				<span class=nb>:deadline</span> <span class=nv>past</span>
</span></span><span class=line><span class=cl>				<span class=nb>:order</span> <span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			 <span class=p>(</span><span class=nb>:discard</span> <span class=p>(</span><span class=nb>:anything</span> <span class=no>t</span><span class=p>))))))</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nv>todo</span> <span class=s>&#34;&#34;</span> <span class=p>((</span><span class=nv>org-agenda-overriding-header</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		    <span class=p>(</span><span class=nv>org-super-agenda-groups</span>
</span></span><span class=line><span class=cl>		     <span class=o>&#39;</span><span class=p>((</span><span class=nb>:name</span> <span class=s>&#34;Next List: DO IT ASAP.&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:and</span> <span class=p>(</span><span class=nb>:todo</span> <span class=s>&#34;NEXT&#34;</span> <span class=nb>:scheduled</span> <span class=no>nil</span> <span class=nb>:deadline</span> <span class=no>nil</span> <span class=nb>:not</span> <span class=p>(</span><span class=nb>:tag</span> <span class=p>(</span><span class=s>&#34;Review&#34;</span> <span class=s>&#34;FunTime&#34;</span> <span class=s>&#34;Reading&#34;</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Family&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:and</span> <span class=p>(</span><span class=nb>:tag</span> <span class=p>(</span><span class=s>&#34;Family&#34;</span> <span class=s>&#34;Life&#34;</span> <span class=s>&#34;Memorial&#34;</span> <span class=s>&#34;Insurance&#34;</span><span class=p>)</span> <span class=nb>:scheduled</span> <span class=nv>today</span><span class=p>))</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Projects lists&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:children</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:order</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nb>:habit</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Work&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:and</span> <span class=p>(</span><span class=nb>:tag</span> <span class=p>(</span><span class=s>&#34;Work&#34;</span><span class=p>)</span> <span class=nb>:scheduled</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:order</span> <span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Reading lists&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:tag</span> <span class=s>&#34;Reading&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;Fun time&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:and</span> <span class=p>(</span><span class=nb>:tag</span> <span class=p>(</span><span class=s>&#34;FunTime&#34;</span><span class=p>)</span> <span class=nb>:scheduled</span> <span class=no>nil</span><span class=p>))</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nb>:name</span> <span class=s>&#34;COMPUTER SCIENCE&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:and</span> <span class=p>(</span><span class=nb>:tag</span> <span class=p>(</span><span class=s>&#34;Emacs&#34;</span> <span class=s>&#34;Arch&#34;</span> <span class=s>&#34;Linux&#34;</span> <span class=s>&#34;Ubuntu&#34;</span> <span class=s>&#34;Windows&#34;</span> <span class=s>&#34;Computer&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>			      <span class=nb>:order</span> <span class=mi>80</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nb>:discard</span> <span class=p>(</span><span class=nb>:scheduled</span> <span class=no>t</span> <span class=nb>:deadline</span> <span class=no>t</span><span class=p>))))))</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nv>todo</span> <span class=s>&#34;SOMEDAY&#34;</span> <span class=p>((</span><span class=nv>org-agenda-overriding-header</span> <span class=s>&#34;==============MAYBE FUTURE==============&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nv>todo</span> <span class=s>&#34;WAIT&#34;</span> <span class=p>((</span><span class=nv>org-agenda-overriding-header</span> <span class=s>&#34;&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nv>todo</span> <span class=s>&#34;CNCL&#34;</span> <span class=p>((</span><span class=nv>org-agenda-overriding-header</span> <span class=s>&#34;&#34;</span><span class=p>)))))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;after-init-hook</span> <span class=ss>&#39;org-super-agenda-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;org-super-agenda</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>org-super-agenda-header-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;j&#34;</span><span class=p>)</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>org-super-agenda-header-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;k&#34;</span><span class=p>)</span> <span class=no>nil</span><span class=p>))</span>
</span></span></code></pre></div></li></ul><ul><li><p>org-caldav</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;org-caldav</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-caldav-calendar-id</span> <span class=s>&#34;gtd&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-caldav-inbox</span> <span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/todos/inbox.org&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-caldav-files</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/todos/org-gtd-tasks.org&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-caldav-select-tags</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;gtd&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-caldav-exclude-tags</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;nogtd&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-icalendar-timezone</span> <span class=s>&#34;Asia/Shanghai&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-icalendar-include-todo</span> <span class=ss>&#39;all</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-caldav-todo-percent-states</span> <span class=o>&#39;</span><span class=p>((</span><span class=mi>0</span> <span class=s>&#34;SOMEDAY&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				       <span class=p>(</span><span class=mi>1</span> <span class=s>&#34;TODO&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				       <span class=p>(</span><span class=mi>2</span> <span class=s>&#34;NEXT&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				       <span class=p>(</span><span class=mi>10</span> <span class=s>&#34;WAIT&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				       <span class=p>(</span><span class=mi>100</span> <span class=s>&#34;DONE&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-caldav-sync-todo</span> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><p>动态的更新 <code>org-caldav-files</code> ，和 <code>org-agenda-files</code> 一样。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/org-caldav-refresh-list</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>dolist</span> <span class=p>(</span><span class=nv>project-file</span> <span class=p>(</span><span class=nv>my/org-roam-list-notes-by-tag</span> <span class=s>&#34;project&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;org-caldav-files</span> <span class=nv>project-file</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;after-init-hook</span> <span class=nf>#&#39;</span><span class=nv>my/org-caldav-refresh-list</span><span class=p>)</span>
</span></span></code></pre></div><p>只当8点到23点之间，自动与服务器同步。当 Emacs 闲置 5 分钟时进行同步，以免卡 Emacs 。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/org-caldav-sync</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>org-caldav-sync</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>quit-window-delete</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; (defun my/org-caldav-sync-start ()</span>
</span></span><span class=line><span class=cl><span class=c1>;;   (interactive)</span>
</span></span><span class=line><span class=cl><span class=c1>;;   (let* ((current-time (string-to-number (format-time-string &#34;%H&#34;)))</span>
</span></span><span class=line><span class=cl><span class=c1>;; 	 (morning-time 8)</span>
</span></span><span class=line><span class=cl><span class=c1>;; 	 (evening-time 23))</span>
</span></span><span class=line><span class=cl><span class=c1>;;     (if (and (&lt; morning-time current-time)</span>
</span></span><span class=line><span class=cl><span class=c1>;; 	     (&lt; current-time evening-time))</span>
</span></span><span class=line><span class=cl><span class=c1>;; 	(run-with-idle-timer 10 t #&#39;my/org-caldav-sync)</span>
</span></span><span class=line><span class=cl><span class=c1>;; 	(my/org-caldav-sync))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; (let* ((current-time (string-to-number (format-time-string &#34;%H&#34;)))</span>
</span></span><span class=line><span class=cl><span class=c1>;;        (morning-time 8)</span>
</span></span><span class=line><span class=cl><span class=c1>;;        (evening-time 23))</span>
</span></span><span class=line><span class=cl><span class=c1>;;   (if (and (&lt; morning-time current-time)</span>
</span></span><span class=line><span class=cl><span class=c1>;; 	   (&lt; current-time evening-time))</span>
</span></span><span class=line><span class=cl><span class=c1>;;       (run-with-idle-timer 60 t #&#39;my/org-caldav-sync)))</span>
</span></span></code></pre></div></li></ul><h4 id=org-export class=headerLink><a href=#org-export class=header-mark></a>Org Export</h4><ul><li><p>ox-hugo</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;ox</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;ox-hugo</span><span class=p>))</span>
</span></span></code></pre></div></li></ul><ul><li><p>easy-hugo</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defface</span> <span class=nv>easy-hugo-help-face</span>
</span></span><span class=line><span class=cl>  <span class=o>`</span><span class=p>((((</span><span class=nv>class</span> <span class=nv>color</span><span class=p>)</span> <span class=p>(</span><span class=nv>background</span> <span class=nv>light</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=o>,@</span><span class=p>(</span><span class=nb>and</span> <span class=p>(</span><span class=nf>&gt;=</span> <span class=nv>emacs-major-version</span> <span class=mi>27</span><span class=p>)</span> <span class=o>&#39;</span><span class=p>(</span><span class=nb>:extend</span> <span class=no>t</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:bold</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#000000&#34;</span>
</span></span><span class=line><span class=cl>     <span class=nb>:background</span> <span class=s>&#34;#F2F0EF&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(((</span><span class=nv>class</span> <span class=nv>color</span><span class=p>)</span> <span class=p>(</span><span class=nv>background</span> <span class=nv>dark</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=o>,@</span><span class=p>(</span><span class=nb>and</span> <span class=p>(</span><span class=nf>&gt;=</span> <span class=nv>emacs-major-version</span> <span class=mi>27</span><span class=p>)</span> <span class=o>&#39;</span><span class=p>(</span><span class=nb>:extend</span> <span class=no>t</span><span class=p>))</span>
</span></span><span class=line><span class=cl>     <span class=nb>:bold</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>     <span class=nb>:foreground</span> <span class=s>&#34;#FFFFFF&#34;</span>
</span></span><span class=line><span class=cl>     <span class=nb>:background</span> <span class=s>&#34;#252321&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Definition of help color.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=nb>:group</span> <span class=ss>&#39;easy-hugo-faces</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;easy-hugo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>easy-hugo-no-help</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>      <span class=nv>easy-hugo-basedir</span> <span class=s>&#34;~/hugo-source/&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>easy-hugo-postdir</span> <span class=s>&#34;content/posts&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>easy-hugo-url</span> <span class=s>&#34;https://jousimies.github.io/&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>easy-hugo-default-ext</span> <span class=s>&#34;.org&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>easy-hugo-default-picture-directory</span> <span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/roam/pic&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>easy-hugo-org-header</span> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><ul><li><p>export org to docx with pandoc</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>org-export-docx</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Convert org to docx.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>docx-file</span> <span class=p>(</span><span class=nf>concat</span> <span class=p>(</span><span class=nv>file-name-sans-extension</span> <span class=p>(</span><span class=nf>buffer-file-name</span><span class=p>))</span> <span class=s>&#34;.docx&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	<span class=p>(</span><span class=nv>template-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;template.docx&#34;</span> <span class=nv>dn-template-directory</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>shell-command</span> <span class=p>(</span><span class=nf>format</span> <span class=s>&#34;pandoc %s -o %s --reference-doc=%s&#34;</span> <span class=p>(</span><span class=nf>buffer-file-name</span><span class=p>)</span> <span class=nv>docx-file</span> <span class=nv>template-file</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>message</span> <span class=s>&#34;Convert finish: %s&#34;</span> <span class=nv>docx-file</span><span class=p>)))</span>
</span></span></code></pre></div></li></ul><h3 id=latex class=headerLink><a href=#latex class=header-mark></a>Latex</h3><h4 id=defaults class=headerLink><a href=#defaults class=header-mark></a>Defaults</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-highlight-latex-and-related</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>latex</span> <span class=nv>script</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=ox-latex class=headerLink><a href=#ox-latex class=header-mark></a>ox-latex</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-highlight-latex-and-related</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>latex</span> <span class=nv>script</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;ox-latex</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>org-latex-classes</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;org-latex-classes</span>
</span></span><span class=line><span class=cl>	       <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;book&#34;</span>
</span></span><span class=line><span class=cl>		 <span class=s>&#34;\\documentclass[UTF8,twoside,a4paper,12pt,openright]{ctexrep}
</span></span></span><span class=line><span class=cl><span class=s>		[NO-DEFAULT-PACKAGES]
</span></span></span><span class=line><span class=cl><span class=s>		[NO-PACKAGES]
</span></span></span><span class=line><span class=cl><span class=s>		[EXTRA]&#34;</span>
</span></span><span class=line><span class=cl>		 <span class=p>(</span><span class=s>&#34;\\chapter{%s}&#34;</span> <span class=o>.</span> <span class=s>&#34;\\chapter*{%s}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		 <span class=p>(</span><span class=s>&#34;\\section{%s}&#34;</span> <span class=o>.</span> <span class=s>&#34;\\section*{%s}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		 <span class=p>(</span><span class=s>&#34;\\subsection{%s}&#34;</span> <span class=o>.</span> <span class=s>&#34;\\subsection*{%s}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		 <span class=p>(</span><span class=s>&#34;\\subsubsection{%s}&#34;</span> <span class=o>.</span> <span class=s>&#34;\\subsubsection*{%s}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		 <span class=p>(</span><span class=s>&#34;\\paragraph{%s}&#34;</span> <span class=o>.</span> <span class=s>&#34;\\paragraph*{%s}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		 <span class=p>(</span><span class=s>&#34;\\subparagraph{%s}&#34;</span> <span class=o>.</span> <span class=s>&#34;\\subparagraph*{%s}&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;org-latex-classes</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;article&#34;</span>
</span></span><span class=line><span class=cl>				    <span class=s>&#34;\\documentclass{ctexart}
</span></span></span><span class=line><span class=cl><span class=s>		[NO-DEFAULT-PACKAGES]
</span></span></span><span class=line><span class=cl><span class=s>		[NO-PACKAGES]
</span></span></span><span class=line><span class=cl><span class=s>		[EXTRA]&#34;</span>
</span></span><span class=line><span class=cl>				    <span class=p>(</span><span class=s>&#34;\\section{%s}&#34;</span> <span class=o>.</span> <span class=s>&#34;\\section*{%s}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				    <span class=p>(</span><span class=s>&#34;\\subsection{%s}&#34;</span> <span class=o>.</span> <span class=s>&#34;\\subsection*{%s}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				    <span class=p>(</span><span class=s>&#34;\\subsubsection{%s}&#34;</span> <span class=o>.</span> <span class=s>&#34;\\subsubsection*{%s}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				    <span class=p>(</span><span class=s>&#34;\\paragraph{%s}&#34;</span> <span class=o>.</span> <span class=s>&#34;\\paragraph*{%s}&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				    <span class=p>(</span><span class=s>&#34;\\subparagraph{%s}&#34;</span> <span class=o>.</span> <span class=s>&#34;\\subparagraph*{%s}&#34;</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;ox-latex</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-latex-listings</span> <span class=ss>&#39;minted</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-export-latex-listings</span> <span class=ss>&#39;minted</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=c1>;; (add-to-list &#39;org-latex-packages-alist &#39;(&#34;&#34; &#34;minted&#34;))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; (setq org-latex-compiler &#34;xelatex&#34;)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-latex-pdf-process</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;xelatex -8bit --shell-escape  -interaction=nonstopmode -output-directory %o %f&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=s>&#34;bibtex -shell-escape %b&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=s>&#34;xelatex -8bit --shell-escape  -interaction=nonstopmode -output-directory %o %f&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=s>&#34;xelatex -8bit --shell-escape  -interaction=nonstopmode -output-directory %o %f&#34;</span>
</span></span><span class=line><span class=cl>			      <span class=s>&#34;rm -fr %b.out %b.log %b.tex %b.brf %b.bbl&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-latex-logfiles-extensions</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;lof&#34;</span> <span class=s>&#34;lot&#34;</span> <span class=s>&#34;tex~&#34;</span> <span class=s>&#34;aux&#34;</span> <span class=s>&#34;idx&#34;</span> <span class=s>&#34;log&#34;</span> <span class=s>&#34;out&#34;</span> <span class=s>&#34;toc&#34;</span> <span class=s>&#34;nav&#34;</span> <span class=s>&#34;snm&#34;</span> <span class=s>&#34;vrb&#34;</span> <span class=s>&#34;dvi&#34;</span> <span class=s>&#34;fdb_latexmk&#34;</span> <span class=s>&#34;blg&#34;</span> <span class=s>&#34;brf&#34;</span> <span class=s>&#34;fls&#34;</span> <span class=s>&#34;entoc&#34;</span> <span class=s>&#34;ps&#34;</span> <span class=s>&#34;spl&#34;</span> <span class=s>&#34;bbl&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-latex-prefer-user-labels</span> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=org-latex-impatient class=headerLink><a href=#org-latex-impatient class=header-mark></a>org-latex-impatient</h4><p>可以实时的预览公式。我原来使用的时 popweb 这个包，但是在 Macos 上目前有依赖无法解决。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;org-latex-impatient</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;org-mode-hook</span> <span class=ss>&#39;org-latex-impatient-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-latex-impatient-tex2svg-bin</span> <span class=s>&#34;~/node_modules/mathjax-node-cli/bin/tex2svg&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-latex-impatient-scale</span> <span class=mf>3.0</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=application class=headerLink><a href=#application class=header-mark></a>Application</h2><h3 id=calendar class=headerLink><a href=#calendar class=header-mark></a>Calendar</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;cal-china-x</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>calendar-mode-line-format</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>calendar-mark-holidays-flag</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>cal-china-x-important-holidays</span> <span class=nv>cal-china-x-chinese-holidays</span>
</span></span><span class=line><span class=cl>      <span class=nv>cal-china-x-general-holidays</span> <span class=o>&#39;</span><span class=p>((</span><span class=nv>holiday-lunar</span> <span class=mi>1</span> <span class=mi>15</span> <span class=s>&#34;元宵节&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				     <span class=p>(</span><span class=nv>holiday-lunar</span> <span class=mi>7</span> <span class=mi>7</span> <span class=s>&#34;七夕节&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				     <span class=p>(</span><span class=nv>holiday-fixed</span> <span class=mi>3</span> <span class=mi>8</span> <span class=s>&#34;妇女节&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				     <span class=p>(</span><span class=nv>holiday-fixed</span> <span class=mi>3</span> <span class=mi>12</span> <span class=s>&#34;植树节&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				     <span class=p>(</span><span class=nv>holiday-fixed</span> <span class=mi>5</span> <span class=mi>4</span> <span class=s>&#34;青年节&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				     <span class=p>(</span><span class=nv>holiday-fixed</span> <span class=mi>6</span> <span class=mi>1</span> <span class=s>&#34;儿童节&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				     <span class=p>(</span><span class=nv>holiday-fixed</span> <span class=mi>9</span> <span class=mi>10</span> <span class=s>&#34;教师节&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=nv>holiday-other-holidays</span> <span class=o>&#39;</span><span class=p>((</span><span class=nv>holiday-fixed</span> <span class=mi>2</span> <span class=mi>14</span> <span class=s>&#34;情人节&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			       <span class=p>(</span><span class=nv>holiday-fixed</span> <span class=mi>4</span> <span class=mi>1</span> <span class=s>&#34;愚人节&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			       <span class=p>(</span><span class=nv>holiday-fixed</span> <span class=mi>12</span> <span class=mi>25</span> <span class=s>&#34;圣诞节&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			       <span class=p>(</span><span class=nv>holiday-float</span> <span class=mi>5</span> <span class=mi>0</span> <span class=mi>2</span> <span class=s>&#34;母亲节&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			       <span class=p>(</span><span class=nv>holiday-float</span> <span class=mi>6</span> <span class=mi>0</span> <span class=mi>3</span> <span class=s>&#34;父亲节&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			       <span class=p>(</span><span class=nv>holiday-float</span> <span class=mi>11</span> <span class=mi>4</span> <span class=mi>4</span> <span class=s>&#34;感恩节&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=nv>calendar-holidays</span> <span class=p>(</span><span class=nf>append</span> <span class=nv>cal-china-x-important-holidays</span>
</span></span><span class=line><span class=cl>				<span class=nv>cal-china-x-general-holidays</span>
</span></span><span class=line><span class=cl>				<span class=nv>holiday-other-holidays</span><span class=p>))</span>
</span></span></code></pre></div><h3 id=pdf-reader class=headerLink><a href=#pdf-reader class=header-mark></a>PDF Reader</h3><h4 id=pdf-tools class=headerLink><a href=#pdf-tools class=header-mark></a>pdf tools</h4><p>如果不想高亮文件后打开标注，可以将 <code>pdf-annot-activate-created-annotations</code> 设置为 <code>nil</code> 。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>pdf-tools-install</span> <span class=no>t</span> <span class=no>nil</span> <span class=no>t</span> <span class=no>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>pdf-view-use-scaling</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>pdf-view-use-imagemagick</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>      <span class=nv>pdf-annot-activate-created-annotations</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>pdf-misc-print-program-executable</span> <span class=s>&#34;/usr/bin/lp&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;revert-without-query</span> <span class=s>&#34;.+\\.pdf&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;pdf-tools-enabled-hook</span> <span class=ss>&#39;pdf-view-themed-minor-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;pdf-outline</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>pdf-outline-buffer-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;&lt;RET&gt;&#34;</span><span class=p>)</span> <span class=ss>&#39;pdf-outline-follow-link-and-quit</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=pdf-print class=headerLink><a href=#pdf-print class=header-mark></a>pdf print</h4><p>可以通过命令行使用打印机，不再需要用外部软件打开再去打印文件，而且可以选择打印的页数。来自 <a href=https://qua.name/mrb/an-org-babel-based-emacs-configuration#orgbf8348e target=_blank rel="noopener noreffer">Marcel van der Boom</a> 的配置文件。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>mrb/pdf-misc-print-pages</span><span class=p>(</span><span class=nv>filename</span> <span class=nv>pages</span> <span class=kp>&amp;optional</span> <span class=nv>interactive-p</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;Wrapper for `pdf-misc-print-document` to add page selection support&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>interactive</span> <span class=p>(</span><span class=nf>list</span> <span class=p>(</span><span class=nv>pdf-view-buffer-file-name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nf>read-string</span> <span class=s>&#34;Page range (empty for all pages): &#34;</span>
</span></span><span class=line><span class=cl>				    <span class=p>(</span><span class=nf>number-to-string</span> <span class=p>(</span><span class=nv>pdf-view-current-page</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>		       <span class=no>t</span><span class=p>)</span> <span class=nv>pdf-view-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>pdf-misc-print-program-args</span>
</span></span><span class=line><span class=cl>	   <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nv>not</span> <span class=p>(</span><span class=nv>string-blank-p</span> <span class=nv>pages</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	       <span class=p>(</span><span class=nf>cons</span> <span class=p>(</span><span class=nf>concat</span> <span class=s>&#34;-P &#34;</span> <span class=nv>pages</span><span class=p>)</span> <span class=nv>pdf-misc-print-program-args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	     <span class=nv>pdf-misc-print-program-args</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nv>pdf-misc-print-document</span> <span class=nv>filename</span><span class=p>)))</span>
</span></span></code></pre></div><h4 id=pdf-key-settings class=headerLink><a href=#pdf-key-settings class=header-mark></a>pdf key settings</h4><p>绑定 w ，获得文件名，我不需要那一大串路径。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/get-file-name</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>kill-new</span> <span class=p>(</span><span class=nv>file-name-base</span> <span class=p>(</span><span class=nf>buffer-file-name</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>message</span> <span class=s>&#34;Copied %s&#34;</span> <span class=p>(</span><span class=nv>file-name-base</span> <span class=p>(</span><span class=nf>buffer-file-name</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>define-key</span> <span class=nv>pdf-view-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;w&#34;</span><span class=p>)</span> <span class=ss>&#39;my/get-file-name</span><span class=p>)</span>
</span></span></code></pre></div><p>重新定义按键，相比原来的 <code>C-x C-a h</code> 等按键设定要方便的多。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nf>define-key</span> <span class=nv>pdf-view-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;h&#34;</span><span class=p>)</span> <span class=ss>&#39;pdf-annot-add-highlight-markup-annotation</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>define-key</span> <span class=nv>pdf-view-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;t&#34;</span><span class=p>)</span> <span class=ss>&#39;pdf-annot-add-text-annotation</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>define-key</span> <span class=nv>pdf-view-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;d&#34;</span><span class=p>)</span> <span class=ss>&#39;pdf-annot-delete</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>define-key</span> <span class=nv>pdf-view-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;q&#34;</span><span class=p>)</span> <span class=ss>&#39;kill-this-buffer</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>define-key</span> <span class=nv>pdf-view-mode-map</span> <span class=p>[</span><span class=nv>remap</span> <span class=nv>pdf-misc-print-document</span><span class=p>]</span> <span class=ss>&#39;mrb/pdf-misc-print-pages</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;pdf-annot</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>pdf-annot-edit-contents-minor-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;&lt;return&gt;&#34;</span><span class=p>)</span> <span class=ss>&#39;pdf-annot-edit-contents-commit</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>pdf-annot-edit-contents-minor-mode-map</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;&lt;S-return&gt;&#34;</span><span class=p>)</span> <span class=ss>&#39;newline</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=save-place class=headerLink><a href=#save-place class=header-mark></a>save place</h4><p>saveplace-pdf-view 可以保存 pdf 视图的位置。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>save-place-mode</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;save-place</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>advice-add</span> <span class=ss>&#39;save-place-find-file-hook</span> <span class=nb>:around</span> <span class=nf>#&#39;</span><span class=nv>saveplace-pdf-view-find-file-advice</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>advice-add</span> <span class=ss>&#39;save-place-to-alist</span> <span class=nb>:around</span> <span class=nf>#&#39;</span><span class=nv>saveplace-pdf-view-to-alist-advice</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=pdf-annotations class=headerLink><a href=#pdf-annotations class=header-mark></a>pdf annotations</h4><p>Create pdf annotations file.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/edit-notes</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Edit reference note base pdf name.&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nf>equal</span> <span class=p>(</span><span class=nv>file-name-extension</span> <span class=p>(</span><span class=nf>buffer-name</span><span class=p>))</span> <span class=s>&#34;pdf&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nv>consult-bibtex-edit-notes</span> <span class=p>(</span><span class=nv>file-name-sans-extension</span> <span class=p>(</span><span class=nf>buffer-name</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>consult-bibtex-edit-notes</span> <span class=p>(</span><span class=nv>consult-bibtex--read-entry</span><span class=p>))))</span>
</span></span></code></pre></div><p>Extract pdf annotations with <a href=https://github.com/0xabu/pdfannots target=_blank rel="noopener noreffer">pdfannots</a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/org-delete-heading-content</span> <span class=p>(</span><span class=nv>heading</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=s>&#34;Delete content of specific HEADING&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>org-map-entries</span>
</span></span><span class=line><span class=cl>   <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>     <span class=p>(</span><span class=nb>let</span> <span class=p>((</span><span class=nv>name</span> <span class=p>(</span><span class=nf>nth</span> <span class=mi>4</span> <span class=p>(</span><span class=nv>org-heading-components</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>       <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nv>string=</span> <span class=nv>name</span> <span class=nv>heading</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	   <span class=p>(</span><span class=nb>save-restriction</span>
</span></span><span class=line><span class=cl>	     <span class=p>(</span><span class=nv>org-mark-subtree</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	     <span class=p>(</span><span class=nf>forward-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	     <span class=p>(</span><span class=nf>delete-region</span> <span class=p>(</span><span class=nf>region-beginning</span><span class=p>)</span> <span class=p>(</span><span class=nf>region-end</span><span class=p>))))))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>my/extract-pdf-annots-to-ref-note</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>let</span> <span class=p>(</span><span class=nv>annots</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>setf</span> <span class=nv>annots</span> <span class=p>(</span><span class=nv>shell-command-to-string</span> <span class=p>(</span><span class=nf>format</span> <span class=s>&#34;pdfannots.py %s&#34;</span> <span class=p>(</span><span class=nv>find-file</span> <span class=p>(</span><span class=nf>buffer-name</span><span class=p>)))))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>consult-bibtex-edit-notes</span> <span class=p>(</span><span class=nv>file-name-sans-extension</span> <span class=p>(</span><span class=nf>buffer-name</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>my/org-delete-heading-content</span> <span class=s>&#34;Research Contribution&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>goto-char</span> <span class=p>(</span><span class=nv>org-find-exact-headline-in-buffer</span> <span class=s>&#34;Research Contribution&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>forward-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nb>dolist</span> <span class=p>(</span><span class=nv>item</span> <span class=p>(</span><span class=nv>split-string</span> <span class=nv>annots</span> <span class=s>&#34;\n&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=p>(</span><span class=nb>if</span> <span class=p>(</span><span class=nv>string-prefix-p</span> <span class=s>&#34;   &gt;&#34;</span> <span class=nv>item</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	  <span class=p>(</span><span class=nf>princ</span> <span class=p>(</span><span class=nf>concat</span> <span class=p>(</span><span class=nv>replace-regexp-in-string</span> <span class=s>&#34;   &gt;&#34;</span> <span class=s>&#34;+&#34;</span> <span class=nv>item</span><span class=p>)</span> <span class=s>&#34;\n&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		 <span class=p>(</span><span class=nf>current-buffer</span><span class=p>))))))</span>
</span></span></code></pre></div><h3 id=git class=headerLink><a href=#git class=header-mark></a>GIT</h3><h4 id=magit class=headerLink><a href=#magit class=header-mark></a>Magit</h4><p>Magit related configuration</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>transient-history-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;transient/history.el&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;magit</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>magit-display-buffer-function</span> <span class=ss>&#39;magit-display-buffer-fullframe-status-topleft-v1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>magit-add-section-hook</span> <span class=ss>&#39;magit-status-sections-hook</span>
</span></span><span class=line><span class=cl>			  <span class=ss>&#39;magit-insert-modules</span>
</span></span><span class=line><span class=cl>			  <span class=ss>&#39;magit-insert-stashes</span>
</span></span><span class=line><span class=cl>			  <span class=ss>&#39;append</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=git-timemachine class=headerLink><a href=#git-timemachine class=header-mark></a>git-timemachine</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>unless</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>fboundp</span> <span class=ss>&#39;git-timemachine</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>autoload</span> <span class=nf>#&#39;</span><span class=nv>git-timemachine</span> <span class=s>&#34;git-timemachine&#34;</span> <span class=no>nil</span> <span class=no>t</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=browse-at-remote class=headerLink><a href=#browse-at-remote class=header-mark></a>Browse at remote</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;browse-at-remote</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=terminal class=headerLink><a href=#terminal class=header-mark></a>Terminal</h3><h4 id=eshell class=headerLink><a href=#eshell class=header-mark></a>eshell</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;C-`&#34;</span><span class=p>)</span> <span class=ss>&#39;eshell</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>eshell-directory-name</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;eshell&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=eshell-info-banner class=headerLink><a href=#eshell-info-banner class=header-mark></a>eshell-info-banner</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;eshell-banner-load-hook</span> <span class=ss>&#39;eshell-info-banner-update-banner</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=shell-path class=headerLink><a href=#shell-path class=header-mark></a>shell path</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>exec-path-from-shell-initialize</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=rss-management class=headerLink><a href=#rss-management class=header-mark></a>Rss management</h3><h4 id=elfeed class=headerLink><a href=#elfeed class=header-mark></a>elfeed</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>elfeed-db-directory</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;elfeed&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>elfeed-show-entry-switch</span> <span class=nf>#&#39;</span><span class=nv>elfeed-display-buffer</span><span class=p>)</span>
</span></span></code></pre></div><p>elfeed buffer display. 代码借鉴自 <a href=https://github.com/karthink/.emacs.d/blob/master/lisp/setup-elfeed.el target=_blank rel="noopener noreffer">karthink</a> 的配置。这样可以去掉 elfeed-goodies 这个包了。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>elfeed-display-buffer</span> <span class=p>(</span><span class=nv>buf</span> <span class=kp>&amp;optional</span> <span class=nv>act</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>pop-to-buffer</span> <span class=nv>buf</span> <span class=o>&#39;</span><span class=p>((</span><span class=nv>display-buffer-reuse-window</span> <span class=nv>display-buffer-in-side-window</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nv>side</span> <span class=o>.</span> <span class=nv>bottom</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nv>window-height</span> <span class=o>.</span> <span class=mf>0.8</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nv>reusable-frames</span> <span class=o>.</span> <span class=nv>visible</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=nf>window-parameters</span>
</span></span><span class=line><span class=cl>			<span class=p>(</span><span class=nv>select</span> <span class=o>.</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=p>(</span><span class=nv>quit</span> <span class=o>.</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=p>(</span><span class=nv>popup</span> <span class=o>.</span> <span class=no>t</span><span class=p>)))))</span>
</span></span></code></pre></div><h4 id=elfeed-org class=headerLink><a href=#elfeed-org class=header-mark></a>elfeed-org</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;elfeed</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>rmh-elfeed-org-files</span> <span class=p>(</span><span class=nf>list</span> <span class=s>&#34;~/Nextcloud/L.Personal.Galaxy/roam/main/elfeed.org&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>elfeed-org</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=elfeed-score class=headerLink><a href=#elfeed-score class=header-mark></a>elfeed-score</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;elfeed</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>elfeed-score-rule-stats-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;elfeed.stats&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>elfeed-score-enable</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>define-key</span> <span class=nv>elfeed-search-mode-map</span> <span class=s>&#34;=&#34;</span> <span class=nv>elfeed-score-map</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=elfeed-summary class=headerLink><a href=#elfeed-summary class=header-mark></a>elfeed-summary</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;elfeed-summary</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>elfeed-summary-other-window</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>advice-add</span> <span class=ss>&#39;elfeed-summary</span> <span class=nb>:after</span> <span class=ss>&#39;elfeed-update</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=email class=headerLink><a href=#email class=header-mark></a>Email</h3><p>我使用 Mu4e 和 mbsync 管理邮件。Mu4e 的安装见官方手册（<a href=https://www.djcbsoftware.nl/code/mu/mu4e/Installation.html target=_blank rel="noopener noreffer">Installation</a>）。
Macos 上安装的可见，<a href=https://macowners.club/posts/email-emacs-mu4e-macos/ target=_blank rel="noopener noreffer">Blog</a>，目前最详细的。</p><h4 id=mu4e class=headerLink><a href=#mu4e class=header-mark></a>mu4e</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>unless</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nf>fboundp</span> <span class=ss>&#39;mu4e</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nf>autoload</span> <span class=nf>#&#39;</span><span class=nv>mu4e</span> <span class=s>&#34;mu4e&#34;</span> <span class=no>nil</span> <span class=no>t</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>mu4e-mu-binary</span> <span class=p>(</span><span class=nv>executable-find</span> <span class=s>&#34;mu&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-get-mail-command</span> <span class=p>(</span><span class=nf>concat</span> <span class=p>(</span><span class=nv>executable-find</span> <span class=s>&#34;mbsync&#34;</span><span class=p>)</span> <span class=s>&#34; -a&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>mu4e-maildir</span> <span class=s>&#34;~/.maildir&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-attachment-dir</span> <span class=s>&#34;~/Downloads/&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>mu4e-use-fancy-chars</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>mu4e-headers-precise-alignment</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; https://github.com/emacsmirror/mu4e-marker-icons/blob/main/mu4e-marker-icons.el</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>set-fontset-font</span> <span class=no>t</span> <span class=o>&#39;</span><span class=p>(</span><span class=mh>#xe0e1</span> <span class=o>.</span> <span class=mh>#xe0e1</span><span class=p>)</span> <span class=p>(</span><span class=nf>font-spec</span> <span class=nb>:family</span> <span class=s>&#34;Material Icons&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>set-fontset-font</span> <span class=no>t</span> <span class=o>&#39;</span><span class=p>(</span><span class=mh>#xe159</span> <span class=o>.</span> <span class=mh>#xe159</span><span class=p>)</span> <span class=p>(</span><span class=nf>font-spec</span> <span class=nb>:family</span> <span class=s>&#34;Material Icons&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>set-fontset-font</span> <span class=no>t</span> <span class=o>&#39;</span><span class=p>(</span><span class=mh>#xe7f5</span> <span class=o>.</span> <span class=mh>#xe7f5</span><span class=p>)</span> <span class=p>(</span><span class=nf>font-spec</span> <span class=nb>:family</span> <span class=s>&#34;Material Icons&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>set-fontset-font</span> <span class=no>t</span> <span class=o>&#39;</span><span class=p>(</span><span class=mh>#xe5ca</span> <span class=o>.</span> <span class=mh>#xe5ca</span><span class=p>)</span> <span class=p>(</span><span class=nf>font-spec</span> <span class=nb>:family</span> <span class=s>&#34;Material Icons&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>set-fontset-font</span> <span class=no>t</span> <span class=o>&#39;</span><span class=p>(</span><span class=mh>#xe63f</span> <span class=o>.</span> <span class=mh>#xe63f</span><span class=p>)</span> <span class=p>(</span><span class=nf>font-spec</span> <span class=nb>:family</span> <span class=s>&#34;Material Icons&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>set-fontset-font</span> <span class=no>t</span> <span class=o>&#39;</span><span class=p>(</span><span class=mh>#xe0e1</span> <span class=o>.</span> <span class=mh>#xe0e1</span><span class=p>)</span> <span class=p>(</span><span class=nf>font-spec</span> <span class=nb>:family</span> <span class=s>&#34;Material Icons&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>set-fontset-font</span> <span class=no>t</span> <span class=o>&#39;</span><span class=p>(</span><span class=mh>#xe151</span> <span class=o>.</span> <span class=mh>#xe151</span><span class=p>)</span> <span class=p>(</span><span class=nf>font-spec</span> <span class=nb>:family</span> <span class=s>&#34;Material Icons&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>set-fontset-font</span> <span class=no>t</span> <span class=o>&#39;</span><span class=p>(</span><span class=mh>#xe2bc</span> <span class=o>.</span> <span class=mh>#xe2bc</span><span class=p>)</span> <span class=p>(</span><span class=nf>font-spec</span> <span class=nb>:family</span> <span class=s>&#34;Material Icons&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>set-fontset-font</span> <span class=no>t</span> <span class=o>&#39;</span><span class=p>(</span><span class=mh>#xe3b5</span> <span class=o>.</span> <span class=mh>#xe3b5</span><span class=p>)</span> <span class=p>(</span><span class=nf>font-spec</span> <span class=nb>:family</span> <span class=s>&#34;Material Icons&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>set-fontset-font</span> <span class=no>t</span> <span class=o>&#39;</span><span class=p>(</span><span class=mh>#xe153</span> <span class=o>.</span> <span class=mh>#xe153</span><span class=p>)</span> <span class=p>(</span><span class=nf>font-spec</span> <span class=nb>:family</span> <span class=s>&#34;Material Icons&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>set-fontset-font</span> <span class=no>t</span> <span class=o>&#39;</span><span class=p>(</span><span class=mh>#xe15f</span> <span class=o>.</span> <span class=mh>#xe15f</span><span class=p>)</span> <span class=p>(</span><span class=nf>font-spec</span> <span class=nb>:family</span> <span class=s>&#34;Material Icons&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nf>set-fontset-font</span> <span class=no>t</span> <span class=o>&#39;</span><span class=p>(</span><span class=mh>#xe92b</span> <span class=o>.</span> <span class=mh>#xe92b</span><span class=p>)</span> <span class=p>(</span><span class=nf>font-spec</span> <span class=nb>:family</span> <span class=s>&#34;Material Icons&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>mu4e-headers-seen-mark</span> <span class=o>`</span><span class=p>(</span><span class=s>&#34;S&#34;</span> <span class=o>.</span> <span class=o>,</span><span class=p>(</span><span class=nf>propertize</span>
</span></span><span class=line><span class=cl>				       <span class=p>(</span><span class=nv>all-the-icons-material</span> <span class=s>&#34;mail_outline&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				       <span class=ss>&#39;face</span> <span class=o>`</span><span class=p>(</span><span class=nb>:family</span> <span class=o>,</span><span class=p>(</span><span class=nv>all-the-icons-material-family</span><span class=p>)</span>
</span></span><span class=line><span class=cl>						       <span class=nb>:foreground</span> <span class=o>,</span><span class=p>(</span><span class=nv>face-background</span> <span class=ss>&#39;default</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-headers-new-mark</span> <span class=o>`</span><span class=p>(</span><span class=s>&#34;N&#34;</span> <span class=o>.</span> <span class=o>,</span><span class=p>(</span><span class=nf>propertize</span>
</span></span><span class=line><span class=cl>				      <span class=p>(</span><span class=nv>all-the-icons-material</span> <span class=s>&#34;markunread&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>				      <span class=ss>&#39;face</span> <span class=o>`</span><span class=p>(</span><span class=nb>:family</span> <span class=o>,</span><span class=p>(</span><span class=nv>all-the-icons-material-family</span><span class=p>)</span>
</span></span><span class=line><span class=cl>						      <span class=nb>:foreground</span> <span class=o>,</span><span class=p>(</span><span class=nv>face-background</span> <span class=ss>&#39;default</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-headers-unread-mark</span> <span class=o>`</span><span class=p>(</span><span class=s>&#34;u&#34;</span> <span class=o>.</span> <span class=o>,</span><span class=p>(</span><span class=nf>propertize</span>
</span></span><span class=line><span class=cl>					 <span class=p>(</span><span class=nv>all-the-icons-material</span> <span class=s>&#34;notifications_none&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					 <span class=ss>&#39;face</span> <span class=ss>&#39;mu4e-unread-face</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-headers-signed-mark</span> <span class=o>`</span><span class=p>(</span><span class=s>&#34;s&#34;</span> <span class=o>.</span> <span class=o>,</span><span class=p>(</span><span class=nf>propertize</span>
</span></span><span class=line><span class=cl>					 <span class=p>(</span><span class=nv>all-the-icons-material</span> <span class=s>&#34;check&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					 <span class=ss>&#39;face</span> <span class=o>`</span><span class=p>(</span><span class=nb>:family</span> <span class=o>,</span><span class=p>(</span><span class=nv>all-the-icons-material-family</span><span class=p>)</span>
</span></span><span class=line><span class=cl>							 <span class=nb>:foreground</span> <span class=s>&#34;DarkCyan&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-headers-encrypted-mark</span> <span class=o>`</span><span class=p>(</span><span class=s>&#34;x&#34;</span> <span class=o>.</span> <span class=o>,</span><span class=p>(</span><span class=nf>propertize</span>
</span></span><span class=line><span class=cl>					    <span class=p>(</span><span class=nv>all-the-icons-material</span> <span class=s>&#34;enhanced_encryption&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					    <span class=ss>&#39;face</span> <span class=o>`</span><span class=p>(</span><span class=nb>:family</span> <span class=o>,</span><span class=p>(</span><span class=nv>all-the-icons-material-family</span><span class=p>)</span>
</span></span><span class=line><span class=cl>							    <span class=nb>:foreground</span> <span class=s>&#34;CornflowerBlue&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-headers-draft-mark</span> <span class=o>`</span><span class=p>(</span><span class=s>&#34;D&#34;</span> <span class=o>.</span> <span class=o>,</span><span class=p>(</span><span class=nf>propertize</span>
</span></span><span class=line><span class=cl>					<span class=p>(</span><span class=nv>all-the-icons-material</span> <span class=s>&#34;drafts&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					<span class=ss>&#39;face</span> <span class=ss>&#39;mu4e-draft-face</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-headers-attach-mark</span> <span class=o>`</span><span class=p>(</span><span class=s>&#34;a&#34;</span> <span class=o>.</span> <span class=o>,</span><span class=p>(</span><span class=nf>propertize</span>
</span></span><span class=line><span class=cl>					 <span class=p>(</span><span class=nv>all-the-icons-material</span> <span class=s>&#34;attachment&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					 <span class=ss>&#39;face</span> <span class=ss>&#39;mu4e-attach-number-face</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-headers-passed-mark</span> <span class=o>`</span><span class=p>(</span><span class=s>&#34;P&#34;</span> <span class=o>.</span> <span class=o>,</span><span class=p>(</span><span class=nf>propertize</span> <span class=c1>; ❯ (I&#39;m participated in thread)</span>
</span></span><span class=line><span class=cl>					 <span class=p>(</span><span class=nv>all-the-icons-material</span> <span class=s>&#34;center_focus_weak&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					 <span class=ss>&#39;face</span> <span class=o>`</span><span class=p>(</span><span class=nb>:family</span> <span class=o>,</span><span class=p>(</span><span class=nv>all-the-icons-material-family</span><span class=p>)</span>
</span></span><span class=line><span class=cl>							 <span class=nb>:foreground</span> <span class=s>&#34;yellow&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-headers-flagged-mark</span> <span class=o>`</span><span class=p>(</span><span class=s>&#34;F&#34;</span> <span class=o>.</span> <span class=o>,</span><span class=p>(</span><span class=nf>propertize</span>
</span></span><span class=line><span class=cl>					  <span class=p>(</span><span class=nv>all-the-icons-material</span> <span class=s>&#34;flag&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					  <span class=ss>&#39;face</span> <span class=ss>&#39;mu4e-flagged-face</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-headers-replied-mark</span> <span class=o>`</span><span class=p>(</span><span class=s>&#34;R&#34;</span> <span class=o>.</span> <span class=o>,</span><span class=p>(</span><span class=nf>propertize</span>
</span></span><span class=line><span class=cl>					  <span class=p>(</span><span class=nv>all-the-icons-material</span> <span class=s>&#34;reply_all&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					  <span class=ss>&#39;face</span> <span class=ss>&#39;mu4e-replied-face</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-headers-trashed-mark</span> <span class=o>`</span><span class=p>(</span><span class=s>&#34;T&#34;</span> <span class=o>.</span> <span class=o>,</span><span class=p>(</span><span class=nf>propertize</span>
</span></span><span class=line><span class=cl>					  <span class=p>(</span><span class=nv>all-the-icons-material</span> <span class=s>&#34;delete_forever&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>					  <span class=ss>&#39;face</span> <span class=ss>&#39;mu4e-trashed-face</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>mail-user-agent</span> <span class=ss>&#39;mu4e-user-agent</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-update-interval</span> <span class=mi>600</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-index-update-in-background</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-index-update-error-warning</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-view-show-images</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-view-image-max-width</span> <span class=mi>800</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-confirm-quit</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-view-show-addresses</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-headers-include-related</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-headers-auto-update</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-index-update-error-warning</span> <span class=no>nil</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-index-cleanup</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-context-policy</span> <span class=ss>&#39;pick-first</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-headers-date-format</span> <span class=s>&#34;%d/%m/%y&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-headers-time-format</span> <span class=s>&#34;%H:%M&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-headers-fields</span> <span class=o>&#39;</span><span class=p>((</span><span class=nb>:flags</span> <span class=o>.</span> <span class=mi>6</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			    <span class=p>(</span><span class=nb>:human-date</span> <span class=o>.</span> <span class=mi>9</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			    <span class=p>(</span><span class=nb>:subject</span> <span class=o>.</span> <span class=mi>90</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			    <span class=p>(</span><span class=nb>:from-or-to</span> <span class=o>.</span> <span class=mi>40</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			    <span class=p>(</span><span class=nb>:tags</span> <span class=o>.</span> <span class=mi>20</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-compose-reply-ignore-address</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;no-?reply&#34;</span> <span class=s>&#34;duan_n@outlook.com&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=nv>mu4e-bookmarks</span> <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34;flag:unread AND NOT flag:trashed&#34;</span> <span class=s>&#34;Unread messages&#34;</span> <span class=sc>?u</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=s>&#34;date:today..now&#34;</span> <span class=s>&#34;Today&#39;s messages&#34;</span> <span class=sc>?t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=s>&#34;date:7d..now&#34;</span> <span class=s>&#34;Last 7 days&#34;</span> <span class=sc>?w</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=s>&#34;date:1d..now AND NOT list:emacs-orgmode.gnu.org&#34;</span> <span class=s>&#34;Last 1 days&#34;</span> <span class=sc>?o</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=s>&#34;date:1d..now AND list:emacs-orgmode.gnu.org&#34;</span> <span class=s>&#34;Last 1 days (org mode)&#34;</span> <span class=sc>?m</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=s>&#34;maildir:/drafts&#34;</span> <span class=s>&#34;drafts&#34;</span> <span class=sc>?d</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=s>&#34;flag:flagged AND NOT flag:trashed&#34;</span> <span class=s>&#34;flagged&#34;</span> <span class=sc>?f</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		       <span class=p>(</span><span class=s>&#34;mime:image/*&#34;</span> <span class=s>&#34;Messages with images&#34;</span> <span class=sc>?p</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;mu4e</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>setq</span> <span class=nv>mu4e-sent-folder</span>   <span class=s>&#34;/outlook/Sent&#34;</span>
</span></span><span class=line><span class=cl>	<span class=nv>mu4e-drafts-folder</span> <span class=s>&#34;/outlook/Drafts&#34;</span>
</span></span><span class=line><span class=cl>	<span class=nv>mu4e-trash-folder</span>  <span class=s>&#34;/outlook/Deleted&#34;</span>
</span></span><span class=line><span class=cl>	<span class=nv>mu4e-refile-folder</span>  <span class=s>&#34;/outlook/Archive&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>;; (add-hook &#39;after-init-hook &#39;mu4e)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>mu4e</span> <span class=ss>&#39;background</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=mu4e-alert class=headerLink><a href=#mu4e-alert class=header-mark></a>mu4e-alert</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;mu4e</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>mu4e-alert-set-default-style</span> <span class=ss>&#39;notifier</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;after-init-hook</span> <span class=nf>#&#39;</span><span class=nv>mu4e-alert-enable-notifications</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;doom-modeline</span>
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=nv>mu4e-alert-enable-mode-line-display</span><span class=p>)))</span>
</span></span></code></pre></div><h4 id=sent-mail class=headerLink><a href=#sent-mail class=header-mark></a>sent mail</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>message-send-mail-function</span> <span class=ss>&#39;smtpmail-send-it</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=mu4e-column-faces class=headerLink><a href=#mu4e-column-faces class=header-mark></a>mu4e-column-faces</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>with-eval-after-load</span> <span class=ss>&#39;mu4e</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>mu4e-column-faces-mode</span><span class=p>))</span>
</span></span></code></pre></div><h4 id=org-msg class=headerLink><a href=#org-msg class=header-mark></a>Org-msg</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>org-msg-options</span> <span class=s>&#34;html-postamble:nil H:5 num:nil ^:{} toc:nil author:nil email:nil \\n:t&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-msg-startup</span> <span class=s>&#34;hidestars indent inlineimages&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-msg-greeting-fmt</span> <span class=s>&#34;\nHi%s,\n\n&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-msg-recipient-names</span> <span class=o>&#39;</span><span class=p>((</span><span class=s>&#34;jeremy.compostella@gmail.com&#34;</span> <span class=o>.</span> <span class=s>&#34;Jérémy&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-msg-greeting-name-limit</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-msg-default-alternatives</span> <span class=o>&#39;</span><span class=p>((</span><span class=nv>new</span>		<span class=o>.</span> <span class=p>(</span><span class=nv>text</span> <span class=nv>html</span><span class=p>))</span>
</span></span><span class=line><span class=cl>				     <span class=p>(</span><span class=nv>reply-to-html</span>	<span class=o>.</span> <span class=p>(</span><span class=nv>text</span> <span class=nv>html</span><span class=p>))</span>
</span></span><span class=line><span class=cl>				     <span class=p>(</span><span class=nv>reply-to-text</span>	<span class=o>.</span> <span class=p>(</span><span class=nv>text</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-msg-convert-citation</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>org-msg-signature</span> <span class=s>&#34;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s> Regards,
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s> #+begin_signature
</span></span></span><span class=line><span class=cl><span class=s> --
</span></span></span><span class=line><span class=cl><span class=s> *Duan Ning*
</span></span></span><span class=line><span class=cl><span class=s> /One Emacs to rule them all/
</span></span></span><span class=line><span class=cl><span class=s> #+end_signature&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>org-msg-mode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=telegaram class=headerLink><a href=#telegaram class=header-mark></a>Telegaram</h3><p>非官方的 telegram 客户端。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>telega-server-libs-prefix</span> <span class=s>&#34;~/td/tdlib&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>telega-proxies</span> <span class=p>(</span><span class=nf>list</span>
</span></span><span class=line><span class=cl>		      <span class=o>&#39;</span><span class=p>(</span><span class=nb>:server</span> <span class=s>&#34;127.0.0.1&#34;</span> <span class=nb>:port</span> <span class=mi>7891</span> <span class=nb>:enable</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>				<span class=nb>:type</span> <span class=p>(</span><span class=nb>:@type</span> <span class=s>&#34;proxyTypeSocks5&#34;</span><span class=p>))))</span>
</span></span></code></pre></div><h3 id=calibre class=headerLink><a href=#calibre class=header-mark></a>Calibre</h3><p><a href=https://calibredb.hkvim.com target=_blank rel="noopener noreffer">https://calibredb.hkvim.com</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>calibredb-root-dir</span> <span class=s>&#34;~/Calibre Library&#34;</span>
</span></span><span class=line><span class=cl>      <span class=nv>calibredb-db-dir</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;metadata.db&#34;</span> <span class=nv>calibredb-root-dir</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>calibredb-format-all-the-icons</span> <span class=no>t</span>
</span></span><span class=line><span class=cl>      <span class=nv>calibredb-title-width</span> <span class=mi>80</span>
</span></span><span class=line><span class=cl>      <span class=nv>calibredb-size-show</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>calibredb-fetch-metadata-source-list</span> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;Google&#34;</span> <span class=s>&#34;Amazon.com&#34;</span><span class=p>))</span>
</span></span></code></pre></div><h3 id=music class=headerLink><a href=#music class=header-mark></a>Music</h3><p>2022-04-14 目前使用不己， API NULL。需要包作者进行更新。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>global-set-key</span> <span class=p>(</span><span class=nv>kbd</span> <span class=s>&#34;&lt;f7&gt;&#34;</span><span class=p>)</span> <span class=ss>&#39;netease-cloud-music</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>request-storage-directory</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;request&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>netease-cloud-music-cache-directory</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;netease-cloud-music&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>))</span>
</span></span></code></pre></div><h2 id=keybindings class=headerLink><a href=#keybindings class=header-mark></a>Keybindings</h2><h3 id=keyfreq class=headerLink><a href=#keyfreq class=header-mark></a>Keyfreq</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>keyfreq-mode</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>keyfreq-autosave-mode</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>keyfreq-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;.emacs.keyfreq&#34;</span> <span class=nv>dn-cache-directory</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>keyfreq-excluded-commands</span> <span class=o>&#39;</span><span class=p>(</span><span class=nf>self-insert-command</span>
</span></span><span class=line><span class=cl>				  <span class=nf>forward-char</span>
</span></span><span class=line><span class=cl>				  <span class=nf>backward-char</span>
</span></span><span class=line><span class=cl>				  <span class=nv>previous-line</span>
</span></span><span class=line><span class=cl>				  <span class=nv>next-line</span><span class=p>))</span>
</span></span></code></pre></div><h3 id=meow class=headerLink><a href=#meow class=header-mark></a>Meow</h3><blockquote><p><a href=https://github.com/meow-edit/meow target=_blank rel="noopener noreffer">Meow</a> is yet another modal editing mode for Emacs.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>defun</span> <span class=nv>meow-setup</span> <span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>meow-motion-overwrite-define-key</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;j&#34;</span> <span class=o>.</span> <span class=nv>meow-next</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;k&#34;</span> <span class=o>.</span> <span class=nv>meow-prev</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>meow-leader-define-key</span>
</span></span><span class=line><span class=cl>   <span class=c1>;; SPC j/k will run the original command in MOTION state.</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;j&#34;</span> <span class=o>.</span> <span class=s>&#34;H-j&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;k&#34;</span> <span class=o>.</span> <span class=s>&#34;H-k&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=c1>;; Use SPC (0-9) for digit arguments.</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;1&#34;</span> <span class=o>.</span> <span class=nv>meow-digit-argument</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;2&#34;</span> <span class=o>.</span> <span class=nv>meow-digit-argument</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;3&#34;</span> <span class=o>.</span> <span class=nv>meow-digit-argument</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;4&#34;</span> <span class=o>.</span> <span class=nv>meow-digit-argument</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;5&#34;</span> <span class=o>.</span> <span class=nv>meow-digit-argument</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;6&#34;</span> <span class=o>.</span> <span class=nv>meow-digit-argument</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;7&#34;</span> <span class=o>.</span> <span class=nv>meow-digit-argument</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;8&#34;</span> <span class=o>.</span> <span class=nv>meow-digit-argument</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;9&#34;</span> <span class=o>.</span> <span class=nv>meow-digit-argument</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;0&#34;</span> <span class=o>.</span> <span class=nv>meow-digit-argument</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;/&#34;</span> <span class=o>.</span> <span class=nv>meow-keypad-describe-key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;?&#34;</span> <span class=o>.</span> <span class=nv>meow-cheatsheet</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=nv>meow-normal-define-key</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;0&#34;</span> <span class=o>.</span> <span class=nv>meow-expand-0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;9&#34;</span> <span class=o>.</span> <span class=nv>meow-expand-9</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;8&#34;</span> <span class=o>.</span> <span class=nv>meow-expand-8</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;7&#34;</span> <span class=o>.</span> <span class=nv>meow-expand-7</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;6&#34;</span> <span class=o>.</span> <span class=nv>meow-expand-6</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;5&#34;</span> <span class=o>.</span> <span class=nv>meow-expand-5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;4&#34;</span> <span class=o>.</span> <span class=nv>meow-expand-4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;3&#34;</span> <span class=o>.</span> <span class=nv>meow-expand-3</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;2&#34;</span> <span class=o>.</span> <span class=nv>meow-expand-2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;1&#34;</span> <span class=o>.</span> <span class=nv>meow-expand-1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;-&#34;</span> <span class=o>.</span> <span class=nv>negative-argument</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;;&#34;</span> <span class=o>.</span> <span class=nv>meow-reverse</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;,&#34;</span> <span class=o>.</span> <span class=nv>meow-inner-of-thing</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;.&#34;</span> <span class=o>.</span> <span class=nv>meow-bounds-of-thing</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;[&#34;</span> <span class=o>.</span> <span class=nv>meow-beginning-of-thing</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;]&#34;</span> <span class=o>.</span> <span class=nv>meow-end-of-thing</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;a&#34;</span> <span class=o>.</span> <span class=nv>meow-append</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;A&#34;</span> <span class=o>.</span> <span class=nv>meow-open-below</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;b&#34;</span> <span class=o>.</span> <span class=nv>meow-back-word</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;B&#34;</span> <span class=o>.</span> <span class=nv>meow-back-symbol</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;c&#34;</span> <span class=o>.</span> <span class=nv>meow-change</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;d&#34;</span> <span class=o>.</span> <span class=nv>meow-delete</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;D&#34;</span> <span class=o>.</span> <span class=nv>meow-backward-delete</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;e&#34;</span> <span class=o>.</span> <span class=nv>meow-next-word</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;E&#34;</span> <span class=o>.</span> <span class=nv>meow-next-symbol</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;f&#34;</span> <span class=o>.</span> <span class=nv>meow-find</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;g&#34;</span> <span class=o>.</span> <span class=nv>meow-cancel-selection</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;G&#34;</span> <span class=o>.</span> <span class=nv>meow-grab</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;h&#34;</span> <span class=o>.</span> <span class=nv>meow-left</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;H&#34;</span> <span class=o>.</span> <span class=nv>meow-left-expand</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;i&#34;</span> <span class=o>.</span> <span class=nv>meow-insert</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;I&#34;</span> <span class=o>.</span> <span class=nv>meow-open-above</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;j&#34;</span> <span class=o>.</span> <span class=nv>meow-next</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;J&#34;</span> <span class=o>.</span> <span class=nv>meow-next-expand</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;k&#34;</span> <span class=o>.</span> <span class=nv>meow-prev</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;K&#34;</span> <span class=o>.</span> <span class=nv>meow-prev-expand</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;l&#34;</span> <span class=o>.</span> <span class=nv>meow-right</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;L&#34;</span> <span class=o>.</span> <span class=nv>meow-right-expand</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;m&#34;</span> <span class=o>.</span> <span class=nv>meow-join</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;n&#34;</span> <span class=o>.</span> <span class=nv>meow-search</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;o&#34;</span> <span class=o>.</span> <span class=nv>meow-block</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;O&#34;</span> <span class=o>.</span> <span class=nv>meow-to-block</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;p&#34;</span> <span class=o>.</span> <span class=nv>meow-yank</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;q&#34;</span> <span class=o>.</span> <span class=nv>meow-quit</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;Q&#34;</span> <span class=o>.</span> <span class=nv>meow-goto-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;r&#34;</span> <span class=o>.</span> <span class=nv>meow-replace</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;R&#34;</span> <span class=o>.</span> <span class=nv>meow-swap-grab</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;s&#34;</span> <span class=o>.</span> <span class=nv>meow-kill</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;t&#34;</span> <span class=o>.</span> <span class=nv>meow-till</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;u&#34;</span> <span class=o>.</span> <span class=nv>undo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;U&#34;</span> <span class=o>.</span> <span class=nv>undo-redo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=c1>;; &#39;(&#34;u&#34; . meow-undo)</span>
</span></span><span class=line><span class=cl>   <span class=c1>;; &#39;(&#34;U&#34; . meow-undo-in-selection)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;v&#34;</span> <span class=o>.</span> <span class=nv>meow-visit</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;w&#34;</span> <span class=o>.</span> <span class=nv>meow-mark-word</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;W&#34;</span> <span class=o>.</span> <span class=nv>meow-mark-symbol</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;x&#34;</span> <span class=o>.</span> <span class=nv>meow-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;X&#34;</span> <span class=o>.</span> <span class=nv>meow-goto-line</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;y&#34;</span> <span class=o>.</span> <span class=nv>meow-save</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;Y&#34;</span> <span class=o>.</span> <span class=nv>meow-sync-grab</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;z&#34;</span> <span class=o>.</span> <span class=nv>meow-pop-selection</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;&#39;&#34;</span> <span class=o>.</span> <span class=nv>repeat</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;&lt;escape&gt;&#34;</span> <span class=o>.</span> <span class=nv>mode-line-other-buffer</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-hook</span> <span class=ss>&#39;after-init-hook</span> <span class=ss>&#39;meow-setup</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>meow-global-mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>meow-use-clipboard</span> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;meow-mode-state-list</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>netease-cloud-music-mode</span> <span class=o>.</span> <span class=nv>motion</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;meow-mode-state-list</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>osx-dictionary-mode</span> <span class=o>.</span> <span class=nv>motion</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>add-to-list</span> <span class=ss>&#39;meow-mode-state-list</span> <span class=o>&#39;</span><span class=p>(</span><span class=nv>stock-tracker-mode</span> <span class=o>.</span> <span class=nv>motion</span><span class=p>))</span>
</span></span></code></pre></div><h3 id=one-key class=headerLink><a href=#one-key class=header-mark></a>One Key</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nb>require</span> <span class=ss>&#39;one-key</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nb>setq</span> <span class=nv>one-key-popup-window</span> <span class=no>nil</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=one-key-for-bibtex class=headerLink><a href=#one-key-for-bibtex class=header-mark></a>one key for bibtex</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;BIBTEX&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;a&#34;</span> <span class=o>.</span> <span class=s>&#34;Actions&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>orb-note-actions</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;o&#34;</span> <span class=o>.</span> <span class=s>&#34;open&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>consult-bibtex-open-any</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;e&#34;</span> <span class=o>.</span> <span class=s>&#34;entry&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>consult-bibtex-show-entry</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;n&#34;</span> <span class=o>.</span> <span class=s>&#34;note&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>my/edit-notes</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;x&#34;</span> <span class=o>.</span> <span class=s>&#34;extract annots&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>my/extract-pdf-annots-to-ref-note</span><span class=p>))</span>
</span></span><span class=line><span class=cl> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=one-key-for-blog class=headerLink><a href=#one-key-for-blog class=header-mark></a>one key for blog</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl>   <span class=s>&#34;BLOG&#34;</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;h&#34;</span> <span class=o>.</span> <span class=s>&#34;Easy hugo&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>easy-hugo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>((</span><span class=s>&#34;n&#34;</span> <span class=o>.</span> <span class=s>&#34;New post&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>easy-hugo-newpost</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>((</span><span class=s>&#34;g&#34;</span> <span class=o>.</span> <span class=s>&#34;Magit&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>easy-hugo-magit</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>((</span><span class=s>&#34;p&#34;</span> <span class=o>.</span> <span class=s>&#34;note&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>easy-hugo-preview</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>((</span><span class=s>&#34;t&#34;</span> <span class=o>.</span> <span class=s>&#34;Tags&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>easy-hugo-complete-tags</span><span class=p>))</span>
</span></span><span class=line><span class=cl>   <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=one-key-for-org-download class=headerLink><a href=#one-key-for-org-download class=header-mark></a>one key for org download</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;DOWNLOAD&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;c&#34;</span> <span class=o>.</span> <span class=s>&#34;clipboard&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-download-clipboard</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;i&#34;</span> <span class=o>.</span> <span class=s>&#34;image&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-download-image</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;s&#34;</span> <span class=o>.</span> <span class=s>&#34;screenshot&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-download-screenshot</span><span class=p>))</span>
</span></span><span class=line><span class=cl> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=one-key-for-language class=headerLink><a href=#one-key-for-language class=header-mark></a>one key for language</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;LANGUAGE&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;t&#34;</span> <span class=o>.</span> <span class=s>&#34;Translate&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>gts-do-translate</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;f&#34;</span> <span class=o>.</span> <span class=s>&#34;Fanyi Point&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>fanyi-dwim2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;F&#34;</span> <span class=o>.</span> <span class=s>&#34;Fanyi Input&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>fanyi-dwim</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;d&#34;</span> <span class=o>.</span> <span class=s>&#34;Dictionary Point&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>osx-dictionary-search-pointer</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;D&#34;</span> <span class=o>.</span> <span class=s>&#34;Dictionary Input&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>osx-dictionary-search-input</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;p&#34;</span> <span class=o>.</span> <span class=s>&#34;Powerthesaurus&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>powerthesaurus-lookup-dwim</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;s&#34;</span> <span class=o>.</span> <span class=s>&#34;Style region&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>smog-check</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;S&#34;</span> <span class=o>.</span> <span class=s>&#34;Style buffer&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>smog-check-buffer</span><span class=p>))</span>
</span></span><span class=line><span class=cl> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=one-key-for-file class=headerLink><a href=#one-key-for-file class=header-mark></a>one key for file</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;FILE&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;f&#34;</span> <span class=o>.</span> <span class=s>&#34;FINANCE&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>one-key-menu-beancount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;r&#34;</span> <span class=o>.</span> <span class=s>&#34;recent&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>consult-recent-file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;o&#34;</span> <span class=o>.</span> <span class=s>&#34;open&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>one-key-menu-specific-file</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;e&#34;</span> <span class=o>.</span> <span class=s>&#34;External&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>xah-html-open-in-safari</span><span class=p>))</span>
</span></span><span class=line><span class=cl> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=one-key-for-directory class=headerLink><a href=#one-key-for-directory class=header-mark></a>one key for directory</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;DIRECTORY&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;c&#34;</span> <span class=o>.</span> <span class=s>&#34;Cloud&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>dired</span> <span class=s>&#34;~/Nextcloud/&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;d&#34;</span> <span class=o>.</span> <span class=s>&#34;Downloads&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>dired</span> <span class=s>&#34;~/Downloads/&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;p&#34;</span> <span class=o>.</span> <span class=s>&#34;Pictures&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>dired</span> <span class=s>&#34;~/Pictures/&#34;</span><span class=p>))))</span>
</span></span><span class=line><span class=cl> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=one-key-for-open-specific-file class=headerLink><a href=#one-key-for-open-specific-file class=header-mark></a>one key for open specific file</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;SPECIFIC-FILE&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;b&#34;</span> <span class=o>.</span> <span class=s>&#34;Blog file&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>find-file</span> <span class=s>&#34;~/hugo-source/content-org/all-posts.org&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;I&#34;</span> <span class=o>.</span> <span class=s>&#34;README.org&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>find-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;README.org&#34;</span> <span class=nv>user-emacs-directory</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;i&#34;</span> <span class=o>.</span> <span class=s>&#34;Inbox&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>find-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;daily/inbox.org&#34;</span> <span class=nv>dn-galaxy</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;r&#34;</span> <span class=o>.</span> <span class=s>&#34;rss&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>find-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;main/elfeed.org&#34;</span> <span class=nv>dn-roam</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;g&#34;</span> <span class=o>.</span> <span class=s>&#34;gtd&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>find-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;todos/org-gtd-tasks.org&#34;</span> <span class=nv>dn-galaxy</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;a&#34;</span> <span class=o>.</span> <span class=s>&#34;alipay&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>find-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;alipay.bean&#34;</span> <span class=nv>dn-finance-year</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;m&#34;</span> <span class=o>.</span> <span class=s>&#34;Beancount main&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>find-file</span> <span class=p>(</span><span class=nf>expand-file-name</span> <span class=s>&#34;main.bean&#34;</span> <span class=nv>dn-finance</span><span class=p>)))))</span>
</span></span><span class=line><span class=cl> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=one-key-for-org class=headerLink><a href=#one-key-for-org class=header-mark></a>one key for org</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;ORG&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;c&#34;</span> <span class=o>.</span> <span class=s>&#34;Clock&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>one-key-menu-org-clock</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;d&#34;</span> <span class=o>.</span> <span class=s>&#34;Download&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>one-key-menu-download</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;p&#34;</span> <span class=o>.</span> <span class=s>&#34;Process&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-gtd-process-inbox</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;l&#34;</span> <span class=o>.</span> <span class=s>&#34;cliplink&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-cliplink</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;i&#34;</span> <span class=o>.</span> <span class=s>&#34;ID&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-id-get-create</span><span class=p>))</span>
</span></span><span class=line><span class=cl> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><ul><li><p>org-clock</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl>   <span class=s>&#34;ORG-CLOCK&#34;</span>
</span></span><span class=line><span class=cl>   <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;i&#34;</span> <span class=o>.</span> <span class=s>&#34;In&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-clock-in</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>((</span><span class=s>&#34;o&#34;</span> <span class=o>.</span> <span class=s>&#34;Out&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-clock-out</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>((</span><span class=s>&#34;g&#34;</span> <span class=o>.</span> <span class=s>&#34;goto&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-clock-goto</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>((</span><span class=s>&#34;l&#34;</span> <span class=o>.</span> <span class=s>&#34;last&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-clock-in-last</span><span class=p>))</span>
</span></span><span class=line><span class=cl>   <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div></li></ul><h4 id=one-key-for-org-transclusion class=headerLink><a href=#one-key-for-org-transclusion class=header-mark></a>one key for org transclusion</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;TRANSCLUSION&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;a&#34;</span> <span class=o>.</span> <span class=s>&#34;Add&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-transclusion-add</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;A&#34;</span> <span class=o>.</span> <span class=s>&#34;Add all&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-transclusion-add-all</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;r&#34;</span> <span class=o>.</span> <span class=s>&#34;Remove&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-transclusion-remove</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;R&#34;</span> <span class=o>.</span> <span class=s>&#34;Remove all&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-transclusion-remove-all</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;g&#34;</span> <span class=o>.</span> <span class=s>&#34;Refresh&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-transclusion-refresh</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;m&#34;</span> <span class=o>.</span> <span class=s>&#34;make&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-transclusion-make-from-link</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;o&#34;</span> <span class=o>.</span> <span class=s>&#34;Open&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-transclusion-open-source</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;e&#34;</span> <span class=o>.</span> <span class=s>&#34;Edit&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-transclusion-live-sync-start</span><span class=p>))</span>
</span></span><span class=line><span class=cl> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=one-key-for-org-roam class=headerLink><a href=#one-key-for-org-roam class=header-mark></a>one key for org roam</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;ROAM&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;a&#34;</span> <span class=o>.</span> <span class=s>&#34;Alias&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>one-key-menu-roam-alias</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;b&#34;</span> <span class=o>.</span> <span class=s>&#34;Roam Buffer&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-buffer-toggle</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;c&#34;</span> <span class=o>.</span> <span class=s>&#34;Roam capture&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-capture</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;d&#34;</span> <span class=o>.</span> <span class=s>&#34;Dailies&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>one-key-menu-roam-dailies</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;f&#34;</span> <span class=o>.</span> <span class=s>&#34;Node find&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-node-find</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;i&#34;</span> <span class=o>.</span> <span class=s>&#34;Node insert&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-node-insert</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;s&#34;</span> <span class=o>.</span> <span class=s>&#34;Search content&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>bms/org-roam-rg-search</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;t&#34;</span> <span class=o>.</span> <span class=s>&#34;Tags&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>one-key-menu-roam-tags</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;r&#34;</span> <span class=o>.</span> <span class=s>&#34;Ref&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>one-key-menu-roam-ref</span><span class=p>))</span>
</span></span><span class=line><span class=cl> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;ROAM-ALIAS&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;a&#34;</span> <span class=o>.</span> <span class=s>&#34;Add&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-alias-add</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;r&#34;</span> <span class=o>.</span> <span class=s>&#34;Remove&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-alias-remove</span><span class=p>))</span>
</span></span><span class=line><span class=cl> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;ROAM-DAILIES&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;t&#34;</span> <span class=o>.</span> <span class=s>&#34;Today&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-dailies-find-today</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;y&#34;</span> <span class=o>.</span> <span class=s>&#34;Yesterday&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-dailies-find-yesterday</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;d&#34;</span> <span class=o>.</span> <span class=s>&#34;Directory&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-dailies-find-directory</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;a&#34;</span> <span class=o>.</span> <span class=s>&#34;Date&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-dailies-find-date</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;p&#34;</span> <span class=o>.</span> <span class=s>&#34;Past Diary&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>my/history-morning-diary</span><span class=p>))</span>
</span></span><span class=line><span class=cl> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;ROAM-REF&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;a&#34;</span> <span class=o>.</span> <span class=s>&#34;Add&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-ref-add</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;f&#34;</span> <span class=o>.</span> <span class=s>&#34;Find&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-ref-find</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;r&#34;</span> <span class=o>.</span> <span class=s>&#34;Remove&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-ref-remove</span><span class=p>))</span>
</span></span><span class=line><span class=cl> <span class=no>t</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;ROAM-TAGS&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;a&#34;</span> <span class=o>.</span> <span class=s>&#34;Add&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-tag-add</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;c&#34;</span> <span class=o>.</span> <span class=s>&#34;Completion&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-tag-completions</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;r&#34;</span> <span class=o>.</span> <span class=s>&#34;Remove&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>org-roam-tag-remove</span><span class=p>))</span>
</span></span><span class=line><span class=cl> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=one-key-for-window-frame class=headerLink><a href=#one-key-for-window-frame class=header-mark></a>one key for window frame</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>one-key-create-menu</span>
</span></span><span class=line><span class=cl> <span class=s>&#34;WINDOWS&#34;</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(((</span><span class=s>&#34;b&#34;</span> <span class=o>.</span> <span class=s>&#34;Blog&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>easy-hugo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;c&#34;</span> <span class=o>.</span> <span class=s>&#34;Tabs:common&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>centaur-tabs-switch-group</span> <span class=s>&#34;Common&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;d&#34;</span> <span class=o>.</span> <span class=s>&#34;Destroy&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>kill-this-buffer</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;g&#34;</span> <span class=o>.</span> <span class=s>&#34;Tabs:Groups&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>awesome-tab-switch-group</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;o&#34;</span> <span class=o>.</span> <span class=s>&#34;Tabs:org&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>centaur-tabs-switch-group</span> <span class=s>&#34;OrgMode&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;h&#34;</span> <span class=o>.</span> <span class=s>&#34;Left&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>windmove-left</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;j&#34;</span> <span class=o>.</span> <span class=s>&#34;Down&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>windmove-down</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;k&#34;</span> <span class=o>.</span> <span class=s>&#34;Up&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>windmove-up</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;l&#34;</span> <span class=o>.</span> <span class=s>&#34;Right&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>windmove-right</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;e&#34;</span> <span class=o>.</span> <span class=s>&#34;Email&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>mu4e</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;r&#34;</span> <span class=o>.</span> <span class=s>&#34;rss&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>elfeed-summary</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;t&#34;</span> <span class=o>.</span> <span class=s>&#34;Telega&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>telega</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;m&#34;</span> <span class=o>.</span> <span class=s>&#34;Message&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>switch-to-buffer</span> <span class=s>&#34;*Messages*&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;s&#34;</span> <span class=o>.</span> <span class=s>&#34;scratch&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=p>(</span><span class=nb>lambda</span> <span class=p>()</span> <span class=p>(</span><span class=nb>interactive</span><span class=p>)</span> <span class=p>(</span><span class=nv>switch-to-buffer</span> <span class=s>&#34;*scratch*&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;u&#34;</span> <span class=o>.</span> <span class=s>&#34;Winner Undo&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>winner-undo</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=p>((</span><span class=s>&#34;v&#34;</span> <span class=o>.</span> <span class=s>&#34;vundo&#34;</span><span class=p>)</span> <span class=o>.</span> <span class=nv>vundo</span><span class=p>))</span>
</span></span><span class=line><span class=cl> <span class=no>t</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=bind-meow-leader-with-one-key-menu class=headerLink><a href=#bind-meow-leader-with-one-key-menu class=header-mark></a>Bind meow leader with one-key-menu</h3><p>不要绑定在 <code>c</code> <code>m</code> <code>g</code> 上，这几个键在 <code>Meow</code> 中被使用。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-emacs-lisp data-lang=emacs-lisp><span class=line><span class=cl><span class=p>(</span><span class=nv>meow-leader-define-key</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;a&#34;</span> <span class=o>.</span> <span class=nv>my/org-agenda</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;SPC&#34;</span> <span class=o>.</span> <span class=nv>meow-M-x</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;b&#34;</span> <span class=o>.</span> <span class=nv>one-key-menu-bibtex</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;B&#34;</span> <span class=o>.</span> <span class=nv>one-key-menu-blog</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;d&#34;</span> <span class=o>.</span> <span class=nv>one-key-menu-directory</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;f&#34;</span> <span class=o>.</span> <span class=nv>one-key-menu-file</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;i&#34;</span> <span class=o>.</span> <span class=nv>my/org-capture-inbox</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;l&#34;</span> <span class=o>.</span> <span class=nv>one-key-menu-language</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;r&#34;</span> <span class=o>.</span> <span class=nv>one-key-menu-roam</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;o&#34;</span> <span class=o>.</span> <span class=nv>one-key-menu-org</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;s&#34;</span> <span class=o>.</span> <span class=nv>eshell</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;t&#34;</span> <span class=o>.</span> <span class=nv>one-key-menu-transclusion</span><span class=p>)</span>
</span></span><span class=line><span class=cl> <span class=o>&#39;</span><span class=p>(</span><span class=s>&#34;w&#34;</span> <span class=o>.</span> <span class=nv>one-key-menu-windows</span><span class=p>))</span>
</span></span></code></pre></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2022-04-25</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=# onclick=return!1 title="分享到 Twitter" data-sharer=twitter data-url=http://example.org/posts/emacs-configuration/ data-title="Jousimies's Personal Emacs Configuration"><i class="fab fa-twitter fa-fw"></i></a><a href=# onclick=return!1 title="分享到 Reddit" data-sharer=reddit data-url=http://example.org/posts/emacs-configuration/><i class="fab fa-reddit fa-fw"></i></a><a href=# onclick=return!1 title="分享到 Evernote" data-sharer=evernote data-url=http://example.org/posts/emacs-configuration/ data-title="Jousimies's Personal Emacs Configuration"><i class="fab fa-evernote fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/org_roam_%E7%BB%93%E5%90%88_hugo_%E5%86%99_blog/ class=next rel=next title="hugo 结合 org-roam 写 blog">hugo 结合 org-roam 写 blog<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.97.3">Hugo</a> 强力驱动&nbsp;|&nbsp;主题 - <a href=https://github.com/HEIGE-PCloud/DoIt target=_blank rel="noopener noreffer" title="DoIt 0.2.13"><i class="far fa-edit fa-fw"></i> DoIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank rel="noopener noreferrer">Jousimies</a></span></div><div class=footer-line></div><div class=footer-line></div></div></footer></div><div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><div class=assets><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lunr/lunr.stemmer.support.min.js></script><script type=text/javascript src=/lib/lunr/lunr.zh.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/topbar/topbar.min.js></script><script type=text/javascript src=/lib/pjax/pjax.min.js></script><script type=text/javascript src=/js/theme.min.js defer></script></div><div class=pjax-assets><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:10},comment:{},search:{highlightTag:"em",lunrIndexURL:"/index.json",lunrLanguageCode:"zh",lunrSegmentitURL:"/lib/lunr/lunr.segmentit.js",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"lunr"},sharerjs:!0}</script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script></div></body></html>